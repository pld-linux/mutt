diff -uNr mutt-1.4.orig/ChangeLog.nntp mutt-1.4/ChangeLog.nntp
--- mutt-1.4.orig/ChangeLog.nntp	Thu Jan  1 01:00:00 1970
+++ mutt-1.4/ChangeLog.nntp	Sun Nov  3 21:57:20 2002
@@ -0,0 +1,422 @@
+* Wed May 29 2002 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.4
+
+* Thu May  2 2002 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.99
+
+* Wed Mar 13 2002 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.28
+- fixed SIGSEGV in <get-message>, <get-parent>, <get-children>,
+  <reconstruct-thread> functions
+- fixed message about nntp reconnect
+- fixed <attach-news-message> function using browser
+- added support of Followup-To: poster
+- added %n (new articles) in group_index_format
+- posting articles without inews by default
+
+* Wed Jan 23 2002 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.27
+
+* Fri Jan 18 2002 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.26
+
+* Thu Jan  3 2002 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.25
+- accelerated speed of access to news->newsgroups hash (by <gul@gul.kiev.ua>)
+- added default content disposition
+
+* Mon Dec  3 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.24
+
+* Fri Nov  9 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.23.2
+- fixed segfault if mutt_conn_find() returns null
+
+* Wed Oct 31 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.23.1
+- added support of LISTGROUP command
+- added support for servers with broken overview
+- disabled <flag-message> function on news server
+- fixed error storing bad authentication information
+
+* Wed Oct 10 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.23
+- fixed typo in buffy.c
+- added substitution of %s parameter in $inews variable
+
+* Fri Aug 31 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.22.1
+- update to 1.3.22
+
+* Thu Aug 23 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.21
+
+* Wed Jul 25 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.20
+- removed 'server-hook', use 'account-hook' instead
+- fixed error opening NNTP server without newsgroup using -f option
+
+* Fri Jun  8 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.19
+
+* Sat May  5 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.18
+- fixed typo in nntp_attempt_features()
+- changed algorithm of XGTITLE command testing
+- disabled writing of NNTP password in debug file
+- fixed reading and writing of long newsrc lines
+- changed checking of last line while reading lines from server
+- fixed possible buffer overrun in nntp_parse_newsrc_line()
+- removed checking of XHDR command
+- compare NNTP return codes without trailing space
+
+* Thu Mar 29 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.17
+- support for 'LIST NEWSGROUPS' command to read descriptions
+
+* Fri Mar  2 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.16
+
+* Wed Feb 14 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.15
+
+* Sun Jan 28 2001 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.14
+- show number of tagged messages patch from Felix von Leitner <leitner@fefe.de>
+
+* Sun Dec 31 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.13
+
+* Sat Dec 30 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- Fixed problem if last article in group is deleted
+
+* Fri Dec 22 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- Fixed checking of XGTITLE command on some servers
+
+* Mon Dec 18 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- Added \r in AUTHINFO commands
+
+* Mon Nov 27 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.12
+
+* Wed Nov  1 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.11
+- fixed error opening newsgroup from mutt started with -g or -G
+
+* Thu Oct 12 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.10
+- hotkey 'G' (get-message) replaced with '^G'
+
+* Thu Sep 21 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.9
+- changed delay displaying error messages from 1 to 2 seconds
+- fixed error compiling with nntp and without imap
+
+* Wed Sep  6 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- fixed catchup in index
+- fixed nntp_open_mailbox()
+
+* Sat Sep  2 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- functions <edit> and <delete-entry> disabled
+- format of news mailbox names changed to url form
+- option nntp_attempts removed
+- option reconnect_news renamed to nntp_reconnect
+- default value of nntp_poll changed from 30 to 60
+- error handling improved
+
+* Wed Aug 30 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- update to 1.3.8
+- new option show_only_unread
+- add newsgroup completion
+
+* Fri Aug  4 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3.7
+
+* Sat Jul 29 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3.6
+
+* Sun Jul  9 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3.5
+- authentication code update
+- fix for changing to newsgroup from mailbox with read messages
+- socket code optimization
+
+* Wed Jun 21 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3.4
+
+* Wed Jun 14 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- don't substitute current newsgroup with deleted new messages
+
+* Mon Jun 12 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3.3
+- fix for substitution of newsgroup after reconnection
+- fix for loading newsgroups with very long names
+- fix for loading more than 32768 newsgroups
+
+* Wed May 24 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3.2
+
+* Sat May 20 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3.1
+
+* Fri May 12 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.3
+
+* Thu May 11 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.2
+
+* Thu May  4 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.14
+
+* Sun Apr 23 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.12
+
+* Fri Apr  7 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- add substitution of newsgroup with new messages by default
+
+* Wed Apr  5 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- add attach message from newsgroup
+- add one-line help in newsreader mode
+- disable 'change-dir' command in newsgroups browser
+- add -G option
+
+* Tue Apr  4 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- get default newsserver name from file /etc/nntpserver
+- use case insensitive server names
+- add print-style sequence %s to $newsrc
+- add -g option
+
+* Sat Apr  1 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- remove 'X-FTN-Origin' header processing
+
+* Thu Mar 30 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.11
+- update to 1.1.10
+
+* Thu Mar 23 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- fix mutt_select_newsserver()
+- remove 'toggle-mode' function
+- add 'change-newsgroup' function
+
+* Wed Mar 22 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- fix server-hook
+
+* Tue Mar 21 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- fix error 'bounce' function after 'post'
+- add 'forward to newsgroup' function
+
+* Mon Mar 20 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- 'forward' function works in newsreader mode
+- add 'post' and 'followup' functions to pager and attachment menu
+- fix active descriptions and allowed flag reload
+
+* Tue Mar 14 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.9
+- remove deleted newsgroups from list
+
+* Mon Mar 13 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update .newsrc in browser
+
+* Sun Mar 12 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- reload .newsrc if externally modified
+- fix active cache update
+
+* Sun Mar  5 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.8
+
+* Sat Mar  4 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- patch *.update_list_file is not required
+- count lines when loading descriptions
+- remove cache of unsubscribed newsgroups
+
+* Thu Mar  2 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- load list of newsgroups from cache faster
+
+* Wed Mar  1 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.7
+
+* Tue Feb 29 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- fix unread messages in browser
+- fix newsrc_gen_entries()
+
+* Mon Feb 28 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- fix mutt_newsgroup_stat()
+- fix nntp_delete_cache()
+- fix nntp_get_status()
+- fix check_children()
+- fix nntp_fetch_headers()
+
+* Fri Feb 25 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.5
+
+* Thu Feb 24 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- fix updating new messages in cache
+
+* Mon Feb 21 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- change default cache filenames
+- fix updating new messages in cache
+
+* Fri Feb 18 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- fix segmentation fault in news groups browser
+
+* Tue Feb 15 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.4
+
+* Thu Feb 10 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.3
+
+* Sun Jan 30 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- add X-Comment-To editing
+- add my_hdr support for Newsgroups:, Followup-To: and X-Comment-To: headers
+- add variables $ask_followup_to and $ask_x_comment_to
+
+* Fri Jan 28 2000 Vsevolod Volkov <vvv@mutt.kiev.ua>
+- update to 1.1.2
+
+* Wed Aug 23 2000 Andrej Gritsenko <andrej@lucky.net>
+- nntp.c: inserted server hook when opened a newsgroup - for
+  difference between mail and news reader environment
+- parse.c: `X-FTN-Origin:' processed for bad Fido gates
+
+* Tue Aug 22 2000 Vsevolod Volkov <vvv@mutt.org.ua>
+- browser.c, complete.c: newsgroup completion patch
+
+* Wed Dec 22 1999 Andrej Gritsenko <andrej@lucky.net>
+- send.c: fixed bug with `Subject:' on followup
+
+* Sat Dec 18 1999 Andrej Gritsenko <andrej@lucky.net>
+- updated to 1.1.1
+
+* Tue Oct 26 1999 Andrej Gritsenko <andrej@lucky.net>
+- updated to 1.1
+
+* Mon Jun 14 1999 Andrej Gritsenko <andrej@lucky.net>
+- sendlib.c: use $mime_subject for news articles only
+
+* Fri Jun 11 1999 Edouard G. Parmelan <Edouard.Parmelan@quadratec.fr>
+- nntp.c: bugfix with number of new articles
+
+* Thu Jun 10 1999 Andrej Gritsenko <andrej@lucky.net>
+- nntp.c: fixed incomplete creating of index file
+
+* Wed Jun  9 1999 Andrej Gritsenko <andrej@lucky.net>
+- updated to 0.96.3
+- doc/manual*: documentation updated
+
+* Sun Feb 21 1999 Andrej Gritsenko <andrej@lucky.net>
+- browser.c, newsrc.c, nntp.c: couple of fixes
+
+* Wed Dec 16 1998 Andrej Gritsenko <andrej@lucky.net>
+- curs_main.c, newsrc.c, nntp.c: fixes on number of read
+  articles
+
+* Tue Dec 15 1998 Vikas Agnihotri <vikasa@att.com>
+- nntp.c: fix with gone cache files
+
+* Tue Dec 15 1998 Andrej Gritsenko <andrej@lucky.net>
+- newsrc.c, nntp.c: fixes on number of read articles
+
+* Mon Dec 14 1998 Andrej Gritsenko <andrej@lucky.net>
+- browser.c, newsrc.c, nntp.c, nntp.h: changed then simplified
+  nntp_parse_xover()
+
+* Mon Dec 14 1998 Vikas Agnihotri <vikasa@att.com>
+- browser.c: cosmetic patch
+- nntp.c: say "Fetching %s from server..."
+
+* Sun Dec 13 1998 Andrej Gritsenko <andrej@lucky.net>
+- commands.c, newsrc.c, nntp.c, nntp.h: don't save newsrc file
+  so often (noted by Vikas Agnihotri)
+
+* Sat Dec 12 1998 Andrej Gritsenko <andrej@lucky.net>
+- browser.c, functions.h, nntp.c, nntp.h: fixed incorrect first
+  active loading
+
+* Wed Dec  9 1998 Vikas Agnihotri <vikasa@att.com>
+- nntp.c: fixed bug in `reconstruct-thread' function
+- curs_main.c, nntp.c: fixed the bug in non-XOVER case of get
+  headers
+
+* Tue Dec  8 1998 Andrej Gritsenko <andrej@lucky.net>
+- nntp.c: fixed error in getting status of article
+
+* Tue Dec  8 1998 Vikas Agnihotri <vikasa@att.com>
+- mutt.h, pattern.c: added `~w' search pattern
+
+* Tue Dec  8 1998 Andrej Gritsenko <andrej@lucky.net>
+- nntp.c: bugfix when get children
+
+* Tue Dec  8 1998 Vikas Agnihotri <vikasa@att.com>
+- newsrc.c: bugfix in mutt_newsgroup_catchup()
+
+* Tue Dec  8 1998 Andrej Gritsenko <andrej@lucky.net>
+- browser.c: bugfix in _mutt_select_file()
+
+* Sat Dec  5 1998 Andrej Gritsenko <andrej@lucky.net>
+- browser.c, newsrc.c, nntp.c, nntp.h: fix the sorting of
+  newsgroups in browser (from Vikas Agnihotri)
+
+* Fri Dec  4 1998 Vikas Agnihotri <vikasa@att.com>
+- OPS, curs_main.c, functions.h, nntp.c, nntp.h: new functions:
+  `get-children' and `reconstruct-thread'
+
+* Thu Dec  3 1998 Vikas Agnihotri <vikasa@att.com>
+- OPS, curs_main.c, functions.h, nntp.c, nntp.h: new functions:
+  `get-message' and `get-parent'
+
+* Wed Dec  2 1998 Vikas Agnihotri <vikasa@att.com>
+- OPS, compose.c, curs_main.c, functions.h, parse.c, send.c,
+  sendlib.c: added `Followup-To:' field editing
+
+* Wed Dec  2 1998 Vikas Agnihotri <vikasa@att.com>
+- OPS, browser.c, functions.h: new `load-active' function
+
+* Tue Dec  1 1998 Andrej Gritsenko <andrej@lucky.net>
+- browser.c: added option for blank %s in $group_index_format
+- hdrline.c, lib.c, mutt.h, parse.c: added %g and %W parameters
+  to $pager_format
+- hook.c, newsrc.c, nntp.c, sendlib.c: some small bugfixes
+
+* Mon Nov 30 1998 Andrej Gritsenko <andrej@lucky.net>
+- send.c: bugfix in `Followup-To:' field
+
+* Sun Nov 29 1998 Vikas Agnihotri <vikasa@att.com>
+- compose.c, lib.c, parse.c, protos.h: remove white spaces from
+  `Newsgroup:' field to prevent a unnecessary rejection of article
+
+* Sat Nov 28 1998 Vikas Agnihotri <vikasa@att.com>
+- newsrc.c: fixed bug in catchup
+
+* Sat Nov 28 1998 Vikas Agnihotri <vikasa@att.com>
+- browser.c: make indicator advance when (un)subscribe
+
+* Sat Nov 28 1998 Andrej Gritsenko <andrej@lucky.net>
+- newsrc.c: fixed segmentation fault in newsrc_update_line()
+
+* Sat Nov 28 1998 Andrej Gritsenko <andrej@lucky.net>
+- OPS, browser.c, functions.h, init.h, mutt.h, mx.c, newsrc.c,
+  nntp.c, nntp.h: corrected reading of newsrc file and added new
+  `catchup' function
+
+* Thu Nov 26 1998 Andrej Gritsenko <andrej@lucky.net>
+- browser.c, newsrc.c: implementation of `(un)subscribe-pattern'
+  functions from Vikas Agnihotri
+- globals.h, init.h, nntp.h, nntp.c: added variable $nntp_poll
+  to avoid of polling newsserver on each keypressing
+
+* Thu Nov 26 1998 Andrej Gritsenko <andrej@lucky.net>
+- nntp.c, socket.c: fixed parsing of long XOVER lines
+- send.c: removed silly ask for newsgroup name (noted by Vikas
+  Agnihotri)
+
+* Wed Nov 25 1998
+- commands.c: bugfix in mutt_update_list_file()
+
+* Wed Nov 25 1998 Andrej Gritsenko <andrej@lucky.net>
+- updated to mutt-0.94.17
+- init.c, nntp.c, nntp.h, parse.c, send.c: couple of bugfixes
+  from Vikas Agnihotri
+
+* Sat Nov 21 1998 Andrej Gritsenko <andrej@lucky.net>
+- [mutt-0.94.13] couple of files: pre-alpha version of patch,
+  partially based on code that written by Brandon Long
diff -uNr mutt-1.4.orig/Makefile.am mutt-1.4/Makefile.am
--- mutt-1.4.orig/Makefile.am	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/Makefile.am	Sun Nov  3 21:57:20 2002
@@ -68,7 +68,8 @@
 EXTRA_mutt_SOURCES = account.c md5c.c mutt_sasl.c mutt_socket.c mutt_ssl.c \
 	mutt_tunnel.c pop.c pop_auth.c pop_lib.c pgp.c pgpinvoke.c pgpkey.c \
 	pgplib.c sha1.c pgpmicalg.c gnupgparse.c resize.c dotlock.c remailer.c \
-	browser.h mbyte.h remailer.h url.h mutt_ssl_nss.c pgppacket.c 
+	browser.h mbyte.h remailer.h url.h mutt_ssl_nss.c pgppacket.c \
+	nntp.c newsrc.c
 
 EXTRA_DIST = COPYRIGHT GPL OPS OPS.PGP TODO configure acconfig.h account.h \
 	attach.h buffy.h charset.h compress.h copy.h dotlock.h functions.h \
@@ -77,6 +78,7 @@
 	mutt_regex.h mutt_sasl.h mutt_socket.h mutt_ssl.h mutt_tunnel.h \
 	mx.h pager.h pgp.h pop.h protos.h reldate.h rfc1524.h rfc2047.h \
 	rfc2231.h rfc822.h sha1.h sort.h mime.types VERSION prepare \
+	nntp.h ChangeLog.nntp \
 	_regex.h OPS.MIX README.SECURITY remailer.c remailer.h browser.h \
 	mbyte.h	lib.h extlib.c pgpewrap.c pgplib.h Muttrc.head Muttrc \
 	makedoc.c stamp-doc-rc README.SSL \
diff -uNr mutt-1.4.orig/Makefile.in mutt-1.4/Makefile.in
--- mutt-1.4.orig/Makefile.in	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/Makefile.in	Sun Nov  3 21:57:30 2002
@@ -1,6 +1,8 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated by automake 1.6.3 from Makefile.am.
+# @configure_input@
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
+# Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -10,7 +12,7 @@
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
-
+@SET_MAKE@
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -31,13 +33,9 @@
 mandir = @mandir@
 includedir = @includedir@
 oldincludedir = /usr/include
-
-DESTDIR =
-
 pkgdatadir = $(datadir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
-
 top_builddir = .
 
 ACLOCAL = @ACLOCAL@
@@ -45,12 +43,16 @@
 AUTOMAKE = @AUTOMAKE@
 AUTOHEADER = @AUTOHEADER@
 
+am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
 INSTALL = @INSTALL@
-INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)
+INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_DATA = @INSTALL_DATA@
+install_sh_DATA = $(install_sh) -c -m 644
+install_sh_PROGRAM = $(install_sh) -c
+install_sh_SCRIPT = $(install_sh) -c
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
+INSTALL_HEADER = $(INSTALL_DATA)
 transform = @program_transform_name@
-
 NORMAL_INSTALL = :
 PRE_INSTALL = :
 POST_INSTALL = :
@@ -59,14 +61,30 @@
 POST_UNINSTALL = :
 host_alias = @host_alias@
 host_triplet = @host@
+
+EXEEXT = @EXEEXT@
+OBJEXT = @OBJEXT@
+PATH_SEPARATOR = @PATH_SEPARATOR@
+AMTAR = @AMTAR@
 AR = @AR@
+AWK = @AWK@
 BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
 CATALOGS = @CATALOGS@
 CATOBJEXT = @CATOBJEXT@
 CC = @CC@
+
+
+# $(makedoc_OBJECTS): $(makedoc_SOURCES)
+# 	$(HOST_CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) -c $<
+
+# makedoc: $(makedoc_OBJECTS) $(makedoc_DEPENDENCIES)
+# 	@rm -rf makedoc
+# 	$(HOST_CC) $(AM_CFLAGS) $(LDFLAGS) $(makedoc_LDFLAGS) $(makedoc_OBJECTS) $(makedoc_LDADD) -o makedoc
+CPP = @CPP@
 DATADIRNAME = @DATADIRNAME@
 DBX = @DBX@
 DEBUGGER = @DEBUGGER@
+DEPDIR = @DEPDIR@
 DOTLOCK_GROUP = @DOTLOCK_GROUP@
 DOTLOCK_PERMISSION = @DOTLOCK_PERMISSION@
 DOTLOCK_TARGET = @DOTLOCK_TARGET@
@@ -75,6 +93,7 @@
 GLIBC21 = @GLIBC21@
 GMOFILES = @GMOFILES@
 GMSGFMT = @GMSGFMT@
+INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
 INSTOBJEXT = @INSTOBJEXT@
 INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
@@ -85,11 +104,12 @@
 LIBICONV = @LIBICONV@
 LIBIMAP = @LIBIMAP@
 LIBIMAPDEPS = @LIBIMAPDEPS@
-MAKEINFO = @MAKEINFO@
 MKINSTALLDIRS = @MKINSTALLDIRS@
 MSGFMT = @MSGFMT@
 MUTTLIBS = @MUTTLIBS@
 MUTT_LIB_OBJECTS = @MUTT_LIB_OBJECTS@
+
+OPS = @OPS@
 PACKAGE = @PACKAGE@
 PGPAUX_TARGET = @PGPAUX_TARGET@
 POFILES = @POFILES@
@@ -97,12 +117,16 @@
 RANLIB = @RANLIB@
 SDB = @SDB@
 SENDMAIL = @SENDMAIL@
+STRIP = @STRIP@
 SUBVERSION = @SUBVERSION@
 U = @U@
 USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+am__include = @am__include@
+am__quote = @am__quote@
 docdir = @docdir@
+install_sh = @install_sh@
 
 AUTOMAKE_OPTIONS = foreign
 EXTRA_PROGRAMS = mutt_dotlock pgpring makedoc
@@ -117,42 +141,70 @@
 BUILT_SOURCES = keymap_defs.h patchlist.c
 
 bin_PROGRAMS = mutt @DOTLOCK_TARGET@ @PGPAUX_TARGET@
-mutt_SOURCES = $(BUILT_SOURCES) 	addrbook.c alias.c attach.c base64.c browser.c buffy.c color.c 	commands.c complete.c compose.c compress.c copy.c curs_lib.c curs_main.c date.c 	edit.c enter.c flags.c init.c filter.c from.c getdomain.c 	handler.c hash.c hdrline.c headers.c help.c hook.c keymap.c 	main.c mbox.c menu.c mh.c mx.c pager.c parse.c pattern.c 	postpone.c query.c recvattach.c recvcmd.c 	rfc822.c rfc1524.c rfc2047.c rfc2231.c 	score.c send.c sendlib.c signal.c sort.c 	status.c system.c thread.c charset.c history.c lib.c 	muttlib.c editmsg.c utf8.c mbyte.c wcwidth.c 	url.c ascii.c
+mutt_SOURCES = $(BUILT_SOURCES) \
+	addrbook.c alias.c attach.c base64.c browser.c buffy.c color.c \
+	commands.c complete.c compose.c compress.c copy.c curs_lib.c \
+	curs_main.c date.c \
+	edit.c enter.c flags.c init.c filter.c from.c getdomain.c \
+	handler.c hash.c hdrline.c headers.c help.c hook.c keymap.c \
+	main.c mbox.c menu.c mh.c mx.c pager.c parse.c pattern.c \
+	postpone.c query.c recvattach.c recvcmd.c \
+	rfc822.c rfc1524.c rfc2047.c rfc2231.c \
+	score.c send.c sendlib.c signal.c signature.c sort.c \
+	status.c system.c thread.c charset.c history.c lib.c \
+	muttlib.c editmsg.c utf8.c mbyte.c wcwidth.c \
+	url.c ascii.c
 
 
-mutt_LDADD = @MUTT_LIB_OBJECTS@ @LIBOBJS@ $(LIBIMAP) $(MUTTLIBS) 	$(INTLLIBS) $(LIBICONV)
+mutt_LDADD = @MUTT_LIB_OBJECTS@ @LIBOBJS@ $(LIBIMAP) $(MUTTLIBS) \
+	$(INTLLIBS) $(LIBICONV)
 
 
-mutt_DEPENDENCIES = @MUTT_LIB_OBJECTS@ @LIBOBJS@ $(LIBIMAPDEPS) 	$(INTLDEPS)
+mutt_DEPENDENCIES = @MUTT_LIB_OBJECTS@ @LIBOBJS@ $(LIBIMAPDEPS) \
+	$(INTLDEPS)
 
 
 makedoc_SOURCES = makedoc.c
 makedoc_LDADD = 
 makedoc_DEPENDENCIES = 
 
-# $(makedoc_OBJECTS): $(makedoc_SOURCES)
-# 	$(HOST_CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) -c $<
-
-# makedoc: $(makedoc_OBJECTS) $(makedoc_DEPENDENCIES)
-# 	@rm -rf makedoc
-# 	$(HOST_CC) $(AM_CFLAGS) $(LDFLAGS) $(makedoc_LDFLAGS) $(makedoc_OBJECTS) $(makedoc_LDADD) -o makedoc
-
-CPP = @CPP@
-
-DEFS = -DPKGDATADIR=\"$(pkgdatadir)\" -DSYSCONFDIR=\"$(sysconfdir)\" 	-DBINDIR=\"$(bindir)\" -DMUTTLOCALEDIR=\"$(datadir)/locale\" 	-DHAVE_CONFIG_H=1
+DEFS = -DPKGDATADIR=\"$(pkgdatadir)\" -DSYSCONFDIR=\"$(sysconfdir)\" \
+	-DBINDIR=\"$(bindir)\" -DMUTTLOCALEDIR=\"$(datadir)/locale\" \
+	-DHAVE_CONFIG_H=1
 
 
 INCLUDES = -I. -I$(top_srcdir) $(IMAP_INCLUDES) -Iintl
 
 CPPFLAGS = @CPPFLAGS@ -I$(includedir)
 
-non_us_sources = pgp.c pgpinvoke.c pgpkey.c pgplib.c sha1.c 	pgpmicalg.c gnupgparse.c sha1.h 	doc/language.txt doc/language50.txt OPS.PGP doc/PGP-Notes.txt 	OPS.MIX remailer.c remailer.h pgpewrap.c		contrib/pgp2.rc contrib/pgp5.rc contrib/gpg.rc 	mutt_ssl.c mutt_ssl.h README.SSL mutt_ssl_nss.c 	pgppacket.c pgppacket.h
-
-
-EXTRA_mutt_SOURCES = account.c md5c.c mutt_sasl.c mutt_socket.c mutt_ssl.c 	mutt_tunnel.c pop.c pop_auth.c pop_lib.c pgp.c pgpinvoke.c pgpkey.c 	pgplib.c sha1.c pgpmicalg.c gnupgparse.c resize.c dotlock.c remailer.c 	browser.h mbyte.h remailer.h url.h mutt_ssl_nss.c pgppacket.c 
-
-
-EXTRA_DIST = COPYRIGHT GPL OPS OPS.PGP TODO configure acconfig.h account.h 	attach.h buffy.h charset.h compress.h copy.h dotlock.h functions.h gen_defs 	globals.h hash.h history.h init.h keymap.h 	mailbox.h mapping.h md5.h mime.h mutt.h mutt_curses.h mutt_menu.h 	mutt_regex.h mutt_sasl.h mutt_socket.h mutt_ssl.h mutt_tunnel.h 	mx.h pager.h pgp.h pop.h protos.h reldate.h rfc1524.h rfc2047.h 	rfc2231.h rfc822.h sha1.h sort.h mime.types VERSION prepare 	_regex.h OPS.MIX README.SECURITY remailer.c remailer.h browser.h 	mbyte.h	lib.h extlib.c pgpewrap.c pgplib.h Muttrc.head Muttrc 	makedoc.c stamp-doc-rc README.SSL 	muttbug pgppacket.h depcomp ascii.h BEWARE PATCHES patchlist.sh
+non_us_sources = pgp.c pgpinvoke.c pgpkey.c pgplib.c sha1.c \
+	pgpmicalg.c gnupgparse.c sha1.h \
+	doc/language.txt doc/language50.txt OPS.PGP doc/PGP-Notes.txt \
+	OPS.MIX remailer.c remailer.h pgpewrap.c	\
+	contrib/pgp2.rc contrib/pgp5.rc contrib/gpg.rc \
+	mutt_ssl.c mutt_ssl.h README.SSL mutt_ssl_nss.c \
+	pgppacket.c pgppacket.h
+
+
+EXTRA_mutt_SOURCES = account.c md5c.c mutt_sasl.c mutt_socket.c mutt_ssl.c \
+	mutt_tunnel.c pop.c pop_auth.c pop_lib.c pgp.c pgpinvoke.c pgpkey.c \
+	pgplib.c sha1.c pgpmicalg.c gnupgparse.c resize.c dotlock.c remailer.c \
+	browser.h mbyte.h remailer.h url.h mutt_ssl_nss.c pgppacket.c \
+	nntp.c newsrc.c
+
+
+EXTRA_DIST = COPYRIGHT GPL OPS OPS.PGP TODO configure acconfig.h account.h \
+	attach.h buffy.h charset.h compress.h copy.h dotlock.h functions.h \
+	gen_defs globals.h hash.h history.h init.h keymap.h \
+	mailbox.h mapping.h md5.h mime.h mutt.h mutt_curses.h mutt_menu.h \
+	mutt_regex.h mutt_sasl.h mutt_socket.h mutt_ssl.h mutt_tunnel.h \
+	mx.h pager.h pgp.h pop.h protos.h reldate.h rfc1524.h rfc2047.h \
+	rfc2231.h rfc822.h sha1.h sort.h mime.types VERSION prepare \
+	nntp.h ChangeLog.nntp \
+	_regex.h OPS.MIX README.SECURITY remailer.c remailer.h browser.h \
+	mbyte.h	lib.h extlib.c pgpewrap.c pgplib.h Muttrc.head Muttrc \
+	makedoc.c stamp-doc-rc README.SSL \
+	muttbug pgppacket.h depcomp ascii.h BEWARE PATCHES patchlist.sh
 
 
 mutt_dotlock_SOURCES = mutt_dotlock.c
@@ -163,204 +215,366 @@
 pgpring_LDADD = @LIBOBJS@ $(INTLLIBS) 
 pgpring_DEPENDENCIES = @LIBOBJS@ $(INTLDEPS)
 
-CLEANFILES = mutt_dotlock.c stamp-doc-rc makedoc 	keymap_alldefs.h keymap_defs.h patchlist.c
+CLEANFILES = mutt_dotlock.c stamp-doc-rc makedoc \
+	keymap_alldefs.h keymap_defs.h patchlist.c
 
 
 ACLOCAL_AMFLAGS = -I m4
 
 LDADD = @LIBOBJS@ @INTLLIBS@
-
-OPS = @OPS@
+subdir = .
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = config.h
-CONFIG_CLEAN_FILES =  muttbug.sh Muttrc.head
-PROGRAMS =  $(bin_PROGRAMS)
+CONFIG_CLEAN_FILES = intl/Makefile doc/Makefile contrib/Makefile \
+	muttbug.sh Muttrc.head doc/instdoc.sh
+EXTRA_PROGRAMS = mutt_dotlock$(EXEEXT) pgpring$(EXEEXT) makedoc$(EXEEXT)
+bin_PROGRAMS = mutt$(EXEEXT) @DOTLOCK_TARGET@ @PGPAUX_TARGET@
+PROGRAMS = $(bin_PROGRAMS)
+
+am_makedoc_OBJECTS = makedoc.$(OBJEXT)
+makedoc_OBJECTS = $(am_makedoc_OBJECTS)
+makedoc_LDFLAGS =
+am__objects_1 = patchlist.$(OBJEXT)
+am_mutt_OBJECTS = $(am__objects_1) addrbook.$(OBJEXT) alias.$(OBJEXT) \
+	attach.$(OBJEXT) base64.$(OBJEXT) browser.$(OBJEXT) \
+	buffy.$(OBJEXT) color.$(OBJEXT) commands.$(OBJEXT) \
+	complete.$(OBJEXT) compose.$(OBJEXT) compress.$(OBJEXT) \
+	copy.$(OBJEXT) curs_lib.$(OBJEXT) curs_main.$(OBJEXT) \
+	date.$(OBJEXT) edit.$(OBJEXT) enter.$(OBJEXT) flags.$(OBJEXT) \
+	init.$(OBJEXT) filter.$(OBJEXT) from.$(OBJEXT) \
+	getdomain.$(OBJEXT) handler.$(OBJEXT) hash.$(OBJEXT) \
+	hdrline.$(OBJEXT) headers.$(OBJEXT) help.$(OBJEXT) \
+	hook.$(OBJEXT) keymap.$(OBJEXT) main.$(OBJEXT) mbox.$(OBJEXT) \
+	menu.$(OBJEXT) mh.$(OBJEXT) mx.$(OBJEXT) pager.$(OBJEXT) \
+	parse.$(OBJEXT) pattern.$(OBJEXT) postpone.$(OBJEXT) \
+	query.$(OBJEXT) recvattach.$(OBJEXT) recvcmd.$(OBJEXT) \
+	rfc822.$(OBJEXT) rfc1524.$(OBJEXT) rfc2047.$(OBJEXT) \
+	rfc2231.$(OBJEXT) score.$(OBJEXT) send.$(OBJEXT) \
+	sendlib.$(OBJEXT) signal.$(OBJEXT) signature.$(OBJEXT) \
+	sort.$(OBJEXT) status.$(OBJEXT) system.$(OBJEXT) \
+	thread.$(OBJEXT) charset.$(OBJEXT) history.$(OBJEXT) \
+	lib.$(OBJEXT) muttlib.$(OBJEXT) editmsg.$(OBJEXT) \
+	utf8.$(OBJEXT) mbyte.$(OBJEXT) wcwidth.$(OBJEXT) url.$(OBJEXT) \
+	ascii.$(OBJEXT)
+mutt_OBJECTS = $(am_mutt_OBJECTS)
+mutt_LDFLAGS =
+am_mutt_dotlock_OBJECTS = mutt_dotlock.$(OBJEXT)
+mutt_dotlock_OBJECTS = $(am_mutt_dotlock_OBJECTS)
+mutt_dotlock_LDFLAGS =
+am_pgpring_OBJECTS = pgppubring.$(OBJEXT) pgplib.$(OBJEXT) lib.$(OBJEXT) \
+	extlib.$(OBJEXT) sha1.$(OBJEXT) pgppacket.$(OBJEXT) \
+	ascii.$(OBJEXT)
+pgpring_OBJECTS = $(am_pgpring_OBJECTS)
+pgpring_LDFLAGS =
+SCRIPTS = $(bin_SCRIPTS)
 
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I.
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-mutt_dotlock_OBJECTS =  mutt_dotlock.o
-mutt_dotlock_LDFLAGS = 
-pgpring_OBJECTS =  pgppubring.o pgplib.o lib.o extlib.o sha1.o \
-pgppacket.o ascii.o
-pgpring_LDFLAGS = 
-makedoc_OBJECTS =  makedoc.o
-makedoc_LDFLAGS = 
-mutt_OBJECTS =  patchlist.o addrbook.o alias.o attach.o base64.o \
-browser.o buffy.o color.o commands.o complete.o compose.o compress.o copy.o \
-curs_lib.o curs_main.o date.o edit.o enter.o flags.o init.o filter.o \
-from.o getdomain.o handler.o hash.o hdrline.o headers.o help.o hook.o \
-keymap.o main.o mbox.o menu.o mh.o mx.o pager.o parse.o pattern.o \
-postpone.o query.o recvattach.o recvcmd.o rfc822.o rfc1524.o rfc2047.o \
-rfc2231.o score.o send.o sendlib.o signal.o sort.o status.o system.o \
-thread.o charset.o history.o lib.o muttlib.o editmsg.o utf8.o mbyte.o \
-wcwidth.o url.o ascii.o
-mutt_LDFLAGS = 
-SCRIPTS =  $(bin_SCRIPTS)
-
-CFLAGS = @CFLAGS@
-COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+depcomp = $(SHELL) $(top_srcdir)/depcomp
+am__depfiles_maybe = depfiles
+@AMDEP_TRUE@DEP_FILES = $(DEPDIR)/regex.Po $(DEPDIR)/snprintf.Po \
+@AMDEP_TRUE@	$(DEPDIR)/strcasecmp.Po $(DEPDIR)/strdup.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/account.Po ./$(DEPDIR)/addrbook.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/alias.Po ./$(DEPDIR)/ascii.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/attach.Po ./$(DEPDIR)/base64.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/browser.Po ./$(DEPDIR)/buffy.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/charset.Po ./$(DEPDIR)/color.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/commands.Po ./$(DEPDIR)/complete.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/compose.Po ./$(DEPDIR)/compress.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/copy.Po ./$(DEPDIR)/curs_lib.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/curs_main.Po ./$(DEPDIR)/date.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/dotlock.Po ./$(DEPDIR)/edit.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/editmsg.Po ./$(DEPDIR)/enter.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/extlib.Po ./$(DEPDIR)/filter.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/flags.Po ./$(DEPDIR)/from.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/getdomain.Po ./$(DEPDIR)/gnupgparse.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/handler.Po ./$(DEPDIR)/hash.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/hdrline.Po ./$(DEPDIR)/headers.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/help.Po ./$(DEPDIR)/history.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/hook.Po ./$(DEPDIR)/init.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/keymap.Po ./$(DEPDIR)/lib.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/main.Po ./$(DEPDIR)/makedoc.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/mbox.Po ./$(DEPDIR)/mbyte.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/md5c.Po ./$(DEPDIR)/menu.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/mh.Po ./$(DEPDIR)/mutt_dotlock.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/mutt_sasl.Po ./$(DEPDIR)/mutt_socket.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/mutt_ssl.Po ./$(DEPDIR)/mutt_ssl_nss.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/mutt_tunnel.Po ./$(DEPDIR)/muttlib.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/mx.Po ./$(DEPDIR)/newsrc.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/nntp.Po ./$(DEPDIR)/pager.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/parse.Po ./$(DEPDIR)/patchlist.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/pattern.Po ./$(DEPDIR)/pgp.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/pgpinvoke.Po ./$(DEPDIR)/pgpkey.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/pgplib.Po ./$(DEPDIR)/pgpmicalg.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/pgppacket.Po ./$(DEPDIR)/pgppubring.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/pop.Po ./$(DEPDIR)/pop_auth.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/pop_lib.Po ./$(DEPDIR)/postpone.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/query.Po ./$(DEPDIR)/recvattach.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/recvcmd.Po ./$(DEPDIR)/remailer.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/resize.Po ./$(DEPDIR)/rfc1524.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/rfc2047.Po ./$(DEPDIR)/rfc2231.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/rfc822.Po ./$(DEPDIR)/score.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/send.Po ./$(DEPDIR)/sendlib.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/sha1.Po ./$(DEPDIR)/signal.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/signature.Po ./$(DEPDIR)/sort.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/status.Po ./$(DEPDIR)/system.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/thread.Po ./$(DEPDIR)/url.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/utf8.Po ./$(DEPDIR)/wcwidth.Po
+COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
+	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
-LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@
-DIST_COMMON =  README ./stamp-h.in ABOUT-NLS ChangeLog INSTALL \
-Makefile.am Makefile.in Muttrc.head.in NEWS TODO acconfig.h aclocal.m4 \
-config.guess config.h.in config.sub configure configure.in install-sh \
-missing mkinstalldirs muttbug.sh.in regex.c snprintf.c strcasecmp.c \
-strdup.c
-
+LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
+CFLAGS = @CFLAGS@
+DIST_SOURCES = $(makedoc_SOURCES) $(mutt_SOURCES) $(EXTRA_mutt_SOURCES) \
+	$(mutt_dotlock_SOURCES) $(pgpring_SOURCES)
 
-DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
+RECURSIVE_TARGETS = info-recursive dvi-recursive install-info-recursive \
+	uninstall-info-recursive all-recursive install-data-recursive \
+	install-exec-recursive installdirs-recursive install-recursive \
+	uninstall-recursive check-recursive installcheck-recursive
+DIST_COMMON = README ABOUT-NLS ChangeLog INSTALL Makefile.am \
+	Makefile.in Muttrc.head.in NEWS TODO acconfig.h aclocal.m4 \
+	config.guess config.h.in config.sub configure configure.in \
+	depcomp install-sh missing mkinstalldirs muttbug.sh.in regex.c \
+	snprintf.c strcasecmp.c strdup.c
+DIST_SUBDIRS = m4 po intl doc contrib imap
+SOURCES = $(makedoc_SOURCES) $(mutt_SOURCES) $(EXTRA_mutt_SOURCES) $(mutt_dotlock_SOURCES) $(pgpring_SOURCES)
 
-TAR = tar
-GZIP_ENV = --best
-DIST_SUBDIRS =  m4 po intl doc contrib imap
-SOURCES = $(mutt_dotlock_SOURCES) $(pgpring_SOURCES) $(makedoc_SOURCES) $(mutt_SOURCES) $(EXTRA_mutt_SOURCES)
-OBJECTS = $(mutt_dotlock_OBJECTS) $(pgpring_OBJECTS) $(makedoc_OBJECTS) $(mutt_OBJECTS)
+all: $(BUILT_SOURCES) config.h
+	$(MAKE) $(AM_MAKEFLAGS) all-recursive
 
-all: all-redirect
 .SUFFIXES:
-.SUFFIXES: .S .c .o .s
-$(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --foreign --include-deps Makefile
-
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
-	cd $(top_builddir) \
-	  && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
-
-$(ACLOCAL_M4):  configure.in  m4/codeset.m4 m4/curslib.m4 m4/funcdecl.m4 \
-		m4/gettext.m4 m4/glibc21.m4 m4/gssapi.m4 m4/iconv.m4 \
-		m4/lcmessage.m4 m4/progtest.m4
-	cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
+.SUFFIXES: .c .o .obj
+
+am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \
+ configure.lineno
+$(srcdir)/Makefile.in:  Makefile.am  $(top_srcdir)/configure.in $(ACLOCAL_M4)
+	cd $(top_srcdir) && \
+	  $(AUTOMAKE) --foreign  Makefile
 
-config.status: $(srcdir)/configure.in $(CONFIG_STATUS_DEPENDENCIES)
+$(top_builddir)/config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
 	$(SHELL) ./config.status --recheck
-$(srcdir)/configure: $(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)
+$(srcdir)/configure:  $(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)
 	cd $(srcdir) && $(AUTOCONF)
 
-config.h: stamp-h
-	@if test ! -f $@; then \
-		rm -f stamp-h; \
-		$(MAKE) stamp-h; \
-	else :; fi
-stamp-h: $(srcdir)/config.h.in $(top_builddir)/config.status
-	cd $(top_builddir) \
-	  && CONFIG_FILES= CONFIG_HEADERS=config.h \
-	     $(SHELL) ./config.status
-	@echo timestamp > stamp-h 2> /dev/null
-$(srcdir)/config.h.in: $(srcdir)/stamp-h.in
+$(ACLOCAL_M4):  configure.in m4/codeset.m4 m4/curslib.m4 m4/funcdecl.m4 m4/gettext.m4 m4/glibc21.m4 m4/gssapi.m4 m4/iconv.m4 m4/lcmessage.m4 m4/progtest.m4
+	cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
+
+config.h: stamp-h1
 	@if test ! -f $@; then \
-		rm -f $(srcdir)/stamp-h.in; \
-		$(MAKE) $(srcdir)/stamp-h.in; \
+	  rm -f stamp-h1; \
+	  $(MAKE) stamp-h1; \
 	else :; fi
-$(srcdir)/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) acconfig.h
-	cd $(top_srcdir) && $(AUTOHEADER)
-	@echo timestamp > $(srcdir)/stamp-h.in 2> /dev/null
 
-mostlyclean-hdr:
+stamp-h1: $(srcdir)/config.h.in $(top_builddir)/config.status
+	@rm -f stamp-h1
+	cd $(top_builddir) && $(SHELL) ./config.status config.h
 
-clean-hdr:
+$(srcdir)/config.h.in:  $(top_srcdir)/configure.in $(ACLOCAL_M4) $(top_srcdir)/acconfig.h
+	cd $(top_srcdir) && $(AUTOHEADER)
+	touch $(srcdir)/config.h.in
 
 distclean-hdr:
-	-rm -f config.h
-
-maintainer-clean-hdr:
+	-rm -f config.h stamp-h1
+intl/Makefile: $(top_builddir)/config.status $(top_srcdir)/intl/Makefile.in
+	cd $(top_builddir) && $(SHELL) ./config.status $@
+doc/Makefile: $(top_builddir)/config.status $(top_srcdir)/doc/Makefile.in
+	cd $(top_builddir) && $(SHELL) ./config.status $@
+contrib/Makefile: $(top_builddir)/config.status $(top_srcdir)/contrib/Makefile.in
+	cd $(top_builddir) && $(SHELL) ./config.status $@
 muttbug.sh: $(top_builddir)/config.status muttbug.sh.in
-	cd $(top_builddir) && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
+	cd $(top_builddir) && $(SHELL) ./config.status $@
 Muttrc.head: $(top_builddir)/config.status Muttrc.head.in
-	cd $(top_builddir) && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
-
-mostlyclean-binPROGRAMS:
-
-clean-binPROGRAMS:
-	-test -z "$(bin_PROGRAMS)" || rm -f $(bin_PROGRAMS)
-
-distclean-binPROGRAMS:
-
-maintainer-clean-binPROGRAMS:
-
+	cd $(top_builddir) && $(SHELL) ./config.status $@
+doc/instdoc.sh: $(top_builddir)/config.status $(top_srcdir)/doc/instdoc.sh.in
+	cd $(top_builddir) && $(SHELL) ./config.status $@
+binPROGRAMS_INSTALL = $(INSTALL_PROGRAM)
 install-binPROGRAMS: $(bin_PROGRAMS)
 	@$(NORMAL_INSTALL)
 	$(mkinstalldirs) $(DESTDIR)$(bindir)
 	@list='$(bin_PROGRAMS)'; for p in $$list; do \
-	  if test -f $$p; then \
-	    echo "  $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
-	     $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
+	  p1=`echo $$p|sed 's/$(EXEEXT)$$//'`; \
+	  if test -f $$p \
+	  ; then \
+	    f=`echo "$$p1" | sed 's,^.*/,,;$(transform);s/$$/$(EXEEXT)/'`; \
+	   echo " $(INSTALL_PROGRAM_ENV) $(binPROGRAMS_INSTALL) $$p $(DESTDIR)$(bindir)/$$f"; \
+	   $(INSTALL_PROGRAM_ENV) $(binPROGRAMS_INSTALL) $$p $(DESTDIR)$(bindir)/$$f; \
 	  else :; fi; \
 	done
 
 uninstall-binPROGRAMS:
 	@$(NORMAL_UNINSTALL)
-	list='$(bin_PROGRAMS)'; for p in $$list; do \
-	  rm -f $(DESTDIR)$(bindir)/`echo $$p|sed 's/$(EXEEXT)$$//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
+	@list='$(bin_PROGRAMS)'; for p in $$list; do \
+	  f=`echo "$$p" | sed 's,^.*/,,;s/$(EXEEXT)$$//;$(transform);s/$$/$(EXEEXT)/'`; \
+	  echo " rm -f $(DESTDIR)$(bindir)/$$f"; \
+	  rm -f $(DESTDIR)$(bindir)/$$f; \
 	done
 
-.c.o:
-	$(COMPILE) -c $<
-
-.s.o:
-	$(COMPILE) -c $<
-
-.S.o:
-	$(COMPILE) -c $<
-
-mostlyclean-compile:
-	-rm -f *.o core *.core
-
-clean-compile:
-
-distclean-compile:
-	-rm -f *.tab.c
-
-maintainer-clean-compile:
-
-mutt_dotlock: $(mutt_dotlock_OBJECTS) $(mutt_dotlock_DEPENDENCIES)
-	@rm -f mutt_dotlock
-	$(LINK) $(mutt_dotlock_LDFLAGS) $(mutt_dotlock_OBJECTS) $(mutt_dotlock_LDADD) $(LIBS)
-
-pgpring: $(pgpring_OBJECTS) $(pgpring_DEPENDENCIES)
-	@rm -f pgpring
-	$(LINK) $(pgpring_LDFLAGS) $(pgpring_OBJECTS) $(pgpring_LDADD) $(LIBS)
-
-makedoc: $(makedoc_OBJECTS) $(makedoc_DEPENDENCIES)
-	@rm -f makedoc
+clean-binPROGRAMS:
+	-test -z "$(bin_PROGRAMS)" || rm -f $(bin_PROGRAMS)
+makedoc$(EXEEXT): $(makedoc_OBJECTS) $(makedoc_DEPENDENCIES) 
+	@rm -f makedoc$(EXEEXT)
 	$(LINK) $(makedoc_LDFLAGS) $(makedoc_OBJECTS) $(makedoc_LDADD) $(LIBS)
-
-mutt: $(mutt_OBJECTS) $(mutt_DEPENDENCIES)
-	@rm -f mutt
+mutt$(EXEEXT): $(mutt_OBJECTS) $(mutt_DEPENDENCIES) 
+	@rm -f mutt$(EXEEXT)
 	$(LINK) $(mutt_LDFLAGS) $(mutt_OBJECTS) $(mutt_LDADD) $(LIBS)
-
+mutt_dotlock$(EXEEXT): $(mutt_dotlock_OBJECTS) $(mutt_dotlock_DEPENDENCIES) 
+	@rm -f mutt_dotlock$(EXEEXT)
+	$(LINK) $(mutt_dotlock_LDFLAGS) $(mutt_dotlock_OBJECTS) $(mutt_dotlock_LDADD) $(LIBS)
+pgpring$(EXEEXT): $(pgpring_OBJECTS) $(pgpring_DEPENDENCIES) 
+	@rm -f pgpring$(EXEEXT)
+	$(LINK) $(pgpring_LDFLAGS) $(pgpring_OBJECTS) $(pgpring_LDADD) $(LIBS)
+binSCRIPT_INSTALL = $(INSTALL_SCRIPT)
 install-binSCRIPTS: $(bin_SCRIPTS)
 	@$(NORMAL_INSTALL)
 	$(mkinstalldirs) $(DESTDIR)$(bindir)
 	@list='$(bin_SCRIPTS)'; for p in $$list; do \
-	  if test -f $$p; then \
-	    echo " $(INSTALL_SCRIPT) $$p $(DESTDIR)$(bindir)/`echo $$p|sed '$(transform)'`"; \
-	    $(INSTALL_SCRIPT) $$p $(DESTDIR)$(bindir)/`echo $$p|sed '$(transform)'`; \
-	  else if test -f $(srcdir)/$$p; then \
-	    echo " $(INSTALL_SCRIPT) $(srcdir)/$$p $(DESTDIR)$(bindir)/`echo $$p|sed '$(transform)'`"; \
-	    $(INSTALL_SCRIPT) $(srcdir)/$$p $(DESTDIR)$(bindir)/`echo $$p|sed '$(transform)'`; \
-	  else :; fi; fi; \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  if test -f $$d$$p; then \
+	    f=`echo "$$p" | sed 's|^.*/||;$(transform)'`; \
+	    echo " $(binSCRIPT_INSTALL) $$d$$p $(DESTDIR)$(bindir)/$$f"; \
+	    $(binSCRIPT_INSTALL) $$d$$p $(DESTDIR)$(bindir)/$$f; \
+	  else :; fi; \
 	done
 
 uninstall-binSCRIPTS:
 	@$(NORMAL_UNINSTALL)
-	list='$(bin_SCRIPTS)'; for p in $$list; do \
-	  rm -f $(DESTDIR)$(bindir)/`echo $$p|sed '$(transform)'`; \
+	@list='$(bin_SCRIPTS)'; for p in $$list; do \
+	  f=`echo "$$p" | sed 's|^.*/||;$(transform)'`; \
+	  echo " rm -f $(DESTDIR)$(bindir)/$$f"; \
+	  rm -f $(DESTDIR)$(bindir)/$$f; \
 	done
 
+mostlyclean-compile:
+	-rm -f *.$(OBJEXT) core *.core
+
+distclean-compile:
+	-rm -f *.tab.c
+
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/regex.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/snprintf.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/strcasecmp.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@$(DEPDIR)/strdup.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/account.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/addrbook.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/alias.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ascii.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/attach.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/base64.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/browser.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/buffy.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/charset.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/color.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/commands.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/complete.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/compose.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/compress.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/copy.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/curs_lib.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/curs_main.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/date.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dotlock.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/edit.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/editmsg.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/enter.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/extlib.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/filter.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/flags.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/from.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/getdomain.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/gnupgparse.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/handler.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/hash.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/hdrline.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/headers.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/help.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/history.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/hook.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/init.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/keymap.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/lib.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/main.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/makedoc.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mbox.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mbyte.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/md5c.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/menu.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mh.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mutt_dotlock.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mutt_sasl.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mutt_socket.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mutt_ssl.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mutt_ssl_nss.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mutt_tunnel.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/muttlib.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mx.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/newsrc.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/nntp.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pager.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/parse.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/patchlist.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pattern.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pgp.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pgpinvoke.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pgpkey.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pgplib.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pgpmicalg.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pgppacket.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pgppubring.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pop.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pop_auth.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pop_lib.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/postpone.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/query.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/recvattach.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/recvcmd.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/remailer.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/resize.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/rfc1524.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/rfc2047.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/rfc2231.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/rfc822.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/score.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/send.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/sendlib.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/sha1.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/signal.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/signature.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/sort.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/status.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/system.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/thread.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/url.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utf8.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/wcwidth.Po@am__quote@
+
+distclean-depend:
+	-rm -rf $(DEPDIR) ./$(DEPDIR)
+
+.c.o:
+@AMDEP_TRUE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
+@AMDEP_TRUE@	$(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+	$(COMPILE) -c `test -f '$<' || echo '$(srcdir)/'`$<
+
+.c.obj:
+@AMDEP_TRUE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
+@AMDEP_TRUE@	$(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+	$(COMPILE) -c `cygpath -w $<`
+CCDEPMODE = @CCDEPMODE@
+uninstall-info-am:
+
 # This directory's subdirectories are mostly independent; you can cd
 # into them and run `make' without going through this Makefile.
 # To change the values of `make' variables: instead of editing Makefiles,
 # (1) if the variable is set in `config.status', edit `config.status'
 #     (which will cause the Makefiles to be regenerated when you run `make');
 # (2) otherwise, pass the desired values on the `make' command line.
-
-@SET_MAKE@
-
-all-recursive install-data-recursive install-exec-recursive \
-installdirs-recursive install-recursive uninstall-recursive  \
-check-recursive installcheck-recursive info-recursive dvi-recursive:
-	@set fnord $(MAKEFLAGS); amf=$$2; \
+$(RECURSIVE_TARGETS):
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
 	target=`echo $@ | sed s/-recursive//`; \
 	list='$(SUBDIRS)'; for subdir in $$list; do \
@@ -380,13 +594,18 @@
 
 mostlyclean-recursive clean-recursive distclean-recursive \
 maintainer-clean-recursive:
-	@set fnord $(MAKEFLAGS); amf=$$2; \
+	@set fnord $$MAKEFLAGS; amf=$$2; \
 	dot_seen=no; \
-	rev=''; list='$(SUBDIRS)'; for subdir in $$list; do \
-	  rev="$$subdir $$rev"; \
-	  test "$$subdir" = "." && dot_seen=yes; \
+	case "$@" in \
+	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
+	  *) list='$(SUBDIRS)' ;; \
+	esac; \
+	rev=''; for subdir in $$list; do \
+	  if test "$$subdir" = "."; then :; else \
+	    rev="$$subdir $$rev"; \
+	  fi; \
 	done; \
-	test "$$dot_seen" = "no" && rev=". $$rev"; \
+	rev="$$rev ."; \
 	target=`echo $@ | sed s/-recursive//`; \
 	for subdir in $$rev; do \
 	  echo "Making $$target in $$subdir"; \
@@ -403,333 +622,172 @@
 	  test "$$subdir" = . || (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) tags); \
 	done
 
+ETAGS = etags
+ETAGSFLAGS =
+
 tags: TAGS
 
-ID: $(HEADERS) $(SOURCES) $(LISP)
-	list='$(SOURCES) $(HEADERS)'; \
-	unique=`for i in $$list; do echo $$i; done | \
-	  awk '    { files[$$0] = 1; } \
+ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
+	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
-	here=`pwd` && cd $(srcdir) \
-	  && mkid -f$$here/ID $$unique $(LISP)
+	mkid -fID $$unique
 
-TAGS: tags-recursive $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) $(LISP)
+TAGS: tags-recursive $(HEADERS) $(SOURCES) config.h.in $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
 	tags=; \
 	here=`pwd`; \
 	list='$(SUBDIRS)'; for subdir in $$list; do \
-   if test "$$subdir" = .; then :; else \
+	  if test "$$subdir" = .; then :; else \
 	    test -f $$subdir/TAGS && tags="$$tags -i $$here/$$subdir/TAGS"; \
-   fi; \
+	  fi; \
 	done; \
-	list='$(SOURCES) $(HEADERS)'; \
-	unique=`for i in $$list; do echo $$i; done | \
-	  awk '    { files[$$0] = 1; } \
+	list='$(SOURCES) $(HEADERS) config.h.in $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
-	test -z "$(ETAGS_ARGS)config.h.in$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags config.h.in $$unique $(LISP) -o $$here/TAGS)
-
-mostlyclean-tags:
-
-clean-tags:
+	test -z "$(ETAGS_ARGS)$$tags$$unique" \
+	  || $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
+	     $$tags $$unique
+
+GTAGS:
+	here=`$(am__cd) $(top_builddir) && pwd` \
+	  && cd $(top_srcdir) \
+	  && gtags -i $(GTAGS_ARGS) $$here
 
 distclean-tags:
-	-rm -f TAGS ID
-
-maintainer-clean-tags:
+	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 
+top_distdir = .
 distdir = $(PACKAGE)-$(VERSION)
-top_distdir = $(distdir)
 
-# This target untars the dist file and tries a VPATH configuration.  Then
-# it guarantees that the distribution is self-contained by making another
-# tarfile.
-distcheck: dist
-	-rm -rf $(distdir)
-	GZIP=$(GZIP_ENV) $(TAR) zxf $(distdir).tar.gz
-	mkdir $(distdir)/=build
-	mkdir $(distdir)/=inst
-	dc_install_base=`cd $(distdir)/=inst && pwd`; \
-	cd $(distdir)/=build \
-	  && ../configure --with-included-gettext --srcdir=.. --prefix=$$dc_install_base \
-	  && $(MAKE) $(AM_MAKEFLAGS) \
-	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
-	  && $(MAKE) $(AM_MAKEFLAGS) check \
-	  && $(MAKE) $(AM_MAKEFLAGS) install \
-	  && $(MAKE) $(AM_MAKEFLAGS) installcheck \
-	  && $(MAKE) $(AM_MAKEFLAGS) dist
-	-rm -rf $(distdir)
-	@banner="$(distdir).tar.gz is ready for distribution"; \
-	dashes=`echo "$$banner" | sed s/./=/g`; \
-	echo "$$dashes"; \
-	echo "$$banner"; \
-	echo "$$dashes"
-dist: distdir
-	-chmod -R a+r $(distdir)
-	GZIP=$(GZIP_ENV) $(TAR) chozf $(distdir).tar.gz $(distdir)
-	-rm -rf $(distdir)
-dist-all: distdir
-	-chmod -R a+r $(distdir)
-	GZIP=$(GZIP_ENV) $(TAR) chozf $(distdir).tar.gz $(distdir)
-	-rm -rf $(distdir)
+am__remove_distdir = \
+  { test ! -d $(distdir) \
+    || { find $(distdir) -type d ! -perm -200 -exec chmod u+w {} ';' \
+         && rm -fr $(distdir); }; }
+
+GZIP_ENV = --best
+distcleancheck_listfiles = find . -type f -print
+
 distdir: $(DISTFILES)
-	-rm -rf $(distdir)
+	$(am__remove_distdir)
 	mkdir $(distdir)
-	-chmod 777 $(distdir)
-	@for file in $(DISTFILES); do \
-	  d=$(srcdir); \
+	$(mkinstalldirs) $(distdir)/. $(distdir)/contrib $(distdir)/doc $(distdir)/intl $(distdir)/po
+	@list='$(DISTFILES)'; for file in $$list; do \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
+	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
+	    dir="/$$dir"; \
+	    $(mkinstalldirs) "$(distdir)$$dir"; \
+	  else \
+	    dir=''; \
+	  fi; \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$d/$$file $(distdir)/$$file; \
+	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
 	  else \
 	    test -f $(distdir)/$$file \
-	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
-	    || cp -p $$d/$$file $(distdir)/$$file || :; \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
 	  fi; \
 	done
-	for subdir in $(DIST_SUBDIRS); do \
+	list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
 	  if test "$$subdir" = .; then :; else \
 	    test -d $(distdir)/$$subdir \
 	    || mkdir $(distdir)/$$subdir \
 	    || exit 1; \
-	    chmod 777 $(distdir)/$$subdir; \
-	    (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) top_distdir=../$(distdir) distdir=../$(distdir)/$$subdir distdir) \
+	    (cd $$subdir && \
+	      $(MAKE) $(AM_MAKEFLAGS) \
+	        top_distdir="$(top_distdir)" \
+	        distdir=../$(distdir)/$$subdir \
+	        distdir) \
 	      || exit 1; \
 	  fi; \
 	done
-	$(MAKE) $(AM_MAKEFLAGS) top_distdir="$(top_distdir)" distdir="$(distdir)" dist-hook
-addrbook.o: addrbook.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_menu.h keymap.h keymap_defs.h mapping.h sort.h
-alias.o: alias.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h
-ascii.o: ascii.c ascii.h
-attach.o: attach.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_menu.h keymap.h keymap_defs.h mutt_curses.h rfc1524.h \
-	mime.h pager.h mailbox.h copy.h mx.h pgp.h pgplib.h
-base64.o: base64.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h mime.h
-browser.o: browser.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mutt_menu.h keymap.h keymap_defs.h buffy.h \
-	mapping.h sort.h mailbox.h browser.h
-buffy.o: buffy.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h buffy.h mailbox.h mx.h
-charset.o: charset.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
-color.o: color.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h \
-	mapping.h
-commands.o: commands.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mutt_menu.h keymap.h keymap_defs.h mime.h sort.h \
-	mapping.h mailbox.h copy.h mx.h pager.h pgp.h pgplib.h
-complete.o: complete.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
-compose.o: compose.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mutt_menu.h keymap.h keymap_defs.h rfc1524.h \
-	mime.h attach.h mapping.h mailbox.h sort.h pgp.h pgplib.h
-copy.o: copy.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mailbox.h mx.h copy.h \
-	rfc2047.h mime.h pgp.h pgplib.h
-curs_lib.o: curs_lib.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_menu.h keymap.h keymap_defs.h mutt_curses.h pager.h
-curs_main.o: curs_main.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mutt_menu.h keymap.h keymap_defs.h mailbox.h \
-	mapping.h sort.h buffy.h mx.h pgp.h pgplib.h
-date.o: date.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h
-edit.o: edit.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h
-editmsg.o: editmsg.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h copy.h \
-	mailbox.h mx.h
-enter.o: enter.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_menu.h keymap.h \
-	keymap_defs.h mutt_curses.h history.h
-filter.o: filter.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
-flags.o: flags.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h sort.h \
-	mapping.h mx.h mailbox.h
-from.o: from.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h
-getdomain.o: getdomain.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
-gnupgparse.o: gnupgparse.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h pgp.h \
-	pgplib.h mime.h
-handler.o: handler.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h rfc1524.h keymap.h keymap_defs.h mime.h copy.h \
-	pgp.h pgplib.h
-hash.o: hash.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h
-hdrline.o: hdrline.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h sort.h mapping.h pgp.h pgplib.h
-headers.o: headers.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h pgp.h \
-	pgplib.h
-help.o: help.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h keymap.h \
-	keymap_defs.h pager.h mapping.h
-history.o: history.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h history.h
-hook.o: hook.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mailbox.h
-init.o: init.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mapping.h \
-	mutt_curses.h history.h keymap.h keymap_defs.h pgp.h pgplib.h \
-	mx.h mailbox.h init.h sort.h buffy.h
-keymap.o: keymap.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_menu.h keymap.h keymap_defs.h mutt_curses.h mapping.h \
-	functions.h
-lib.o: lib.c lib.h config.h
-main.o: main.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mx.h mailbox.h buffy.h \
-	sort.h mapping.h pgp.h pgplib.h mutt_curses.h keymap.h \
-	keymap_defs.h url.h
-makedoc.o: makedoc.c config.h
-mbox.o: mbox.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mailbox.h mx.h sort.h \
-	mapping.h copy.h
-mbyte.o: mbyte.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h
-menu.o: menu.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h \
-	mutt_menu.h keymap.h keymap_defs.h
-mh.o: mh.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mailbox.h mx.h copy.h \
-	buffy.h sort.h mapping.h
-muttlib.o: muttlib.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mime.h mailbox.h mx.h url.h reldate.h pgp.h \
-	pgplib.h
-mx.o: mx.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mx.h mailbox.h \
-	rfc2047.h sort.h mapping.h copy.h keymap.h keymap_defs.h url.h \
-	pgp.h pgplib.h dotlock.h
-pager.o: pager.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h keymap.h \
-	keymap_defs.h mutt_menu.h mapping.h sort.h pager.h attach.h \
-	mx.h mailbox.h pgp.h pgplib.h
-parse.o: parse.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mailbox.h mime.h \
-	rfc2047.h rfc2231.h pgp.h pgplib.h
-patchlist.o: patchlist.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
-pattern.o: pattern.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h mapping.h \
-	keymap.h keymap_defs.h mailbox.h copy.h pgp.h pgplib.h
-pgp.o: pgp.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h pgp.h \
-	pgplib.h mime.h copy.h
-pgpinvoke.o: pgpinvoke.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h pgp.h pgplib.h
-pgpkey.o: pgpkey.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mutt_menu.h keymap.h keymap_defs.h mime.h pgp.h \
-	pgplib.h pager.h sort.h mapping.h
-pgplib.o: pgplib.c lib.h config.h pgplib.h
-pgpmicalg.o: pgpmicalg.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h pgp.h \
-	pgplib.h pgppacket.h mime.h
-pgppacket.o: pgppacket.c config.h sha1.h lib.h pgplib.h pgppacket.h
-postpone.o: postpone.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_menu.h keymap.h keymap_defs.h rfc1524.h mime.h mailbox.h \
-	mapping.h pgp.h pgplib.h
-query.o: query.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_menu.h keymap.h \
-	keymap_defs.h mapping.h sort.h
-recvattach.o: recvattach.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mutt_menu.h keymap.h keymap_defs.h rfc1524.h \
-	mime.h mailbox.h attach.h mapping.h mx.h copy.h pgp.h pgplib.h
-recvcmd.o: recvcmd.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h mutt_menu.h keymap.h keymap_defs.h rfc1524.h \
-	mime.h mailbox.h attach.h mapping.h mx.h copy.h
-resize.o: resize.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h
-rfc1524.o: rfc1524.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h rfc1524.h
-rfc2047.o: rfc2047.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h mime.h \
-	rfc2047.h
-rfc2231.o: rfc2231.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h mime.h \
-	rfc2047.h rfc2231.h
-rfc822.o: rfc822.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
-score.o: score.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h sort.h mapping.h
-send.o: send.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mutt_curses.h \
-	rfc2047.h keymap.h keymap_defs.h mime.h mailbox.h copy.h mx.h \
-	pgp.h pgplib.h
-sendlib.o: sendlib.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h rfc2047.h rfc2231.h mx.h mailbox.h mime.h copy.h \
-	pager.h pgp.h pgplib.h
-signal.o: signal.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_curses.h
-sort.o: sort.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h sort.h mapping.h
-status.o: status.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h \
-	mutt_menu.h keymap.h keymap_defs.h mutt_curses.h sort.h \
-	mapping.h mx.h mailbox.h
-system.o: system.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
-thread.o: thread.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h sort.h \
-	mapping.h
-url.o: url.c mutt.h config.h rfc822.h hash.h charset.h mutt_regex.h \
-	ascii.h protos.h mbyte.h lib.h globals.h mapping.h url.h mime.h
-utf8.o: utf8.c
-wcwidth.o: wcwidth.c mutt.h config.h rfc822.h hash.h charset.h \
-	mutt_regex.h ascii.h protos.h mbyte.h lib.h globals.h
+	$(MAKE) $(AM_MAKEFLAGS) \
+	  top_distdir="${top_distdir}" distdir="$(distdir)" \
+	  dist-hook
+	-find $(distdir) -type d ! -perm -777 -exec chmod a+rwx {} \; -o \
+	  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
+	  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
+	  ! -type d ! -perm -444 -exec $(SHELL) $(install_sh) -c -m a+r {} {} \; \
+	|| chmod -R a+r $(distdir)
+dist-gzip: distdir
+	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
+	$(am__remove_distdir)
+
+dist dist-all: distdir
+	$(AMTAR) chof - $(distdir) | GZIP=$(GZIP_ENV) gzip -c >$(distdir).tar.gz
+	$(am__remove_distdir)
 
-info-am:
-info: info-recursive
-dvi-am:
-dvi: dvi-recursive
+# This target untars the dist file and tries a VPATH configuration.  Then
+# it guarantees that the distribution is self-contained by making another
+# tarfile.
+distcheck: dist
+	$(am__remove_distdir)
+	GZIP=$(GZIP_ENV) gunzip -c $(distdir).tar.gz | $(AMTAR) xf -
+	chmod -R a-w $(distdir); chmod a+w $(distdir)
+	mkdir $(distdir)/=build
+	mkdir $(distdir)/=inst
+	chmod a-w $(distdir)
+	dc_install_base=`$(am__cd) $(distdir)/=inst && pwd` \
+	  && cd $(distdir)/=build \
+	  && ../configure --srcdir=.. --prefix=$$dc_install_base \
+	    $(DISTCHECK_CONFIGURE_FLAGS) \
+	  && $(MAKE) $(AM_MAKEFLAGS) \
+	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
+	  && $(MAKE) $(AM_MAKEFLAGS) check \
+	  && $(MAKE) $(AM_MAKEFLAGS) install \
+	  && $(MAKE) $(AM_MAKEFLAGS) installcheck \
+	  && $(MAKE) $(AM_MAKEFLAGS) uninstall \
+	  && (test `find $$dc_install_base -type f -print | wc -l` -le 1 \
+	      || { echo "ERROR: files left after uninstall:" ; \
+	           find $$dc_install_base -type f -print ; \
+	           exit 1; } >&2 ) \
+	  && $(MAKE) $(AM_MAKEFLAGS) dist-gzip \
+	  && rm -f $(distdir).tar.gz \
+	  && $(MAKE) $(AM_MAKEFLAGS) distcleancheck
+	$(am__remove_distdir)
+	@echo "$(distdir).tar.gz is ready for distribution" | \
+	  sed 'h;s/./=/g;p;x;p;x'
+distcleancheck: distclean
+	if test '$(srcdir)' = . ; then \
+	  echo "ERROR: distcleancheck can only run from a VPATH build" ; \
+	  exit 1 ; \
+	fi
+	test `$(distcleancheck_listfiles) | wc -l` -eq 0 \
+	  || { echo "ERROR: files left after distclean:" ; \
+	       $(distcleancheck_listfiles) ; \
+	       exit 1; } >&2
 check-am: all-am
 check: check-recursive
-installcheck-am:
-installcheck: installcheck-recursive
-all-recursive-am: config.h
-	$(MAKE) $(AM_MAKEFLAGS) all-recursive
+all-am: Makefile $(PROGRAMS) $(SCRIPTS) config.h
+installdirs: installdirs-recursive
+installdirs-am:
+	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(bindir)
 
-install-exec-am: install-binPROGRAMS install-binSCRIPTS \
-		install-exec-local
+install: install-recursive
 install-exec: install-exec-recursive
-
-install-data-am: install-data-local
 install-data: install-data-recursive
+uninstall: uninstall-recursive
 
 install-am: all-am
 	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
-install: install-recursive
-uninstall-am: uninstall-binPROGRAMS uninstall-binSCRIPTS
-uninstall: uninstall-recursive
-all-am: Makefile $(PROGRAMS) $(SCRIPTS) config.h
-all-redirect: all-recursive-am
-install-strip:
-	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
-installdirs: installdirs-recursive
-installdirs-am:
-	$(mkinstalldirs)  $(DESTDIR)$(bindir) $(DESTDIR)$(bindir)
-
 
+installcheck: installcheck-recursive
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
+	  INSTALL_STRIP_FLAG=-s \
+	  `test -z '$(STRIP)' || \
+	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
 mostlyclean-generic:
 
 clean-generic:
@@ -737,53 +795,71 @@
 
 distclean-generic:
 	-rm -f Makefile $(CONFIG_CLEAN_FILES)
-	-rm -f config.cache config.log stamp-h stamp-h[0-9]*
 
 maintainer-clean-generic:
+	@echo "This command is intended for maintainers to use"
+	@echo "it deletes files that may require special tools to rebuild."
 	-test -z "$(BUILT_SOURCES)" || rm -f $(BUILT_SOURCES)
-mostlyclean-am:  mostlyclean-hdr mostlyclean-binPROGRAMS \
-		mostlyclean-compile mostlyclean-tags \
-		mostlyclean-generic
+clean: clean-recursive
 
-mostlyclean: mostlyclean-recursive
+clean-am: clean-binPROGRAMS clean-generic mostlyclean-am
 
-clean-am:  clean-hdr clean-binPROGRAMS clean-compile clean-tags \
-		clean-generic mostlyclean-am
+distclean: distclean-recursive
+	-rm -f $(am__CONFIG_DISTCLEAN_FILES)
+distclean-am: clean-am distclean-compile distclean-depend \
+	distclean-generic distclean-hdr distclean-tags
 
-clean: clean-recursive
+dvi: dvi-recursive
 
-distclean-am:  distclean-hdr distclean-binPROGRAMS distclean-compile \
-		distclean-tags distclean-generic clean-am
+dvi-am:
 
-distclean: distclean-recursive
-	-rm -f config.status
+info: info-recursive
 
-maintainer-clean-am:  maintainer-clean-hdr maintainer-clean-binPROGRAMS \
-		maintainer-clean-compile maintainer-clean-tags \
-		maintainer-clean-generic distclean-am
-	@echo "This command is intended for maintainers to use;"
-	@echo "it deletes files that may require special tools to rebuild."
+info-am:
+
+install-data-am: install-data-local
+
+install-exec-am: install-binPROGRAMS install-binSCRIPTS \
+	install-exec-local
+
+install-info: install-info-recursive
+
+install-man:
+
+installcheck-am:
 
 maintainer-clean: maintainer-clean-recursive
-	-rm -f config.status
+	-rm -f $(am__CONFIG_DISTCLEAN_FILES)
+	-rm -rf autom4te.cache
+maintainer-clean-am: distclean-am maintainer-clean-generic
 
-.PHONY: mostlyclean-hdr distclean-hdr clean-hdr maintainer-clean-hdr \
-mostlyclean-binPROGRAMS distclean-binPROGRAMS clean-binPROGRAMS \
-maintainer-clean-binPROGRAMS uninstall-binPROGRAMS install-binPROGRAMS \
-mostlyclean-compile distclean-compile clean-compile \
-maintainer-clean-compile uninstall-binSCRIPTS install-binSCRIPTS \
-install-data-recursive uninstall-data-recursive install-exec-recursive \
-uninstall-exec-recursive installdirs-recursive uninstalldirs-recursive \
-all-recursive check-recursive installcheck-recursive info-recursive \
-dvi-recursive mostlyclean-recursive distclean-recursive clean-recursive \
-maintainer-clean-recursive tags tags-recursive mostlyclean-tags \
-distclean-tags clean-tags maintainer-clean-tags distdir info-am info \
-dvi-am dvi check check-am installcheck-am installcheck all-recursive-am \
-install-exec-local install-exec-am install-exec install-data-local \
-install-data-am install-data install-am install uninstall-am uninstall \
-all-redirect all-am all installdirs-am installdirs mostlyclean-generic \
-distclean-generic clean-generic maintainer-clean-generic clean \
-mostlyclean distclean maintainer-clean
+mostlyclean: mostlyclean-recursive
+
+mostlyclean-am: mostlyclean-compile mostlyclean-generic
+
+uninstall-am: uninstall-binPROGRAMS uninstall-binSCRIPTS \
+	uninstall-info-am
+
+uninstall-info: uninstall-info-recursive
+
+.PHONY: $(RECURSIVE_TARGETS) GTAGS all all-am check check-am clean \
+	clean-binPROGRAMS clean-generic clean-recursive dist dist-all \
+	dist-gzip distcheck distclean distclean-compile \
+	distclean-depend distclean-generic distclean-hdr \
+	distclean-recursive distclean-tags distcleancheck distdir dvi \
+	dvi-am dvi-recursive info info-am info-recursive install \
+	install-am install-binPROGRAMS install-binSCRIPTS install-data \
+	install-data-am install-data-local install-data-recursive \
+	install-exec install-exec-am install-exec-local \
+	install-exec-recursive install-info install-info-am \
+	install-info-recursive install-man install-recursive \
+	install-strip installcheck installcheck-am installdirs \
+	installdirs-am installdirs-recursive maintainer-clean \
+	maintainer-clean-generic maintainer-clean-recursive mostlyclean \
+	mostlyclean-compile mostlyclean-generic mostlyclean-recursive \
+	tags tags-recursive uninstall uninstall-am \
+	uninstall-binPROGRAMS uninstall-binSCRIPTS uninstall-info-am \
+	uninstall-info-recursive uninstall-recursive
 
 
 mutt_dotlock.c: dotlock.c
@@ -881,7 +957,6 @@
 	( ./mkjtags TAGS > tags.$$$$ && mv tags.$$$$ tags )
 
 .PHONY: jtags
-
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
diff -uNr mutt-1.4.orig/Muttrc mutt-1.4/Muttrc
--- mutt-1.4.orig/Muttrc	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/Muttrc	Sun Nov  3 21:57:20 2002
@@ -185,6 +185,28 @@
 # editing the body of an outgoing message.
 # 
 # 
+# set ask_follow_up=no
+#
+# Name: ask_follow_up
+# Type: boolean
+# Default: no
+# 
+# 
+# If set, Mutt will prompt you for follow-up groups before editing
+# the body of an outgoing message.
+# 
+# 
+# set ask_x_comment_to=no
+#
+# Name: ask_x_comment_to
+# Type: boolean
+# Default: no
+# 
+# 
+# If set, Mutt will prompt you for x-comment-to field before editing
+# the body of an outgoing message.
+# 
+# 
 # set attach_format="%u%D%I %t%4n %T%.40d%> [%.7m/%.10M, %.6e%?C?, %C?, %s] "
 #
 # Name: attach_format
@@ -308,6 +330,17 @@
 # bouncing messages.  Postfix users may wish to unset this variable.
 # 
 # 
+# set catchup_newsgroup=ask-yes
+#
+# Name: catchup_newsgroup
+# Type: quadoption
+# Default: ask-yes
+# 
+# 
+# If this variable is set, Mutt will mark all articles in newsgroup
+# as read when you quit the newsgroup (catchup newsgroup).
+# 
+# 
 # set charset=""
 #
 # Name: charset
@@ -734,6 +767,19 @@
 # resulting in two copies of the same email for you.
 # 
 # 
+# set followup_to_poster=ask-yes
+#
+# Name: followup_to_poster
+# Type: quadoption
+# Default: ask-yes
+# 
+# 
+# If this variable is set and the keyword "poster" is present in
+# Followup-To header, follow-up to newsgroup function is not
+# permitted.  The message will be mailed to the submitter of the
+# message via mail.
+# 
+# 
 # set force_name=no
 #
 # Name: force_name
@@ -818,6 +864,28 @@
 # "Franklin" to "Franklin, Steve".
 # 
 # 
+# set group_index_format="%4C %M%N %5s  %-45.45f %d"
+#
+# Name: group_index_format
+# Type: string
+# Default: "%4C %M%N %5s  %-45.45f %d"
+# 
+# 
+# This variable allows you to customize the newsgroup browser display to
+# your personal taste.  This string is similar to ``index_format'', but
+# has its own set of printf()-like sequences:
+# 
+# %C      current newsgroup number
+# %d      description of newsgroup (becomes from server)
+# %f      newsgroup name
+# %M      - if newsgroup not allowed for direct post (moderated for example)
+# %N      N if newsgroup is new, u if unsubscribed, blank otherwise
+# %n      number of new articles in newsgroup
+# %s      number of unread articles in newsgroup
+# %>X     right justify the rest of the string and pad with character "X"
+# %|X     pad to the end of the line with character "X"
+# 
+# 
 # set hdrs=yes
 #
 # Name: hdrs
@@ -1187,6 +1255,7 @@
 # %E      number of messages in current thread
 # %f      entire From: line (address + real name)
 # %F      author name, or recipient name if the message is from you
+# %g      newsgroup name (if compiled with nntp support)
 # %i      message-id of the current message
 # %l      number of lines in the message
 # %L      If an address in the To or CC header field matches an address
@@ -1204,6 +1273,7 @@
 # %T      the appropriate character from the $to_chars string
 # %u      user (login) name of the author
 # %v      first name of the author, or the recipient if the message is from you
+# %W      name of organization of author (`organization:' field)
 # %y      `x-label:' field, if present
 # %Y      `x-label' field, if present, and (1) not at part of a thread tree,
 #         (2) at the top of a thread, or (3) `x-label' is different from
@@ -1227,6 +1297,22 @@
 # See also: ``$to_chars''.
 # 
 # 
+# set inews=""
+#
+# Name: inews
+# Type: path
+# Default: ""
+# 
+# 
+# If set, specifies the program and arguments used to deliver news posted
+# by Mutt.  Otherwise, mutt posts article using current connection to
+# news server.  The following printf-style sequence is understood:
+# 
+# %s      newsserver name
+# 
+# Example: set inews="/usr/local/bin/inews -hS"
+# 
+# 
 # set ispell="/usr/bin/ispell"
 #
 # Name: ispell
@@ -1496,6 +1582,18 @@
 # be attached to the newly composed message if this option is set.
 # 
 # 
+# set mime_subject=yes
+#
+# Name: mime_subject
+# Type: boolean
+# Default: yes
+# 
+# 
+# If unset, 8-bit ``subject:'' line in article header will not be
+# encoded according to RFC2047 to base64.  This is useful when message
+# is Usenet article, because MIME for news is nonstandard feature.
+# 
+# 
 # set mix_entry_format="%4n %c %-16s %a"
 #
 # Name: mix_entry_format
@@ -1550,6 +1648,118 @@
 # escape sequences see the section on ``$index_format''.
 # 
 # 
+# set news_cache_dir="~/.mutt"
+#
+# Name: news_cache_dir
+# Type: path
+# Default: "~/.mutt"
+# 
+# 
+# This variable pointing to directory where Mutt will save cached news
+# articles headers in. If unset, headers will not be saved at all
+# and will be reloaded each time when you enter to newsgroup.
+# 
+# 
+# set news_server=""
+#
+# Name: news_server
+# Type: string
+# Default: ""
+# 
+# 
+# This variable specifies domain name or address of NNTP server. It
+# defaults to the newsserver specified in the environment variable
+# $NNTPSERVER or contained in the file /etc/nntpserver.  You can also
+# specify username and an alternative port for each newsserver, ie:
+# 
+# [nntp[s]://][username[:password]@]newsserver[:port]
+# 
+# 
+# set newsrc="~/.newsrc"
+#
+# Name: newsrc
+# Type: path
+# Default: "~/.newsrc"
+# 
+# 
+# The file, containing info about subscribed newsgroups - names and
+# indexes of read articles.  The following printf-style sequence
+# is understood:
+# 
+# %s      newsserver name
+# 
+# 
+# set nntp_context=1000
+#
+# Name: nntp_context
+# Type: number
+# Default: 1000
+# 
+# 
+# This variable defines number of articles which will be in index when
+# newsgroup entered.  If active newsgroup have more articles than this
+# number, oldest articles will be ignored.  Also controls how many
+# articles headers will be saved in cache when you quit newsgroup.
+# 
+# 
+# set nntp_load_description=yes
+#
+# Name: nntp_load_description
+# Type: boolean
+# Default: yes
+# 
+# 
+# This variable controls whether or not descriptions for each newsgroup
+# must be loaded when newsgroup is added to list (first time list
+# loading or new newsgroup adding).
+# 
+# 
+# set nntp_user=""
+#
+# Name: nntp_user
+# Type: string
+# Default: ""
+# 
+# 
+# Your login name on the NNTP server.  If unset and NNTP server requires
+# authentification, Mutt will prompt you for your account name when you
+# connect to newsserver.
+# 
+# 
+# set nntp_pass=""
+#
+# Name: nntp_pass
+# Type: string
+# Default: ""
+# 
+# 
+# Your password for NNTP account.
+# 
+# 
+# set nntp_poll=60
+#
+# Name: nntp_poll
+# Type: number
+# Default: 60
+# 
+# 
+# The time in seconds until any operations on newsgroup except post new
+# article will cause recheck for new news.  If set to 0, Mutt will
+# recheck newsgroup on each operation in index (stepping, read article,
+# etc.).
+# 
+# 
+# set nntp_reconnect=ask-yes
+#
+# Name: nntp_reconnect
+# Type: quadoption
+# Default: ask-yes
+# 
+# 
+# Controls whether or not Mutt will try to reconnect to newsserver when
+# connection lost.
+# 
+# 
 # set pager="builtin"
 #
 # Name: pager
@@ -2293,6 +2503,19 @@
 # string after the inclusion of a message which is being replied to.
 # 
 # 
+# set post_moderated=ask-yes
+#
+# Name: post_moderated
+# Type: quadoption
+# Default: ask-yes
+# 
+# 
+# If set to yes, Mutt will post article to newsgroup that have
+# not permissions to posting (e.g. moderated).  Note: if newsserver
+# does not support posting to that newsgroup or totally read-only, that
+# posting will not have an effect.
+# 
+# 
 # set postpone=ask-yes
 #
 # Name: postpone
@@ -2802,6 +3025,41 @@
 # shell from /etc/passwd is used.
 # 
 # 
+# set save_unsubscribed=no
+#
+# Name: save_unsubscribed
+# Type: boolean
+# Default: no
+# 
+# 
+# When set, info about unsubscribed newsgroups will be saved into
+# ``newsrc'' file and into cache.
+# 
+# 
+# set show_new_news=yes
+#
+# Name: show_new_news
+# Type: boolean
+# Default: yes
+# 
+# 
+# If set, newsserver will be asked for new newsgroups on entering
+# the browser.  Otherwise, it will be done only once for a newsserver.
+# Also controls whether or not number of new articles of subscribed
+# newsgroups will be then checked.
+# 
+# 
+# set show_only_unread=no
+#
+# Name: show_only_unread
+# Type: boolean
+# Default: no
+# 
+# 
+# If set, only subscribed newsgroups that contain unread articles
+# will be displayed in browser.
+# 
+# 
 # set sig_dashes=yes
 #
 # Name: sig_dashes
@@ -3285,6 +3543,18 @@
 # command.
 # 
 # 
+# set use_ipv6=yes
+#
+# Name: use_ipv6
+# Type: boolean
+# Default: yes
+# 
+# 
+# When set, Mutt will look for IPv6 addresses of hosts it tries to
+# contact.  If this option is unset, Mutt will restrict itself to IPv4 addresses.
+# Normally, the default should work.
+# 
+# 
 # set user_agent=yes
 #
 # Name: user_agent
@@ -3387,3 +3657,14 @@
 # messages to be sent.  Exim users may wish to use this.
 # 
 # 
+# set x_comment_to=no
+#
+# Name: x_comment_to
+# Type: boolean
+# Default: no
+# 
+# 
+# If set, Mutt will add ``X-Comment-To:'' field (that contains full
+# name of original article author) to article that followuped to newsgroup.
+# 
+# 
diff -uNr mutt-1.4.orig/Muttrc.head mutt-1.4/Muttrc.head
--- mutt-1.4.orig/Muttrc.head	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/Muttrc.head	Thu Jan  1 01:00:00 1970
@@ -1,43 +0,0 @@
-#
-# System configuration file for Mutt
-#
-
-# default list of header fields to weed when displaying
-#
-ignore "from " received content- mime-version status x-status message-id
-ignore sender references return-path lines
-
-# imitate the old search-body function
-macro index \eb '/~b ' 'search in message bodies'
-
-# simulate the old url menu
-macro index \cb |urlview\n 'call urlview to extract URLs out of a message'
-macro pager \cb |urlview\n 'call urlview to extract URLs out of a message'
-
-# Show documentation when pressing F1
-macro generic <f1> "!less /usr/local/doc/mutt/manual.txt\n" "Show Mutt documentation"
-macro index   <f1> "!less /usr/local/doc/mutt/manual.txt\n" "Show Mutt documentation"
-macro pager   <f1> "!less /usr/local/doc/mutt/manual.txt\n" "Show Mutt documentation"
-
-# Use folders which match on \\.gz$ as gzipped folders:
-# open-hook \\.gz$ "gzip -cd %f > %t"
-# close-hook \\.gz$ "gzip -c %t > %f"
-# append-hook \\.gz$ "gzip -c %t >> %f"
-
-# open-hook \\.bz2$ "bzip2 -cd %f > %t"
-# close-hook \\.bz2$ "bzip2 -c %t > %f"
-# append-hook \\.bz2$ "bzip2 -c %t >> %f"
-
-# If Mutt is unable to determine your site's domain name correctly, you can
-# set the default here.
-#
-# set hostname=cs.hmc.edu
-
-# If your sendmail supports the -B8BITMIME flag, enable the following
-#
-# set use_8bitmime
-
-##
-## More settings
-##
-
diff -uNr mutt-1.4.orig/OPS mutt-1.4/OPS
--- mutt-1.4.orig/OPS	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/OPS	Sun Nov  3 21:57:20 2002
@@ -7,13 +7,15 @@
 OP_BROWSER_NEW_FILE "select a new file in this directory"
 OP_BROWSER_VIEW_FILE "view file"
 OP_BROWSER_TELL "display the currently selected file's name"
-OP_BROWSER_SUBSCRIBE "subscribe to current mailbox (IMAP only)"
-OP_BROWSER_UNSUBSCRIBE "unsubscribe to current mailbox (IMAP only)"
+OP_CATCHUP "mark all articles in newsgroup as read"
+OP_BROWSER_SUBSCRIBE "subscribe to current (IMAP/NNTP only)"
+OP_BROWSER_UNSUBSCRIBE "unsubscribe to current (IMAP/NNTP only)"
 OP_BROWSER_TOGGLE_LSUB "toggle view all/subscribed mailboxes (IMAP only)"
 OP_CHANGE_DIRECTORY "change directories"
 OP_CHECK_NEW "check mailboxes for new mail"
 OP_COMPOSE_ATTACH_FILE "attach a file(s) to this message"
 OP_COMPOSE_ATTACH_MESSAGE "attach message(s) to this message"
+OP_COMPOSE_ATTACH_NEWS_MESSAGE "attach newsmessage(s) to this message"
 OP_COMPOSE_EDIT_BCC "edit the BCC list"
 OP_COMPOSE_EDIT_CC "edit the CC list"
 OP_COMPOSE_EDIT_DESCRIPTION "edit attachment description"
@@ -24,7 +26,10 @@
 OP_COMPOSE_EDIT_HEADERS "edit the message with headers"
 OP_COMPOSE_EDIT_MESSAGE "edit the message"
 OP_COMPOSE_EDIT_MIME "edit attachment using mailcap entry"
+OP_COMPOSE_EDIT_NEWSGROUPS "edit the newsgroups list"
 OP_COMPOSE_EDIT_REPLY_TO "edit the Reply-To field"
+OP_COMPOSE_EDIT_FOLLOWUP_TO "edit the Followup-To field"
+OP_COMPOSE_EDIT_X_COMMENT_TO "edit the X-Comment-To field"
 OP_COMPOSE_EDIT_SUBJECT "edit the subject of this message"
 OP_COMPOSE_EDIT_TO "edit the TO list"
 OP_CREATE_MAILBOX "create a new mailbox (IMAP only)"
@@ -84,8 +89,13 @@
 OP_FILTER "filter attachment through a shell command"
 OP_FIRST_ENTRY "move to the first entry"
 OP_FLAG_MESSAGE "toggle a message's 'important' flag"
+OP_FOLLOWUP "followup to newsgroup"
+OP_FORWARD_TO_GROUP "forward to newsgroup"
 OP_FORWARD_MESSAGE "forward a message with comments"
 OP_GENERIC_SELECT_ENTRY "select the current entry"
+OP_GET_CHILDREN "get all children of the current message"
+OP_GET_MESSAGE "get message with Message-Id"
+OP_GET_PARENT "get parent of the current message"
 OP_GROUP_REPLY "reply to all recipients"
 OP_HALF_DOWN "scroll down 1/2 page"
 OP_HALF_UP "scroll up 1/2 page"
@@ -93,13 +103,17 @@
 OP_JUMP "jump to an index number"
 OP_LAST_ENTRY "move to the last entry"
 OP_LIST_REPLY "reply to specified mailing list"
+OP_LOAD_ACTIVE "load active file from NNTP server"
 OP_MACRO "execute a macro"
 OP_MAIL "compose a new mail message"
 OP_MAIN_BREAK_THREAD "break the thread in two"
 OP_MAIN_CHANGE_FOLDER "open a different folder"
 OP_MAIN_CHANGE_FOLDER_READONLY "open a different folder in read only mode"
+OP_MAIN_CHANGE_GROUP "open a different newsgroup"
+OP_MAIN_CHANGE_GROUP_READONLY "open a different newsgroup in read only mode"
 OP_MAIN_CLEAR_FLAG "clear a status flag from a message"
 OP_MAIN_DELETE_PATTERN "delete messages matching a pattern"
+OP_RECONSTRUCT_THREAD "reconstruct thread containing current message"
 OP_MAIN_IMAP_FETCH "force retrieval of mail from IMAP server"
 OP_MAIN_FETCH_MAIL "retrieve mail from POP server"
 OP_MAIN_FIRST_MESSAGE "move to the first message"
@@ -134,6 +148,7 @@
 OP_PAGER_SKIP_QUOTED "skip beyond quoted text"
 OP_PAGER_TOP "jump to the top of the message"
 OP_PIPE "pipe message/attachment to a shell command"
+OP_POST "post message to newsgroup"
 OP_PREV_ENTRY "move to the previous entry"
 OP_PREV_LINE "scroll up one line"
 OP_PREV_PAGE "move to the previous page"
@@ -159,17 +174,21 @@
 OP_SIG_SEARCH "search signatures matching a pattern"
 OP_SORT "sort messages"
 OP_SORT_REVERSE "sort messages in reverse order"
+OP_SUBSCRIBE_PATTERN "subscribe to newsgroups matching a pattern"
 OP_TAG "tag the current entry"
 OP_TAG_PREFIX "apply next function to tagged messages"
 OP_TAG_SUBTHREAD "tag the current subthread"
 OP_TAG_THREAD "tag the current thread"
 OP_TOGGLE_NEW "toggle a message's 'new' flag"
+OP_TOGGLE_READ "toggle view of read messages"
 OP_TOGGLE_WRITE "toggle whether the mailbox will be rewritten"
 OP_TOGGLE_MAILBOXES "toggle whether to browse mailboxes or all files"
 OP_TOP_PAGE "move to the top of the page"
+OP_UNCATCHUP "mark all articles in newsgroup as unread"
 OP_UNDELETE "undelete the current entry"
 OP_UNDELETE_THREAD "undelete all messages in thread"
 OP_UNDELETE_SUBTHREAD "undelete all messages in subthread"
+OP_UNSUBSCRIBE_PATTERN "unsubscribe from newsgroups matching a pattern"
 OP_VERSION "show the Mutt version number and date"
 OP_VIEW_ATTACH "view attachment using mailcap entry if necessary"
 OP_VIEW_ATTACHMENTS "show MIME attachments"
diff -uNr mutt-1.4.orig/PATCHES mutt-1.4/PATCHES
--- mutt-1.4.orig/PATCHES	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/PATCHES	Sun Nov  3 21:57:20 2002
@@ -1,3 +1,4 @@
+vvv.nntp
 patch-1.3.28.dw.pgp-hook.3
 vvv.quote
 patch-1.3.27.cd.signatures_menu.2.1
diff -uNr mutt-1.4.orig/acconfig.h mutt-1.4/acconfig.h
--- mutt-1.4.orig/acconfig.h	Tue Jan 15 23:08:12 2002
+++ mutt-1.4/acconfig.h	Sun Nov  3 21:57:20 2002
@@ -14,6 +14,9 @@
  */
 #undef HOMESPOOL
 
+/* Compiling with newsreading support with NNTP */
+#undef USE_NNTP
+
 /* program to use for shell commands */
 #define EXECSHELL "/bin/sh"
 
diff -uNr mutt-1.4.orig/account.c mutt-1.4/account.c
--- mutt-1.4.orig/account.c	Thu Apr 26 15:36:33 2001
+++ mutt-1.4/account.c	Sun Nov  3 21:57:20 2002
@@ -44,6 +44,11 @@
     user = PopUser;
 #endif
   
+#ifdef USE_NNTP
+  if (a1->type == M_ACCT_TYPE_NNTP && NntpUser)
+    user = NntpUser;
+#endif
+
   if (a1->flags & a2->flags & M_ACCT_USER)
     return (!strcmp (a1->user, a2->user));
   if (a1->flags & M_ACCT_USER)
@@ -113,6 +118,16 @@
   }
 #endif
 
+#ifdef USE_NNTP
+  if (account->type == M_ACCT_TYPE_NNTP)
+  {
+    if (account->flags & M_ACCT_SSL)
+      url->scheme = U_NNTPS;
+    else
+      url->scheme = U_NNTP;
+  }
+#endif
+
   url->host = account->host;
   if (account->flags & M_ACCT_PORT)
     url->port = account->port;
@@ -138,6 +153,10 @@
   else if ((account->type == M_ACCT_TYPE_POP) && PopUser)
     strfcpy (account->user, PopUser, sizeof (account->user));
 #endif
+#ifdef USE_NNTP
+  else if ((account->type == M_ACCT_TYPE_NNTP) && NntpUser)
+    strfcpy (account->user, NntpUser, sizeof (account->user));
+#endif
   /* prompt (defaults to unix username), copy into account->user */
   else
   {
@@ -167,6 +186,10 @@
   else if ((account->type == M_ACCT_TYPE_POP) && PopPass)
     strfcpy (account->pass, PopPass, sizeof (account->pass));
 #endif
+#ifdef USE_NNTP
+  else if ((account->type == M_ACCT_TYPE_NNTP) && NntpPass)
+    strfcpy (account->pass, NntpPass, sizeof (account->pass));
+#endif
   else
   {
     snprintf (prompt, sizeof (prompt), _("Password for %s@%s: "),
diff -uNr mutt-1.4.orig/account.h mutt-1.4/account.h
--- mutt-1.4.orig/account.h	Tue Jan  2 10:34:30 2001
+++ mutt-1.4/account.h	Sun Nov  3 21:57:20 2002
@@ -28,6 +28,7 @@
 {
   M_ACCT_TYPE_NONE = 0,
   M_ACCT_TYPE_IMAP,
+  M_ACCT_TYPE_NNTP,
   M_ACCT_TYPE_POP
 };
 
diff -uNr mutt-1.4.orig/aclocal.m4 mutt-1.4/aclocal.m4
--- mutt-1.4.orig/aclocal.m4	Wed May 29 11:29:28 2002
+++ mutt-1.4/aclocal.m4	Sun Nov  3 21:57:23 2002
@@ -1,93 +1,311 @@
-dnl aclocal.m4 generated automatically by aclocal 1.4-p4
+# aclocal.m4 generated automatically by aclocal 1.6.3 -*- Autoconf -*-
 
-dnl Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
-dnl This file is free software; the Free Software Foundation
-dnl gives unlimited permission to copy and/or distribute it,
-dnl with or without modifications, as long as this notice is preserved.
-
-dnl This program is distributed in the hope that it will be useful,
-dnl but WITHOUT ANY WARRANTY, to the extent permitted by law; without
-dnl even the implied warranty of MERCHANTABILITY or FITNESS FOR A
-dnl PARTICULAR PURPOSE.
-
-# Like AC_CONFIG_HEADER, but automatically create stamp file.
-
-AC_DEFUN(AM_CONFIG_HEADER,
-[AC_PREREQ([2.12])
-AC_CONFIG_HEADER([$1])
-dnl When config.status generates a header, we must update the stamp-h file.
-dnl This file resides in the same directory as the config header
-dnl that is generated.  We must strip everything past the first ":",
-dnl and everything past the last "/".
-AC_OUTPUT_COMMANDS(changequote(<<,>>)dnl
-ifelse(patsubst(<<$1>>, <<[^ ]>>, <<>>), <<>>,
-<<test -z "<<$>>CONFIG_HEADERS" || echo timestamp > patsubst(<<$1>>, <<^\([^:]*/\)?.*>>, <<\1>>)stamp-h<<>>dnl>>,
-<<am_indx=1
-for am_file in <<$1>>; do
-  case " <<$>>CONFIG_HEADERS " in
-  *" <<$>>am_file "*<<)>>
-    echo timestamp > `echo <<$>>am_file | sed -e 's%:.*%%' -e 's%[^/]*$%%'`stamp-h$am_indx
-    ;;
-  esac
-  am_indx=`expr "<<$>>am_indx" + 1`
-done<<>>dnl>>)
-changequote([,]))])
-
-# Do all the work for Automake.  This macro actually does too much --
-# some checks are only needed if your package does certain things.
-# But this isn't really a big deal.
+# Copyright 1996, 1997, 1998, 1999, 2000, 2001, 2002
+# Free Software Foundation, Inc.
+# This file is free software; the Free Software Foundation
+# gives unlimited permission to copy and/or distribute it,
+# with or without modifications, as long as this notice is preserved.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
+# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
+# PARTICULAR PURPOSE.
+
+# Like AC_CONFIG_HEADER, but automatically create stamp file. -*- Autoconf -*-
+
+# Copyright 1996, 1997, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+AC_PREREQ([2.52])
+
+# serial 6
+
+# When config.status generates a header, we must update the stamp-h file.
+# This file resides in the same directory as the config header
+# that is generated.  We must strip everything past the first ":",
+# and everything past the last "/".
+
+# _AM_DIRNAME(PATH)
+# -----------------
+# Like AS_DIRNAME, only do it during macro expansion
+AC_DEFUN([_AM_DIRNAME],
+       [m4_if(regexp([$1], [^.*[^/]//*[^/][^/]*/*$]), -1,
+	      m4_if(regexp([$1], [^//\([^/]\|$\)]), -1,
+		    m4_if(regexp([$1], [^/.*]), -1,
+			  [.],
+			  patsubst([$1], [^\(/\).*], [\1])),
+		    patsubst([$1], [^\(//\)\([^/].*\|$\)], [\1])),
+	      patsubst([$1], [^\(.*[^/]\)//*[^/][^/]*/*$], [\1]))[]dnl
+])# _AM_DIRNAME
+
+
+# The stamp files are numbered to have different names.
+# We could number them on a directory basis, but that's additional
+# complications, let's have a unique counter.
+m4_define([_AM_STAMP_Count], [0])
+
+
+# _AM_STAMP(HEADER)
+# -----------------
+# The name of the stamp file for HEADER.
+AC_DEFUN([_AM_STAMP],
+[m4_define([_AM_STAMP_Count], m4_incr(_AM_STAMP_Count))dnl
+AS_ESCAPE(_AM_DIRNAME(patsubst([$1],
+                               [:.*])))/stamp-h[]_AM_STAMP_Count])
+
+
+# _AM_CONFIG_HEADER(HEADER[:SOURCES], COMMANDS, INIT-COMMANDS)
+# ------------------------------------------------------------
+# We used to try to get a real timestamp in stamp-h.  But the fear is that
+# that will cause unnecessary cvs conflicts.
+AC_DEFUN([_AM_CONFIG_HEADER],
+[# Add the stamp file to the list of files AC keeps track of,
+# along with our hook.
+AC_CONFIG_HEADERS([$1],
+                  [# update the timestamp
+echo 'timestamp for $1' >"_AM_STAMP([$1])"
+$2],
+                  [$3])
+])# _AM_CONFIG_HEADER
+
+
+# AM_CONFIG_HEADER(HEADER[:SOURCES]..., COMMANDS, INIT-COMMANDS)
+# --------------------------------------------------------------
+AC_DEFUN([AM_CONFIG_HEADER],
+[AC_FOREACH([_AM_File], [$1], [_AM_CONFIG_HEADER(_AM_File, [$2], [$3])])
+])# AM_CONFIG_HEADER
+
+# Do all the work for Automake.                            -*- Autoconf -*-
+
+# This macro actually does too much some checks are only needed if
+# your package does certain things.  But this isn't really a big deal.
+
+# Copyright 1996, 1997, 1998, 1999, 2000, 2001, 2002
+# Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 8
+
+# There are a few dirty hacks below to avoid letting `AC_PROG_CC' be
+# written in clear, in which case automake, when reading aclocal.m4,
+# will think it sees a *use*, and therefore will trigger all it's
+# C support machinery.  Also note that it means that autoscan, seeing
+# CC etc. in the Makefile, will ask for an AC_PROG_CC use...
+
+
+AC_PREREQ([2.52])
+
+# Autoconf 2.50 wants to disallow AM_ names.  We explicitly allow
+# the ones we care about.
+m4_pattern_allow([^AM_[A-Z]+FLAGS$])dnl
+
+# AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])
+# AM_INIT_AUTOMAKE([OPTIONS])
+# -----------------------------------------------
+# The call with PACKAGE and VERSION arguments is the old style
+# call (pre autoconf-2.50), which is being phased out.  PACKAGE
+# and VERSION should now be passed to AC_INIT and removed from
+# the call to AM_INIT_AUTOMAKE.
+# We support both call styles for the transition.  After
+# the next Automake release, Autoconf can make the AC_INIT
+# arguments mandatory, and then we can depend on a new Autoconf
+# release and drop the old call support.
+AC_DEFUN([AM_INIT_AUTOMAKE],
+[AC_REQUIRE([AM_SET_CURRENT_AUTOMAKE_VERSION])dnl
+ AC_REQUIRE([AC_PROG_INSTALL])dnl
+# test to see if srcdir already configured
+if test "`cd $srcdir && pwd`" != "`pwd`" &&
+   test -f $srcdir/config.status; then
+  AC_MSG_ERROR([source directory already configured; run "make distclean" there first])
+fi
 
-# serial 1
+# Define the identity of the package.
+dnl Distinguish between old-style and new-style calls.
+m4_ifval([$2],
+[m4_ifval([$3], [_AM_SET_OPTION([no-define])])dnl
+ AC_SUBST([PACKAGE], [$1])dnl
+ AC_SUBST([VERSION], [$2])],
+[_AM_SET_OPTIONS([$1])dnl
+ AC_SUBST([PACKAGE], [AC_PACKAGE_TARNAME])dnl
+ AC_SUBST([VERSION], [AC_PACKAGE_VERSION])])dnl
+
+_AM_IF_OPTION([no-define],,
+[AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE", [Name of package])
+ AC_DEFINE_UNQUOTED(VERSION, "$VERSION", [Version number of package])])dnl
+
+# Some tools Automake needs.
+AC_REQUIRE([AM_SANITY_CHECK])dnl
+AC_REQUIRE([AC_ARG_PROGRAM])dnl
+AM_MISSING_PROG(ACLOCAL, aclocal-${am__api_version})
+AM_MISSING_PROG(AUTOCONF, autoconf)
+AM_MISSING_PROG(AUTOMAKE, automake-${am__api_version})
+AM_MISSING_PROG(AUTOHEADER, autoheader)
+AM_MISSING_PROG(MAKEINFO, makeinfo)
+AM_MISSING_PROG(AMTAR, tar)
+AM_PROG_INSTALL_SH
+AM_PROG_INSTALL_STRIP
+# We need awk for the "check" target.  The system "awk" is bad on
+# some platforms.
+AC_REQUIRE([AC_PROG_AWK])dnl
+AC_REQUIRE([AC_PROG_MAKE_SET])dnl
+
+_AM_IF_OPTION([no-dependencies],,
+[AC_PROVIDE_IFELSE([AC_PROG_][CC],
+                  [_AM_DEPENDENCIES(CC)],
+                  [define([AC_PROG_][CC],
+                          defn([AC_PROG_][CC])[_AM_DEPENDENCIES(CC)])])dnl
+AC_PROVIDE_IFELSE([AC_PROG_][CXX],
+                  [_AM_DEPENDENCIES(CXX)],
+                  [define([AC_PROG_][CXX],
+                          defn([AC_PROG_][CXX])[_AM_DEPENDENCIES(CXX)])])dnl
+])
+])
 
-dnl Usage:
-dnl AM_INIT_AUTOMAKE(package,version, [no-define])
+# Copyright 2002  Free Software Foundation, Inc.
 
-AC_DEFUN(AM_INIT_AUTOMAKE,
-[AC_REQUIRE([AC_PROG_INSTALL])
-PACKAGE=[$1]
-AC_SUBST(PACKAGE)
-VERSION=[$2]
-AC_SUBST(VERSION)
-dnl test to see if srcdir already configured
-if test "`cd $srcdir && pwd`" != "`pwd`" && test -f $srcdir/config.status; then
-  AC_MSG_ERROR([source directory already configured; run "make distclean" there first])
-fi
-ifelse([$3],,
-AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE", [Name of package])
-AC_DEFINE_UNQUOTED(VERSION, "$VERSION", [Version number of package]))
-AC_REQUIRE([AM_SANITY_CHECK])
-AC_REQUIRE([AC_ARG_PROGRAM])
-dnl FIXME This is truly gross.
-missing_dir=`cd $ac_aux_dir && pwd`
-AM_MISSING_PROG(ACLOCAL, aclocal, $missing_dir)
-AM_MISSING_PROG(AUTOCONF, autoconf, $missing_dir)
-AM_MISSING_PROG(AUTOMAKE, automake, $missing_dir)
-AM_MISSING_PROG(AUTOHEADER, autoheader, $missing_dir)
-AM_MISSING_PROG(MAKEINFO, makeinfo, $missing_dir)
-AC_REQUIRE([AC_PROG_MAKE_SET])])
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+
+# AM_AUTOMAKE_VERSION(VERSION)
+# ----------------------------
+# Automake X.Y traces this macro to ensure aclocal.m4 has been
+# generated from the m4 files accompanying Automake X.Y.
+AC_DEFUN([AM_AUTOMAKE_VERSION],[am__api_version="1.6"])
+
+# AM_SET_CURRENT_AUTOMAKE_VERSION
+# -------------------------------
+# Call AM_AUTOMAKE_VERSION so it can be traced.
+# This function is AC_REQUIREd by AC_INIT_AUTOMAKE.
+AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
+	 [AM_AUTOMAKE_VERSION([1.6.3])])
+
+# Helper functions for option handling.                    -*- Autoconf -*-
+
+# Copyright 2001, 2002  Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 2
+
+# _AM_MANGLE_OPTION(NAME)
+# -----------------------
+AC_DEFUN([_AM_MANGLE_OPTION],
+[[_AM_OPTION_]m4_bpatsubst($1, [[^a-zA-Z0-9_]], [_])])
+
+# _AM_SET_OPTION(NAME)
+# ------------------------------
+# Set option NAME.  Presently that only means defining a flag for this option.
+AC_DEFUN([_AM_SET_OPTION],
+[m4_define(_AM_MANGLE_OPTION([$1]), 1)])
+
+# _AM_SET_OPTIONS(OPTIONS)
+# ----------------------------------
+# OPTIONS is a space-separated list of Automake options.
+AC_DEFUN([_AM_SET_OPTIONS],
+[AC_FOREACH([_AM_Option], [$1], [_AM_SET_OPTION(_AM_Option)])])
+
+# _AM_IF_OPTION(OPTION, IF-SET, [IF-NOT-SET])
+# -------------------------------------------
+# Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.
+AC_DEFUN([_AM_IF_OPTION],
+[m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])
 
 #
 # Check to make sure that the build environment is sane.
 #
 
-AC_DEFUN(AM_SANITY_CHECK,
+# Copyright 1996, 1997, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 3
+
+# AM_SANITY_CHECK
+# ---------------
+AC_DEFUN([AM_SANITY_CHECK],
 [AC_MSG_CHECKING([whether build environment is sane])
 # Just in case
 sleep 1
-echo timestamp > conftestfile
+echo timestamp > conftest.file
 # Do `set' in a subshell so we don't clobber the current shell's
 # arguments.  Must try -L first in case configure is actually a
 # symlink; some systems play weird games with the mod time of symlinks
 # (eg FreeBSD returns the mod time of the symlink's containing
 # directory).
 if (
-   set X `ls -Lt $srcdir/configure conftestfile 2> /dev/null`
-   if test "[$]*" = "X"; then
+   set X `ls -Lt $srcdir/configure conftest.file 2> /dev/null`
+   if test "$[*]" = "X"; then
       # -L didn't work.
-      set X `ls -t $srcdir/configure conftestfile`
+      set X `ls -t $srcdir/configure conftest.file`
    fi
-   if test "[$]*" != "X $srcdir/configure conftestfile" \
-      && test "[$]*" != "X conftestfile $srcdir/configure"; then
+   rm -f conftest.file
+   if test "$[*]" != "X $srcdir/configure conftest.file" \
+      && test "$[*]" != "X conftest.file $srcdir/configure"; then
 
       # If neither matched, then we have a broken ls.  This can happen
       # if, for instance, CONFIG_SHELL is bash and it inherits a
@@ -97,7 +315,7 @@
 alias in your environment])
    fi
 
-   test "[$]2" = conftestfile
+   test "$[2]" = conftest.file
    )
 then
    # Ok.
@@ -106,24 +324,515 @@
    AC_MSG_ERROR([newly created file is older than distributed files!
 Check your system clock])
 fi
-rm -f conftest*
 AC_MSG_RESULT(yes)])
 
-dnl AM_MISSING_PROG(NAME, PROGRAM, DIRECTORY)
-dnl The program must properly implement --version.
-AC_DEFUN(AM_MISSING_PROG,
-[AC_MSG_CHECKING(for working $2)
-# Run test in a subshell; some versions of sh will print an error if
-# an executable is not found, even if stderr is redirected.
-# Redirect stdin to placate older versions of autoconf.  Sigh.
-if ($2 --version) < /dev/null > /dev/null 2>&1; then
-   $1=$2
-   AC_MSG_RESULT(found)
+#  -*- Autoconf -*-
+
+
+# Copyright 1997, 1999, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 3
+
+# AM_MISSING_PROG(NAME, PROGRAM)
+# ------------------------------
+AC_DEFUN([AM_MISSING_PROG],
+[AC_REQUIRE([AM_MISSING_HAS_RUN])
+$1=${$1-"${am_missing_run}$2"}
+AC_SUBST($1)])
+
+
+# AM_MISSING_HAS_RUN
+# ------------------
+# Define MISSING if not defined so far and test if it supports --run.
+# If it does, set am_missing_run to use it, otherwise, to nothing.
+AC_DEFUN([AM_MISSING_HAS_RUN],
+[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
+test x"${MISSING+set}" = xset || MISSING="\${SHELL} $am_aux_dir/missing"
+# Use eval to expand $SHELL
+if eval "$MISSING --run true"; then
+  am_missing_run="$MISSING --run "
 else
-   $1="$3/missing $2"
-   AC_MSG_RESULT(missing)
+  am_missing_run=
+  AC_MSG_WARN([`missing' script is too old or missing])
 fi
-AC_SUBST($1)])
+])
+
+# AM_AUX_DIR_EXPAND
+
+# Copyright 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets
+# $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to
+# `$srcdir', `$srcdir/..', or `$srcdir/../..'.
+#
+# Of course, Automake must honor this variable whenever it calls a
+# tool from the auxiliary directory.  The problem is that $srcdir (and
+# therefore $ac_aux_dir as well) can be either absolute or relative,
+# depending on how configure is run.  This is pretty annoying, since
+# it makes $ac_aux_dir quite unusable in subdirectories: in the top
+# source directory, any form will work fine, but in subdirectories a
+# relative path needs to be adjusted first.
+#
+# $ac_aux_dir/missing
+#    fails when called from a subdirectory if $ac_aux_dir is relative
+# $top_srcdir/$ac_aux_dir/missing
+#    fails if $ac_aux_dir is absolute,
+#    fails when called from a subdirectory in a VPATH build with
+#          a relative $ac_aux_dir
+#
+# The reason of the latter failure is that $top_srcdir and $ac_aux_dir
+# are both prefixed by $srcdir.  In an in-source build this is usually
+# harmless because $srcdir is `.', but things will broke when you
+# start a VPATH build or use an absolute $srcdir.
+#
+# So we could use something similar to $top_srcdir/$ac_aux_dir/missing,
+# iff we strip the leading $srcdir from $ac_aux_dir.  That would be:
+#   am_aux_dir='\$(top_srcdir)/'`expr "$ac_aux_dir" : "$srcdir//*\(.*\)"`
+# and then we would define $MISSING as
+#   MISSING="\${SHELL} $am_aux_dir/missing"
+# This will work as long as MISSING is not called from configure, because
+# unfortunately $(top_srcdir) has no meaning in configure.
+# However there are other variables, like CC, which are often used in
+# configure, and could therefore not use this "fixed" $ac_aux_dir.
+#
+# Another solution, used here, is to always expand $ac_aux_dir to an
+# absolute PATH.  The drawback is that using absolute paths prevent a
+# configured tree to be moved without reconfiguration.
+
+# Rely on autoconf to set up CDPATH properly.
+AC_PREREQ([2.50])
+
+AC_DEFUN([AM_AUX_DIR_EXPAND], [
+# expand $ac_aux_dir to an absolute path
+am_aux_dir=`cd $ac_aux_dir && pwd`
+])
+
+# AM_PROG_INSTALL_SH
+# ------------------
+# Define $install_sh.
+
+# Copyright 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+AC_DEFUN([AM_PROG_INSTALL_SH],
+[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
+install_sh=${install_sh-"$am_aux_dir/install-sh"}
+AC_SUBST(install_sh)])
+
+# AM_PROG_INSTALL_STRIP
+
+# Copyright 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# One issue with vendor `install' (even GNU) is that you can't
+# specify the program used to strip binaries.  This is especially
+# annoying in cross-compiling environments, where the build's strip
+# is unlikely to handle the host's binaries.
+# Fortunately install-sh will honor a STRIPPROG variable, so we
+# always use install-sh in `make install-strip', and initialize
+# STRIPPROG with the value of the STRIP variable (set by the user).
+AC_DEFUN([AM_PROG_INSTALL_STRIP],
+[AC_REQUIRE([AM_PROG_INSTALL_SH])dnl
+# Installed binaries are usually stripped using `strip' when the user
+# run `make install-strip'.  However `strip' might not be the right
+# tool to use in cross-compilation environments, therefore Automake
+# will honor the `STRIP' environment variable to overrule this program.
+dnl Don't test for $cross_compiling = yes, because it might be `maybe'.
+if test "$cross_compiling" != no; then
+  AC_CHECK_TOOL([STRIP], [strip], :)
+fi
+INSTALL_STRIP_PROGRAM="\${SHELL} \$(install_sh) -c -s"
+AC_SUBST([INSTALL_STRIP_PROGRAM])])
+
+# serial 4						-*- Autoconf -*-
+
+# Copyright 1999, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+
+# There are a few dirty hacks below to avoid letting `AC_PROG_CC' be
+# written in clear, in which case automake, when reading aclocal.m4,
+# will think it sees a *use*, and therefore will trigger all it's
+# C support machinery.  Also note that it means that autoscan, seeing
+# CC etc. in the Makefile, will ask for an AC_PROG_CC use...
+
+
+
+# _AM_DEPENDENCIES(NAME)
+# ----------------------
+# See how the compiler implements dependency checking.
+# NAME is "CC", "CXX", "GCJ", or "OBJC".
+# We try a few techniques and use that to set a single cache variable.
+#
+# We don't AC_REQUIRE the corresponding AC_PROG_CC since the latter was
+# modified to invoke _AM_DEPENDENCIES(CC); we would have a circular
+# dependency, and given that the user is not expected to run this macro,
+# just rely on AC_PROG_CC.
+AC_DEFUN([_AM_DEPENDENCIES],
+[AC_REQUIRE([AM_SET_DEPDIR])dnl
+AC_REQUIRE([AM_OUTPUT_DEPENDENCY_COMMANDS])dnl
+AC_REQUIRE([AM_MAKE_INCLUDE])dnl
+AC_REQUIRE([AM_DEP_TRACK])dnl
+
+ifelse([$1], CC,   [depcc="$CC"   am_compiler_list=],
+       [$1], CXX,  [depcc="$CXX"  am_compiler_list=],
+       [$1], OBJC, [depcc="$OBJC" am_compiler_list='gcc3 gcc'],
+       [$1], GCJ,  [depcc="$GCJ"  am_compiler_list='gcc3 gcc'],
+                   [depcc="$$1"   am_compiler_list=])
+
+AC_CACHE_CHECK([dependency style of $depcc],
+               [am_cv_$1_dependencies_compiler_type],
+[if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
+  # We make a subdir and do the tests there.  Otherwise we can end up
+  # making bogus files that we don't know about and never remove.  For
+  # instance it was reported that on HP-UX the gcc test will end up
+  # making a dummy file named `D' -- because `-MD' means `put the output
+  # in D'.
+  mkdir conftest.dir
+  # Copy depcomp to subdir because otherwise we won't find it if we're
+  # using a relative directory.
+  cp "$am_depcomp" conftest.dir
+  cd conftest.dir
+
+  am_cv_$1_dependencies_compiler_type=none
+  if test "$am_compiler_list" = ""; then
+     am_compiler_list=`sed -n ['s/^#*\([a-zA-Z0-9]*\))$/\1/p'] < ./depcomp`
+  fi
+  for depmode in $am_compiler_list; do
+    # We need to recreate these files for each test, as the compiler may
+    # overwrite some of them when testing with obscure command lines.
+    # This happens at least with the AIX C compiler.
+    echo '#include "conftest.h"' > conftest.c
+    echo 'int i;' > conftest.h
+    echo "${am__include} ${am__quote}conftest.Po${am__quote}" > confmf
+
+    case $depmode in
+    nosideeffect)
+      # after this tag, mechanisms are not by side-effect, so they'll
+      # only be used when explicitly requested
+      if test "x$enable_dependency_tracking" = xyes; then
+	continue
+      else
+	break
+      fi
+      ;;
+    none) break ;;
+    esac
+    # We check with `-c' and `-o' for the sake of the "dashmstdout"
+    # mode.  It turns out that the SunPro C++ compiler does not properly
+    # handle `-M -o', and we need to detect this.
+    if depmode=$depmode \
+       source=conftest.c object=conftest.o \
+       depfile=conftest.Po tmpdepfile=conftest.TPo \
+       $SHELL ./depcomp $depcc -c conftest.c -o conftest.o >/dev/null 2>&1 &&
+       grep conftest.h conftest.Po > /dev/null 2>&1 &&
+       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then
+      am_cv_$1_dependencies_compiler_type=$depmode
+      break
+    fi
+  done
+
+  cd ..
+  rm -rf conftest.dir
+else
+  am_cv_$1_dependencies_compiler_type=none
+fi
+])
+AC_SUBST([$1DEPMODE], [depmode=$am_cv_$1_dependencies_compiler_type])
+])
+
+
+# AM_SET_DEPDIR
+# -------------
+# Choose a directory name for dependency files.
+# This macro is AC_REQUIREd in _AM_DEPENDENCIES
+AC_DEFUN([AM_SET_DEPDIR],
+[rm -f .deps 2>/dev/null
+mkdir .deps 2>/dev/null
+if test -d .deps; then
+  DEPDIR=.deps
+else
+  # MS-DOS does not allow filenames that begin with a dot.
+  DEPDIR=_deps
+fi
+rmdir .deps 2>/dev/null
+AC_SUBST([DEPDIR])
+])
+
+
+# AM_DEP_TRACK
+# ------------
+AC_DEFUN([AM_DEP_TRACK],
+[AC_ARG_ENABLE(dependency-tracking,
+[  --disable-dependency-tracking Speeds up one-time builds
+  --enable-dependency-tracking  Do not reject slow dependency extractors])
+if test "x$enable_dependency_tracking" != xno; then
+  am_depcomp="$ac_aux_dir/depcomp"
+  AMDEPBACKSLASH='\'
+fi
+AM_CONDITIONAL([AMDEP], [test "x$enable_dependency_tracking" != xno])
+AC_SUBST([AMDEPBACKSLASH])
+])
+
+# Generate code to set up dependency tracking.   -*- Autoconf -*-
+
+# Copyright 1999, 2000, 2001, 2002 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+#serial 2
+
+# _AM_OUTPUT_DEPENDENCY_COMMANDS
+# ------------------------------
+AC_DEFUN([_AM_OUTPUT_DEPENDENCY_COMMANDS],
+[for mf in $CONFIG_FILES; do
+  # Strip MF so we end up with the name of the file.
+  mf=`echo "$mf" | sed -e 's/:.*$//'`
+  # Check whether this is an Automake generated Makefile or not.
+  # We used to match only the files named `Makefile.in', but
+  # some people rename them; so instead we look at the file content.
+  # Grep'ing the first line is not enough: some people post-process
+  # each Makefile.in and add a new line on top of each file to say so.
+  # So let's grep whole file.
+  if grep '^#.*generated by automake' $mf > /dev/null 2>&1; then
+    dirpart=`AS_DIRNAME("$mf")`
+  else
+    continue
+  fi
+  grep '^DEP_FILES *= *[[^ @%:@]]' < "$mf" > /dev/null || continue
+  # Extract the definition of DEP_FILES from the Makefile without
+  # running `make'.
+  DEPDIR=`sed -n -e '/^DEPDIR = / s///p' < "$mf"`
+  test -z "$DEPDIR" && continue
+  # When using ansi2knr, U may be empty or an underscore; expand it
+  U=`sed -n -e '/^U = / s///p' < "$mf"`
+  test -d "$dirpart/$DEPDIR" || mkdir "$dirpart/$DEPDIR"
+  # We invoke sed twice because it is the simplest approach to
+  # changing $(DEPDIR) to its actual value in the expansion.
+  for file in `sed -n -e '
+    /^DEP_FILES = .*\\\\$/ {
+      s/^DEP_FILES = //
+      :loop
+	s/\\\\$//
+	p
+	n
+	/\\\\$/ b loop
+      p
+    }
+    /^DEP_FILES = / s/^DEP_FILES = //p' < "$mf" | \
+       sed -e 's/\$(DEPDIR)/'"$DEPDIR"'/g' -e 's/\$U/'"$U"'/g'`; do
+    # Make sure the directory exists.
+    test -f "$dirpart/$file" && continue
+    fdir=`AS_DIRNAME(["$file"])`
+    AS_MKDIR_P([$dirpart/$fdir])
+    # echo "creating $dirpart/$file"
+    echo '# dummy' > "$dirpart/$file"
+  done
+done
+])# _AM_OUTPUT_DEPENDENCY_COMMANDS
+
+
+# AM_OUTPUT_DEPENDENCY_COMMANDS
+# -----------------------------
+# This macro should only be invoked once -- use via AC_REQUIRE.
+#
+# This code is only required when automatic dependency tracking
+# is enabled.  FIXME.  This creates each `.P' file that we will
+# need in order to bootstrap the dependency handling code.
+AC_DEFUN([AM_OUTPUT_DEPENDENCY_COMMANDS],
+[AC_CONFIG_COMMANDS([depfiles],
+     [test x"$AMDEP_TRUE" != x"" || _AM_OUTPUT_DEPENDENCY_COMMANDS],
+     [AMDEP_TRUE="$AMDEP_TRUE" ac_aux_dir="$ac_aux_dir"])
+])
+
+# Copyright 2001 Free Software Foundation, Inc.             -*- Autoconf -*-
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 2
+
+# AM_MAKE_INCLUDE()
+# -----------------
+# Check to see how make treats includes.
+AC_DEFUN([AM_MAKE_INCLUDE],
+[am_make=${MAKE-make}
+cat > confinc << 'END'
+doit:
+	@echo done
+END
+# If we don't find an include directive, just comment out the code.
+AC_MSG_CHECKING([for style of include used by $am_make])
+am__include="#"
+am__quote=
+_am_result=none
+# First try GNU make style include.
+echo "include confinc" > confmf
+# We grep out `Entering directory' and `Leaving directory'
+# messages which can occur if `w' ends up in MAKEFLAGS.
+# In particular we don't look at `^make:' because GNU make might
+# be invoked under some other name (usually "gmake"), in which
+# case it prints its new name instead of `make'.
+if test "`$am_make -s -f confmf 2> /dev/null | fgrep -v 'ing directory'`" = "done"; then
+   am__include=include
+   am__quote=
+   _am_result=GNU
+fi
+# Now try BSD make style include.
+if test "$am__include" = "#"; then
+   echo '.include "confinc"' > confmf
+   if test "`$am_make -s -f confmf 2> /dev/null`" = "done"; then
+      am__include=.include
+      am__quote="\""
+      _am_result=BSD
+   fi
+fi
+AC_SUBST(am__include)
+AC_SUBST(am__quote)
+AC_MSG_RESULT($_am_result)
+rm -f confinc confmf
+])
+
+# AM_CONDITIONAL                                              -*- Autoconf -*-
+
+# Copyright 1997, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+# serial 5
+
+AC_PREREQ(2.52)
+
+# AM_CONDITIONAL(NAME, SHELL-CONDITION)
+# -------------------------------------
+# Define a conditional.
+AC_DEFUN([AM_CONDITIONAL],
+[ifelse([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],
+        [$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl
+AC_SUBST([$1_TRUE])
+AC_SUBST([$1_FALSE])
+if $2; then
+  $1_TRUE=
+  $1_FALSE='#'
+else
+  $1_TRUE='#'
+  $1_FALSE=
+fi
+AC_CONFIG_COMMANDS_PRE(
+[if test -z "${$1_TRUE}" && test -z "${$1_FALSE}"; then
+  AC_MSG_ERROR([conditional \"$1\" was never defined.
+Usually this means the macro was only invoked conditionally.])
+fi])])
 
 #serial 1
 # This test replaces the one in autoconf.
@@ -144,9 +853,26 @@
 )
 
 
+# Copyright 1996, 1997, 1998, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
 # serial 1
 
-AC_DEFUN(AM_C_PROTOTYPES,
+AC_DEFUN([AM_C_PROTOTYPES],
 [AC_REQUIRE([AM_PROG_CC_STDC])
 AC_REQUIRE([AC_PROG_CPP])
 AC_MSG_CHECKING([for function prototypes])
@@ -157,15 +883,32 @@
 else
   AC_MSG_RESULT(no)
   U=_ ANSI2KNR=./ansi2knr
-  # Ensure some checks needed by ansi2knr itself.
-  AC_HEADER_STDC
-  AC_CHECK_HEADERS(string.h)
 fi
+# Ensure some checks needed by ansi2knr itself.
+AC_HEADER_STDC
+AC_CHECK_HEADERS(string.h)
 AC_SUBST(U)dnl
 AC_SUBST(ANSI2KNR)dnl
 ])
 
 
+# Copyright 1996, 1997, 1999, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
 # serial 1
 
 # @defmac AC_PROG_CC_STDC
@@ -183,7 +926,7 @@
 # program @code{ansi2knr}, which comes with Ghostscript.
 # @end defmac
 
-AC_DEFUN(AM_PROG_CC_STDC,
+AC_DEFUN([AM_PROG_CC_STDC],
 [AC_REQUIRE([AC_PROG_CC])
 AC_BEFORE([$0], [AC_C_INLINE])
 AC_BEFORE([$0], [AC_C_CONST])
@@ -193,7 +936,7 @@
 dnl FIXME: can't do this because then AC_AIX won't work due to a
 dnl circular dependency.
 dnl AC_BEFORE([$0], [AC_PROG_CPP])
-AC_MSG_CHECKING(for ${CC-cc} option to accept ANSI C)
+AC_MSG_CHECKING([for ${CC-cc} option to accept ANSI C])
 AC_CACHE_VAL(am_cv_prog_cc_stdc,
 [am_cv_prog_cc_stdc=no
 ac_save_CC="$CC"
@@ -201,9 +944,10 @@
 # breaks some systems' header files.
 # AIX			-qlanglvl=ansi
 # Ultrix and OSF/1	-std1
-# HP-UX			-Aa -D_HPUX_SOURCE
+# HP-UX 10.20 and later	-Ae
+# HP-UX older versions	-Aa -D_HPUX_SOURCE
 # SVR4			-Xc -D__EXTENSIONS__
-for ac_arg in "" -qlanglvl=ansi -std1 "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
 do
   CC="$ac_save_CC $ac_arg"
   AC_TRY_COMPILE(
@@ -245,7 +989,7 @@
 if test -z "$am_cv_prog_cc_stdc"; then
   AC_MSG_RESULT([none needed])
 else
-  AC_MSG_RESULT($am_cv_prog_cc_stdc)
+  AC_MSG_RESULT([$am_cv_prog_cc_stdc])
 fi
 case "x$am_cv_prog_cc_stdc" in
   x|xno) ;;
@@ -400,19 +1144,6 @@
 ])dnl
 dnl ---------------------------------------------------------------------------
 
-# Define a conditional.
-
-AC_DEFUN(AM_CONDITIONAL,
-[AC_SUBST($1_TRUE)
-AC_SUBST($1_FALSE)
-if $2; then
-  $1_TRUE=
-  $1_FALSE='#'
-else
-  $1_TRUE='#'
-  $1_FALSE=
-fi])
-
 # gssapi.m4: Find GSSAPI libraries in either Heimdal or MIT implementations
 # Brendan Cully <brendan@kublai.com> 20010529
 
@@ -925,7 +1656,7 @@
 # Test for the GNU C Library, version 2.1 or newer.
 # From Bruno Haible.
 
-AC_DEFUN([jm_GLIBC21],
+AC_DEFUN([MUTT_jm_GLIBC21],
   [
     AC_CACHE_CHECK(whether we are using the GNU C Library 2.1 or newer,
       ac_cv_gnu_library_2_1,
@@ -1067,30 +1798,3 @@
     fi
   fi])
 
-#serial 2
-
-# Test for the GNU C Library, version 2.1 or newer.
-# From Bruno Haible.
-
-AC_DEFUN([MUTT_jm_GLIBC21],
-  [
-    AC_CACHE_CHECK(whether we are using the GNU C Library 2.1 or newer,
-      ac_cv_gnu_library_2_1,
-      [AC_EGREP_CPP([Lucky GNU user],
-	[
-#include <features.h>
-#ifdef __GNU_LIBRARY__
- #if (__GLIBC__ == 2 && __GLIBC_MINOR__ >= 1) || (__GLIBC__ > 2)
-  Lucky GNU user
- #endif
-#endif
-	],
-	ac_cv_gnu_library_2_1=yes,
-	ac_cv_gnu_library_2_1=no)
-      ]
-    )
-    AC_SUBST(GLIBC21)
-    GLIBC21="$ac_cv_gnu_library_2_1"
-  ]
-)
-
diff -uNr mutt-1.4.orig/attach.h mutt-1.4/attach.h
--- mutt-1.4.orig/attach.h	Tue Sep 11 13:20:34 2001
+++ mutt-1.4/attach.h	Sun Nov  3 21:57:20 2002
@@ -30,5 +30,5 @@
 
 void mutt_attach_bounce (FILE *, HEADER *, ATTACHPTR **, short, BODY *);
 void mutt_attach_resend (FILE *, HEADER *, ATTACHPTR **, short, BODY *);
-void mutt_attach_forward (FILE *, HEADER *, ATTACHPTR **, short, BODY *);
+void mutt_attach_forward (FILE *, HEADER *, ATTACHPTR **, short, BODY *, int);
 void mutt_attach_reply (FILE *, HEADER *, ATTACHPTR **, short, BODY *, int);
diff -uNr mutt-1.4.orig/browser.c mutt-1.4/browser.c
--- mutt-1.4.orig/browser.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/browser.c	Sun Nov  3 22:00:14 2002
@@ -27,6 +27,9 @@
 #ifdef USE_IMAP
 #include "imap.h"
 #endif
+#ifdef USE_NNTP
+#include "nntp.h"
+#endif
 
 #include <stdlib.h>
 #include <dirent.h>
@@ -44,6 +47,19 @@
   { NULL }
 };
 
+#ifdef USE_NNTP
+static struct mapping_t FolderNewsHelp[] = {
+  { N_("Exit"),        OP_EXIT },
+  { N_("List"),        OP_TOGGLE_MAILBOXES },
+  { N_("Subscribe"),   OP_BROWSER_SUBSCRIBE },
+  { N_("Unsubscribe"), OP_BROWSER_UNSUBSCRIBE },
+  { N_("Catchup"),     OP_CATCHUP },
+  { N_("Mask"),        OP_ENTER_MASK },
+  { N_("Help"),        OP_HELP },
+  { NULL }
+};
+#endif
+
 typedef struct folder_t
 {
   struct folder_file *ff;
@@ -109,9 +125,17 @@
     case SORT_ORDER:
       return;
     case SORT_DATE:
+#ifdef USE_NNTP
+      if (option (OPTNEWS))
+	return;
+#endif
       f = browser_compare_date;
       break;
     case SORT_SIZE:
+#ifdef USE_NNTP
+      if (option (OPTNEWS))
+	return;
+#endif
       f = browser_compare_size;
       break;
     case SORT_SUBJECT:
@@ -299,8 +323,106 @@
   return (src);
 }
 
+#ifdef USE_NNTP
+static const char *
+newsgroup_format_str (char *dest, size_t destlen, char op, const char *src,
+		       const char *fmt, const char *ifstring, const char *elsestring,
+		       unsigned long data, format_flag flags)
+{
+  char fn[SHORT_STRING], tmp[SHORT_STRING];
+  FOLDER *folder = (FOLDER *) data;
+
+  switch (op)
+  {
+    case 'C':
+      snprintf (tmp, sizeof (tmp), "%%%sd", fmt);
+      snprintf (dest, destlen, tmp, folder->num + 1);
+      break;
+      
+    case 'f':
+      strncpy (fn, folder->ff->name, sizeof(fn) - 1);
+      snprintf (tmp, sizeof (tmp), "%%%ss", fmt);
+      snprintf (dest, destlen, tmp, fn);
+      break;
+
+    case 'N':
+      snprintf (tmp, sizeof (tmp), "%%%sc", fmt);
+      if (folder->ff->nd->subscribed)
+	snprintf (dest, destlen, tmp, ' ');
+      else
+	snprintf (dest, destlen, tmp, folder->ff->new ? 'N' : 'u');
+      break;
+
+    case 'M':
+      snprintf (tmp, sizeof (tmp), "%%%sc", fmt);
+      if (folder->ff->nd->deleted)
+	snprintf (dest, destlen, tmp, 'D');
+      else
+	snprintf (dest, destlen, tmp, folder->ff->nd->allowed ? ' ' : '-');
+      break;
+
+    case 's':
+      if (flags & M_FORMAT_OPTIONAL)
+      {
+	if (folder->ff->nd->unread != 0)
+	  mutt_FormatString (dest, destlen, ifstring, newsgroup_format_str,
+		data, flags);
+	else
+	  mutt_FormatString (dest, destlen, elsestring, newsgroup_format_str,
+		data, flags);
+      }
+      else if (Context && Context->data == folder->ff->nd)
+      {
+	snprintf (tmp, sizeof (tmp), "%%%sd", fmt);
+	snprintf (dest, destlen, tmp, Context->unread);
+      }
+      else
+      {
+	snprintf (tmp, sizeof (tmp), "%%%sd", fmt);
+	snprintf (dest, destlen, tmp, folder->ff->nd->unread);
+      }
+      break;
+
+    case 'n':
+      if (Context && Context->data == folder->ff->nd)
+      {
+	snprintf (tmp, sizeof (tmp), "%%%sd", fmt);
+	snprintf (dest, destlen, tmp, Context->new);
+      }
+      else if (option (OPTMARKOLD) &&
+		folder->ff->nd->lastCached >= folder->ff->nd->firstMessage &&
+		folder->ff->nd->lastCached <= folder->ff->nd->lastMessage)
+      {
+	snprintf (tmp, sizeof (tmp), "%%%sd", fmt);
+	snprintf (dest, destlen, tmp, folder->ff->nd->lastMessage - folder->ff->nd->lastCached);
+      }
+      else
+      {
+	snprintf (tmp, sizeof (tmp), "%%%sd", fmt);
+	snprintf (dest, destlen, tmp, folder->ff->nd->unread);
+      }
+      break;
+
+    case 'd':
+      if (folder->ff->nd->desc != NULL)
+      {
+	snprintf (tmp, sizeof (tmp), "%%%ss", fmt);
+	snprintf (dest, destlen, tmp, folder->ff->nd->desc);
+      }
+      else
+      {
+	snprintf (tmp, sizeof (tmp), "%%%ss", fmt);
+	snprintf (dest, destlen, tmp, "");
+      }
+      break;
+  }
+  return (src);
+}
+#endif /* USE_NNTP */
+
 static void add_folder (MUTTMENU *m, struct browser_state *state,
-			const char *name, const struct stat *s, int new)
+			const char *name, const struct stat *s,
+			void *data, int new)
 {
   if (state->entrylen == state->entrymax)
   {
@@ -329,6 +451,10 @@
 #ifdef USE_IMAP
   (state->entry)[state->entrylen].imap = 0;
 #endif
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+    (state->entry)[state->entrylen].nd = (NNTP_DATA *) data;
+#endif
   (state->entrylen)++;
 }
 
@@ -344,9 +470,35 @@
     menu->data = state->entry;
 }
 
+/* get list of all files/newsgroups with mask */
 static int examine_directory (MUTTMENU *menu, struct browser_state *state,
 			      char *d, const char *prefix)
 {
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+  {
+    LIST *tmp;
+    NNTP_DATA *data;
+    NNTP_SERVER *news = CurrentNewsSrv;
+
+/*  mutt_buffy_check (0); */
+    init_state (state, menu);
+
+    for (tmp = news->list; tmp; tmp = tmp->next)
+    {
+      if (!(data = (NNTP_DATA *)tmp->data))
+	continue;
+      if (prefix && *prefix && strncmp (prefix, data->group,
+	    strlen (prefix)) != 0)
+	continue;
+      if (!((regexec (Mask.rx, data->group, 0, NULL, 0) == 0) ^ Mask.not))
+	continue;
+      add_folder (menu, state, data->group, NULL, data, data->new);
+    }
+  }
+  else
+#endif /* USE_NNTP */
+  {
   struct stat s;
   DIR *dp;
   struct dirent *de;
@@ -411,60 +563,95 @@
     tmp = Incoming;
     while (tmp && mutt_strcmp (buffer, tmp->path))
       tmp = tmp->next;
-    add_folder (menu, state, de->d_name, &s, (tmp) ? tmp->new : 0);
+    add_folder (menu, state, de->d_name, &s, NULL, (tmp) ? tmp->new : 0);
+  }
+  closedir (dp);
   }
-  closedir (dp);  
   browser_sort (state);
   return 0;
 }
 
+/* get list of mailboxes/subscribed newsgroups */
 static int examine_mailboxes (MUTTMENU *menu, struct browser_state *state)
 {
   struct stat s;
   char buffer[LONG_STRING];
-  BUFFY *tmp = Incoming;
 
-  if (!Incoming)
-    return (-1);
-  mutt_buffy_check (0);
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+  {
+    LIST *tmp;
+    NNTP_DATA *data;
+    NNTP_SERVER *news = CurrentNewsSrv;
 
-  init_state (state, menu);
+/*  mutt_buffy_check (0); */
+    init_state (state, menu);
 
-  do
-  {
-#ifdef USE_IMAP
-    if (mx_is_imap (tmp->path))
+    for (tmp = news->list; tmp; tmp = tmp->next)
     {
-      add_folder (menu, state, tmp->path, NULL, tmp->new);
-      continue;
+      if ((data = (NNTP_DATA *) tmp->data) != NULL && (data->new ||
+	  (data->subscribed && (!option (OPTSHOWONLYUNREAD) || data->unread))))
+      add_folder (menu, state, data->group, NULL, data, data->new);
     }
+  }
+  else
 #endif
-#ifdef USE_POP
-    if (mx_is_pop (tmp->path))
+  {
+    BUFFY *tmp = Incoming;
+
+    if (!Incoming)
+      return (-1);
+    mutt_buffy_check (0);
+
+    init_state (state, menu);
+
+    do
     {
-      add_folder (menu, state, tmp->path, NULL, tmp->new);
-      continue;
-    }
+#ifdef USE_IMAP
+      if (mx_is_imap (tmp->path))
+      {
+	add_folder (menu, state, tmp->path, NULL, NULL, tmp->new);
+	continue;
+      }
 #endif
-    if (lstat (tmp->path, &s) == -1)
-      continue;
+#ifdef USE_POP
+      if (mx_is_pop (tmp->path))
+      {
+	add_folder (menu, state, tmp->path, NULL, NULL, tmp->new);
+	continue;
+      }
+#endif
+#ifdef USE_NNTP
+      if (mx_is_nntp (tmp->path))
+      {
+	add_folder (menu, state, tmp->path, NULL, NULL, tmp->new);
+	continue;
+      }
+#endif
+      if (lstat (tmp->path, &s) == -1)
+	continue;
 
-    if ((! S_ISREG (s.st_mode)) && (! S_ISDIR (s.st_mode)) &&
-	(! S_ISLNK (s.st_mode)))
-      continue;
+      if ((! S_ISREG (s.st_mode)) && (! S_ISDIR (s.st_mode)) &&
+	  (! S_ISLNK (s.st_mode)))
+	continue;
     
-    strfcpy (buffer, NONULL(tmp->path), sizeof (buffer));
-    mutt_pretty_mailbox (buffer);
+      strfcpy (buffer, NONULL(tmp->path), sizeof (buffer));
+      mutt_pretty_mailbox (buffer);
 
-    add_folder (menu, state, buffer, &s, tmp->new);
+      add_folder (menu, state, buffer, &s, NULL, tmp->new);
+    }
+    while ((tmp = tmp->next));
   }
-  while ((tmp = tmp->next));
   browser_sort (state);
   return 0;
 }
 
 int select_file_search (MUTTMENU *menu, regex_t *re, int n)
 {
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+    return (regexec (re, ((struct folder_file *) menu->data)[n].desc, 0, NULL, 0));
+#endif
   return (regexec (re, ((struct folder_file *) menu->data)[n].name, 0, NULL, 0));
 }
 
@@ -475,7 +662,13 @@
   folder.ff = &((struct folder_file *) menu->data)[num];
   folder.num = num;
   
-  mutt_FormatString (s, slen, NONULL(FolderFormat), folder_format_str, 
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+    mutt_FormatString (s, slen, NONULL(GroupFormat), newsgroup_format_str, 
+      (unsigned long) &folder, M_FORMAT_ARROWCURSOR);
+  else
+#endif
+    mutt_FormatString (s, slen, NONULL(FolderFormat), folder_format_str, 
       (unsigned long) &folder, M_FORMAT_ARROWCURSOR);
 }
 
@@ -495,7 +688,18 @@
     menu->top = 0;
 
   menu->tagged = 0;
-  
+
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+  {
+    if (buffy)
+      snprintf (title, titlelen, _("Subscribed newsgroups"));
+    else
+      snprintf (title, titlelen, _("Newsgroups on server [%s]"),
+		CurrentNewsSrv->conn->account.host);
+  }
+  else
+#endif
   if (buffy)
     snprintf (title, titlelen, _("Mailboxes [%d]"), mutt_buffy_check (0));
   else
@@ -551,6 +755,31 @@
   if (!folder)
     strfcpy (LastDirBackup, LastDir, sizeof (LastDirBackup));
 
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+  {
+    if (*f)
+      strfcpy (prefix, f, sizeof (prefix));
+    else
+    {
+      LIST *list;
+
+      /* default state for news reader mode is browse subscribed newsgroups */
+      buffy = 0;
+      for (list = CurrentNewsSrv->list; list; list = list->next)
+      {
+	NNTP_DATA *data = (NNTP_DATA *) list->data;
+
+	if (data && data->subscribed)
+	{
+	  buffy = 1;
+	  break;
+	}
+      }
+    }
+  }
+  else
+#endif
   if (*f)
   {
     mutt_expand_path (f, flen);
@@ -639,6 +868,9 @@
     menu->tag = file_tag;
 
   menu->help = mutt_compile_help (helpstr, sizeof (helpstr), MENU_FOLDER,
+#ifdef USE_NNTP
+    (option (OPTNEWS)) ? FolderNewsHelp :
+#endif
     FolderHelp);
 
   init_menu (&state, menu, title, sizeof (title), buffy, FolderColumns);
@@ -777,7 +1009,11 @@
 	  }
 	}
 
+#ifdef USE_NNTP
+	if (buffy || option (OPTNEWS)) /* news have not path */
+#else
 	if (buffy)
+#endif
 	{
 	  strfcpy (f, state.entry[menu->current].name, flen);
 	  mutt_expand_path (f, flen);
@@ -835,14 +1071,6 @@
         break;
 
 #ifdef USE_IMAP
-      case OP_BROWSER_SUBSCRIBE:
-	imap_subscribe (state.entry[menu->current].name, 1);
-	break;
-
-      case OP_BROWSER_UNSUBSCRIBE:
-	imap_subscribe (state.entry[menu->current].name, 0);
-	break;
-
       case OP_BROWSER_TOGGLE_LSUB:
 	if (option (OPTIMAPLSUB))
 	{
@@ -913,6 +1141,11 @@
       
       case OP_CHANGE_DIRECTORY:
 
+#ifdef USE_NNTP
+	if (option (OPTNEWS))
+	  break;
+#endif
+
 	strfcpy (buf, LastDir, sizeof (buf));
 #ifdef USE_IMAP
 	if (!state.imap_browse)
@@ -1163,6 +1396,190 @@
 	  else
 	    mutt_error _("Error trying to view file");
 	}
+	break;
+
+#ifdef USE_NNTP
+      case OP_CATCHUP:
+      case OP_UNCATCHUP:
+	if (option (OPTNEWS))
+	{
+	  struct folder_file *f = &state.entry[menu->current];
+	  NNTP_DATA *nd;
+
+	  if (i == OP_CATCHUP)
+	    nd = mutt_newsgroup_catchup (CurrentNewsSrv, f->name);
+	  else
+	    nd = mutt_newsgroup_uncatchup (CurrentNewsSrv, f->name);
+
+	  if (nd)
+	  {
+/*	    FOLDER folder;
+	    struct folder_file ff;
+	    char buffer[_POSIX_PATH_MAX + SHORT_STRING];
+
+	    folder.ff = &ff;
+	    folder.ff->name = f->name;
+	    folder.ff->st = NULL;
+	    folder.ff->is_new = nd->new;
+	    folder.ff->nd = nd;
+	    safe_free ((void **) &f->desc);
+	    mutt_FormatString (buffer, sizeof (buffer), NONULL(GroupFormat),
+		  newsgroup_format_str, (unsigned long) &folder,
+		  M_FORMAT_ARROWCURSOR);
+	    f->desc = safe_strdup (buffer); */
+	    if (menu->current + 1 < menu->max)
+	      menu->current++;
+	    menu->redraw = REDRAW_MOTION_RESYNCH;
+	  }
+	}
+	break;
+
+      case OP_LOAD_ACTIVE:
+	if (!option (OPTNEWS))
+	  break;
+
+	{
+	  LIST *tmp;
+	  NNTP_DATA *data;
+
+	  for (tmp = CurrentNewsSrv->list; tmp; tmp = tmp->next)
+	  {
+	    if ((data = (NNTP_DATA *)tmp->data))
+	      data->deleted = 1;
+	  }
+	}
+	nntp_get_active (CurrentNewsSrv);
+
+	destroy_state (&state);
+	if (buffy)
+	  examine_mailboxes (menu, &state);
+	else
+	  examine_directory (menu, &state, NULL, NULL);
+	init_menu (&state, menu, title, sizeof (title), buffy, 1);
+	break;
+#endif /* USE_NNTP */
+
+#if defined USE_IMAP || defined USE_NNTP
+      case OP_BROWSER_SUBSCRIBE:
+      case OP_BROWSER_UNSUBSCRIBE:
+#endif
+#ifdef USE_NNTP
+      case OP_SUBSCRIBE_PATTERN:
+      case OP_UNSUBSCRIBE_PATTERN:
+        if (option (OPTNEWS))
+	{
+	  regex_t *rx = (regex_t *) safe_malloc (sizeof (regex_t));
+	  char *s = buf;
+	  int j = menu->current;
+	  NNTP_DATA *nd;
+	  NNTP_SERVER *news = CurrentNewsSrv;
+
+	  if (i == OP_SUBSCRIBE_PATTERN || i == OP_UNSUBSCRIBE_PATTERN)
+	  {
+	    char tmp[STRING];
+	    int err;
+
+	    buf[0] = 0;
+	    if (i == OP_SUBSCRIBE_PATTERN)
+	      snprintf (tmp, sizeof (tmp), _("Subscribe pattern: "));
+	    else
+	      snprintf (tmp, sizeof (tmp), _("Unsubscribe pattern: "));
+	    if (mutt_get_field (tmp, buf, sizeof (buf), 0) != 0 || !buf[0])
+	    {
+	      FREE (&rx);
+	      break;
+	    }
+
+	    if ((err = REGCOMP (rx, s, REG_NOSUB)) != 0)
+	    {
+	      regerror (err, rx, buf, sizeof (buf));
+	      regfree (rx);
+	      safe_free ((void **) &rx);
+	      mutt_error ("%s", buf);
+	      break;
+	    }
+	    menu->redraw = REDRAW_FULL;
+	    j = 0;
+	  }
+	  else if (!state.entrylen)
+	  {
+	    mutt_error _("No newsgroups match the mask");
+	    break;
+	  }
+
+	  for ( ; j < state.entrylen; j++)
+	  {
+	    struct folder_file *f = &state.entry[j];
+
+	    if (i == OP_BROWSER_SUBSCRIBE || i == OP_BROWSER_UNSUBSCRIBE ||
+		  regexec (rx, f->name, 0, NULL, 0) == 0)
+	    {
+	      if (i == OP_BROWSER_SUBSCRIBE || i == OP_SUBSCRIBE_PATTERN)
+		nd = mutt_newsgroup_subscribe (news, f->name);
+	      else
+		nd = mutt_newsgroup_unsubscribe (news, f->name);
+/*	      if (nd)
+	      {
+		FOLDER folder;
+		char buffer[_POSIX_PATH_MAX + SHORT_STRING];
+
+		folder.name = f->name;
+		folder.f = NULL;
+		folder.new = nd->new;
+		folder.nd = nd;
+		safe_free ((void **) &f->desc);
+		mutt_FormatString (buffer, sizeof (buffer), NONULL(GroupFormat),
+			newsgroup_format_str, (unsigned long) &folder,
+			M_FORMAT_ARROWCURSOR);
+		f->desc = safe_strdup (buffer);
+	      } */
+	    }
+	    if (i == OP_BROWSER_SUBSCRIBE || i == OP_BROWSER_UNSUBSCRIBE)
+	    {
+	      if (menu->current + 1 < menu->max)
+		menu->current++;
+	      menu->redraw = REDRAW_MOTION_RESYNCH;
+	      break;
+	    }
+	  }
+	  if (i == OP_SUBSCRIBE_PATTERN)
+	  {
+	    LIST *grouplist = NULL;
+
+	    if (news)
+	      grouplist = news->list;
+	    for (; grouplist; grouplist = grouplist->next)
+	    {
+	      nd = (NNTP_DATA *) grouplist->data;
+	      if (nd && nd->group && !nd->subscribed)
+	      {
+		if (regexec (rx, nd->group, 0, NULL, 0) == 0)
+		{
+		  mutt_newsgroup_subscribe (news, nd->group);
+		  add_folder (menu, &state, nd->group, NULL, nd, nd->new);
+		}
+	      }
+	    }
+	    init_menu (&state, menu, title, sizeof (title), buffy, 1);
+	  }
+	  mutt_newsrc_update (news);
+	  nntp_clear_cacheindex (news);
+	  if (i != OP_BROWSER_SUBSCRIBE && i != OP_BROWSER_UNSUBSCRIBE)
+	    regfree (rx);
+	  safe_free ((void **) &rx);
+	}
+#ifdef USE_IMAP
+	else
+#endif /* USE_IMAP && USE_NNTP */
+#endif /* USE_NNTP */
+#ifdef USE_IMAP
+	{
+	  if (i == OP_BROWSER_SUBSCRIBE)
+	    imap_subscribe (state.entry[menu->current].name, 1);
+	  else
+	    imap_subscribe (state.entry[menu->current].name, 0);
+	}
+#endif /* USE_IMAP */
     }
   }
   
diff -uNr mutt-1.4.orig/browser.h mutt-1.4/browser.h
--- mutt-1.4.orig/browser.h	Mon Aug 21 17:42:20 2000
+++ mutt-1.4/browser.h	Sun Nov  3 21:57:20 2002
@@ -20,6 +20,10 @@
 #ifndef _BROWSER_H
 #define _BROWSER_H 1
 
+#ifdef USE_NNTP
+#include "nntp.h"
+#endif
+
 struct folder_file
 {
   mode_t mode;
@@ -38,14 +42,17 @@
   unsigned selectable : 1;
   unsigned inferiors : 1;
 #endif
+#ifdef USE_NNTP
+  NNTP_DATA *nd;
+#endif
   unsigned tagged : 1;
 };
 
 struct browser_state
 {
   struct folder_file *entry;
-  short entrylen; /* number of real entries */
-  short entrymax;  /* max entry */
+  unsigned int entrylen; /* number of real entries */
+  unsigned int entrymax; /* max entry */
 #ifdef USE_IMAP
   short imap_browse;
   char *folder;
diff -uNr mutt-1.4.orig/buffy.c mutt-1.4/buffy.c
--- mutt-1.4.orig/buffy.c	Mon Mar 25 12:30:08 2002
+++ mutt-1.4/buffy.c	Sun Nov  3 21:57:20 2002
@@ -257,6 +257,9 @@
 #ifdef USE_POP
   if (!Context || Context->magic != M_POP)
 #endif
+#ifdef USE_NNTP
+  if (!Context || Context->magic != M_NNTP)
+#endif
   /* check device ID and serial number instead of comparing paths */
   if (!Context || !Context->path || stat (Context->path, &contex_sb) != 0)
   {
@@ -278,6 +281,11 @@
       tmp->magic = M_POP;
     else
 #endif
+#ifdef USE_NNTP
+    if ((tmp->magic == M_NNTP) || mx_is_nntp (tmp->path))
+      tmp->magic = M_NNTP;
+    else
+#endif
     if (stat (tmp->path, &sb) != 0 || sb.st_size == 0 ||
 	(!tmp->magic && (tmp->magic = mx_get_magic (tmp->path)) <= 0))
     {
@@ -294,25 +302,21 @@
     /* check to see if the folder is the currently selected folder
      * before polling */
     if (!Context || !Context->path ||
-#if defined USE_IMAP || defined USE_POP
-	((
+	 (
+	   (0
 #ifdef USE_IMAP
-	tmp->magic == M_IMAP
+	    || tmp->magic == M_IMAP
 #endif
 #ifdef USE_POP
-#ifdef USE_IMAP
-	||
-#endif
-	tmp->magic == M_POP
+	    || tmp->magic == M_POP
 #endif
-	) ? mutt_strcmp (tmp->path, Context->path) :
+#ifdef USE_NNTP
+	    || tmp->magic == M_NNTP
 #endif
-	 (sb.st_dev != contex_sb.st_dev || sb.st_ino != contex_sb.st_ino)
-#if defined USE_IMAP || defined USE_POP	 
-	    )
-#endif
-	)
-	
+	   ) ? mutt_strcmp (tmp->path, Context->path) :
+	       (sb.st_dev != contex_sb.st_dev || sb.st_ino != contex_sb.st_ino)
+	 )
+       )
     {
       switch (tmp->magic)
       {
@@ -380,6 +384,11 @@
       case M_POP:
 	break;
 #endif
+
+#ifdef USE_NNTP
+      case M_NNTP:
+	break;
+#endif
       }
     }
 #ifdef BUFFY_SIZE
diff -uNr mutt-1.4.orig/commands.c mutt-1.4/commands.c
--- mutt-1.4.orig/commands.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/commands.c	Sun Nov  3 21:57:20 2002
@@ -26,6 +26,7 @@
 #include "copy.h"
 #include "mx.h"
 #include "pager.h"
+#include "rfc1524.h"
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <fcntl.h>
@@ -791,6 +792,131 @@
   return -1;
 }
 
+int mutt_update_list_file (char *filename, char *section, char *key, char *line)
+{
+  FILE *ifp;
+  FILE *ofp;
+  char buf[HUGE_STRING];
+  char oldfile[_POSIX_PATH_MAX];
+  char *c;
+  int ext = 0, done = 0, r = 0;
+
+  snprintf (oldfile, sizeof(oldfile), "%s.bak", filename);
+  dprint (1, (debugfile, "Renaming %s to %s\n", filename, oldfile));
+
+  /* if file not exist, create it */
+  if ((ifp = safe_fopen (filename, "a")))
+    fclose (ifp);
+  if (_mutt_rename_file (filename, oldfile, 1))
+  {
+    mutt_perror _("Unable to create backup file");
+    return (-1);
+  }
+  dprint (1, (debugfile, "Opening %s\n", oldfile));
+  if (!(ifp = safe_fopen (oldfile, "r")))
+  {
+    mutt_perror _("Unable to open backup file for reading");
+    return (-1);
+  }
+  dprint (1, (debugfile, "Opening %s\n", filename));
+  if (!(ofp = fopen (filename, "w")))
+  {
+    fclose (ifp);
+    mutt_perror _("Unable to open new file for writing");
+    return (-1);
+  }
+  if (mx_lock_file (filename, fileno (ofp), 1, 0, 1))
+  {
+    fclose (ofp);
+    fclose (ifp);
+    mutt_error (_("Unable to lock %s, old file saved as %s"), filename, oldfile);
+    return (-1);
+  }
+
+  if (section)
+  {
+    while (r != EOF && !done && fgets (buf, sizeof (buf), ifp))
+    {
+      r = fputs (buf, ofp);
+      c = buf;
+      while (*c && *c != '\n') c++;
+      c[0] = 0;	/* strip EOL */
+      if (!strncmp (buf, "#: ", 3) && !mutt_strcasecmp (buf+3, section))
+	done++;
+    }
+    if (r != EOF && !done)
+    {
+      snprintf (buf, sizeof(buf), "#: %s\n", section);
+      r = fputs (buf, ofp);
+    }
+    done = 0;
+  }
+
+  while (r != EOF && fgets (buf, sizeof (buf), ifp))
+  {
+    if (ext)
+    {
+      c = buf;
+      while (*c && (*c != '\r') && (*c != '\n')) c++;
+      c--;
+      if (*c != '\\') ext = 0;
+    }
+    else if ((section && !strncmp (buf, "#: ", 3)))
+    {
+      if (!done && line)
+      {
+	fputs (line, ofp);
+	fputc ('\n', ofp);
+      }
+      r = fputs (buf, ofp);
+      done++;
+      break;
+    }
+    else if (key && !strncmp (buf, key, strlen(key)) &&
+	    (!*key || buf[strlen(key)] == ' '))
+    {
+      c = buf;
+      ext = 0;
+      while (*c && (*c != '\r') && (*c != '\n')) c++;
+      c--;
+      if (*c == '\\') ext = 1;
+      if (!done && line)
+      {
+	r = fputs (line, ofp);
+	if (*key)
+	  r = fputc ('\n', ofp);
+	done++;
+      }
+    }
+    else
+    {
+      r = fputs (buf, ofp);
+    }
+  }
+
+  while (r != EOF && fgets (buf, sizeof (buf), ifp))
+    r = fputs (buf, ofp);
+
+  /* If there wasn't a line to replace, put it on the end of the file */
+  if (r != EOF && !done && line)
+  {
+    fputs (line, ofp);
+    r = fputc ('\n', ofp);
+  }
+  mx_unlock_file (filename, fileno (ofp), 0);
+  fclose (ofp);
+  fclose (ifp);
+  if (r != EOF)
+  {
+    unlink (oldfile);
+    return 0;
+  }
+  unlink (filename);
+  mutt_error (_("Cannot write new %s, old file saved as %s"), filename,
+	oldfile);
+  return (-1);
+}
+
 
 void mutt_version (void)
 {
diff -uNr mutt-1.4.orig/complete.c mutt-1.4/complete.c
--- mutt-1.4.orig/complete.c	Wed Nov  7 11:22:08 2001
+++ mutt-1.4/complete.c	Sun Nov  3 21:57:20 2002
@@ -21,6 +21,9 @@
 #include "mailbox.h"
 #include "imap.h"
 #endif
+#ifdef USE_NNTP
+#include "nntp.h"
+#endif
 
 #include <dirent.h>
 #include <string.h>
@@ -44,9 +47,71 @@
   char filepart[_POSIX_PATH_MAX];
 #ifdef USE_IMAP
   char imap_path[LONG_STRING];
+#endif
 
   dprint (2, (debugfile, "mutt_complete: completing %s\n", s));
 
+#ifdef USE_NNTP
+  if (option (OPTNEWS))
+  {
+    LIST *l = CurrentNewsSrv->list;
+
+    strfcpy (filepart, s, sizeof (filepart));
+
+    /*
+     * special case to handle when there is no filepart yet.
+     * find the first subscribed newsgroup
+     */
+    if ((len = mutt_strlen (filepart)) == 0)
+    {
+      for (; l; l = l->next)
+      {
+	NNTP_DATA *data = (NNTP_DATA *)l->data;
+
+	if (data && data->subscribed)
+	{
+	  strfcpy (filepart, data->group, sizeof (filepart));
+	  init++;
+	  l = l->next;
+	  break;
+	}
+      }
+    }
+
+    for (; l; l = l->next)
+    {
+      NNTP_DATA *data = (NNTP_DATA *)l->data;
+
+      if (data && data->subscribed &&
+	  mutt_strncmp (data->group, filepart, len) == 0)
+      {
+	if (init)
+	{
+	  for (i = 0; filepart[i] && data->group[i]; i++)
+	  {
+	    if (filepart[i] != data->group[i])
+	    {
+	      filepart[i] = 0;
+	      break;
+	    }
+	  }
+	  filepart[i] = 0;
+	}
+	else
+	{
+	  strfcpy (filepart, data->group, sizeof (filepart));
+	  init = 1;
+	}
+      }
+    }
+
+    strcpy (s, filepart);
+
+    return (init ? 0 : -1);
+  }
+#endif
+
+#ifdef USE_IMAP
   /* we can use '/' as a delimiter, imap_complete rewrites it */
   if (*s == '=' || *s == '+' || *s == '!')
   {
diff -uNr mutt-1.4.orig/compose.c mutt-1.4/compose.c
--- mutt-1.4.orig/compose.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/compose.c	Sun Nov  3 21:57:20 2002
@@ -26,10 +26,15 @@
 #include "mailbox.h"
 #include "sort.h"
 #include "charset.h"
+#include "mx.h"
 
 #ifdef MIXMASTER
 #include "remailer.h"
 #endif
+  
+#ifdef USE_NNTP
+#include "nntp.h"
+#endif
 
 #include <errno.h>
 #include <string.h>
@@ -63,12 +68,18 @@
   HDR_PGPSIGINFO,
 #endif
   
+#ifdef USE_NNTP
+  HDR_NEWSGROUPS,
+  HDR_FOLLOWUPTO,
+  HDR_XCOMMENTTO,
+#endif
+
 
   HDR_ATTACH  = (HDR_FCC + 5) /* where to start printing the attachments */
 };
 
-#define HDR_XOFFSET 10
-#define TITLE_FMT "%10s" /* Used for Prompts, which are ASCII */
+#define HDR_XOFFSET 14
+#define TITLE_FMT "%14s" /* Used for Prompts, which are ASCII */
 #define W (COLS - HDR_XOFFSET)
 
 static char *Prompts[] =
@@ -80,6 +91,15 @@
   "Subject: ",
   "Reply-To: ",
   "Fcc: "
+#ifdef HAVE_PGP
+  ,""
+  ,""
+#endif
+#ifdef USE_NNTP
+  ,"Newsgroups: "
+  ,"Followup-To: "
+  ,"X-Comment-To: "
+#endif
 };
 
 static struct mapping_t ComposeHelp[] = {
@@ -94,6 +114,19 @@
   { NULL }
 };
 
+#ifdef USE_NNTP
+static struct mapping_t ComposeNewsHelp[] = {
+  { N_("Send"),    OP_COMPOSE_SEND_MESSAGE },
+  { N_("Abort"),   OP_EXIT },
+  { "Newsgroups",  OP_COMPOSE_EDIT_NEWSGROUPS },
+  { "Subj",        OP_COMPOSE_EDIT_SUBJECT },
+  { N_("Attach file"),  OP_COMPOSE_ATTACH_FILE },
+  { N_("Descrip"), OP_COMPOSE_EDIT_DESCRIPTION },
+  { N_("Help"),    OP_HELP },
+  { NULL }
+};
+#endif
+
 static void snd_entry (char *b, size_t blen, MUTTMENU *menu, int num)
 {
     mutt_FormatString (b, blen, NONULL (AttachFormat), mutt_attach_fmt,
@@ -108,7 +141,7 @@
 
 static void redraw_pgp_lines (int pgp)
 {
-  mvaddstr (HDR_PGP, 0,     "     PGP: ");
+  mvaddstr (HDR_PGP, 0,     "         PGP: ");
   if ((pgp & (PGPENCRYPT | PGPSIGN)) == (PGPENCRYPT | PGPSIGN))
     addstr (_("Sign, Encrypt"));
   else if (pgp & PGPENCRYPT)
@@ -122,7 +155,7 @@
   move (HDR_PGPSIGINFO, 0);
   clrtoeol ();
   if (pgp & PGPSIGN)
-    printw ("%s%s", _(" sign as: "), PgpSignAs ? PgpSignAs : _("<default>"));
+    printw ("    %s%s", _(" sign as: "), PgpSignAs ? PgpSignAs : _("<default>"));
 }
 
 static int pgp_send_menu (int bits, int *redraw)
@@ -258,9 +291,28 @@
 static void draw_envelope (HEADER *msg, char *fcc)
 {
   draw_envelope_addr (HDR_FROM, msg->env->from);
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+  {
+#endif
   draw_envelope_addr (HDR_TO, msg->env->to);
   draw_envelope_addr (HDR_CC, msg->env->cc);
   draw_envelope_addr (HDR_BCC, msg->env->bcc);
+#ifdef USE_NNTP
+  }
+  else
+  {
+    mvprintw (HDR_TO, 0, TITLE_FMT , Prompts[HDR_NEWSGROUPS - 1]);
+    mutt_paddstr (W, NONULL (msg->env->newsgroups));
+    mvprintw (HDR_CC, 0, TITLE_FMT , Prompts[HDR_FOLLOWUPTO - 1]);
+    mutt_paddstr (W, NONULL (msg->env->followup_to));
+    if (option (OPTXCOMMENTTO))
+    {
+      mvprintw (HDR_BCC, 0, TITLE_FMT , Prompts[HDR_XCOMMENTTO - 1]);
+      mutt_paddstr (W, NONULL (msg->env->x_comment_to));
+    }
+  }
+#endif
   mvprintw (HDR_SUBJECT, 0, TITLE_FMT, Prompts[HDR_SUBJECT - 1]);
   mutt_paddstr (W, NONULL (msg->env->subject));
   draw_envelope_addr (HDR_REPLYTO, msg->env->reply_to);
@@ -506,6 +558,12 @@
   /* Sort, SortAux could be changed in mutt_index_menu() */
   int oldSort, oldSortAux;
   struct stat st;
+#ifdef USE_NNTP
+  int news = 0;               /* is it a news article ? */
+
+  if (option (OPTNEWSSEND))
+    news++;
+#endif
 
   mutt_attach_init (msg->content);
   idx = mutt_gen_attach_list (msg->content, -1, idx, &idxlen, &idxmax, 0, 1);
@@ -517,10 +575,18 @@
   menu->make_entry = snd_entry;
   menu->tag = mutt_tag_attach;
   menu->data = idx;
+#ifdef USE_NNTP
+  if (news)
+  menu->help = mutt_compile_help (helpstr, sizeof (helpstr), MENU_COMPOSE, ComposeNewsHelp);
+  else
+#endif
   menu->help = mutt_compile_help (helpstr, sizeof (helpstr), MENU_COMPOSE, ComposeHelp);
   
   while (loop)
   {
+#ifdef USE_NNTP
+    unset_option (OPTNEWS);	/* for any case */
+#endif
     switch (op = mutt_menuLoop (menu))
     {
       case OP_REDRAW:
@@ -532,14 +598,81 @@
 	menu->redraw = edit_address_list (HDR_FROM, &msg->env->from);
 	break;
       case OP_COMPOSE_EDIT_TO:
-	menu->redraw = edit_address_list (HDR_TO, &msg->env->to);
+#ifdef USE_NNTP
+	if (!news)
+#endif
+	  menu->redraw = edit_address_list (HDR_TO, &msg->env->to);
 	break;
       case OP_COMPOSE_EDIT_BCC:
-	menu->redraw = edit_address_list (HDR_BCC, &msg->env->bcc);
+#ifdef USE_NNTP
+	if (!news)
+#endif
+	  menu->redraw = edit_address_list (HDR_BCC, &msg->env->bcc);
 	break;
       case OP_COMPOSE_EDIT_CC:
-	menu->redraw = edit_address_list (HDR_CC, &msg->env->cc);
+#ifdef USE_NNTP
+	if (!news)
+#endif
+	  menu->redraw = edit_address_list (HDR_CC, &msg->env->cc);
+	break;
+#ifdef USE_NNTP
+      case OP_COMPOSE_EDIT_NEWSGROUPS:
+	if (news)
+	{
+	  if (msg->env->newsgroups)
+	    strfcpy (buf, msg->env->newsgroups, sizeof (buf));
+	  else
+	    buf[0] = 0;
+	  if (mutt_get_field ("Newsgroups: ", buf, sizeof (buf), 0) == 0 && buf[0])
+	  {
+	    safe_free ((void **) &msg->env->newsgroups);
+	    mutt_remove_trailing_ws (buf);
+	    msg->env->newsgroups = safe_strdup (mutt_skip_whitespace (buf));
+	    move (HDR_TO, HDR_XOFFSET);
+	    clrtoeol ();
+	    if (msg->env->newsgroups)
+	      printw ("%-*.*s", W, W, msg->env->newsgroups);
+	  }
+	}
+	break;
+
+      case OP_COMPOSE_EDIT_FOLLOWUP_TO:
+	if (news)
+	{
+	  buf[0] = 0;
+	  if (msg->env->followup_to)
+	    strfcpy (buf, msg->env->followup_to, sizeof (buf));
+	  if (mutt_get_field ("Followup-To: ", buf, sizeof (buf), 0) == 0 && buf[0])
+	  {
+	    safe_free ((void **) &msg->env->followup_to);
+	    mutt_remove_trailing_ws (buf);
+	    msg->env->followup_to = safe_strdup (mutt_skip_whitespace (buf));
+	    move (HDR_CC, HDR_XOFFSET);
+	    clrtoeol();
+	    if (msg->env->followup_to)
+	      printw ("%-*.*s", W, W, msg->env->followup_to);
+	  }
+	}
 	break;
+
+      case OP_COMPOSE_EDIT_X_COMMENT_TO:
+	if (news && option (OPTXCOMMENTTO))
+	{
+	  buf[0] = 0;
+	  if (msg->env->x_comment_to)
+	    strfcpy (buf, msg->env->x_comment_to, sizeof (buf));
+	  if (mutt_get_field ("X-Comment-To: ", buf, sizeof (buf), 0) == 0 && buf[0])
+	  {
+	    safe_free ((void **) &msg->env->x_comment_to);
+	    msg->env->x_comment_to = safe_strdup (buf);
+	    move (HDR_BCC, HDR_XOFFSET);
+	    clrtoeol();
+	    if (msg->env->x_comment_to)
+	      printw ("%-*.*s", W, W, msg->env->x_comment_to);
+	  }
+	}
+	break;
+#endif
       case OP_COMPOSE_EDIT_SUBJECT:
 	if (msg->env->subject)
 	  strfcpy (buf, msg->env->subject, sizeof (buf));
@@ -695,6 +828,9 @@
 	break;
 
       case OP_COMPOSE_ATTACH_MESSAGE:
+#ifdef USE_NNTP
+      case OP_COMPOSE_ATTACH_NEWS_MESSAGE:
+#endif
 	{
 	  char *prompt;
 	  HEADER *h;
@@ -702,7 +838,22 @@
 	  fname[0] = 0;
 	  prompt = _("Open mailbox to attach message from");
 
+#ifdef USE_NNTP
+	  unset_option (OPTNEWS);
+	  if (op == OP_COMPOSE_ATTACH_NEWS_MESSAGE)
+	  {
+	    if (!(CurrentNewsSrv = mutt_select_newsserver (NewsServer)))
+	      break;
+
+	    prompt = _("Open newsgroup to attach message from");
+	    set_option (OPTNEWS);
+	  }
+#endif
+
 	  if (Context)
+#ifdef USE_NNTP
+	  if ((op == OP_COMPOSE_ATTACH_MESSAGE) ^ (Context->magic == M_NNTP))
+#endif
 	  {
 	    strfcpy (fname, NONULL (Context->path), sizeof (fname));
 	    mutt_pretty_mailbox (fname);
@@ -711,6 +862,11 @@
 	  if (mutt_enter_fname (prompt, fname, sizeof (fname), &menu->redraw, 1) == -1 || !fname[0])
 	    break;
 
+#ifdef USE_NNTP
+	  if (option (OPTNEWS))
+	    nntp_expand_path (fname, sizeof (fname), &CurrentNewsSrv->conn->account);
+	  else
+#endif
 	  mutt_expand_path (fname, sizeof (fname));
 #ifdef USE_IMAP
           if (!mx_is_imap (fname))
@@ -718,6 +874,9 @@
 #ifdef USE_POP
           if (!mx_is_pop (fname))
 #endif
+#ifdef USE_NNTP
+          if (!mx_is_nntp (fname) && !option (OPTNEWS))
+#endif
 	  /* check to make sure the file exists and is readable */
 	  if (access (fname, R_OK) == -1)
 	  {
diff -uNr mutt-1.4.orig/config.guess mutt-1.4/config.guess
--- mutt-1.4.orig/config.guess	Wed Jan 16 21:44:49 2002
+++ mutt-1.4/config.guess	Sun Nov  3 21:57:29 2002
@@ -3,7 +3,7 @@
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
 #   2000, 2001, 2002 Free Software Foundation, Inc.
 
-timestamp='2002-01-10'
+timestamp='2002-07-23'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
@@ -88,30 +88,40 @@
   exit 1
 fi
 
+trap 'exit 1' 1 2 15
 
-dummy=dummy-$$
-trap 'rm -f $dummy.c $dummy.o $dummy.rel $dummy; exit 1' 1 2 15
+# CC_FOR_BUILD -- compiler used by this script. Note that the use of a
+# compiler to aid in system detection is discouraged as it requires
+# temporary files to be created and, as you can see below, it is a
+# headache to deal with in a portable fashion.
 
-# CC_FOR_BUILD -- compiler used by this script.
 # Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
 # use `HOST_CC' if defined, but it is deprecated.
 
-set_cc_for_build='case $CC_FOR_BUILD,$HOST_CC,$CC in
- ,,)    echo "int dummy(){}" > $dummy.c ;
-	for c in cc gcc c89 ; do
-	  ($c $dummy.c -c -o $dummy.o) >/dev/null 2>&1 ;
-	  if test $? = 0 ; then
+# This shell variable is my proudest work .. or something. --bje
+
+set_cc_for_build='tmpdir=${TMPDIR-/tmp}/config-guess-$$ ;
+(old=`umask` && umask 077 && mkdir $tmpdir && umask $old && unset old)
+   || (echo "$me: cannot create $tmpdir" >&2 && exit 1) ;
+dummy=$tmpdir/dummy ;
+files="$dummy.c $dummy.o $dummy.rel $dummy" ;
+trap '"'"'rm -f $files; rmdir $tmpdir; exit 1'"'"' 1 2 15 ;
+case $CC_FOR_BUILD,$HOST_CC,$CC in
+ ,,)    echo "int x;" > $dummy.c ;
+	for c in cc gcc c89 c99 ; do
+	  if ($c $dummy.c -c -o $dummy.o) >/dev/null 2>&1 ; then
 	     CC_FOR_BUILD="$c"; break ;
 	  fi ;
 	done ;
-	rm -f $dummy.c $dummy.o $dummy.rel ;
+	rm -f $files ;
 	if test x"$CC_FOR_BUILD" = x ; then
 	  CC_FOR_BUILD=no_compiler_found ;
 	fi
 	;;
  ,,*)   CC_FOR_BUILD=$CC ;;
  ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
-esac'
+esac ;
+unset files'
 
 # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
 # (ghazi@noc.rutgers.edu 1994-08-24)
@@ -138,9 +148,11 @@
 	#
 	# Note: NetBSD doesn't particularly care about the vendor
 	# portion of the name.  We always set it to "unknown".
-	UNAME_MACHINE_ARCH=`(uname -p) 2>/dev/null` || \
-	    UNAME_MACHINE_ARCH=unknown
+	sysctl="sysctl -n hw.machine_arch"
+	UNAME_MACHINE_ARCH=`(/sbin/$sysctl 2>/dev/null || \
+	    /usr/sbin/$sysctl 2>/dev/null || echo unknown)`
 	case "${UNAME_MACHINE_ARCH}" in
+	    armeb) machine=armeb-unknown ;;
 	    arm*) machine=arm-unknown ;;
 	    sh3el) machine=shl-unknown ;;
 	    sh3eb) machine=sh-unknown ;;
@@ -219,6 +231,7 @@
 	# A Tn.n version is a released field test version.
 	# A Xn.n version is an unreleased experimental baselevel.
 	# 1.2 uses "1.2" for uname -r.
+	eval $set_cc_for_build
 	cat <<EOF >$dummy.s
 	.data
 \$Lformat:
@@ -244,10 +257,9 @@
 	jsr \$26,exit
 	.end main
 EOF
-	eval $set_cc_for_build
 	$CC_FOR_BUILD $dummy.s -o $dummy 2>/dev/null
 	if test "$?" = 0 ; then
-		case `./$dummy` in
+		case `$dummy` in
 			0-0)
 				UNAME_MACHINE="alpha"
 				;;
@@ -269,9 +281,12 @@
 			2-1307)
 				UNAME_MACHINE="alphaev68"
 				;;
+			3-1307)
+				UNAME_MACHINE="alphaev7"
+				;;
 		esac
 	fi
-	rm -f $dummy.s $dummy
+	rm -f $dummy.s $dummy && rmdir $tmpdir
 	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[VTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
 	exit 0 ;;
     Alpha\ *:Windows_NT*:*)
@@ -312,6 +327,10 @@
     NILE*:*:*:dcosx)
 	echo pyramid-pyramid-svr4
 	exit 0 ;;
+    DRS?6000:UNIX_SV:4.2*:7*)
+	case `/usr/bin/uname -p` in
+	    sparc) echo sparc-icl-nx7 && exit 0 ;;
+	esac ;;
     sun4H:SunOS:5.*:*)
 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit 0 ;;
@@ -340,7 +359,7 @@
 	echo m68k-sun-sunos${UNAME_RELEASE}
 	exit 0 ;;
     sun*:*:4.2BSD:*)
-	UNAME_RELEASE=`(head -1 /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
+	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
 	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
 	case "`/bin/arch`" in
 	    sun3)
@@ -419,14 +438,17 @@
 	}
 EOF
 	$CC_FOR_BUILD $dummy.c -o $dummy \
-	  && ./$dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
-	  && rm -f $dummy.c $dummy && exit 0
-	rm -f $dummy.c $dummy
+	  && $dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
+	  && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
+	rm -f $dummy.c $dummy && rmdir $tmpdir
 	echo mips-mips-riscos${UNAME_RELEASE}
 	exit 0 ;;
     Motorola:PowerMAX_OS:*:*)
 	echo powerpc-motorola-powermax
 	exit 0 ;;
+    Night_Hawk:*:*:PowerMAX_OS)
+	echo powerpc-harris-powermax
+	exit 0 ;;
     Night_Hawk:Power_UNIX:*:*)
 	echo powerpc-harris-powerunix
 	exit 0 ;;
@@ -499,8 +521,8 @@
 			exit(0);
 			}
 EOF
-		$CC_FOR_BUILD $dummy.c -o $dummy && ./$dummy && rm -f $dummy.c $dummy && exit 0
-		rm -f $dummy.c $dummy
+		$CC_FOR_BUILD $dummy.c -o $dummy && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
+		rm -f $dummy.c $dummy && rmdir $tmpdir
 		echo rs6000-ibm-aix3.2.5
 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
 		echo rs6000-ibm-aix3.2.4
@@ -509,7 +531,7 @@
 	fi
 	exit 0 ;;
     *:AIX:*:[45])
-	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | head -1 | awk '{ print $1 }'`
+	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
 		IBM_ARCH=rs6000
 	else
@@ -598,9 +620,9 @@
                   exit (0);
               }
 EOF
-		    (CCOPTS= $CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null) && HP_ARCH=`./$dummy`
+		    (CCOPTS= $CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null) && HP_ARCH=`$dummy`
 		    if test -z "$HP_ARCH"; then HP_ARCH=hppa; fi
-		    rm -f $dummy.c $dummy
+		    rm -f $dummy.c $dummy && rmdir $tmpdir
 		fi ;;
 	esac
 	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
@@ -636,8 +658,8 @@
 	  exit (0);
 	}
 EOF
-	$CC_FOR_BUILD $dummy.c -o $dummy && ./$dummy && rm -f $dummy.c $dummy && exit 0
-	rm -f $dummy.c $dummy
+	$CC_FOR_BUILD $dummy.c -o $dummy && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
+	rm -f $dummy.c $dummy && rmdir $tmpdir
 	echo unknown-hitachi-hiuxwe2
 	exit 0 ;;
     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
@@ -683,9 +705,6 @@
     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
 	echo c4-convex-bsd
         exit 0 ;;
-    CRAY*X-MP:*:*:*)
-	echo xmp-cray-unicos
-        exit 0 ;;
     CRAY*Y-MP:*:*:*)
 	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
 	exit 0 ;;
@@ -707,9 +726,6 @@
     CRAY*SV1:*:*:*)
 	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
 	exit 0 ;;
-    CRAY-2:*:*:*)
-	echo cray2-cray-unicos
-        exit 0 ;;
     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
 	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
@@ -726,7 +742,19 @@
 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
 	exit 0 ;;
     *:FreeBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	# Determine whether the default compiler uses glibc.
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+	#include <features.h>
+	#if __GLIBC__ >= 2
+	LIBC=gnu
+	#else
+	LIBC=
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+	rm -f $dummy.c && rmdir $tmpdir
+	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
 	exit 0 ;;
     i*:CYGWIN*:*)
 	echo ${UNAME_MACHINE}-pc-cygwin
@@ -765,7 +793,7 @@
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit 0 ;;
     ia64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit 0 ;;
     m68*:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
@@ -776,18 +804,18 @@
 	#undef CPU
 	#undef mips
 	#undef mipsel
-	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL) 
-	CPU=mipsel 
+	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
+	CPU=mipsel
 	#else
-	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB) 
+	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
 	CPU=mips
 	#else
 	CPU=
 	#endif
-	#endif 
+	#endif
 EOF
 	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
-	rm -f $dummy.c
+	rm -f $dummy.c && rmdir $tmpdir
 	test x"${CPU}" != x && echo "${CPU}-pc-linux-gnu" && exit 0
 	;;
     ppc:Linux:*:*)
@@ -837,7 +865,8 @@
 	# The BFD linker knows what the default object file format is, so
 	# first see if it will tell us. cd to the root directory to prevent
 	# problems with other programs or directories called `ld' in the path.
-	ld_supported_targets=`cd /; ld --help 2>&1 \
+	# Set LC_ALL=C to ensure ld outputs messages in English.
+	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
 			 | sed -ne '/supported targets:/!d
 				    s/[ 	][ 	]*/ /g
 				    s/.*supported targets: *//
@@ -849,7 +878,7 @@
 		;;
 	  a.out-i386-linux)
 		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
-		exit 0 ;;		
+		exit 0 ;;
 	  coff-i386)
 		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
 		exit 0 ;;
@@ -874,11 +903,15 @@
 	LIBC=gnulibc1
 	# endif
 	#else
+	#ifdef __INTEL_COMPILER
+	LIBC=gnu
+	#else
 	LIBC=gnuaout
 	#endif
+	#endif
 EOF
 	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
-	rm -f $dummy.c
+	rm -f $dummy.c && rmdir $tmpdir
 	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-pc-linux-${LIBC}" && exit 0
 	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
 	;;
@@ -917,13 +950,13 @@
 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
 		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
 	elif /bin/uname -X 2>/dev/null >/dev/null ; then
-		UNAME_REL=`(/bin/uname -X|egrep Release|sed -e 's/.*= //')`
-		(/bin/uname -X|egrep i80486 >/dev/null) && UNAME_MACHINE=i486
-		(/bin/uname -X|egrep '^Machine.*Pentium' >/dev/null) \
+		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
+		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
+		(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \
 			&& UNAME_MACHINE=i586
-		(/bin/uname -X|egrep '^Machine.*Pent ?II' >/dev/null) \
+		(/bin/uname -X|grep '^Machine.*Pent *II' >/dev/null) \
 			&& UNAME_MACHINE=i686
-		(/bin/uname -X|egrep '^Machine.*Pentium Pro' >/dev/null) \
+		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
 			&& UNAME_MACHINE=i686
 		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
 	else
@@ -958,7 +991,7 @@
 	exit 0 ;;
     M68*:*:R3V[567]*:*)
 	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
-    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0)
+    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0)
 	OS_REL=''
 	test -r /etc/.relid \
 	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
@@ -1059,10 +1092,12 @@
 	echo `uname -p`-apple-darwin${UNAME_RELEASE}
 	exit 0 ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
-	if test "${UNAME_MACHINE}" = "x86pc"; then
+	UNAME_PROCESSOR=`uname -p`
+	if test "$UNAME_PROCESSOR" = "x86"; then
+		UNAME_PROCESSOR=i386
 		UNAME_MACHINE=pc
 	fi
-	echo `uname -p`-${UNAME_MACHINE}-nto-qnx
+	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
 	exit 0 ;;
     *:QNX:*:4*)
 	echo i386-pc-qnx
@@ -1239,8 +1274,8 @@
 }
 EOF
 
-$CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null && ./$dummy && rm -f $dummy.c $dummy && exit 0
-rm -f $dummy.c $dummy
+$CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
+rm -f $dummy.c $dummy && rmdir $tmpdir
 
 # Apollos put the system type in the environment.
 
diff -uNr mutt-1.4.orig/config.h.in mutt-1.4/config.h.in
--- mutt-1.4.orig/config.h.in	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/config.h.in	Sun Nov  3 21:57:45 2002
@@ -1,57 +1,4 @@
-/* config.h.in.  Generated automatically from configure.in by autoheader 2.13.  */
-
-/* Define if using alloca.c.  */
-#undef C_ALLOCA
-
-/* Define to empty if the keyword does not work.  */
-#undef const
-
-/* Define to one of _getb67, GETB67, getb67 for Cray-2 and Cray-YMP systems.
-   This function is required for alloca.c support on those systems.  */
-#undef CRAY_STACKSEG_END
-
-/* Define if you have alloca, as a function or macro.  */
-#undef HAVE_ALLOCA
-
-/* Define if you have <alloca.h> and it should be used (not on Ultrix).  */
-#undef HAVE_ALLOCA_H
-
-/* Define if you have a working `mmap' system call.  */
-#undef HAVE_MMAP
-
-/* Define as __inline if that's what the C compiler calls it.  */
-#undef inline
-
-/* Define to `long' if <sys/types.h> doesn't define.  */
-#undef off_t
-
-/* Define to `int' if <sys/types.h> doesn't define.  */
-#undef pid_t
-
-/* Define as the return type of signal handlers (int or void).  */
-#undef RETSIGTYPE
-
-/* Define to `unsigned' if <sys/types.h> doesn't define.  */
-#undef size_t
-
-/* If using the C implementation of alloca, define if you know the
-   direction of stack growth for your system; otherwise it will be
-   automatically deduced at run-time.
- STACK_DIRECTION > 0 => grows toward higher addresses
- STACK_DIRECTION < 0 => grows toward lower addresses
- STACK_DIRECTION = 0 => direction of growth unknown
- */
-#undef STACK_DIRECTION
-
-/* Define if you have the ANSI C header files.  */
-#undef STDC_HEADERS
-
-/* Define if `sys_siglist' is declared by <signal.h>.  */
-#undef SYS_SIGLIST_DECLARED
-
-/* Define if your processor stores words with the most significant
-   byte first (like Motorola and SPARC, unlike Intel and VAX).  */
-#undef WORDS_BIGENDIAN
+/* config.h.in.  Generated from configure.in by autoheader.  */
 
 /*
  * Define if you have problems with mutt not detecting new/old mailboxes
@@ -68,6 +15,9 @@
  */
 #undef HOMESPOOL
 
+/* Compiling with newsreading support with NNTP */
+#undef USE_NNTP
+
 /* program to use for shell commands */
 #define EXECSHELL "/bin/sh"
 
@@ -78,418 +28,493 @@
 /* Define to `int' if <signal.h> doesn't define.  */
 #undef sig_atomic_t
 
-/* The number of bytes in a int.  */
-#undef SIZEOF_INT
 
-/* The number of bytes in a long.  */
-#undef SIZEOF_LONG
+/* Define to enable the "buffy_size" feature. */
+#undef BUFFY_SIZE
 
-/* Define if you have the RAND_egd function.  */
-#undef HAVE_RAND_EGD
+/* Define to one of `_getb67', `GETB67', `getb67' for Cray-2 and Cray-YMP
+   systems. This function is required for `alloca.c' support on those systems.
+   */
+#undef CRAY_STACKSEG_END
 
-/* Define if you have the RAND_status function.  */
-#undef HAVE_RAND_STATUS
+/* Define to 1 if using `alloca.c'. */
+#undef C_ALLOCA
 
-/* Define if you have the __argz_count function.  */
-#undef HAVE___ARGZ_COUNT
+/* Define to enable debugging info. */
+#undef DEBUG
 
-/* Define if you have the __argz_next function.  */
-#undef HAVE___ARGZ_NEXT
+/* Define if you want to use an external dotlocking program. */
+#undef DL_STANDALONE
 
-/* Define if you have the __argz_stringify function.  */
-#undef HAVE___ARGZ_STRINGIFY
+/* Define your domain name. */
+#undef DOMAIN
+
+/* Define to 1 if translation of program messages to the user's native
+   language is requested. */
+#undef ENABLE_NLS
+
+/* Define to 1 if you have `alloca', as a function or macro. */
+#undef HAVE_ALLOCA
+
+/* Define to 1 if you have <alloca.h> and it should be used (not on Ultrix).
+   */
+#undef HAVE_ALLOCA_H
+
+/* Define to 1 if you have the <argz.h> header file. */
+#undef HAVE_ARGZ_H
 
-/* Define if you have the bind_textdomain_codeset function.  */
+/* Define to 1 if you have the `bind_textdomain_codeset' function. */
 #undef HAVE_BIND_TEXTDOMAIN_CODESET
 
-/* Define if you have the dcgettext function.  */
+/* Define if your curses library supports color. */
+#undef HAVE_COLOR
+
+/* Define to 1 if you have the `dcgettext' function. */
 #undef HAVE_DCGETTEXT
 
-/* Define if you have the fchdir function.  */
+/* Define to 1 if you have the `fchdir' function. */
 #undef HAVE_FCHDIR
 
-/* Define if you have the feof_unlocked function.  */
+/* Define to 1 if you have the `feof_unlocked' function. */
 #undef HAVE_FEOF_UNLOCKED
 
-/* Define if you have the fgetpos function.  */
+/* Define to 1 if you have the `fgetpos' function. */
 #undef HAVE_FGETPOS
 
-/* Define if you have the fgets_unlocked function.  */
+/* Define to 1 if you have the `fgets_unlocked' function. */
 #undef HAVE_FGETS_UNLOCKED
 
-/* Define if you have the ftruncate function.  */
+/* Define to 1 if you have the `ftruncate' function. */
 #undef HAVE_FTRUNCATE
 
-/* Define if you have the getaddrinfo function.  */
+/* Define to 1 if you have the `getaddrinfo' function. */
 #undef HAVE_GETADDRINFO
 
-/* Define if you have the getcwd function.  */
+/* Define to 1 if you have the `getcwd' function. */
 #undef HAVE_GETCWD
 
-/* Define if you have the getegid function.  */
+/* Define to 1 if you have the `getegid' function. */
 #undef HAVE_GETEGID
 
-/* Define if you have the geteuid function.  */
+/* Define to 1 if you have the `geteuid' function. */
 #undef HAVE_GETEUID
 
-/* Define if you have the getgid function.  */
+/* Define to 1 if you have the `getgid' function. */
 #undef HAVE_GETGID
 
-/* Define if you have the getpagesize function.  */
+/* Define to 1 if you have the <getopt.h> header file. */
+#undef HAVE_GETOPT_H
+
+/* Define to 1 if you have the `getpagesize' function. */
 #undef HAVE_GETPAGESIZE
 
-/* Define if you have the getsid function.  */
+/* Define to 1 if you have the `getsid' function. */
 #undef HAVE_GETSID
 
-/* Define if you have the getuid function.  */
+/* Define if the GNU gettext() function is already present or preinstalled. */
+#undef HAVE_GETTEXT
+
+/* Define to 1 if you have the `getuid' function. */
 #undef HAVE_GETUID
 
-/* Define if you have the iswalnum function.  */
+/* Define if your GSSAPI implementation is Heimdal */
+#undef HAVE_HEIMDAL
+
+/* Define if you have the iconv() function. */
+#undef HAVE_ICONV
+
+/* Define to 1 if you have the <iconv.h> header file. */
+#undef HAVE_ICONV_H
+
+/* Define if <iconv.h> defines iconv_t. */
+#undef HAVE_ICONV_T_DEF
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#undef HAVE_INTTYPES_H
+
+/* Define to 1 if you have the <ioctl.h> header file. */
+#undef HAVE_IOCTL_H
+
+/* Define to 1 if you have the `iswalnum' function. */
 #undef HAVE_ISWALNUM
 
-/* Define if you have the iswalpha function.  */
+/* Define to 1 if you have the `iswalpha' function. */
 #undef HAVE_ISWALPHA
 
-/* Define if you have the iswcntrl function.  */
+/* Define to 1 if you have the `iswcntrl' function. */
 #undef HAVE_ISWCNTRL
 
-/* Define if you have the iswdigit function.  */
+/* Define to 1 if you have the `iswdigit' function. */
 #undef HAVE_ISWDIGIT
 
-/* Define if you have the iswgraph function.  */
+/* Define to 1 if you have the `iswgraph' function. */
 #undef HAVE_ISWGRAPH
 
-/* Define if you have the iswlower function.  */
+/* Define to 1 if you have the `iswlower' function. */
 #undef HAVE_ISWLOWER
 
-/* Define if you have the iswprint function.  */
+/* Define to 1 if you have the `iswprint' function. */
 #undef HAVE_ISWPRINT
 
-/* Define if you have the iswpunct function.  */
+/* Define to 1 if you have the `iswpunct' function. */
 #undef HAVE_ISWPUNCT
 
-/* Define if you have the iswspace function.  */
+/* Define to 1 if you have the `iswspace' function. */
 #undef HAVE_ISWSPACE
 
-/* Define if you have the iswupper function.  */
+/* Define to 1 if you have the `iswupper' function. */
 #undef HAVE_ISWUPPER
 
-/* Define if you have the iswxdigit function.  */
+/* Define to 1 if you have the `iswxdigit' function. */
 #undef HAVE_ISWXDIGIT
 
-/* Define if you have the memmove function.  */
-#undef HAVE_MEMMOVE
+/* Define if you have <langinfo.h> and nl_langinfo(CODESET). */
+#undef HAVE_LANGINFO_CODESET
 
-/* Define if you have the mempcpy function.  */
-#undef HAVE_MEMPCPY
+/* Define if you have <langinfo.h> and nl_langinfo(YESEXPR). */
+#undef HAVE_LANGINFO_YESEXPR
 
-/* Define if you have the munmap function.  */
-#undef HAVE_MUNMAP
+/* Define if your <locale.h> file defines LC_MESSAGES. */
+#undef HAVE_LC_MESSAGES
 
-/* Define if you have the putenv function.  */
-#undef HAVE_PUTENV
+/* Define to 1 if you have the `crypto' library (-lcrypto). */
+#undef HAVE_LIBCRYPTO
 
-/* Define if you have the regcomp function.  */
-#undef HAVE_REGCOMP
+/* Define to 1 if you have the `intl' library (-lintl). */
+#undef HAVE_LIBINTL
 
-/* Define if you have the setegid function.  */
-#undef HAVE_SETEGID
+/* Define to 1 if you have the `nsl' library (-lnsl). */
+#undef HAVE_LIBNSL
 
-/* Define if you have the setenv function.  */
-#undef HAVE_SETENV
+/* Define to 1 if you have the `sasl' library (-lsasl). */
+#undef HAVE_LIBSASL
 
-/* Define if you have the setlocale function.  */
-#undef HAVE_SETLOCALE
+/* Define to 1 if you have the `socket' library (-lsocket). */
+#undef HAVE_LIBSOCKET
 
-/* Define if you have the setrlimit function.  */
-#undef HAVE_SETRLIMIT
+/* Define to 1 if you have the `ssl' library (-lssl). */
+#undef HAVE_LIBSSL
 
-/* Define if you have the snprintf function.  */
-#undef HAVE_SNPRINTF
+/* Define to 1 if you have the `termlib' library (-ltermlib). */
+#undef HAVE_LIBTERMLIB
 
-/* Define if you have the srand48 function.  */
-#undef HAVE_SRAND48
+/* Define to 1 if you have the `x' library (-lx). */
+#undef HAVE_LIBX
 
-/* Define if you have the stpcpy function.  */
-#undef HAVE_STPCPY
+/* Define to 1 if you have the <limits.h> header file. */
+#undef HAVE_LIMITS_H
 
-/* Define if you have the strcasecmp function.  */
-#undef HAVE_STRCASECMP
+/* Define to 1 if you have the <locale.h> header file. */
+#undef HAVE_LOCALE_H
 
-/* Define if you have the strchr function.  */
-#undef HAVE_STRCHR
+/* Define to 1 if you have the <malloc.h> header file. */
+#undef HAVE_MALLOC_H
 
-/* Define if you have the strdup function.  */
-#undef HAVE_STRDUP
+/* Define to 1 if you have the `memmove' function. */
+#undef HAVE_MEMMOVE
 
-/* Define if you have the strerror function.  */
-#undef HAVE_STRERROR
+/* Define to 1 if you have the <memory.h> header file. */
+#undef HAVE_MEMORY_H
 
-/* Define if you have the strftime function.  */
-#undef HAVE_STRFTIME
+/* Define to 1 if you have the `mempcpy' function. */
+#undef HAVE_MEMPCPY
 
-/* Define if you have the strtoul function.  */
-#undef HAVE_STRTOUL
+/* Define to 1 if you have a working `mmap' system call. */
+#undef HAVE_MMAP
 
-/* Define if you have the towlower function.  */
-#undef HAVE_TOWLOWER
+/* Define to 1 if you have the `munmap' function. */
+#undef HAVE_MUNMAP
 
-/* Define if you have the towupper function.  */
-#undef HAVE_TOWUPPER
+/* Define to 1 if you have the <ncursesw/ncurses.h> header file. */
+#undef HAVE_NCURSESW_NCURSES_H
 
-/* Define if you have the tsearch function.  */
-#undef HAVE_TSEARCH
+/* Define to 1 if you have the <ncurses.h> header file. */
+#undef HAVE_NCURSES_H
 
-/* Define if you have the vsnprintf function.  */
-#undef HAVE_VSNPRINTF
+/* Define to 1 if you have the <nl_types.h> header file. */
+#undef HAVE_NL_TYPES_H
 
-/* Define if you have the <argz.h> header file.  */
-#undef HAVE_ARGZ_H
+/* Define if you want PGP support. */
+#undef HAVE_PGP
 
-/* Define if you have the <getopt.h> header file.  */
-#undef HAVE_GETOPT_H
+/* Define to 1 if you have the `putenv' function. */
+#undef HAVE_PUTENV
 
-/* Define if you have the <iconv.h> header file.  */
-#undef HAVE_ICONV_H
+/* Define to 1 if you have the `RAND_egd' function. */
+#undef HAVE_RAND_EGD
 
-/* Define if you have the <inttypes.h> header file.  */
-#undef HAVE_INTTYPES_H
+/* Define to 1 if you have the `RAND_status' function. */
+#undef HAVE_RAND_STATUS
 
-/* Define if you have the <ioctl.h> header file.  */
-#undef HAVE_IOCTL_H
+/* Define to 1 if you have the `regcomp' function. */
+#undef HAVE_REGCOMP
 
-/* Define if you have the <limits.h> header file.  */
-#undef HAVE_LIMITS_H
+/* Define to 1 if you have the `setegid' function. */
+#undef HAVE_SETEGID
 
-/* Define if you have the <locale.h> header file.  */
-#undef HAVE_LOCALE_H
+/* Define to 1 if you have the `setenv' function. */
+#undef HAVE_SETENV
 
-/* Define if you have the <malloc.h> header file.  */
-#undef HAVE_MALLOC_H
+/* Define to 1 if you have the `setlocale' function. */
+#undef HAVE_SETLOCALE
 
-/* Define if you have the <ncurses.h> header file.  */
-#undef HAVE_NCURSES_H
+/* Define to 1 if you have the `setrlimit' function. */
+#undef HAVE_SETRLIMIT
 
-/* Define if you have the <ncursesw/ncurses.h> header file.  */
-#undef HAVE_NCURSESW_NCURSES_H
+/* Define to 1 if you have the `snprintf' function. */
+#undef HAVE_SNPRINTF
 
-/* Define if you have the <nl_types.h> header file.  */
-#undef HAVE_NL_TYPES_H
+/* Define to 1 if you have the `srand48' function. */
+#undef HAVE_SRAND48
 
-/* Define if you have the <stdarg.h> header file.  */
+/* Define to 1 if you have the <stdarg.h> header file. */
 #undef HAVE_STDARG_H
 
-/* Define if you have the <stddef.h> header file.  */
+/* Define to 1 if you have the <stddef.h> header file. */
 #undef HAVE_STDDEF_H
 
-/* Define if you have the <stdint.h> header file.  */
+/* Define to 1 if you have the <stdint.h> header file. */
 #undef HAVE_STDINT_H
 
-/* Define if you have the <stdlib.h> header file.  */
+/* Define to 1 if you have the <stdlib.h> header file. */
 #undef HAVE_STDLIB_H
 
-/* Define if you have the <string.h> header file.  */
+/* Define to 1 if you have the `stpcpy' function. */
+#undef HAVE_STPCPY
+
+/* Define to 1 if you have the `strcasecmp' function. */
+#undef HAVE_STRCASECMP
+
+/* Define to 1 if you have the `strchr' function. */
+#undef HAVE_STRCHR
+
+/* Define to 1 if you have the `strdup' function. */
+#undef HAVE_STRDUP
+
+/* Define to 1 if you have the `strerror' function. */
+#undef HAVE_STRERROR
+
+/* Define to 1 if you have the `strftime' function. */
+#undef HAVE_STRFTIME
+
+/* Define to 1 if you have the <strings.h> header file. */
+#undef HAVE_STRINGS_H
+
+/* Define to 1 if you have the <string.h> header file. */
 #undef HAVE_STRING_H
 
-/* Define if you have the <sys/ioctl.h> header file.  */
+/* Define to 1 if you have the `strtoul' function. */
+#undef HAVE_STRTOUL
+
+/* Define to 1 if you have the <sysexits.h> header file. */
+#undef HAVE_SYSEXITS_H
+
+/* Define to 1 if you have the <sys/ioctl.h> header file. */
 #undef HAVE_SYS_IOCTL_H
 
-/* Define if you have the <sys/param.h> header file.  */
+/* Define to 1 if you have the <sys/param.h> header file. */
 #undef HAVE_SYS_PARAM_H
 
-/* Define if you have the <sys/resource.h> header file.  */
+/* Define to 1 if you have the <sys/resource.h> header file. */
 #undef HAVE_SYS_RESOURCE_H
 
-/* Define if you have the <sys/time.h> header file.  */
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#undef HAVE_SYS_STAT_H
+
+/* Define to 1 if you have the <sys/time.h> header file. */
 #undef HAVE_SYS_TIME_H
 
-/* Define if you have the <sysexits.h> header file.  */
-#undef HAVE_SYSEXITS_H
+/* Define to 1 if you have the <sys/types.h> header file. */
+#undef HAVE_SYS_TYPES_H
+
+/* Define to 1 if you have the `towlower' function. */
+#undef HAVE_TOWLOWER
 
-/* Define if you have the <unistd.h> header file.  */
+/* Define to 1 if you have the `towupper' function. */
+#undef HAVE_TOWUPPER
+
+/* Define to 1 if you have the `tsearch' function. */
+#undef HAVE_TSEARCH
+
+/* Define if you have the uint32_t type. */
+#undef HAVE_UINT32_T
+
+/* Define to 1 if you have the <unistd.h> header file. */
 #undef HAVE_UNISTD_H
 
-/* Define if you have the <unix.h> header file.  */
+/* Define to 1 if you have the <unix.h> header file. */
 #undef HAVE_UNIX_H
 
-/* Define if you have the <wchar.h> header file.  */
+/* Define to 1 if you have the `vsnprintf' function. */
+#undef HAVE_VSNPRINTF
+
+/* Define to 1 if you have the <wchar.h> header file. */
 #undef HAVE_WCHAR_H
 
-/* Define if you have the <wctype.h> header file.  */
+/* Define to 1 if you have the <wctype.h> header file. */
 #undef HAVE_WCTYPE_H
 
-/* Define if you have the crypto library (-lcrypto).  */
-#undef HAVE_LIBCRYPTO
-
-/* Define if you have the nsl library (-lnsl).  */
-#undef HAVE_LIBNSL
-
-/* Define if you have the sasl library (-lsasl).  */
-#undef HAVE_LIBSASL
-
-/* Define if you have the socket library (-lsocket).  */
-#undef HAVE_LIBSOCKET
+/* Define if you are using the system's wchar_t functions. */
+#undef HAVE_WC_FUNCS
 
-/* Define if you have the ssl library (-lssl).  */
-#undef HAVE_LIBSSL
+/* Define to 1 if you have the `__argz_count' function. */
+#undef HAVE___ARGZ_COUNT
 
-/* Define if you have the termlib library (-ltermlib).  */
-#undef HAVE_LIBTERMLIB
+/* Define to 1 if you have the `__argz_next' function. */
+#undef HAVE___ARGZ_NEXT
 
-/* Name of package */
-#undef PACKAGE
+/* Define to 1 if you have the `__argz_stringify' function. */
+#undef HAVE___ARGZ_STRINGIFY
 
-/* Version number of package */
-#undef VERSION
+/* Define as const if the declaration of iconv() needs const. */
+#undef ICONV_CONST
 
-/* Define if compiler has function prototypes */
-#undef PROTOTYPES
+/* Where to find ispell on your system. */
+#undef ISPELL
 
-/*  Where to find sendmail on your system.  */
-#undef SENDMAIL
+/* Define if the result of isprint() is unreliable. */
+#undef LOCALES_HACK
 
-/*  Define if you want PGP support.  */
-#undef HAVE_PGP
+/* Where new mail is spooled. */
+#undef MAILPATH
 
-/*  Where to find mixmaster on your system.  */
+/* Where to find mixmaster on your system. */
 #undef MIXMASTER
 
-/*  Is this the international version?  */
-#undef SUBVERSION
+/* Name of package */
+#undef PACKAGE
 
-/*  Where to find ispell on your system.  */
-#undef ISPELL
+/* Define to the address where bug reports for this package should be sent. */
+#undef PACKAGE_BUGREPORT
 
-/*  Define if you compile with SLang instead of curses/ncurses.  */
-#undef USE_SLANG_CURSES
+/* Define to the full name of this package. */
+#undef PACKAGE_NAME
 
-/*  Define if your curses library supports color.  */
-#undef HAVE_COLOR
+/* Define to the full name and version of this package. */
+#undef PACKAGE_STRING
 
-/*  Define if your curses library supports color.  */
-#undef HAVE_COLOR
+/* Define to the one symbol short name of this package. */
+#undef PACKAGE_TARNAME
 
-/*  Define if you have the uint32_t type.  */
-#undef HAVE_UINT32_T
+/* Define to the version of this package. */
+#undef PACKAGE_VERSION
 
-/*  Define if you want to use the included regex.c.  */
-#undef USE_GNU_REGEX
+/* Define if compiler has function prototypes */
+#undef PROTOTYPES
 
-/*  Where new mail is spooled.  */
-#undef MAILPATH
+/* Define as the return type of signal handlers (`int' or `void'). */
+#undef RETSIGTYPE
 
-/*  Define to use dotlocking for mailboxes.  */
-#undef USE_DOTLOCK
+/* Where to find sendmail on your system. */
+#undef SENDMAIL
 
-/*  Where new mail is spooled.  */
-#undef MAILPATH
+/* The size of a `int', as computed by sizeof. */
+#undef SIZEOF_INT
 
-/*  Define to use dotlocking for mailboxes.  */
-#undef USE_DOTLOCK
+/* The size of a `long', as computed by sizeof. */
+#undef SIZEOF_LONG
 
-/*  Define to use dotlocking for mailboxes.  */
-#undef USE_DOTLOCK
+/* If using the C implementation of alloca, define if you know the
+   direction of stack growth for your system; otherwise it will be
+   automatically deduced at run-time.
+        STACK_DIRECTION > 0 => grows toward higher addresses
+        STACK_DIRECTION < 0 => grows toward lower addresses
+        STACK_DIRECTION = 0 => direction of growth unknown */
+#undef STACK_DIRECTION
 
-/*  Define if mutt should run setgid mail.  */
-#undef USE_SETGID
+/* Define to 1 if you have the ANSI C header files. */
+#undef STDC_HEADERS
 
-/*  Define if you want to use an external dotlocking program.  */
-#undef DL_STANDALONE
+/* Is this the international version? */
+#undef SUBVERSION
 
-/*  Define your domain name.  */
-#undef DOMAIN
+/* Define to enable Sun mailtool attachments support. */
+#undef SUN_ATTACHMENT
 
-/*  Define if you want support for the POP3 protocol.  */
-#undef USE_POP
+/* Define to 1 if `sys_siglist' is declared by <signal.h> or <unistd.h>. */
+#undef SYS_SIGLIST_DECLARED
 
-/*  Define if you want support for the IMAP protocol.  */
-#undef USE_IMAP
+/* Define to support compressed folders. */
+#undef USE_COMPRESSED
 
-/*  Define to 'int' if <sys/socket.h> doesn't have it.  */
-#undef socklen_t
+/* Define to use dotlocking for mailboxes. */
+#undef USE_DOTLOCK
 
-/*  Include code for socket support. Set automatically if you enable POP3 or IMAP  */
-#undef USE_SOCKET
+/* Define to use fcntl() to lock folders. */
+#undef USE_FCNTL
 
-/*  Define if your GSSAPI implementation is Heimdal  */
-#undef HAVE_HEIMDAL
+/* Define to use flock() to lock mailboxes. */
+#undef USE_FLOCK
 
-/*  Define if you have GSSAPI libraries available  */
+/* Define if you want to use the included regex.c. */
+#undef USE_GNU_REGEX
+
+/* Define if you have GSSAPI libraries available */
 #undef USE_GSS
 
-/*  Define if you want support for SSL.  */
-#undef USE_SSL
+/* Define if you want support for the IMAP protocol. */
+#undef USE_IMAP
 
-/*  Define if you want support for SSL via the NSS library.  */
+/* Define if you want support for SSL via the NSS library. */
 #undef USE_NSS
 
-/*  Define if want to use the Cyrus SASL library for POP/IMAP authentication.  */
-#undef USE_SASL
+/* Define if you want support for the POP3 protocol. */
+#undef USE_POP
 
-/*  Define to enable debugging info.  */
-#undef DEBUG
+/* Define if want to use the Cyrus SASL library for POP/IMAP authentication.
+   */
+#undef USE_SASL
 
-/*  Define to use flock() to lock mailboxes.  */
-#undef USE_FLOCK
+/* Define if mutt should run setgid "mail". */
+#undef USE_SETGID
 
-/*  Define to use fcntl() to lock folders.  */
-#undef USE_FCNTL
+/* Define if you compile with SLang instead of curses/ncurses. */
+#undef USE_SLANG_CURSES
 
-/*  Define to enable the buffy_size feature.  */
-#undef BUFFY_SIZE
+/* Include code for socket support. Set automatically if you enable POP3 or
+   IMAP */
+#undef USE_SOCKET
 
-/*  Define to enable Sun mailtool attachments support.  */
-#undef SUN_ATTACHMENT
+/* Define if you want support for SSL. */
+#undef USE_SSL
 
-/* Define to enable compressed mailboxes support */
-#undef USE_COMPRESSED
+/* Version number of package */
+#undef VERSION
 
-/*  Define if the result of isprint() is unreliable.  */
-#undef LOCALES_HACK
+/* Define to 1 if your processor stores words with the most significant byte
+   first (like Motorola and SPARC, unlike Intel and VAX). */
+#undef WORDS_BIGENDIAN
 
-/* Define if you have the iconv() function. */
-#undef HAVE_ICONV
+/* Define to empty if `const' does not conform to ANSI C. */
+#undef const
 
-/* Define as const if the declaration of iconv() needs const. */
-#undef ICONV_CONST
+/* Define as `__inline' if that's what the C compiler calls it, or to nothing
+   if it is not supported. */
+#undef inline
 
-/* Define if you have <langinfo.h> and nl_langinfo(CODESET). */
-#undef HAVE_LANGINFO_CODESET
+/* Define to 'int' if system headers don't define. */
+#undef mbstate_t
 
-/* Define if your <locale.h> file defines LC_MESSAGES. */
-#undef HAVE_LC_MESSAGES
+/* Define to `long' if <sys/types.h> does not define. */
+#undef off_t
 
-/* Define to 1 if translation of program messages to the user's native language
-   is requested. */
-#undef ENABLE_NLS
+/* Define to `int' if <sys/types.h> does not define. */
+#undef pid_t
 
-/* Define if the GNU gettext() function is already present or preinstalled. */
-#undef HAVE_GETTEXT
+/* Define to `int' if <sys/types.h> does not define. */
+#undef sig_atomic_t
 
-/* Define if <iconv.h> defines iconv_t. */
-#undef HAVE_ICONV_T_DEF
+/* Define to `unsigned' if <sys/types.h> does not define. */
+#undef size_t
 
-/*  Define if your gettext has bind_textdomain_codeset.  */
-#undef HAVE_BIND_TEXTDOMAIN_CODESET
+/* Define to 'int' if <sys/socket.h> doesn't have it. */
+#undef socklen_t
 
-/*  Define to 'int' if system headers don't define.  */
+/* Define to 'int' if system headers don't define. */
 #undef wchar_t
 
-/*  Define to 'int' if system headers don't define.  */
+/* Define to 'int' if system headers don't define. */
 #undef wint_t
-
-/*  Define to 'int' if system headers don't define.  */
-#undef mbstate_t
-
-/*  Define if you are using the system's wchar_t functions.  */
-#undef HAVE_WC_FUNCS
-
-/*  Define if you have <langinfo.h> and nl_langinfo(CODESET).  */
-#undef HAVE_LANGINFO_CODESET
-
-/*  Define if you have <langinfo.h> and nl_langinfo(YESEXPR).  */
-#undef HAVE_LANGINFO_YESEXPR
-
 /* Define if you have start_color, as a function or macro.  */
 #undef HAVE_START_COLOR
 
diff -uNr mutt-1.4.orig/config.h.in~ mutt-1.4/config.h.in~
--- mutt-1.4.orig/config.h.in~	Thu Jan  1 01:00:00 1970
+++ mutt-1.4/config.h.in~	Sun Nov  3 21:57:20 2002
@@ -0,0 +1,525 @@
+/* config.h.in.  Generated automatically from configure.in by autoheader 2.13.  */
+
+/* Define if using alloca.c.  */
+#undef C_ALLOCA
+
+/* Define to empty if the keyword does not work.  */
+#undef const
+
+/* Define to one of _getb67, GETB67, getb67 for Cray-2 and Cray-YMP systems.
+   This function is required for alloca.c support on those systems.  */
+#undef CRAY_STACKSEG_END
+
+/* Define if you have alloca, as a function or macro.  */
+#undef HAVE_ALLOCA
+
+/* Define if you have <alloca.h> and it should be used (not on Ultrix).  */
+#undef HAVE_ALLOCA_H
+
+/* Define if you have a working `mmap' system call.  */
+#undef HAVE_MMAP
+
+/* Define as __inline if that's what the C compiler calls it.  */
+#undef inline
+
+/* Define to `long' if <sys/types.h> doesn't define.  */
+#undef off_t
+
+/* Define to `int' if <sys/types.h> doesn't define.  */
+#undef pid_t
+
+/* Define as the return type of signal handlers (int or void).  */
+#undef RETSIGTYPE
+
+/* Define to `unsigned' if <sys/types.h> doesn't define.  */
+#undef size_t
+
+/* If using the C implementation of alloca, define if you know the
+   direction of stack growth for your system; otherwise it will be
+   automatically deduced at run-time.
+ STACK_DIRECTION > 0 => grows toward higher addresses
+ STACK_DIRECTION < 0 => grows toward lower addresses
+ STACK_DIRECTION = 0 => direction of growth unknown
+ */
+#undef STACK_DIRECTION
+
+/* Define if you have the ANSI C header files.  */
+#undef STDC_HEADERS
+
+/* Define if `sys_siglist' is declared by <signal.h>.  */
+#undef SYS_SIGLIST_DECLARED
+
+/* Define if your processor stores words with the most significant
+   byte first (like Motorola and SPARC, unlike Intel and VAX).  */
+#undef WORDS_BIGENDIAN
+
+/*
+ * Define if you have problems with mutt not detecting new/old mailboxes
+ * over NFS.  Some NFS implementations incorrectly cache the attributes
+ * of small files.
+ */
+#undef NFS_ATTRIBUTE_HACK
+
+/*
+ * Is mail spooled to the user's home directory?  If defined, MAILPATH should
+ * be set to the filename of the spool mailbox relative the the home
+ * directory.
+ * use: configure --with-homespool=FILE
+ */
+#undef HOMESPOOL
+
+/* Compiling with newsreading support with NNTP */
+#undef USE_NNTP
+
+/* program to use for shell commands */
+#define EXECSHELL "/bin/sh"
+
+/* Enable exact regeneration of email addresses as parsed?  NOTE: this requires
+   significant more memory when defined. */
+#undef EXACT_ADDRESS
+
+/* Define to `int' if <signal.h> doesn't define.  */
+#undef sig_atomic_t
+
+/* The number of bytes in a int.  */
+#undef SIZEOF_INT
+
+/* The number of bytes in a long.  */
+#undef SIZEOF_LONG
+
+/* Define if you have the RAND_egd function.  */
+#undef HAVE_RAND_EGD
+
+/* Define if you have the RAND_status function.  */
+#undef HAVE_RAND_STATUS
+
+/* Define if you have the __argz_count function.  */
+#undef HAVE___ARGZ_COUNT
+
+/* Define if you have the __argz_next function.  */
+#undef HAVE___ARGZ_NEXT
+
+/* Define if you have the __argz_stringify function.  */
+#undef HAVE___ARGZ_STRINGIFY
+
+/* Define if you have the bind_textdomain_codeset function.  */
+#undef HAVE_BIND_TEXTDOMAIN_CODESET
+
+/* Define if you have the dcgettext function.  */
+#undef HAVE_DCGETTEXT
+
+/* Define if you have the fchdir function.  */
+#undef HAVE_FCHDIR
+
+/* Define if you have the feof_unlocked function.  */
+#undef HAVE_FEOF_UNLOCKED
+
+/* Define if you have the fgetpos function.  */
+#undef HAVE_FGETPOS
+
+/* Define if you have the fgets_unlocked function.  */
+#undef HAVE_FGETS_UNLOCKED
+
+/* Define if you have the ftruncate function.  */
+#undef HAVE_FTRUNCATE
+
+/* Define if you have the getaddrinfo function.  */
+#undef HAVE_GETADDRINFO
+
+/* Define if you have the getcwd function.  */
+#undef HAVE_GETCWD
+
+/* Define if you have the getegid function.  */
+#undef HAVE_GETEGID
+
+/* Define if you have the geteuid function.  */
+#undef HAVE_GETEUID
+
+/* Define if you have the getgid function.  */
+#undef HAVE_GETGID
+
+/* Define if you have the getpagesize function.  */
+#undef HAVE_GETPAGESIZE
+
+/* Define if you have the getsid function.  */
+#undef HAVE_GETSID
+
+/* Define if you have the getuid function.  */
+#undef HAVE_GETUID
+
+/* Define if you have the iswalnum function.  */
+#undef HAVE_ISWALNUM
+
+/* Define if you have the iswalpha function.  */
+#undef HAVE_ISWALPHA
+
+/* Define if you have the iswcntrl function.  */
+#undef HAVE_ISWCNTRL
+
+/* Define if you have the iswdigit function.  */
+#undef HAVE_ISWDIGIT
+
+/* Define if you have the iswgraph function.  */
+#undef HAVE_ISWGRAPH
+
+/* Define if you have the iswlower function.  */
+#undef HAVE_ISWLOWER
+
+/* Define if you have the iswprint function.  */
+#undef HAVE_ISWPRINT
+
+/* Define if you have the iswpunct function.  */
+#undef HAVE_ISWPUNCT
+
+/* Define if you have the iswspace function.  */
+#undef HAVE_ISWSPACE
+
+/* Define if you have the iswupper function.  */
+#undef HAVE_ISWUPPER
+
+/* Define if you have the iswxdigit function.  */
+#undef HAVE_ISWXDIGIT
+
+/* Define if you have the memmove function.  */
+#undef HAVE_MEMMOVE
+
+/* Define if you have the mempcpy function.  */
+#undef HAVE_MEMPCPY
+
+/* Define if you have the munmap function.  */
+#undef HAVE_MUNMAP
+
+/* Define if you have the putenv function.  */
+#undef HAVE_PUTENV
+
+/* Define if you have the regcomp function.  */
+#undef HAVE_REGCOMP
+
+/* Define if you have the setegid function.  */
+#undef HAVE_SETEGID
+
+/* Define if you have the setenv function.  */
+#undef HAVE_SETENV
+
+/* Define if you have the setlocale function.  */
+#undef HAVE_SETLOCALE
+
+/* Define if you have the setrlimit function.  */
+#undef HAVE_SETRLIMIT
+
+/* Define if you have the snprintf function.  */
+#undef HAVE_SNPRINTF
+
+/* Define if you have the srand48 function.  */
+#undef HAVE_SRAND48
+
+/* Define if you have the stpcpy function.  */
+#undef HAVE_STPCPY
+
+/* Define if you have the strcasecmp function.  */
+#undef HAVE_STRCASECMP
+
+/* Define if you have the strchr function.  */
+#undef HAVE_STRCHR
+
+/* Define if you have the strdup function.  */
+#undef HAVE_STRDUP
+
+/* Define if you have the strerror function.  */
+#undef HAVE_STRERROR
+
+/* Define if you have the strftime function.  */
+#undef HAVE_STRFTIME
+
+/* Define if you have the strtoul function.  */
+#undef HAVE_STRTOUL
+
+/* Define if you have the towlower function.  */
+#undef HAVE_TOWLOWER
+
+/* Define if you have the towupper function.  */
+#undef HAVE_TOWUPPER
+
+/* Define if you have the tsearch function.  */
+#undef HAVE_TSEARCH
+
+/* Define if you have the vsnprintf function.  */
+#undef HAVE_VSNPRINTF
+
+/* Define if you have the <argz.h> header file.  */
+#undef HAVE_ARGZ_H
+
+/* Define if you have the <getopt.h> header file.  */
+#undef HAVE_GETOPT_H
+
+/* Define if you have the <iconv.h> header file.  */
+#undef HAVE_ICONV_H
+
+/* Define if you have the <inttypes.h> header file.  */
+#undef HAVE_INTTYPES_H
+
+/* Define if you have the <ioctl.h> header file.  */
+#undef HAVE_IOCTL_H
+
+/* Define if you have the <limits.h> header file.  */
+#undef HAVE_LIMITS_H
+
+/* Define if you have the <locale.h> header file.  */
+#undef HAVE_LOCALE_H
+
+/* Define if you have the <malloc.h> header file.  */
+#undef HAVE_MALLOC_H
+
+/* Define if you have the <ncurses.h> header file.  */
+#undef HAVE_NCURSES_H
+
+/* Define if you have the <ncursesw/ncurses.h> header file.  */
+#undef HAVE_NCURSESW_NCURSES_H
+
+/* Define if you have the <nl_types.h> header file.  */
+#undef HAVE_NL_TYPES_H
+
+/* Define if you have the <stdarg.h> header file.  */
+#undef HAVE_STDARG_H
+
+/* Define if you have the <stddef.h> header file.  */
+#undef HAVE_STDDEF_H
+
+/* Define if you have the <stdint.h> header file.  */
+#undef HAVE_STDINT_H
+
+/* Define if you have the <stdlib.h> header file.  */
+#undef HAVE_STDLIB_H
+
+/* Define if you have the <string.h> header file.  */
+#undef HAVE_STRING_H
+
+/* Define if you have the <sys/ioctl.h> header file.  */
+#undef HAVE_SYS_IOCTL_H
+
+/* Define if you have the <sys/param.h> header file.  */
+#undef HAVE_SYS_PARAM_H
+
+/* Define if you have the <sys/resource.h> header file.  */
+#undef HAVE_SYS_RESOURCE_H
+
+/* Define if you have the <sys/time.h> header file.  */
+#undef HAVE_SYS_TIME_H
+
+/* Define if you have the <sysexits.h> header file.  */
+#undef HAVE_SYSEXITS_H
+
+/* Define if you have the <unistd.h> header file.  */
+#undef HAVE_UNISTD_H
+
+/* Define if you have the <unix.h> header file.  */
+#undef HAVE_UNIX_H
+
+/* Define if you have the <wchar.h> header file.  */
+#undef HAVE_WCHAR_H
+
+/* Define if you have the <wctype.h> header file.  */
+#undef HAVE_WCTYPE_H
+
+/* Define if you have the crypto library (-lcrypto).  */
+#undef HAVE_LIBCRYPTO
+
+/* Define if you have the nsl library (-lnsl).  */
+#undef HAVE_LIBNSL
+
+/* Define if you have the sasl library (-lsasl).  */
+#undef HAVE_LIBSASL
+
+/* Define if you have the socket library (-lsocket).  */
+#undef HAVE_LIBSOCKET
+
+/* Define if you have the ssl library (-lssl).  */
+#undef HAVE_LIBSSL
+
+/* Define if you have the termlib library (-ltermlib).  */
+#undef HAVE_LIBTERMLIB
+
+/* Name of package */
+#undef PACKAGE
+
+/* Version number of package */
+#undef VERSION
+
+/* Define if compiler has function prototypes */
+#undef PROTOTYPES
+
+/*  Where to find sendmail on your system.  */
+#undef SENDMAIL
+
+/*  Define if you want PGP support.  */
+#undef HAVE_PGP
+
+/*  Where to find mixmaster on your system.  */
+#undef MIXMASTER
+
+/*  Is this the international version?  */
+#undef SUBVERSION
+
+/*  Where to find ispell on your system.  */
+#undef ISPELL
+
+/*  Define if you compile with SLang instead of curses/ncurses.  */
+#undef USE_SLANG_CURSES
+
+/*  Define if your curses library supports color.  */
+#undef HAVE_COLOR
+
+/*  Define if your curses library supports color.  */
+#undef HAVE_COLOR
+
+/*  Define if you have the uint32_t type.  */
+#undef HAVE_UINT32_T
+
+/*  Define if you want to use the included regex.c.  */
+#undef USE_GNU_REGEX
+
+/*  Where new mail is spooled.  */
+#undef MAILPATH
+
+/*  Define to use dotlocking for mailboxes.  */
+#undef USE_DOTLOCK
+
+/*  Where new mail is spooled.  */
+#undef MAILPATH
+
+/*  Define to use dotlocking for mailboxes.  */
+#undef USE_DOTLOCK
+
+/*  Define to use dotlocking for mailboxes.  */
+#undef USE_DOTLOCK
+
+/*  Define if mutt should run setgid mail.  */
+#undef USE_SETGID
+
+/*  Define if you want to use an external dotlocking program.  */
+#undef DL_STANDALONE
+
+/*  Define your domain name.  */
+#undef DOMAIN
+
+/*  Define if you want support for the POP3 protocol.  */
+#undef USE_POP
+
+/*  Define if you want support for the IMAP protocol.  */
+#undef USE_IMAP
+
+/*  Define to 'int' if <sys/socket.h> doesn't have it.  */
+#undef socklen_t
+
+/*  Include code for socket support. Set automatically if you enable POP3 or IMAP  */
+#undef USE_SOCKET
+
+/*  Define if your GSSAPI implementation is Heimdal  */
+#undef HAVE_HEIMDAL
+
+/*  Define if you have GSSAPI libraries available  */
+#undef USE_GSS
+
+/*  Define if you want support for SSL.  */
+#undef USE_SSL
+
+/*  Define if you want support for SSL via the NSS library.  */
+#undef USE_NSS
+
+/*  Define if want to use the Cyrus SASL library for POP/IMAP authentication.  */
+#undef USE_SASL
+
+/*  Define to enable debugging info.  */
+#undef DEBUG
+
+/*  Define to use flock() to lock mailboxes.  */
+#undef USE_FLOCK
+
+/*  Define to use fcntl() to lock folders.  */
+#undef USE_FCNTL
+
+/*  Define to enable the buffy_size feature.  */
+#undef BUFFY_SIZE
+
+/*  Define to enable Sun mailtool attachments support.  */
+#undef SUN_ATTACHMENT
+
+/* Define to enable compressed mailboxes support */
+#undef USE_COMPRESSED
+
+/*  Define if the result of isprint() is unreliable.  */
+#undef LOCALES_HACK
+
+/* Define if you have the iconv() function. */
+#undef HAVE_ICONV
+
+/* Define as const if the declaration of iconv() needs const. */
+#undef ICONV_CONST
+
+/* Define if you have <langinfo.h> and nl_langinfo(CODESET). */
+#undef HAVE_LANGINFO_CODESET
+
+/* Define if your <locale.h> file defines LC_MESSAGES. */
+#undef HAVE_LC_MESSAGES
+
+/* Define to 1 if translation of program messages to the user's native language
+   is requested. */
+#undef ENABLE_NLS
+
+/* Define if the GNU gettext() function is already present or preinstalled. */
+#undef HAVE_GETTEXT
+
+/* Define if <iconv.h> defines iconv_t. */
+#undef HAVE_ICONV_T_DEF
+
+/*  Define if your gettext has bind_textdomain_codeset.  */
+#undef HAVE_BIND_TEXTDOMAIN_CODESET
+
+/*  Define to 'int' if system headers don't define.  */
+#undef wchar_t
+
+/*  Define to 'int' if system headers don't define.  */
+#undef wint_t
+
+/*  Define to 'int' if system headers don't define.  */
+#undef mbstate_t
+
+/*  Define if you are using the system's wchar_t functions.  */
+#undef HAVE_WC_FUNCS
+
+/*  Define if you have <langinfo.h> and nl_langinfo(CODESET).  */
+#undef HAVE_LANGINFO_CODESET
+
+/*  Define if you have <langinfo.h> and nl_langinfo(YESEXPR).  */
+#undef HAVE_LANGINFO_YESEXPR
+
+/* Define if you have start_color, as a function or macro.  */
+#undef HAVE_START_COLOR
+
+/* Define if you have typeahead, as a function or macro.  */
+#undef HAVE_TYPEAHEAD
+
+/* Define if you have bkgdset, as a function or macro.  */
+#undef HAVE_BKGDSET
+
+/* Define if you have curs_set, as a function or macro.  */
+#undef HAVE_CURS_SET
+
+/* Define if you have meta, as a function or macro.  */
+#undef HAVE_META
+
+/* Define if you have use_default_colors, as a function or macro.  */
+#undef HAVE_USE_DEFAULT_COLORS
+
+/* Define if you have resizeterm, as a function or macro.  */
+#undef HAVE_RESIZETERM
+
+/* Some systems declare sig_atomic_t as volatile, some others -- no.
+ * This define will have value `sig_atomic_t' or `volatile sig_atomic_t'
+ * accordingly. */
+#undef SIG_ATOMIC_VOLATILE_T
+
+/* Define as 1 if iconv() only converts exactly and we should treat
+ * all return values other than (size_t)(-1) as equivalent. */
+#undef ICONV_NONTRANS
+
diff -uNr mutt-1.4.orig/config.sub mutt-1.4/config.sub
--- mutt-1.4.orig/config.sub	Wed Jan 16 21:44:49 2002
+++ mutt-1.4/config.sub	Sun Nov  3 21:57:29 2002
@@ -3,7 +3,7 @@
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
 #   2000, 2001, 2002 Free Software Foundation, Inc.
 
-timestamp='2002-01-02'
+timestamp='2002-07-03'
 
 # This file is (in principle) common to ALL GNU software.
 # The presence of a machine in this file suggests that SOME GNU software
@@ -118,7 +118,7 @@
 # Here we must recognize all the valid KERNEL-OS combinations.
 maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
 case $maybe_os in
-  nto-qnx* | linux-gnu* | storm-chaos* | os2-emx* | windows32-*)
+  nto-qnx* | linux-gnu* | freebsd*-gnu* | storm-chaos* | os2-emx* | windows32-* | rtmk-nova*)
     os=-$maybe_os
     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
     ;;
@@ -230,24 +230,32 @@
 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
 	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
 	| c4x | clipper \
-	| d10v | d30v | dsp16xx \
-	| fr30 \
+	| d10v | d30v | dlx | dsp16xx \
+	| fr30 | frv \
 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
 	| i370 | i860 | i960 | ia64 \
+	| ip2k \
 	| m32r | m68000 | m68k | m88k | mcore \
-	| mips16 | mips64 | mips64el | mips64orion | mips64orionel \
-	| mips64vr4100 | mips64vr4100el | mips64vr4300 \
-	| mips64vr4300el | mips64vr5000 | mips64vr5000el \
-	| mipsbe | mipseb | mipsel | mipsle | mipstx39 | mipstx39el \
-	| mipsisa32 \
+	| mips | mipsbe | mipseb | mipsel | mipsle \
+	| mips16 \
+	| mips64 | mips64el \
+	| mips64orion | mips64orionel \
+	| mips64vr4100 | mips64vr4100el \
+	| mips64vr4300 | mips64vr4300el \
+	| mips64vr5000 | mips64vr5000el \
+	| mipsisa32 | mipsisa32el \
+	| mipsisa64 | mipsisa64el \
+	| mipsisa64sb1 | mipsisa64sb1el \
+	| mipstx39 | mipstx39el \
 	| mn10200 | mn10300 \
 	| ns16k | ns32k \
-	| openrisc \
+	| openrisc | or32 \
 	| pdp10 | pdp11 | pj | pjl \
 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
 	| pyramid \
-	| sh | sh[34] | sh[34]eb | shbe | shle \
-	| sparc | sparc64 | sparclet | sparclite | sparcv9 | sparcv9b \
+	| sh | sh[1234] | sh3e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+	| sh64 | sh64le \
+	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv9 | sparcv9b \
 	| strongarm \
 	| tahoe | thumb | tic80 | tron \
 	| v850 | v850e \
@@ -281,37 +289,46 @@
 	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
 	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
 	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
-	| arm-*  | armbe-* | armle-* | armv*-* \
+	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
 	| avr-* \
 	| bs2000-* \
 	| c[123]* | c30-* | [cjt]90-* | c54x-* \
-	| clipper-* | cray2-* | cydra-* \
-	| d10v-* | d30v-* \
+	| clipper-* | cydra-* \
+	| d10v-* | d30v-* | dlx-* \
 	| elxsi-* \
-	| f30[01]-* | f700-* | fr30-* | fx80-* \
+	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
 	| h8300-* | h8500-* \
 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
 	| i*86-* | i860-* | i960-* | ia64-* \
+	| ip2k-* \
 	| m32r-* \
-	| m68000-* | m680[01234]0-* | m68360-* | m683?2-* | m68k-* \
+	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
 	| m88110-* | m88k-* | mcore-* \
-	| mips-* | mips16-* | mips64-* | mips64el-* | mips64orion-* \
-	| mips64orionel-* | mips64vr4100-* | mips64vr4100el-* \
-	| mips64vr4300-* | mips64vr4300el-* | mipsbe-* | mipseb-* \
-	| mipsle-* | mipsel-* | mipstx39-* | mipstx39el-* \
+	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
+	| mips16-* \
+	| mips64-* | mips64el-* \
+	| mips64orion-* | mips64orionel-* \
+	| mips64vr4100-* | mips64vr4100el-* \
+	| mips64vr4300-* | mips64vr4300el-* \
+	| mips64vr5000-* | mips64vr5000el-* \
+	| mipsisa32-* | mipsisa32el-* \
+	| mipsisa64-* | mipsisa64el-* \
+	| mipsisa64sb1-* | mipsisa64sb1el-* \
+	| mipstx39 | mipstx39el \
 	| none-* | np1-* | ns16k-* | ns32k-* \
 	| orion-* \
 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
 	| pyramid-* \
 	| romp-* | rs6000-* \
-	| sh-* | sh[34]-* | sh[34]eb-* | shbe-* | shle-* \
-	| sparc-* | sparc64-* | sparc86x-* | sparclite-* \
-	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* \
-	| t3e-* | tahoe-* | thumb-* | tic30-* | tic54x-* | tic80-* | tron-* \
+	| sh-* | sh[1234]-* | sh3e-* | sh[34]eb-* | shbe-* \
+	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
+	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
+	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
+	| tahoe-* | thumb-* | tic30-* | tic54x-* | tic80-* | tron-* \
 	| v850-* | v850e-* | vax-* \
 	| we32k-* \
-	| x86-* | x86_64-* | xmp-* | xps100-* | xscale-* | xstormy16-* \
+	| x86-* | x86_64-* | xps100-* | xscale-* | xstormy16-* \
 	| xtensa-* \
 	| ymp-* \
 	| z8k-*)
@@ -377,6 +394,10 @@
 		basic_machine=ns32k-sequent
 		os=-dynix
 		;;
+	c90)
+		basic_machine=c90-cray
+		os=-unicos
+		;;
 	convex-c1)
 		basic_machine=c1-convex
 		os=-bsd
@@ -397,16 +418,8 @@
 		basic_machine=c38-convex
 		os=-bsd
 		;;
-	cray | ymp)
-		basic_machine=ymp-cray
-		os=-unicos
-		;;
-	cray2)
-		basic_machine=cray2-cray
-		os=-unicos
-		;;
-	[cjt]90)
-		basic_machine=${basic_machine}-cray
+	cray | j90)
+		basic_machine=j90-cray
 		os=-unicos
 		;;
 	crds | unos)
@@ -609,14 +622,6 @@
 		basic_machine=m68k-atari
 		os=-mint
 		;;
-	mipsel*-linux*)
-		basic_machine=mipsel-unknown
-		os=-linux-gnu
-		;;
-	mips*-linux*)
-		basic_machine=mips-unknown
-		os=-linux-gnu
-		;;
 	mips3*-*)
 		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
 		;;
@@ -714,6 +719,10 @@
 		basic_machine=hppa1.1-oki
 		os=-proelf
 		;;
+	or32 | or32-*)
+		basic_machine=or32-unknown
+		os=-coff
+		;;
 	OSE68000 | ose68000)
 		basic_machine=m68000-ericsson
 		os=-ose
@@ -874,7 +883,7 @@
 	sun386 | sun386i | roadrunner)
 		basic_machine=i386-sun
 		;;
-	sv1)
+        sv1)
 		basic_machine=sv1-cray
 		os=-unicos
 		;;
@@ -882,8 +891,16 @@
 		basic_machine=i386-sequent
 		os=-dynix
 		;;
+	t3d)
+		basic_machine=alpha-cray
+		os=-unicos
+		;;
 	t3e)
-		basic_machine=t3e-cray
+		basic_machine=alphaev5-cray
+		os=-unicos
+		;;
+	t90)
+		basic_machine=t90-cray
 		os=-unicos
 		;;
 	tic54x | c54x*)
@@ -950,13 +967,13 @@
 		basic_machine=i386-pc
 		os=-windows32-msvcrt
 		;;
-	xmp)
-		basic_machine=xmp-cray
-		os=-unicos
-		;;
         xps | xps100)
 		basic_machine=xps100-honeywell
 		;;
+	ymp)
+		basic_machine=ymp-cray
+		os=-unicos
+		;;
 	z8k-*-coff)
 		basic_machine=z8k-unknown
 		os=-sim
@@ -977,13 +994,6 @@
 	op60c)
 		basic_machine=hppa1.1-oki
 		;;
-	mips)
-		if [ x$os = x-linux-gnu ]; then
-			basic_machine=mips-unknown
-		else
-			basic_machine=mips-mips
-		fi
-		;;
 	romp)
 		basic_machine=romp-ibm
 		;;
@@ -1003,9 +1013,12 @@
 	we32k)
 		basic_machine=we32k-att
 		;;
-	sh3 | sh4 | sh3eb | sh4eb)
+	sh3 | sh4 | sh3eb | sh4eb | sh[1234]le | sh3ele)
 		basic_machine=sh-unknown
 		;;
+	sh64)
+		basic_machine=sh64-unknown
+		;;
 	sparc | sparcv9 | sparcv9b)
 		basic_machine=sparc-sun
 		;;
@@ -1093,7 +1106,8 @@
 	      | -interix* | -uwin* | -rhapsody* | -darwin* | -opened* \
 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
-	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* | -morphos*)
+	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
+	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* | -powermax*)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
 	-qnx*)
@@ -1154,6 +1168,9 @@
 	-ctix* | -uts*)
 		os=-sysv
 		;;
+	-nova*)
+		os=-rtmk-nova
+		;;
 	-ns2 )
 	        os=-nextstep2
 		;;
@@ -1259,6 +1276,9 @@
 	mips*-*)
 		os=-elf
 		;;
+	or32-*)
+		os=-coff
+		;;
 	*-tti)	# must be before sparc entry or we get the wrong os.
 		os=-sysv3
 		;;
@@ -1406,7 +1426,7 @@
 			-ptx*)
 				vendor=sequent
 				;;
-			-vxsim* | -vxworks*)
+			-vxsim* | -vxworks* | -windiss*)
 				vendor=wrs
 				;;
 			-aux*)
diff -uNr mutt-1.4.orig/configure mutt-1.4/configure
--- mutt-1.4.orig/configure	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/configure	Sun Nov  3 21:57:28 2002
@@ -1,88 +1,328 @@
 #! /bin/sh
-
 # Guess values for system-dependent variables and create Makefiles.
-# Generated automatically using autoconf version 2.13 
-# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
+# Generated by GNU Autoconf 2.53a.
 #
+# Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
+# Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
+## --------------------- ##
+## M4sh Initialization.  ##
+## --------------------- ##
+
+# Be Bourne compatible
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+  set -o posix
+fi
+
+# NLS nuisances.
+# Support unset when possible.
+if (FOO=FOO; unset FOO) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+(set +x; test -n "`(LANG=C; export LANG) 2>&1`") &&
+    { $as_unset LANG || test "${LANG+set}" != set; } ||
+      { LANG=C; export LANG; }
+(set +x; test -n "`(LC_ALL=C; export LC_ALL) 2>&1`") &&
+    { $as_unset LC_ALL || test "${LC_ALL+set}" != set; } ||
+      { LC_ALL=C; export LC_ALL; }
+(set +x; test -n "`(LC_TIME=C; export LC_TIME) 2>&1`") &&
+    { $as_unset LC_TIME || test "${LC_TIME+set}" != set; } ||
+      { LC_TIME=C; export LC_TIME; }
+(set +x; test -n "`(LC_CTYPE=C; export LC_CTYPE) 2>&1`") &&
+    { $as_unset LC_CTYPE || test "${LC_CTYPE+set}" != set; } ||
+      { LC_CTYPE=C; export LC_CTYPE; }
+(set +x; test -n "`(LANGUAGE=C; export LANGUAGE) 2>&1`") &&
+    { $as_unset LANGUAGE || test "${LANGUAGE+set}" != set; } ||
+      { LANGUAGE=C; export LANGUAGE; }
+(set +x; test -n "`(LC_COLLATE=C; export LC_COLLATE) 2>&1`") &&
+    { $as_unset LC_COLLATE || test "${LC_COLLATE+set}" != set; } ||
+      { LC_COLLATE=C; export LC_COLLATE; }
+(set +x; test -n "`(LC_NUMERIC=C; export LC_NUMERIC) 2>&1`") &&
+    { $as_unset LC_NUMERIC || test "${LC_NUMERIC+set}" != set; } ||
+      { LC_NUMERIC=C; export LC_NUMERIC; }
+(set +x; test -n "`(LC_MESSAGES=C; export LC_MESSAGES) 2>&1`") &&
+    { $as_unset LC_MESSAGES || test "${LC_MESSAGES+set}" != set; } ||
+      { LC_MESSAGES=C; export LC_MESSAGES; }
+
+
+# Required to use basename.
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+if (basename /) >/dev/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
+  as_basename=basename
+else
+  as_basename=false
+fi
+
+
+# Name of the executable.
+as_me=`$as_basename "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)$' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
+  	  /^X\/\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\/\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+
+
+# PATH needs CR, and LINENO needs CR and PATH.
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# The user is always right.
+if test "${PATH_SEPARATOR+set}" != set; then
+  echo "#! /bin/sh" >conftest.sh
+  echo  "exit 0"   >>conftest.sh
+  chmod +x conftest.sh
+  if (PATH=".;."; conftest.sh) >/dev/null 2>&1; then
+    PATH_SEPARATOR=';'
+  else
+    PATH_SEPARATOR=:
+  fi
+  rm -f conftest.sh
+fi
+
+
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2"  || {
+  # Find who we are.  Look in the path if we contain no path at all
+  # relative or not.
+  case $0 in
+    *[\\/]* ) as_myself=$0 ;;
+    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+done
+
+       ;;
+  esac
+  # We did not find ourselves, most probably we were run as `sh COMMAND'
+  # in which case we are not to be found in the path.
+  if test "x$as_myself" = x; then
+    as_myself=$0
+  fi
+  if test ! -f "$as_myself"; then
+    { echo "$as_me: error: cannot find myself; rerun with an absolute path" >&2
+   { (exit 1); exit 1; }; }
+  fi
+  case $CONFIG_SHELL in
+  '')
+    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for as_base in sh bash ksh sh5; do
+	 case $as_dir in
+	 /*)
+	   if ("$as_dir/$as_base" -c '
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+	     $as_unset BASH_ENV || test "${BASH_ENV+set}" != set || { BASH_ENV=; export BASH_ENV; }
+	     $as_unset ENV || test "${ENV+set}" != set || { ENV=; export ENV; }
+	     CONFIG_SHELL=$as_dir/$as_base
+	     export CONFIG_SHELL
+	     exec "$CONFIG_SHELL" "$0" ${1+"$@"}
+	   fi;;
+	 esac
+       done
+done
+;;
+  esac
+
+  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+  # uniformly replaced by the line number.  The first 'sed' inserts a
+  # line-number line before each line; the second 'sed' does the real
+  # work.  The second script uses 'N' to pair each line-number line
+  # with the numbered line, and appends trailing '-' during
+  # substitution so that $LINENO is not a special case at line end.
+  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+  # second 'sed' script.  Blame Lee E. McMahon for sed's syntax.  :-)
+  sed '=' <$as_myself |
+    sed '
+      N
+      s,$,-,
+      : loop
+      s,^\(['$as_cr_digits']*\)\(.*\)[$]LINENO\([^'$as_cr_alnum'_]\),\1\2\1\3,
+      t loop
+      s,-$,,
+      s,^['$as_cr_digits']*\n,,
+    ' >$as_me.lineno &&
+  chmod +x $as_me.lineno ||
+    { echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+   { (exit 1); exit 1; }; }
+
+  # Don't try to exec as it changes $[0], causing all sort of problems
+  # (the dirname of $[0] is not the place where we might find the
+  # original and so on.  Autoconf is especially sensible to this).
+  . ./$as_me.lineno
+  # Exit status is that of the last command.
+  exit
+}
+
+
+case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
+  *c*,-n*) ECHO_N= ECHO_C='
+' ECHO_T='	' ;;
+  *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
+  *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
+esac
+
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  # We could just check for DJGPP; but this test a) works b) is more generic
+  # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
+  if test -f conf$$.exe; then
+    # Don't use ln at all; we don't have any links
+    as_ln_s='cp -p'
+  else
+    as_ln_s='ln -s'
+  fi
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.file
 
-# Defaults:
-ac_help=
+if mkdir -p . 2>/dev/null; then
+  as_mkdir_p=:
+else
+  as_mkdir_p=false
+fi
+
+as_executable_p="test -f"
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="sed y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g"
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="sed y%*+%pp%;s%[^_$as_cr_alnum]%_%g"
+
+
+# IFS
+# We need space, tab and new line, in precisely that order.
+as_nl='
+'
+IFS=" 	$as_nl"
+
+# CDPATH.
+$as_unset CDPATH || test "${CDPATH+set}" != set || { CDPATH=$PATH_SEPARATOR; export CDPATH; }
+
+
+# Name of the host.
+# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# so uname gets run too.
+ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
+
+exec 6>&1
+
+#
+# Initializations.
+#
 ac_default_prefix=/usr/local
-# Any additions from configure.in:
-ac_help="$ac_help
-  --disable-pgp              Disable PGP support"
-ac_help="$ac_help
-  --with-mixmaster[=PATH]    Include Mixmaster support"
-ac_help="$ac_help
-  --with-slang[=DIR]         Use S-Lang instead of ncurses"
-ac_help="$ac_help
-  --with-curses=DIR          Where ncurses is installed "
-ac_help="$ac_help
-  --with-regex               Use the GNU regex library "
-ac_help="$ac_help
-  --with-homespool[=FILE]    File in user's directory where new mail is spooled"
-ac_help="$ac_help
-  --with-mailpath=DIR        Directory where spool mailboxes are located"
-ac_help="$ac_help
-  --enable-external-dotlock  Force use of an external dotlock program"
-ac_help="$ac_help
-  --with-docdir=PATH         Specify where to put the documentation"
-ac_help="$ac_help
-  --with-domain=DOMAIN       Specify your DNS domain name"
-ac_help="$ac_help
-  --enable-pop               Enable POP3 support"
-ac_help="$ac_help
-  --enable-imap              Enable IMAP support"
-ac_help="$ac_help
-    --with-gss[=PFX]         Compile in GSSAPI authentication for IMAP"
-ac_help="$ac_help
-  --with-ssl[=PFX]           Compile in SSL support for POP/IMAP"
-ac_help="$ac_help
-  --with-nss[=PFX]           Compile in SSL support for POP/IMAP via NSS"
-ac_help="$ac_help
-  --with-sasl[=PFX]          Use Cyrus SASL library for POP/IMAP authentication"
-ac_help="$ac_help
-  --enable-debug             Enable debugging support"
-ac_help="$ac_help
-  --enable-flock             Use flock() to lock files"
-ac_help="$ac_help
-  --disable-fcntl            Do NOT use fcntl() to lock files "
-ac_help="$ac_help
-  --disable-warnings         Turn off compiler warnings (not recommended)"
-ac_help="$ac_help
-  --enable-nfs-fix           Work around an NFS with broken attributes caching "
-ac_help="$ac_help
-  --enable-buffy-size        Use file size attribute instead of access time "
-ac_help="$ac_help
-  --enable-mailtool          Enable Sun mailtool attachments support "
-ac_help="$ac_help
-  --enable-locales-fix       The result of isprint() is unreliable "
-ac_help="$ac_help
-  --enable-compressed        Enable compressed folders support "
-ac_help="$ac_help
-  --with-exec-shell=SHELL    Specify alternate shell (ONLY if /bin/sh is broken)"
-ac_help="$ac_help
-  --enable-exact-address     Enable regeneration of email addresses"
-ac_help="$ac_help
-  --with-iconv[=DIR]  search for libiconv in DIR/include and DIR/lib"
-ac_help="$ac_help
-  --disable-nls           do not use Native Language Support"
-ac_help="$ac_help
-  --with-included-gettext use the GNU gettext library included here"
-ac_help="$ac_help
-  --without-wc-funcs         Do not use the system's wchar_t functions"
+cross_compiling=no
+subdirs=
+MFLAGS=
+MAKEFLAGS=
+SHELL=${CONFIG_SHELL-/bin/sh}
+
+# Maximum number of lines to put in a shell here document.
+# This variable seems obsolete.  It should probably be removed, and
+# only ac_max_sed_lines should be used.
+: ${ac_max_here_lines=38}
+
+# Identity of this package.
+PACKAGE_NAME=
+PACKAGE_TARNAME=
+PACKAGE_VERSION=
+PACKAGE_STRING=
+PACKAGE_BUGREPORT=
+
+ac_unique_file="mutt.h"
+# Factoring default headers for most tests.
+ac_includes_default="\
+#include <stdio.h>
+#if HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#if HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
+#if STDC_HEADERS
+# include <stdlib.h>
+# include <stddef.h>
+#else
+# if HAVE_STDLIB_H
+#  include <stdlib.h>
+# endif
+#endif
+#if HAVE_STRING_H
+# if !STDC_HEADERS && HAVE_MEMORY_H
+#  include <memory.h>
+# endif
+# include <string.h>
+#endif
+#if HAVE_STRINGS_H
+# include <strings.h>
+#endif
+#if HAVE_INTTYPES_H
+# include <inttypes.h>
+#else
+# if HAVE_STDINT_H
+#  include <stdint.h>
+# endif
+#endif
+#if HAVE_UNISTD_H
+# include <unistd.h>
+#endif"
+
 
 # Initialize some variables set by options.
+ac_init_help=
+ac_init_version=false
 # The variables have the same names as the options, with
 # dashes changed to underlines.
-build=NONE
-cache_file=./config.cache
+cache_file=/dev/null
 exec_prefix=NONE
-host=NONE
 no_create=
-nonopt=NONE
 no_recursion=
 prefix=NONE
 program_prefix=NONE
@@ -91,34 +331,31 @@
 silent=
 site=
 srcdir=
-target=NONE
 verbose=
 x_includes=NONE
 x_libraries=NONE
+
+# Installation directory options.
+# These are left unexpanded so users can "make install exec_prefix=/foo"
+# and all the variables that are supposed to be based on exec_prefix
+# by default will actually change.
+# Use braces instead of parens because sh, perl, etc. also accept them.
 bindir='${exec_prefix}/bin'
 sbindir='${exec_prefix}/sbin'
-libexecdir='${exec_prefix}/libexec'
+libexecdir='${exec_prefix}/lib'
 datadir='${prefix}/share'
 sysconfdir='${prefix}/etc'
-sharedstatedir='${prefix}/com'
-localstatedir='${prefix}/var'
+sharedstatedir='/var/lib'
+localstatedir='/var/lib'
 libdir='${exec_prefix}/lib'
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
-infodir='${prefix}/info'
-mandir='${prefix}/man'
-
-# Initialize some other variables.
-subdirs=
-MFLAGS= MAKEFLAGS=
-SHELL=${CONFIG_SHELL-/bin/sh}
-# Maximum number of lines to put in a shell here document.
-ac_max_here_lines=12
+infodir='/usr/share/info'
+mandir='/usr/share/man'
 
 ac_prev=
 for ac_option
 do
-
   # If the previous option needs an argument, assign it.
   if test -n "$ac_prev"; then
     eval "$ac_prev=\$ac_option"
@@ -126,59 +363,59 @@
     continue
   fi
 
-  case "$ac_option" in
-  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
-  *) ac_optarg= ;;
-  esac
+  ac_optarg=`expr "x$ac_option" : 'x[^=]*=\(.*\)'`
 
   # Accept the important Cygnus configure options, so we can diagnose typos.
 
-  case "$ac_option" in
+  case $ac_option in
 
   -bindir | --bindir | --bindi | --bind | --bin | --bi)
     ac_prev=bindir ;;
   -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
-    bindir="$ac_optarg" ;;
+    bindir=$ac_optarg ;;
 
   -build | --build | --buil | --bui | --bu)
-    ac_prev=build ;;
+    ac_prev=build_alias ;;
   -build=* | --build=* | --buil=* | --bui=* | --bu=*)
-    build="$ac_optarg" ;;
+    build_alias=$ac_optarg ;;
 
   -cache-file | --cache-file | --cache-fil | --cache-fi \
   | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
     ac_prev=cache_file ;;
   -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
   | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
-    cache_file="$ac_optarg" ;;
+    cache_file=$ac_optarg ;;
+
+  --config-cache | -C)
+    cache_file=config.cache ;;
 
   -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
     ac_prev=datadir ;;
   -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
   | --da=*)
-    datadir="$ac_optarg" ;;
+    datadir=$ac_optarg ;;
 
   -disable-* | --disable-*)
-    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
+    ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
-      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
-    fi
-    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
-    eval "enable_${ac_feature}=no" ;;
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/-/_/g'`
+    eval "enable_$ac_feature=no" ;;
 
   -enable-* | --enable-*)
-    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
+    ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
-      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
-    fi
-    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
-    case "$ac_option" in
-      *=*) ;;
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid feature name: $ac_feature" >&2
+   { (exit 1); exit 1; }; }
+    ac_feature=`echo $ac_feature | sed 's/-/_/g'`
+    case $ac_option in
+      *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
       *) ac_optarg=yes ;;
     esac
-    eval "enable_${ac_feature}='$ac_optarg'" ;;
+    eval "enable_$ac_feature='$ac_optarg'" ;;
 
   -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
   | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
@@ -187,95 +424,47 @@
   -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
   | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
   | --exec=* | --exe=* | --ex=*)
-    exec_prefix="$ac_optarg" ;;
+    exec_prefix=$ac_optarg ;;
 
   -gas | --gas | --ga | --g)
     # Obsolete; use --with-gas.
     with_gas=yes ;;
 
-  -help | --help | --hel | --he)
-    # Omit some internal or obsolete options to make the list less imposing.
-    # This message is too long to be a string in the A/UX 3.1 sh.
-    cat << EOF
-Usage: configure [options] [host]
-Options: [defaults in brackets after descriptions]
-Configuration:
-  --cache-file=FILE       cache test results in FILE
-  --help                  print this message
-  --no-create             do not create output files
-  --quiet, --silent       do not print \`checking...' messages
-  --version               print the version of autoconf that created configure
-Directory and file names:
-  --prefix=PREFIX         install architecture-independent files in PREFIX
-                          [$ac_default_prefix]
-  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
-                          [same as prefix]
-  --bindir=DIR            user executables in DIR [EPREFIX/bin]
-  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
-  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
-  --datadir=DIR           read-only architecture-independent data in DIR
-                          [PREFIX/share]
-  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
-  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
-                          [PREFIX/com]
-  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
-  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
-  --includedir=DIR        C header files in DIR [PREFIX/include]
-  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
-  --infodir=DIR           info documentation in DIR [PREFIX/info]
-  --mandir=DIR            man documentation in DIR [PREFIX/man]
-  --srcdir=DIR            find the sources in DIR [configure dir or ..]
-  --program-prefix=PREFIX prepend PREFIX to installed program names
-  --program-suffix=SUFFIX append SUFFIX to installed program names
-  --program-transform-name=PROGRAM
-                          run sed PROGRAM on installed program names
-EOF
-    cat << EOF
-Host type:
-  --build=BUILD           configure for building on BUILD [BUILD=HOST]
-  --host=HOST             configure for HOST [guessed]
-  --target=TARGET         configure for TARGET [TARGET=HOST]
-Features and packages:
-  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
-  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
-  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
-  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
-  --x-includes=DIR        X include files are in DIR
-  --x-libraries=DIR       X library files are in DIR
-EOF
-    if test -n "$ac_help"; then
-      echo "--enable and --with options recognized:$ac_help"
-    fi
-    exit 0 ;;
+  -help | --help | --hel | --he | -h)
+    ac_init_help=long ;;
+  -help=r* | --help=r* | --hel=r* | --he=r* | -hr*)
+    ac_init_help=recursive ;;
+  -help=s* | --help=s* | --hel=s* | --he=s* | -hs*)
+    ac_init_help=short ;;
 
   -host | --host | --hos | --ho)
-    ac_prev=host ;;
+    ac_prev=host_alias ;;
   -host=* | --host=* | --hos=* | --ho=*)
-    host="$ac_optarg" ;;
+    host_alias=$ac_optarg ;;
 
   -includedir | --includedir | --includedi | --included | --include \
   | --includ | --inclu | --incl | --inc)
     ac_prev=includedir ;;
   -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
   | --includ=* | --inclu=* | --incl=* | --inc=*)
-    includedir="$ac_optarg" ;;
+    includedir=$ac_optarg ;;
 
   -infodir | --infodir | --infodi | --infod | --info | --inf)
     ac_prev=infodir ;;
   -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
-    infodir="$ac_optarg" ;;
+    infodir=$ac_optarg ;;
 
   -libdir | --libdir | --libdi | --libd)
     ac_prev=libdir ;;
   -libdir=* | --libdir=* | --libdi=* | --libd=*)
-    libdir="$ac_optarg" ;;
+    libdir=$ac_optarg ;;
 
   -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
   | --libexe | --libex | --libe)
     ac_prev=libexecdir ;;
   -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
   | --libexe=* | --libex=* | --libe=*)
-    libexecdir="$ac_optarg" ;;
+    libexecdir=$ac_optarg ;;
 
   -localstatedir | --localstatedir | --localstatedi | --localstated \
   | --localstate | --localstat | --localsta | --localst \
@@ -284,19 +473,19 @@
   -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
   | --localstate=* | --localstat=* | --localsta=* | --localst=* \
   | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
-    localstatedir="$ac_optarg" ;;
+    localstatedir=$ac_optarg ;;
 
   -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
     ac_prev=mandir ;;
   -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
-    mandir="$ac_optarg" ;;
+    mandir=$ac_optarg ;;
 
   -nfp | --nfp | --nf)
     # Obsolete; use --without-fp.
     with_fp=no ;;
 
   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
-  | --no-cr | --no-c)
+  | --no-cr | --no-c | -n)
     no_create=yes ;;
 
   -no-recursion | --no-recursion | --no-recursio | --no-recursi \
@@ -310,26 +499,26 @@
   -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
   | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
   | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
-    oldincludedir="$ac_optarg" ;;
+    oldincludedir=$ac_optarg ;;
 
   -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
     ac_prev=prefix ;;
   -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
-    prefix="$ac_optarg" ;;
+    prefix=$ac_optarg ;;
 
   -program-prefix | --program-prefix | --program-prefi | --program-pref \
   | --program-pre | --program-pr | --program-p)
     ac_prev=program_prefix ;;
   -program-prefix=* | --program-prefix=* | --program-prefi=* \
   | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
-    program_prefix="$ac_optarg" ;;
+    program_prefix=$ac_optarg ;;
 
   -program-suffix | --program-suffix | --program-suffi | --program-suff \
   | --program-suf | --program-su | --program-s)
     ac_prev=program_suffix ;;
   -program-suffix=* | --program-suffix=* | --program-suffi=* \
   | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
-    program_suffix="$ac_optarg" ;;
+    program_suffix=$ac_optarg ;;
 
   -program-transform-name | --program-transform-name \
   | --program-transform-nam | --program-transform-na \
@@ -346,7 +535,7 @@
   | --program-transfo=* | --program-transf=* \
   | --program-trans=* | --program-tran=* \
   | --progr-tra=* | --program-tr=* | --program-t=*)
-    program_transform_name="$ac_optarg" ;;
+    program_transform_name=$ac_optarg ;;
 
   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
   | -silent | --silent | --silen | --sile | --sil)
@@ -356,7 +545,7 @@
     ac_prev=sbindir ;;
   -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
   | --sbi=* | --sb=*)
-    sbindir="$ac_optarg" ;;
+    sbindir=$ac_optarg ;;
 
   -sharedstatedir | --sharedstatedir | --sharedstatedi \
   | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
@@ -367,58 +556,57 @@
   | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
   | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
   | --sha=* | --sh=*)
-    sharedstatedir="$ac_optarg" ;;
+    sharedstatedir=$ac_optarg ;;
 
   -site | --site | --sit)
     ac_prev=site ;;
   -site=* | --site=* | --sit=*)
-    site="$ac_optarg" ;;
+    site=$ac_optarg ;;
 
   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
     ac_prev=srcdir ;;
   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
-    srcdir="$ac_optarg" ;;
+    srcdir=$ac_optarg ;;
 
   -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
   | --syscon | --sysco | --sysc | --sys | --sy)
     ac_prev=sysconfdir ;;
   -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
   | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
-    sysconfdir="$ac_optarg" ;;
+    sysconfdir=$ac_optarg ;;
 
   -target | --target | --targe | --targ | --tar | --ta | --t)
-    ac_prev=target ;;
+    ac_prev=target_alias ;;
   -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
-    target="$ac_optarg" ;;
+    target_alias=$ac_optarg ;;
 
   -v | -verbose | --verbose | --verbos | --verbo | --verb)
     verbose=yes ;;
 
-  -version | --version | --versio | --versi | --vers)
-    echo "configure generated by autoconf version 2.13"
-    exit 0 ;;
+  -version | --version | --versio | --versi | --vers | -V)
+    ac_init_version=: ;;
 
   -with-* | --with-*)
-    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
+    ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
-      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
-    fi
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
     ac_package=`echo $ac_package| sed 's/-/_/g'`
-    case "$ac_option" in
-      *=*) ;;
+    case $ac_option in
+      *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
       *) ac_optarg=yes ;;
     esac
-    eval "with_${ac_package}='$ac_optarg'" ;;
+    eval "with_$ac_package='$ac_optarg'" ;;
 
   -without-* | --without-*)
-    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
+    ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
-      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
-    fi
-    ac_package=`echo $ac_package| sed 's/-/_/g'`
-    eval "with_${ac_package}=no" ;;
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid package name: $ac_package" >&2
+   { (exit 1); exit 1; }; }
+    ac_package=`echo $ac_package | sed 's/-/_/g'`
+    eval "with_$ac_package=no" ;;
 
   --x)
     # Obsolete; use --with-x.
@@ -429,99 +617,110 @@
     ac_prev=x_includes ;;
   -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
   | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
-    x_includes="$ac_optarg" ;;
+    x_includes=$ac_optarg ;;
 
   -x-libraries | --x-libraries | --x-librarie | --x-librari \
   | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
     ac_prev=x_libraries ;;
   -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
-    x_libraries="$ac_optarg" ;;
+    x_libraries=$ac_optarg ;;
 
-  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
+  -*) { echo "$as_me: error: unrecognized option: $ac_option
+Try \`$0 --help' for more information." >&2
+   { (exit 1); exit 1; }; }
     ;;
 
+  *=*)
+    ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
+    # Reject names that are not valid shell variable names.
+    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+      { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
+   { (exit 1); exit 1; }; }
+    ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`
+    eval "$ac_envvar='$ac_optarg'"
+    export $ac_envvar ;;
+
   *)
-    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
-      echo "configure: warning: $ac_option: invalid host type" 1>&2
-    fi
-    if test "x$nonopt" != xNONE; then
-      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
-    fi
-    nonopt="$ac_option"
+    # FIXME: should be removed in autoconf 3.0.
+    echo "$as_me: WARNING: you should use --build, --host, --target" >&2
+    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+      echo "$as_me: WARNING: invalid host type: $ac_option" >&2
+    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
     ;;
 
   esac
 done
 
 if test -n "$ac_prev"; then
-  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
-fi
-
-trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15
-
-# File descriptor usage:
-# 0 standard input
-# 1 file creation
-# 2 errors and warnings
-# 3 some systems may open it to /dev/tty
-# 4 used on the Kubota Titan
-# 6 checking for... messages and results
-# 5 compiler messages saved in config.log
-if test "$silent" = yes; then
-  exec 6>/dev/null
-else
-  exec 6>&1
+  ac_option=--`echo $ac_prev | sed 's/_/-/g'`
+  { echo "$as_me: error: missing argument to $ac_option" >&2
+   { (exit 1); exit 1; }; }
 fi
-exec 5>./config.log
 
-echo "\
-This file contains any messages produced by compilers while
-running configure, to aid debugging if configure makes a mistake.
-" 1>&5
+# Be sure to have absolute paths.
+for ac_var in exec_prefix prefix
+do
+  eval ac_val=$`echo $ac_var`
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* | NONE | '' ) ;;
+    *)  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; };;
+  esac
+done
 
-# Strip out --no-create and --no-recursion so they do not pile up.
-# Also quote any args containing shell metacharacters.
-ac_configure_args=
-for ac_arg
+# Be sure to have absolute paths.
+for ac_var in bindir sbindir libexecdir datadir sysconfdir sharedstatedir \
+              localstatedir libdir includedir oldincludedir infodir mandir
 do
-  case "$ac_arg" in
-  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
-  | --no-cr | --no-c) ;;
-  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
-  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
-  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
-  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
-  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
+  eval ac_val=$`echo $ac_var`
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* ) ;;
+    *)  { echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; };;
   esac
 done
 
-# NLS nuisances.
-# Only set these to C if already set.  These must not be set unconditionally
-# because not all systems understand e.g. LANG=C (notably SCO).
-# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
-# Non-C LC_CTYPE values break the ctype check.
-if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
-if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
-if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
-if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi
+# There might be people who depend on the old broken behavior: `$host'
+# used to hold the argument of --host etc.
+# FIXME: To remove some day.
+build=$build_alias
+host=$host_alias
+target=$target_alias
+
+# FIXME: To remove some day.
+if test "x$host_alias" != x; then
+  if test "x$build_alias" = x; then
+    cross_compiling=maybe
+    echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used." >&2
+  elif test "x$build_alias" != "x$host_alias"; then
+    cross_compiling=yes
+  fi
+fi
 
-# confdefs.h avoids OS command line length limits that DEFS can exceed.
-rm -rf conftest* confdefs.h
-# AIX cpp loses on an empty file, so make sure it contains at least a newline.
-echo > confdefs.h
+ac_tool_prefix=
+test -n "$host_alias" && ac_tool_prefix=$host_alias-
+
+test "$silent" = yes && exec 6>/dev/null
 
-# A filename unique to this package, relative to the directory that
-# configure is in, which we can look for to find out if srcdir is correct.
-ac_unique_file=mutt.h
 
 # Find the source files, if location was not specified.
 if test -z "$srcdir"; then
   ac_srcdir_defaulted=yes
   # Try the directory containing this script, then its parent.
-  ac_prog=$0
-  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
-  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
+  ac_confdir=`(dirname "$0") 2>/dev/null ||
+$as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$0" : 'X\(//\)[^/]' \| \
+         X"$0" : 'X\(//\)$' \| \
+         X"$0" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$0" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
   srcdir=$ac_confdir
   if test ! -r $srcdir/$ac_unique_file; then
     srcdir=..
@@ -531,13 +730,415 @@
 fi
 if test ! -r $srcdir/$ac_unique_file; then
   if test "$ac_srcdir_defaulted" = yes; then
-    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
+    { echo "$as_me: error: cannot find sources ($ac_unique_file) in $ac_confdir or .." >&2
+   { (exit 1); exit 1; }; }
   else
-    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
+    { echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
+   { (exit 1); exit 1; }; }
   fi
 fi
-srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`
+srcdir=`echo "$srcdir" | sed 's%\([^\\/]\)[\\/]*$%\1%'`
+ac_env_build_alias_set=${build_alias+set}
+ac_env_build_alias_value=$build_alias
+ac_cv_env_build_alias_set=${build_alias+set}
+ac_cv_env_build_alias_value=$build_alias
+ac_env_host_alias_set=${host_alias+set}
+ac_env_host_alias_value=$host_alias
+ac_cv_env_host_alias_set=${host_alias+set}
+ac_cv_env_host_alias_value=$host_alias
+ac_env_target_alias_set=${target_alias+set}
+ac_env_target_alias_value=$target_alias
+ac_cv_env_target_alias_set=${target_alias+set}
+ac_cv_env_target_alias_value=$target_alias
+ac_env_CC_set=${CC+set}
+ac_env_CC_value=$CC
+ac_cv_env_CC_set=${CC+set}
+ac_cv_env_CC_value=$CC
+ac_env_CFLAGS_set=${CFLAGS+set}
+ac_env_CFLAGS_value=$CFLAGS
+ac_cv_env_CFLAGS_set=${CFLAGS+set}
+ac_cv_env_CFLAGS_value=$CFLAGS
+ac_env_LDFLAGS_set=${LDFLAGS+set}
+ac_env_LDFLAGS_value=$LDFLAGS
+ac_cv_env_LDFLAGS_set=${LDFLAGS+set}
+ac_cv_env_LDFLAGS_value=$LDFLAGS
+ac_env_CPPFLAGS_set=${CPPFLAGS+set}
+ac_env_CPPFLAGS_value=$CPPFLAGS
+ac_cv_env_CPPFLAGS_set=${CPPFLAGS+set}
+ac_cv_env_CPPFLAGS_value=$CPPFLAGS
+ac_env_CPP_set=${CPP+set}
+ac_env_CPP_value=$CPP
+ac_cv_env_CPP_set=${CPP+set}
+ac_cv_env_CPP_value=$CPP
+
+#
+# Report the --help message.
+#
+if test "$ac_init_help" = "long"; then
+  # Omit some internal or obsolete options to make the list less imposing.
+  # This message is too long to be a string in the A/UX 3.1 sh.
+  cat <<_ACEOF
+\`configure' configures this package to adapt to many kinds of systems.
+
+Usage: $0 [OPTION]... [VAR=VALUE]...
+
+To assign environment variables (e.g., CC, CFLAGS...), specify them as
+VAR=VALUE.  See below for descriptions of some of the useful variables.
+
+Defaults for the options are specified in brackets.
+
+Configuration:
+  -h, --help              display this help and exit
+      --help=short        display options specific to this package
+      --help=recursive    display the short help of all the included packages
+  -V, --version           display version information and exit
+  -q, --quiet, --silent   do not print \`checking...' messages
+      --cache-file=FILE   cache test results in FILE [disabled]
+  -C, --config-cache      alias for \`--cache-file=config.cache'
+  -n, --no-create         do not create output files
+      --srcdir=DIR        find the sources in DIR [configure dir or \`..']
+
+_ACEOF
+
+  cat <<_ACEOF
+Installation directories:
+  --prefix=PREFIX         install architecture-independent files in PREFIX
+                          [$ac_default_prefix]
+  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
+                          [PREFIX]
+
+By default, \`make install' will install all the files in
+\`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
+an installation prefix other than \`$ac_default_prefix' using \`--prefix',
+for instance \`--prefix=\$HOME'.
+
+For better control, use the options below.
+
+Fine tuning of the installation directories:
+  --bindir=DIR           user executables [EPREFIX/bin]
+  --sbindir=DIR          system admin executables [EPREFIX/sbin]
+  --libexecdir=DIR       program executables [EPREFIX/libexec]
+  --datadir=DIR          read-only architecture-independent data [PREFIX/share]
+  --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
+  --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
+  --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
+  --libdir=DIR           object code libraries [EPREFIX/lib]
+  --includedir=DIR       C header files [PREFIX/include]
+  --oldincludedir=DIR    C header files for non-gcc [/usr/include]
+  --infodir=DIR          info documentation [PREFIX/info]
+  --mandir=DIR           man documentation [PREFIX/man]
+_ACEOF
+
+  cat <<\_ACEOF
+
+Program names:
+  --program-prefix=PREFIX            prepend PREFIX to installed program names
+  --program-suffix=SUFFIX            append SUFFIX to installed program names
+  --program-transform-name=PROGRAM   run sed PROGRAM on installed program names
+
+System types:
+  --build=BUILD     configure for building on BUILD [guessed]
+  --host=HOST       cross-compile to build programs to run on HOST [BUILD]
+_ACEOF
+fi
+
+if test -n "$ac_init_help"; then
+
+  cat <<\_ACEOF
+
+Optional Features:
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+  --disable-dependency-tracking Speeds up one-time builds
+  --enable-dependency-tracking  Do not reject slow dependency extractors
+  --disable-pgp              Disable PGP support
+  --enable-external-dotlock  Force use of an external dotlock program
+  --enable-pop               Enable POP3 support
+  --enable-imap              Enable IMAP support
+  --enable-nntp              Enable NNTP support
+  --enable-debug             Enable debugging support
+  --enable-flock             Use flock() to lock files
+  --disable-fcntl            Do NOT use fcntl() to lock files
+  --disable-warnings         Turn off compiler warnings (not recommended)
+  --enable-nfs-fix           Work around an NFS with broken attributes caching
+  --enable-buffy-size        Use file size attribute instead of access time
+  --enable-mailtool          Enable Sun mailtool attachments support
+  --enable-locales-fix       The result of isprint() is unreliable
+  --enable-compressed        Enable compressed folders support
+  --enable-exact-address     Enable regeneration of email addresses
+  --disable-nls           do not use Native Language Support
+
+Optional Packages:
+  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
+  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
+  --with-mixmaster=PATH    Include Mixmaster support
+  --with-slang=DIR         Use S-Lang instead of ncurses
+  --with-curses=DIR          Where ncurses is installed
+  --with-regex               Use the GNU regex library
+  --with-homespool=FILE    File in user's directory where new mail is spooled
+  --with-mailpath=DIR        Directory where spool mailboxes are located
+  --with-docdir=PATH         Specify where to put the documentation
+  --with-domain=DOMAIN       Specify your DNS domain name
+    --with-gss=PFX         Compile in GSSAPI authentication for IMAP
+  --with-ssl=PFX           Compile in SSL support for POP/IMAP
+  --with-nss=PFX           Compile in SSL support for POP/IMAP via NSS
+  --with-sasl=PFX          Use Cyrus SASL library for POP/IMAP authentication
+  --with-exec-shell=SHELL    Specify alternate shell (ONLY if /bin/sh is broken)
+  --with-iconv=DIR  search for libiconv in DIR/include and DIR/lib
+  --with-included-gettext use the GNU gettext library included here
+  --without-wc-funcs         Do not use the system's wchar_t functions
+
+Some influential environment variables:
+  CC          C compiler command
+  CFLAGS      C compiler flags
+  LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
+              nonstandard directory <lib dir>
+  CPPFLAGS    C/C++ preprocessor flags, e.g. -I<include dir> if you have
+              headers in a nonstandard directory <include dir>
+  CPP         C preprocessor
+
+Use these variables to override the choices made by `configure' or to help
+it to find libraries and programs with nonstandard names/locations.
+
+_ACEOF
+fi
+
+if test "$ac_init_help" = "recursive"; then
+  # If there are subdirs, report their specific --help.
+  ac_popdir=`pwd`
+  for ac_dir in : $ac_subdirs_all; do test "x$ac_dir" = x: && continue
+    test -d $ac_dir || continue
+    ac_builddir=.
+
+if test "$ac_dir" != .; then
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A "../" for each directory in $ac_dir_suffix.
+  ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
+else
+  ac_dir_suffix= ac_top_builddir=
+fi
+
+case $srcdir in
+  .)  # No --srcdir option.  We are building in place.
+    ac_srcdir=.
+    if test -z "$ac_top_builddir"; then
+       ac_top_srcdir=.
+    else
+       ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
+    fi ;;
+  [\\/]* | ?:[\\/]* )  # Absolute path.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir ;;
+  *) # Relative path.
+    ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_builddir$srcdir ;;
+esac
+# Don't blindly perform a `cd "$ac_dir"/$ac_foo && pwd` since $ac_foo can be
+# absolute.
+ac_abs_builddir=`cd "$ac_dir" && cd $ac_builddir && pwd`
+ac_abs_top_builddir=`cd "$ac_dir" && cd ${ac_top_builddir}. && pwd`
+ac_abs_srcdir=`cd "$ac_dir" && cd $ac_srcdir && pwd`
+ac_abs_top_srcdir=`cd "$ac_dir" && cd $ac_top_srcdir && pwd`
+
+    cd $ac_dir
+    # Check for guested configure; otherwise get Cygnus style configure.
+    if test -f $ac_srcdir/configure.gnu; then
+      echo
+      $SHELL $ac_srcdir/configure.gnu  --help=recursive
+    elif test -f $ac_srcdir/configure; then
+      echo
+      $SHELL $ac_srcdir/configure  --help=recursive
+    elif test -f $ac_srcdir/configure.ac ||
+           test -f $ac_srcdir/configure.in; then
+      echo
+      $ac_configure --help
+    else
+      echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
+    fi
+    cd $ac_popdir
+  done
+fi
+
+test -n "$ac_init_help" && exit 0
+if $ac_init_version; then
+  cat <<\_ACEOF
+configure
+generated by GNU Autoconf 2.53a
+
+Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
+Free Software Foundation, Inc.
+This configure script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it.
+_ACEOF
+  exit 0
+fi
+exec 5>config.log
+cat >&5 <<_ACEOF
+This file contains any messages produced by compilers while
+running configure, to aid debugging if configure makes a mistake.
+
+It was created by $as_me, which was
+generated by GNU Autoconf 2.53a.  Invocation command line was
+
+  $ $0 $@
+
+_ACEOF
+{
+cat <<_ASUNAME
+## --------- ##
+## Platform. ##
+## --------- ##
+
+hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
+uname -m = `(uname -m) 2>/dev/null || echo unknown`
+uname -r = `(uname -r) 2>/dev/null || echo unknown`
+uname -s = `(uname -s) 2>/dev/null || echo unknown`
+uname -v = `(uname -v) 2>/dev/null || echo unknown`
+
+/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
+/bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
+
+/bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
+/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
+hostinfo               = `(hostinfo) 2>/dev/null               || echo unknown`
+/bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
+/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
+/bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
+
+_ASUNAME
+
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  echo "PATH: $as_dir"
+done
+
+} >&5
+
+cat >&5 <<_ACEOF
+
+
+## ----------- ##
+## Core tests. ##
+## ----------- ##
+
+_ACEOF
+
+
+# Keep a trace of the command line.
+# Strip out --no-create and --no-recursion so they do not pile up.
+# Also quote any args containing shell meta-characters.
+ac_configure_args=
+ac_sep=
+for ac_arg
+do
+  case $ac_arg in
+  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
+  | --no-cr | --no-c | -n ) continue ;;
+  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
+  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
+    continue ;;
+  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+    ac_arg=`echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+  esac
+  case " $ac_configure_args " in
+    *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
+    *) ac_configure_args="$ac_configure_args$ac_sep'$ac_arg'"
+       ac_sep=" " ;;
+  esac
+  # Get rid of the leading space.
+done
+
+# When interrupted or exit'd, cleanup temporary files, and complete
+# config.log.  We remove comments because anyway the quotes in there
+# would cause problems or look ugly.
+# WARNING: Be sure not to use single quotes in there, as some shells,
+# such as our DU 5.0 friend, will then `close' the trap.
+trap 'exit_status=$?
+  # Save into config.log some information that might help in debugging.
+  {
+    echo
+    cat <<\_ASBOX
+## ---------------- ##
+## Cache variables. ##
+## ---------------- ##
+_ASBOX
+    echo
+    # The following way of writing the cache mishandles newlines in values,
+{
+  (set) 2>&1 |
+    case `(ac_space='"'"' '"'"'; set | grep ac_space) 2>&1` in
+    *ac_space=\ *)
+      sed -n \
+        "s/'"'"'/'"'"'\\\\'"'"''"'"'/g;
+    	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='"'"'\\2'"'"'/p"
+      ;;
+    *)
+      sed -n \
+        "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+      ;;
+    esac;
+}
+    echo
+    if test -s confdefs.h; then
+      cat <<\_ASBOX
+## ----------- ##
+## confdefs.h. ##
+## ----------- ##
+_ASBOX
+      echo
+      sed "/^$/d" confdefs.h
+      echo
+    fi
+    test "$ac_signal" != 0 &&
+      echo "$as_me: caught signal $ac_signal"
+    echo "$as_me: exit $exit_status"
+  } >&5
+  rm -f core core.* *.core &&
+  rm -rf conftest* confdefs* conf$$* $ac_clean_files &&
+    exit $exit_status
+     ' 0
+for ac_signal in 1 2 13 15; do
+  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
+done
+ac_signal=0
+
+# confdefs.h avoids OS command line length limits that DEFS can exceed.
+rm -rf conftest* confdefs.h
+# AIX cpp loses on an empty file, so make sure it contains at least a newline.
+echo >confdefs.h
+
+# Predefined preprocessor variables.
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_NAME "$PACKAGE_NAME"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_VERSION "$PACKAGE_VERSION"
+_ACEOF
+
 
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_STRING "$PACKAGE_STRING"
+_ACEOF
+
+
+cat >>confdefs.h <<_ACEOF
+#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
+_ACEOF
+
+
+# Let the site file select an alternate cache file if it wants to.
 # Prefer explicitly selected file to automatically selected ones.
 if test -z "$CONFIG_SITE"; then
   if test "x$prefix" != xNONE; then
@@ -548,48 +1149,116 @@
 fi
 for ac_site_file in $CONFIG_SITE; do
   if test -r "$ac_site_file"; then
-    echo "loading site script $ac_site_file"
+    { echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
+echo "$as_me: loading site script $ac_site_file" >&6;}
+    sed 's/^/| /' "$ac_site_file" >&5
     . "$ac_site_file"
   fi
 done
 
 if test -r "$cache_file"; then
-  echo "loading cache $cache_file"
-  . $cache_file
+  # Some versions of bash will fail to source /dev/null (special
+  # files actually), so we avoid doing that.
+  if test -f "$cache_file"; then
+    { echo "$as_me:$LINENO: loading cache $cache_file" >&5
+echo "$as_me: loading cache $cache_file" >&6;}
+    case $cache_file in
+      [\\/]* | ?:[\\/]* ) . $cache_file;;
+      *)                      . ./$cache_file;;
+    esac
+  fi
 else
-  echo "creating cache $cache_file"
-  > $cache_file
+  { echo "$as_me:$LINENO: creating cache $cache_file" >&5
+echo "$as_me: creating cache $cache_file" >&6;}
+  >$cache_file
+fi
+
+# Check that the precious variables saved in the cache have kept the same
+# value.
+ac_cache_corrupted=false
+for ac_var in `(set) 2>&1 |
+               sed -n 's/^ac_env_\([a-zA-Z_0-9]*\)_set=.*/\1/p'`; do
+  eval ac_old_set=\$ac_cv_env_${ac_var}_set
+  eval ac_new_set=\$ac_env_${ac_var}_set
+  eval ac_old_val="\$ac_cv_env_${ac_var}_value"
+  eval ac_new_val="\$ac_env_${ac_var}_value"
+  case $ac_old_set,$ac_new_set in
+    set,)
+      { echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,set)
+      { echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
+    ,);;
+    *)
+      if test "x$ac_old_val" != "x$ac_new_val"; then
+        { echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
+echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+        { echo "$as_me:$LINENO:   former value:  $ac_old_val" >&5
+echo "$as_me:   former value:  $ac_old_val" >&2;}
+        { echo "$as_me:$LINENO:   current value: $ac_new_val" >&5
+echo "$as_me:   current value: $ac_new_val" >&2;}
+        ac_cache_corrupted=:
+      fi;;
+  esac
+  # Pass precious variables to config.status.
+  if test "$ac_new_set" = set; then
+    case $ac_new_val in
+    *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+      ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *) ac_arg=$ac_var=$ac_new_val ;;
+    esac
+    case " $ac_configure_args " in
+      *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
+      *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
+    esac
+  fi
+done
+if $ac_cache_corrupted; then
+  { echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
+echo "$as_me: error: changes in the environment can compromise the build" >&2;}
+  { { echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
+echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
+   { (exit 1); exit 1; }; }
 fi
 
 ac_ext=c
-# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CPP $CPPFLAGS'
-ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
-cross_compiling=$ac_cv_prog_cc_cross
-
-ac_exeext=
-ac_objext=o
-if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
-  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
-  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
-    ac_n= ac_c='
-' ac_t='	'
-  else
-    ac_n=-n ac_c= ac_t=
-  fi
-else
-  ac_n= ac_c='\c' ac_t=
-fi
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
 
 
 
+# Add the stamp file to the list of files AC keeps track of,
+# along with our hook.
+          ac_config_headers="$ac_config_headers config.h"
+
 
 
 
 mutt_cv_version=`cat $srcdir/VERSION`
 
 
+am__api_version="1.6"
 ac_aux_dir=
 for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
   if test -f $ac_dir/install-sh; then
@@ -600,14 +1269,20 @@
     ac_aux_dir=$ac_dir
     ac_install_sh="$ac_aux_dir/install.sh -c"
     break
+  elif test -f $ac_dir/shtool; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/shtool install -c"
+    break
   fi
 done
 if test -z "$ac_aux_dir"; then
-  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
-fi
-ac_config_guess=$ac_aux_dir/config.guess
-ac_config_sub=$ac_aux_dir/config.sub
-ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.
+  { { echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." >&5
+echo "$as_me: error: cannot find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+ac_config_guess="$SHELL $ac_aux_dir/config.guess"
+ac_config_sub="$SHELL $ac_aux_dir/config.sub"
+ac_configure="$SHELL $ac_aux_dir/configure" # This should be Cygnus configure.
 
 # Find a good install program.  We prefer a C program (faster),
 # so one script is as good as another.  But avoid the broken or
@@ -616,545 +1291,1487 @@
 # SunOS /usr/etc/install
 # IRIX /sbin/install
 # AIX /bin/install
+# AmigaOS /C/install, which installs bootblocks on floppy discs
 # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
 # AFS /usr/afsws/bin/install, which mishandles nonexistent args
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
-echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:623: checking for a BSD compatible install" >&5
+echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
+echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6
 if test -z "$INSTALL"; then
-if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+if test "${ac_cv_path_install+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
-  for ac_dir in $PATH; do
-    # Account for people who put trailing slashes in PATH elements.
-    case "$ac_dir/" in
-    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
-    *)
-      # OSF1 and SCO ODT 3.0 have their own names for install.
-      # Don't use installbsd from OSF since it installs stuff as root
-      # by default.
-      for ac_prog in ginstall scoinst install; do
-        if test -f $ac_dir/$ac_prog; then
-	  if test $ac_prog = install &&
-            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
-	    # AIX install.  It has an incompatible calling convention.
-	    :
-	  else
-	    ac_cv_path_install="$ac_dir/$ac_prog -c"
-	    break 2
-	  fi
-	fi
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  # Account for people who put trailing slashes in PATH elements.
+case $as_dir/ in
+  ./ | .// | /cC/* | \
+  /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
+  /usr/ucb/* ) ;;
+  *)
+    # OSF1 and SCO ODT 3.0 have their own names for install.
+    # Don't use installbsd from OSF since it installs stuff as root
+    # by default.
+    for ac_prog in ginstall scoinst install; do
+      for ac_exec_ext in '' $ac_executable_extensions; do
+        if $as_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
+          if test $ac_prog = install &&
+            grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+            # AIX install.  It has an incompatible calling convention.
+            :
+          elif test $ac_prog = install &&
+            grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+            # program-specific install script used by HP pwplus--don't use.
+            :
+          else
+            ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
+            break 3
+          fi
+        fi
       done
-      ;;
-    esac
-  done
-  IFS="$ac_save_IFS"
+    done
+    ;;
+esac
+done
+
 
 fi
   if test "${ac_cv_path_install+set}" = set; then
-    INSTALL="$ac_cv_path_install"
+    INSTALL=$ac_cv_path_install
   else
     # As a last resort, use the slow shell script.  We don't cache a
     # path for INSTALL within a source directory, because that will
     # break other packages using the cache if that directory is
     # removed, or if the path is relative.
-    INSTALL="$ac_install_sh"
+    INSTALL=$ac_install_sh
   fi
 fi
-echo "$ac_t""$INSTALL" 1>&6
+echo "$as_me:$LINENO: result: $INSTALL" >&5
+echo "${ECHO_T}$INSTALL" >&6
 
 # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
 # It thinks the first close brace ends the variable substitution.
 test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
 
-test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
+test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
 
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
-echo $ac_n "checking whether build environment is sane""... $ac_c" 1>&6
-echo "configure:676: checking whether build environment is sane" >&5
+echo "$as_me:$LINENO: checking whether build environment is sane" >&5
+echo $ECHO_N "checking whether build environment is sane... $ECHO_C" >&6
 # Just in case
 sleep 1
-echo timestamp > conftestfile
+echo timestamp > conftest.file
 # Do `set' in a subshell so we don't clobber the current shell's
 # arguments.  Must try -L first in case configure is actually a
 # symlink; some systems play weird games with the mod time of symlinks
 # (eg FreeBSD returns the mod time of the symlink's containing
 # directory).
 if (
-   set X `ls -Lt $srcdir/configure conftestfile 2> /dev/null`
+   set X `ls -Lt $srcdir/configure conftest.file 2> /dev/null`
    if test "$*" = "X"; then
       # -L didn't work.
-      set X `ls -t $srcdir/configure conftestfile`
+      set X `ls -t $srcdir/configure conftest.file`
    fi
-   if test "$*" != "X $srcdir/configure conftestfile" \
-      && test "$*" != "X conftestfile $srcdir/configure"; then
+   rm -f conftest.file
+   if test "$*" != "X $srcdir/configure conftest.file" \
+      && test "$*" != "X conftest.file $srcdir/configure"; then
 
       # If neither matched, then we have a broken ls.  This can happen
       # if, for instance, CONFIG_SHELL is bash and it inherits a
       # broken ls alias from the environment.  This has actually
       # happened.  Such a system could not be considered "sane".
-      { echo "configure: error: ls -t appears to fail.  Make sure there is not a broken
-alias in your environment" 1>&2; exit 1; }
+      { { echo "$as_me:$LINENO: error: ls -t appears to fail.  Make sure there is not a broken
+alias in your environment" >&5
+echo "$as_me: error: ls -t appears to fail.  Make sure there is not a broken
+alias in your environment" >&2;}
+   { (exit 1); exit 1; }; }
    fi
 
-   test "$2" = conftestfile
+   test "$2" = conftest.file
    )
 then
    # Ok.
    :
 else
-   { echo "configure: error: newly created file is older than distributed files!
-Check your system clock" 1>&2; exit 1; }
-fi
-rm -f conftest*
-echo "$ac_t""yes" 1>&6
-if test "$program_transform_name" = s,x,x,; then
-  program_transform_name=
-else
-  # Double any \ or $.  echo might interpret backslashes.
-  cat <<\EOF_SED > conftestsed
-s,\\,\\\\,g; s,\$,$$,g
-EOF_SED
-  program_transform_name="`echo $program_transform_name|sed -f conftestsed`"
-  rm -f conftestsed
+   { { echo "$as_me:$LINENO: error: newly created file is older than distributed files!
+Check your system clock" >&5
+echo "$as_me: error: newly created file is older than distributed files!
+Check your system clock" >&2;}
+   { (exit 1); exit 1; }; }
 fi
+echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
 test "$program_prefix" != NONE &&
-  program_transform_name="s,^,${program_prefix},; $program_transform_name"
+  program_transform_name="s,^,$program_prefix,;$program_transform_name"
 # Use a double $ so make ignores it.
 test "$program_suffix" != NONE &&
-  program_transform_name="s,\$\$,${program_suffix},; $program_transform_name"
-
-# sed with no file args requires a program.
-test "$program_transform_name" = "" && program_transform_name="s,x,x,"
+  program_transform_name="s,\$,$program_suffix,;$program_transform_name"
+# Double any \ or $.  echo might interpret backslashes.
+# By default was `s,x,x', remove it if useless.
+cat <<\_ACEOF >conftest.sed
+s/[\\$]/&&/g;s/;s,x,x,$//
+_ACEOF
+program_transform_name=`echo $program_transform_name | sed -f conftest.sed`
+rm conftest.sed
+
+
+# expand $ac_aux_dir to an absolute path
+am_aux_dir=`cd $ac_aux_dir && pwd`
+
+test x"${MISSING+set}" = xset || MISSING="\${SHELL} $am_aux_dir/missing"
+# Use eval to expand $SHELL
+if eval "$MISSING --run true"; then
+  am_missing_run="$MISSING --run "
+else
+  am_missing_run=
+  { echo "$as_me:$LINENO: WARNING: \`missing' script is too old or missing" >&5
+echo "$as_me: WARNING: \`missing' script is too old or missing" >&2;}
+fi
 
-echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:733: checking whether ${MAKE-make} sets \${MAKE}" >&5
-set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+for ac_prog in awk mawk gawk nawk
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_AWK+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftestmake <<\EOF
-all:
-	@echo 'ac_maketemp="${MAKE}"'
-EOF
-# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
-eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
-if test -n "$ac_maketemp"; then
-  eval ac_cv_prog_make_${ac_make}_set=yes
+  if test -n "$AWK"; then
+  ac_cv_prog_AWK="$AWK" # Let the user override the test.
 else
-  eval ac_cv_prog_make_${ac_make}_set=no
-fi
-rm -f conftestmake
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_AWK="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+AWK=$ac_cv_prog_AWK
+if test -n "$AWK"; then
+  echo "$as_me:$LINENO: result: $AWK" >&5
+echo "${ECHO_T}$AWK" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  test -n "$AWK" && break
+done
+
+echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo $ECHO_N "checking whether ${MAKE-make} sets \${MAKE}... $ECHO_C" >&6
+set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y,./+-,__p_,'`
+if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.make <<\_ACEOF
+all:
+	@echo 'ac_maketemp="${MAKE}"'
+_ACEOF
+# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+eval `${MAKE-make} -f conftest.make 2>/dev/null | grep temp=`
+if test -n "$ac_maketemp"; then
+  eval ac_cv_prog_make_${ac_make}_set=yes
+else
+  eval ac_cv_prog_make_${ac_make}_set=no
+fi
+rm -f conftest.make
 fi
 if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
   SET_MAKE=
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
   SET_MAKE="MAKE=${MAKE-make}"
 fi
 
+ # test to see if srcdir already configured
+if test "`cd $srcdir && pwd`" != "`pwd`" &&
+   test -f $srcdir/config.status; then
+  { { echo "$as_me:$LINENO: error: source directory already configured; run \"make distclean\" there first" >&5
+echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
+   { (exit 1); exit 1; }; }
+fi
 
-PACKAGE=mutt
+# Define the identity of the package.
+ PACKAGE=mutt
+ VERSION=$mutt_cv_version
 
-VERSION=$mutt_cv_version
 
-if test "`cd $srcdir && pwd`" != "`pwd`" && test -f $srcdir/config.status; then
-  { echo "configure: error: source directory already configured; run "make distclean" there first" 1>&2; exit 1; }
-fi
-cat >> confdefs.h <<EOF
+cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
-EOF
+_ACEOF
 
-cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define VERSION "$VERSION"
-EOF
+_ACEOF
+
+# Some tools Automake needs.
+
+ACLOCAL=${ACLOCAL-"${am_missing_run}aclocal-${am__api_version}"}
+
+
+AUTOCONF=${AUTOCONF-"${am_missing_run}autoconf"}
+
+
+AUTOMAKE=${AUTOMAKE-"${am_missing_run}automake-${am__api_version}"}
 
 
+AUTOHEADER=${AUTOHEADER-"${am_missing_run}autoheader"}
 
-missing_dir=`cd $ac_aux_dir && pwd`
-echo $ac_n "checking for working aclocal""... $ac_c" 1>&6
-echo "configure:779: checking for working aclocal" >&5
-# Run test in a subshell; some versions of sh will print an error if
-# an executable is not found, even if stderr is redirected.
-# Redirect stdin to placate older versions of autoconf.  Sigh.
-if (aclocal --version) < /dev/null > /dev/null 2>&1; then
-   ACLOCAL=aclocal
-   echo "$ac_t""found" 1>&6
-else
-   ACLOCAL="$missing_dir/missing aclocal"
-   echo "$ac_t""missing" 1>&6
-fi
-
-echo $ac_n "checking for working autoconf""... $ac_c" 1>&6
-echo "configure:792: checking for working autoconf" >&5
-# Run test in a subshell; some versions of sh will print an error if
-# an executable is not found, even if stderr is redirected.
-# Redirect stdin to placate older versions of autoconf.  Sigh.
-if (autoconf --version) < /dev/null > /dev/null 2>&1; then
-   AUTOCONF=autoconf
-   echo "$ac_t""found" 1>&6
-else
-   AUTOCONF="$missing_dir/missing autoconf"
-   echo "$ac_t""missing" 1>&6
-fi
-
-echo $ac_n "checking for working automake""... $ac_c" 1>&6
-echo "configure:805: checking for working automake" >&5
-# Run test in a subshell; some versions of sh will print an error if
-# an executable is not found, even if stderr is redirected.
-# Redirect stdin to placate older versions of autoconf.  Sigh.
-if (automake --version) < /dev/null > /dev/null 2>&1; then
-   AUTOMAKE=automake
-   echo "$ac_t""found" 1>&6
-else
-   AUTOMAKE="$missing_dir/missing automake"
-   echo "$ac_t""missing" 1>&6
-fi
-
-echo $ac_n "checking for working autoheader""... $ac_c" 1>&6
-echo "configure:818: checking for working autoheader" >&5
-# Run test in a subshell; some versions of sh will print an error if
-# an executable is not found, even if stderr is redirected.
-# Redirect stdin to placate older versions of autoconf.  Sigh.
-if (autoheader --version) < /dev/null > /dev/null 2>&1; then
-   AUTOHEADER=autoheader
-   echo "$ac_t""found" 1>&6
-else
-   AUTOHEADER="$missing_dir/missing autoheader"
-   echo "$ac_t""missing" 1>&6
-fi
-
-echo $ac_n "checking for working makeinfo""... $ac_c" 1>&6
-echo "configure:831: checking for working makeinfo" >&5
-# Run test in a subshell; some versions of sh will print an error if
-# an executable is not found, even if stderr is redirected.
-# Redirect stdin to placate older versions of autoconf.  Sigh.
-if (makeinfo --version) < /dev/null > /dev/null 2>&1; then
-   MAKEINFO=makeinfo
-   echo "$ac_t""found" 1>&6
+
+MAKEINFO=${MAKEINFO-"${am_missing_run}makeinfo"}
+
+
+AMTAR=${AMTAR-"${am_missing_run}tar"}
+
+install_sh=${install_sh-"$am_aux_dir/install-sh"}
+
+# Installed binaries are usually stripped using `strip' when the user
+# run `make install-strip'.  However `strip' might not be the right
+# tool to use in cross-compilation environments, therefore Automake
+# will honor the `STRIP' environment variable to overrule this program.
+if test "$cross_compiling" != no; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
+set dummy ${ac_tool_prefix}strip; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_STRIP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-   MAKEINFO="$missing_dir/missing makeinfo"
-   echo "$ac_t""missing" 1>&6
+  if test -n "$STRIP"; then
+  ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_STRIP="${ac_tool_prefix}strip"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+STRIP=$ac_cv_prog_STRIP
+if test -n "$STRIP"; then
+  echo "$as_me:$LINENO: result: $STRIP" >&5
+echo "${ECHO_T}$STRIP" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
+fi
+if test -z "$ac_cv_prog_STRIP"; then
+  ac_ct_STRIP=$STRIP
+  # Extract the first word of "strip", so it can be a program name with args.
+set dummy strip; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_STRIP"; then
+  ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_STRIP="strip"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
 
+  test -z "$ac_cv_prog_ac_ct_STRIP" && ac_cv_prog_ac_ct_STRIP=":"
+fi
+fi
+ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
+if test -n "$ac_ct_STRIP"; then
+  echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
+echo "${ECHO_T}$ac_ct_STRIP" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
 
+  STRIP=$ac_ct_STRIP
+else
+  STRIP="$ac_cv_prog_STRIP"
+fi
 
-ALL_LINGUAS="de ru it es uk fr pl nl cs id sk ko el zh_TW zh_CN pt_BR eo gl sv da lt tr ja hu et ca"
+fi
+INSTALL_STRIP_PROGRAM="\${SHELL} \$(install_sh) -c -s"
+
+# We need awk for the "check" target.  The system "awk" is bad on
+# some platforms.
 
 
-# Make sure we can run config.sub.
-if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
-else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
-fi
 
-echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:855: checking host system type" >&5
 
-host_alias=$host
-case "$host_alias" in
-NONE)
-  case $nonopt in
-  NONE)
-    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
-    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
-    fi ;;
-  *) host_alias=$nonopt ;;
-  esac ;;
-esac
 
-host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
-host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
-host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
-host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
-echo "$ac_t""$host" 1>&6
+ALL_LINGUAS="de ru it es uk fr pl nl cs id sk ko el zh_TW zh_CN pt_BR eo gl sv da lt tr ja hu et ca"
+
+# Make sure we can run config.sub.
+$ac_config_sub sun4 >/dev/null 2>&1 ||
+  { { echo "$as_me:$LINENO: error: cannot run $ac_config_sub" >&5
+echo "$as_me: error: cannot run $ac_config_sub" >&2;}
+   { (exit 1); exit 1; }; }
+
+echo "$as_me:$LINENO: checking build system type" >&5
+echo $ECHO_N "checking build system type... $ECHO_C" >&6
+if test "${ac_cv_build+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_build_alias=$build_alias
+test -z "$ac_cv_build_alias" &&
+  ac_cv_build_alias=`$ac_config_guess`
+test -z "$ac_cv_build_alias" &&
+  { { echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
+echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
+   { (exit 1); exit 1; }; }
+ac_cv_build=`$ac_config_sub $ac_cv_build_alias` ||
+  { { echo "$as_me:$LINENO: error: $ac_config_sub $ac_cv_build_alias failed" >&5
+echo "$as_me: error: $ac_config_sub $ac_cv_build_alias failed" >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+echo "$as_me:$LINENO: result: $ac_cv_build" >&5
+echo "${ECHO_T}$ac_cv_build" >&6
+build=$ac_cv_build
+build_cpu=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
+build_vendor=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
+build_os=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
+
+
+echo "$as_me:$LINENO: checking host system type" >&5
+echo $ECHO_N "checking host system type... $ECHO_C" >&6
+if test "${ac_cv_host+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_host_alias=$host_alias
+test -z "$ac_cv_host_alias" &&
+  ac_cv_host_alias=$ac_cv_build_alias
+ac_cv_host=`$ac_config_sub $ac_cv_host_alias` ||
+  { { echo "$as_me:$LINENO: error: $ac_config_sub $ac_cv_host_alias failed" >&5
+echo "$as_me: error: $ac_config_sub $ac_cv_host_alias failed" >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+echo "$as_me:$LINENO: result: $ac_cv_host" >&5
+echo "${ECHO_T}$ac_cv_host" >&6
+host=$ac_cv_host
+host_cpu=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
+host_vendor=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
+host_os=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
 
 
-echo $ac_n "checking for prefix""... $ac_c" 1>&6
-echo "configure:877: checking for prefix" >&5
+
+echo "$as_me:$LINENO: checking for prefix" >&5
+echo $ECHO_N "checking for prefix... $ECHO_C" >&6
 if test x$prefix = xNONE; then
         mutt_cv_prefix=$ac_default_prefix
 else
         mutt_cv_prefix=$prefix
 fi
-echo "$ac_t""$mutt_cv_prefix" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_prefix" >&5
+echo "${ECHO_T}$mutt_cv_prefix" >&6
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}gcc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
 
-# Extract the first word of "gcc", so it can be a program name with args.
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:888: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="gcc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+set dummy ${ac_tool_prefix}cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_CC="gcc"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
 fi
 fi
-CC="$ac_cv_prog_CC"
+CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$ac_t""$CC" 1>&6
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "cc", so it can be a program name with args.
+set dummy cc; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  CC=$ac_ct_CC
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:918: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
   ac_prog_rejected=no
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
-        ac_prog_rejected=yes
-	continue
-      fi
-      ac_cv_prog_CC="cc"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+       ac_prog_rejected=yes
+       continue
+     fi
+    ac_cv_prog_CC="cc"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
 if test $ac_prog_rejected = yes; then
   # We found a bogon in the path, so make sure we never use it.
   set dummy $ac_cv_prog_CC
   shift
-  if test $# -gt 0; then
+  if test $# != 0; then
     # We chose a different compiler from the bogus one.
     # However, it has the same basename, so the bogon will be chosen
     # first if we set CC to just the basename; use the full file name.
     shift
-    set dummy "$ac_dir/$ac_word" "$@"
-    shift
-    ac_cv_prog_CC="$@"
+    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
   fi
 fi
 fi
 fi
-CC="$ac_cv_prog_CC"
+CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$ac_t""$CC" 1>&6
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
-  if test -z "$CC"; then
-    case "`uname -s`" in
-    *win32* | *WIN32*)
-      # Extract the first word of "cl", so it can be a program name with args.
-set dummy cl; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:969: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  for ac_prog in cl
+  do
+    # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  echo "$as_me:$LINENO: result: $CC" >&5
+echo "${ECHO_T}$CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+    test -n "$CC" && break
+  done
+fi
+if test -z "$CC"; then
+  ac_ct_CC=$CC
+  for ac_prog in cl
+do
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
+set dummy $ac_prog; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
+echo "${ECHO_T}$ac_ct_CC" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+
+  test -n "$ac_ct_CC" && break
+done
+
+  CC=$ac_ct_CC
+fi
+
+fi
+
+
+test -z "$CC" && { { echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH" >&5
+echo "$as_me: error: no acceptable C compiler found in \$PATH" >&2;}
+   { (exit 1); exit 1; }; }
+
+# Provide some information about the compiler.
+echo "$as_me:$LINENO:" \
+     "checking for C compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
+  (eval $ac_compiler --version </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -v </dev/null >&5\"") >&5
+  (eval $ac_compiler -v </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -V </dev/null >&5\"") >&5
+  (eval $ac_compiler -V </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files a.out a.exe"
+# Try to create an executable without -o first, disregard a.out.
+# It will help us diagnose broken compilers, and finding out an intuition
+# of exeext.
+echo "$as_me:$LINENO: checking for C compiler default output" >&5
+echo $ECHO_N "checking for C compiler default output... $ECHO_C" >&6
+ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+if { (eval echo "$as_me:$LINENO: \"$ac_link_default\"") >&5
+  (eval $ac_link_default) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  # Find the output, starting from the most likely.  This scheme is
+# not robust to junk in `.', hence go to wildcards (a.*) only as a last
+# resort.
+
+# Be careful to initialize this variable, since it used to be cached.
+# Otherwise an old cache value of `no' led to `EXEEXT = no' in a Makefile.
+ac_cv_exeext=
+for ac_file in `ls a_out.exe a.exe conftest.exe 2>/dev/null;
+                ls a.out conftest 2>/dev/null;
+                ls a.* conftest.* 2>/dev/null`; do
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.o | *.obj ) ;;
+    a.out ) # We found the default executable, but exeext='' is most
+            # certainly right.
+            break;;
+    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+          # FIXME: I believe we export ac_cv_exeext for Libtool --akim.
+          export ac_cv_exeext
+          break;;
+    * ) break;;
+  esac
+done
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+{ { echo "$as_me:$LINENO: error: C compiler cannot create executables" >&5
+echo "$as_me: error: C compiler cannot create executables" >&2;}
+   { (exit 77); exit 77; }; }
+fi
+
+ac_exeext=$ac_cv_exeext
+echo "$as_me:$LINENO: result: $ac_file" >&5
+echo "${ECHO_T}$ac_file" >&6
+
+# Check the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+echo "$as_me:$LINENO: checking whether the C compiler works" >&5
+echo $ECHO_N "checking whether the C compiler works... $ECHO_C" >&6
+# FIXME: These cross compiler hacks should be removed for Autoconf 3.0
+# If not cross compiling, check that we can run a simple program.
+if test "$cross_compiling" != yes; then
+  if { ac_try='./$ac_file'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+    cross_compiling=no
+  else
+    if test "$cross_compiling" = maybe; then
+	cross_compiling=yes
+    else
+	{ { echo "$as_me:$LINENO: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'." >&5
+echo "$as_me: error: cannot run C compiled programs.
+If you meant to cross compile, use \`--host'." >&2;}
+   { (exit 1); exit 1; }; }
+    fi
+  fi
+fi
+echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+rm -f a.out a.exe conftest$ac_cv_exeext
+ac_clean_files=$ac_clean_files_save
+# Check the compiler produces executables we can run.  If not, either
+# the compiler is broken, or we cross compile.
+echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
+echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6
+echo "$as_me:$LINENO: result: $cross_compiling" >&5
+echo "${ECHO_T}$cross_compiling" >&6
+
+echo "$as_me:$LINENO: checking for suffix of executables" >&5
+echo $ECHO_N "checking for suffix of executables... $ECHO_C" >&6
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  # If both `conftest.exe' and `conftest' are `present' (well, observable)
+# catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
+# work properly (i.e., refer to `conftest.exe'), while it won't with
+# `rm'.
+for ac_file in `(ls conftest.exe; ls conftest; ls conftest.*) 2>/dev/null`; do
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg | *.o | *.obj ) ;;
+    *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+          export ac_cv_exeext
+          break;;
+    * ) break;;
+  esac
+done
+else
+  { { echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link" >&5
+echo "$as_me: error: cannot compute suffix of executables: cannot compile and link" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+rm -f conftest$ac_cv_exeext
+echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
+echo "${ECHO_T}$ac_cv_exeext" >&6
+
+rm -f conftest.$ac_ext
+EXEEXT=$ac_cv_exeext
+ac_exeext=$EXEEXT
+echo "$as_me:$LINENO: checking for suffix of object files" >&5
+echo $ECHO_N "checking for suffix of object files... $ECHO_C" >&6
+if test "${ac_cv_objext+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.o conftest.obj
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do
+  case $ac_file in
+    *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg ) ;;
+    *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
+       break;;
+  esac
+done
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+{ { echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile" >&5
+echo "$as_me: error: cannot compute suffix of object files: cannot compile" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+rm -f conftest.$ac_cv_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
+echo "${ECHO_T}$ac_cv_objext" >&6
+OBJEXT=$ac_cv_objext
+ac_objext=$OBJEXT
+echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
+echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
+if test "${ac_cv_c_compiler_gnu+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+#ifndef __GNUC__
+       choke me
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_compiler_gnu=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_compiler_gnu=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+ac_cv_c_compiler_gnu=$ac_compiler_gnu
+
+fi
+echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
+echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
+GCC=`test $ac_compiler_gnu = yes && echo yes`
+ac_test_CFLAGS=${CFLAGS+set}
+ac_save_CFLAGS=$CFLAGS
+CFLAGS="-g"
+echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
+echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
+if test "${ac_cv_prog_cc_g+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cc_g=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_prog_cc_g=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
+if test "$ac_test_CFLAGS" = set; then
+  CFLAGS=$ac_save_CFLAGS
+elif test $ac_cv_prog_cc_g = yes; then
+  if test "$GCC" = yes; then
+    CFLAGS="-g -O2"
+  else
+    CFLAGS="-g"
+  fi
+else
+  if test "$GCC" = yes; then
+    CFLAGS="-O2"
+  else
+    CFLAGS=
+  fi
+fi
+echo "$as_me:$LINENO: checking for $CC option to accept ANSI C" >&5
+echo $ECHO_N "checking for $CC option to accept ANSI C... $ECHO_C" >&6
+if test "${ac_cv_prog_cc_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_prog_cc_stdc=no
+ac_save_CC=$CC
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <stdarg.h>
+#include <stdio.h>
+#include <sys/types.h>
+#include <sys/stat.h>
+/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
+struct buf { int x; };
+FILE * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
+int argc;
+char **argv;
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
+  ;
+  return 0;
+}
+_ACEOF
+# Don't try gcc -ansi; that turns off useful extensions and
+# breaks some systems' header files.
+# AIX			-qlanglvl=ansi
+# Ultrix and OSF/1	-std1
+# HP-UX 10.20 and later	-Ae
+# HP-UX older versions	-Aa -D_HPUX_SOURCE
+# SVR4			-Xc -D__EXTENSIONS__
+for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+do
+  CC="$ac_save_CC $ac_arg"
+  rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_prog_cc_stdc=$ac_arg
+break
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+fi
+rm -f conftest.$ac_objext
+done
+rm -f conftest.$ac_ext conftest.$ac_objext
+CC=$ac_save_CC
+
+fi
+
+case "x$ac_cv_prog_cc_stdc" in
+  x|xno)
+    echo "$as_me:$LINENO: result: none needed" >&5
+echo "${ECHO_T}none needed" >&6 ;;
+  *)
+    echo "$as_me:$LINENO: result: $ac_cv_prog_cc_stdc" >&5
+echo "${ECHO_T}$ac_cv_prog_cc_stdc" >&6
+    CC="$CC $ac_cv_prog_cc_stdc" ;;
+esac
+
+# Some people use a C++ compiler to compile C.  Since we use `exit',
+# in C++ we need to declare it.  In case someone uses the same compiler
+# for both compiling C and C++ we need to have the C++ compiler decide
+# the declaration of exit, since it's the most demanding environment.
+cat >conftest.$ac_ext <<_ACEOF
+#ifndef __cplusplus
+  choke me
+#endif
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  for ac_declaration in \
+   ''\
+   '#include <stdlib.h>' \
+   'extern "C" void std::exit (int) throw (); using std::exit;' \
+   'extern "C" void std::exit (int); using std::exit;' \
+   'extern "C" void exit (int) throw ();' \
+   'extern "C" void exit (int);' \
+   'void exit (int);'
+do
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+$ac_declaration
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
 else
-  if test -n "$CC"; then
-  ac_cv_prog_CC="$CC" # Let the user override the test.
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+continue
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_declaration
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+exit (42);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  break
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_CC="cl"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+done
+rm -f conftest*
+if test -n "$ac_declaration"; then
+  echo '#ifdef __cplusplus' >>confdefs.h
+  echo $ac_declaration      >>confdefs.h
+  echo '#endif'             >>confdefs.h
 fi
-CC="$ac_cv_prog_CC"
-if test -n "$CC"; then
-  echo "$ac_t""$CC" 1>&6
+
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
- ;;
-    esac
-  fi
-  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
-fi
-
-echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:1001: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
-
+rm -f conftest.$ac_objext conftest.$ac_ext
 ac_ext=c
-# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CPP $CPPFLAGS'
-ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
-cross_compiling=$ac_cv_prog_cc_cross
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+rm -f .deps 2>/dev/null
+mkdir .deps 2>/dev/null
+if test -d .deps; then
+  DEPDIR=.deps
+else
+  # MS-DOS does not allow filenames that begin with a dot.
+  DEPDIR=_deps
+fi
+rmdir .deps 2>/dev/null
+
+
+          ac_config_commands="$ac_config_commands depfiles"
+
+
+am_make=${MAKE-make}
+cat > confinc << 'END'
+doit:
+	@echo done
+END
+# If we don't find an include directive, just comment out the code.
+echo "$as_me:$LINENO: checking for style of include used by $am_make" >&5
+echo $ECHO_N "checking for style of include used by $am_make... $ECHO_C" >&6
+am__include="#"
+am__quote=
+_am_result=none
+# First try GNU make style include.
+echo "include confinc" > confmf
+# We grep out `Entering directory' and `Leaving directory'
+# messages which can occur if `w' ends up in MAKEFLAGS.
+# In particular we don't look at `^make:' because GNU make might
+# be invoked under some other name (usually "gmake"), in which
+# case it prints its new name instead of `make'.
+if test "`$am_make -s -f confmf 2> /dev/null | fgrep -v 'ing directory'`" = "done"; then
+   am__include=include
+   am__quote=
+   _am_result=GNU
+fi
+# Now try BSD make style include.
+if test "$am__include" = "#"; then
+   echo '.include "confinc"' > confmf
+   if test "`$am_make -s -f confmf 2> /dev/null`" = "done"; then
+      am__include=.include
+      am__quote="\""
+      _am_result=BSD
+   fi
+fi
 
-cat > conftest.$ac_ext << EOF
 
-#line 1012 "configure"
-#include "confdefs.h"
+echo "$as_me:$LINENO: result: $_am_result" >&5
+echo "${ECHO_T}$_am_result" >&6
+rm -f confinc confmf
 
-main(){return(0);}
-EOF
-if { (eval echo configure:1017: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  ac_cv_prog_cc_works=yes
-  # If we can't run a trivial program, we are probably using a cross compiler.
-  if (./conftest; exit) 2>/dev/null; then
-    ac_cv_prog_cc_cross=no
-  else
-    ac_cv_prog_cc_cross=yes
-  fi
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  ac_cv_prog_cc_works=no
-fi
-rm -fr conftest*
-ac_ext=c
-# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
-ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
-cross_compiling=$ac_cv_prog_cc_cross
-
-echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
-if test $ac_cv_prog_cc_works = no; then
-  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
-fi
-echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:1043: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
-echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
-cross_compiling=$ac_cv_prog_cc_cross
-
-echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:1048: checking whether we are using GNU C" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.c <<EOF
-#ifdef __GNUC__
-  yes;
-#endif
-EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1057: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
-  ac_cv_prog_gcc=yes
-else
-  ac_cv_prog_gcc=no
-fi
+# Check whether --enable-dependency-tracking or --disable-dependency-tracking was given.
+if test "${enable_dependency_tracking+set}" = set; then
+  enableval="$enable_dependency_tracking"
+
+fi;
+if test "x$enable_dependency_tracking" != xno; then
+  am_depcomp="$ac_aux_dir/depcomp"
+  AMDEPBACKSLASH='\'
 fi
 
-echo "$ac_t""$ac_cv_prog_gcc" 1>&6
 
-if test $ac_cv_prog_gcc = yes; then
-  GCC=yes
+if test "x$enable_dependency_tracking" != xno; then
+  AMDEP_TRUE=
+  AMDEP_FALSE='#'
 else
-  GCC=
+  AMDEP_TRUE='#'
+  AMDEP_FALSE=
 fi
 
-ac_test_CFLAGS="${CFLAGS+set}"
-ac_save_CFLAGS="$CFLAGS"
-CFLAGS=
-echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:1076: checking whether ${CC-cc} accepts -g" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+
+
+depcc="$CC"   am_compiler_list=
+
+echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
+echo $ECHO_N "checking dependency style of $depcc... $ECHO_C" >&6
+if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo 'void f(){}' > conftest.c
-if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
-  ac_cv_prog_cc_g=yes
+  if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
+  # We make a subdir and do the tests there.  Otherwise we can end up
+  # making bogus files that we don't know about and never remove.  For
+  # instance it was reported that on HP-UX the gcc test will end up
+  # making a dummy file named `D' -- because `-MD' means `put the output
+  # in D'.
+  mkdir conftest.dir
+  # Copy depcomp to subdir because otherwise we won't find it if we're
+  # using a relative directory.
+  cp "$am_depcomp" conftest.dir
+  cd conftest.dir
+
+  am_cv_CC_dependencies_compiler_type=none
+  if test "$am_compiler_list" = ""; then
+     am_compiler_list=`sed -n 's/^#*\([a-zA-Z0-9]*\))$/\1/p' < ./depcomp`
+  fi
+  for depmode in $am_compiler_list; do
+    # We need to recreate these files for each test, as the compiler may
+    # overwrite some of them when testing with obscure command lines.
+    # This happens at least with the AIX C compiler.
+    echo '#include "conftest.h"' > conftest.c
+    echo 'int i;' > conftest.h
+    echo "${am__include} ${am__quote}conftest.Po${am__quote}" > confmf
+
+    case $depmode in
+    nosideeffect)
+      # after this tag, mechanisms are not by side-effect, so they'll
+      # only be used when explicitly requested
+      if test "x$enable_dependency_tracking" = xyes; then
+	continue
+      else
+	break
+      fi
+      ;;
+    none) break ;;
+    esac
+    # We check with `-c' and `-o' for the sake of the "dashmstdout"
+    # mode.  It turns out that the SunPro C++ compiler does not properly
+    # handle `-M -o', and we need to detect this.
+    if depmode=$depmode \
+       source=conftest.c object=conftest.o \
+       depfile=conftest.Po tmpdepfile=conftest.TPo \
+       $SHELL ./depcomp $depcc -c conftest.c -o conftest.o >/dev/null 2>&1 &&
+       grep conftest.h conftest.Po > /dev/null 2>&1 &&
+       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then
+      am_cv_CC_dependencies_compiler_type=$depmode
+      break
+    fi
+  done
+
+  cd ..
+  rm -rf conftest.dir
 else
-  ac_cv_prog_cc_g=no
+  am_cv_CC_dependencies_compiler_type=none
 fi
-rm -f conftest*
 
 fi
+echo "$as_me:$LINENO: result: $am_cv_CC_dependencies_compiler_type" >&5
+echo "${ECHO_T}$am_cv_CC_dependencies_compiler_type" >&6
+CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
+
 
-echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
-if test "$ac_test_CFLAGS" = set; then
-  CFLAGS="$ac_save_CFLAGS"
-elif test $ac_cv_prog_cc_g = yes; then
-  if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
-  else
-    CFLAGS="-g"
-  fi
-else
-  if test "$GCC" = yes; then
-    CFLAGS="-O2"
-  else
-    CFLAGS=
-  fi
-fi
 
 
-        echo $ac_n "checking for strerror in -lcposix""... $ac_c" 1>&6
-echo "configure:1109: checking for strerror in -lcposix" >&5
-ac_lib_var=`echo cposix'_'strerror | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+        echo "$as_me:$LINENO: checking for strerror in -lcposix" >&5
+echo $ECHO_N "checking for strerror in -lcposix... $ECHO_C" >&6
+if test "${ac_cv_lib_cposix_strerror+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lcposix  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 1117 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char strerror();
-
-int main() {
-strerror()
-; return 0; }
-EOF
-if { (eval echo configure:1128: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+   builtin and then its argument prototype would still apply.  */
+char strerror ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+strerror ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_cposix_strerror=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_cposix_strerror=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_cposix_strerror" >&5
+echo "${ECHO_T}$ac_cv_lib_cposix_strerror" >&6
+if test $ac_cv_lib_cposix_strerror = yes; then
   LIBS="$LIBS -lcposix"
-else
-  echo "$ac_t""no" 1>&6
 fi
 
-  
 
 
 
 
-echo $ac_n "checking for ${CC-cc} option to accept ANSI C""... $ac_c" 1>&6
-echo "configure:1154: checking for ${CC-cc} option to accept ANSI C" >&5
-if eval "test \"`echo '$''{'am_cv_prog_cc_stdc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for ${CC-cc} option to accept ANSI C" >&5
+echo $ECHO_N "checking for ${CC-cc} option to accept ANSI C... $ECHO_C" >&6
+if test "${am_cv_prog_cc_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   am_cv_prog_cc_stdc=no
 ac_save_CC="$CC"
@@ -1162,13 +2779,14 @@
 # breaks some systems' header files.
 # AIX			-qlanglvl=ansi
 # Ultrix and OSF/1	-std1
-# HP-UX			-Aa -D_HPUX_SOURCE
+# HP-UX 10.20 and later	-Ae
+# HP-UX older versions	-Aa -D_HPUX_SOURCE
 # SVR4			-Xc -D__EXTENSIONS__
-for ac_arg in "" -qlanglvl=ansi -std1 "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
 do
   CC="$ac_save_CC $ac_arg"
-  cat > conftest.$ac_ext <<EOF
-#line 1170 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <stdarg.h>
 #include <stdio.h>
@@ -1199,170 +2817,386 @@
 int argc;
 char **argv;
 
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 
 return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
 
-; return 0; }
-EOF
-if { (eval echo configure:1207: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   am_cv_prog_cc_stdc="$ac_arg"; break
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 done
 CC="$ac_save_CC"
 
 fi
 
 if test -z "$am_cv_prog_cc_stdc"; then
-  echo "$ac_t""none needed" 1>&6
+  echo "$as_me:$LINENO: result: none needed" >&5
+echo "${ECHO_T}none needed" >&6
 else
-  echo "$ac_t""$am_cv_prog_cc_stdc" 1>&6
+  echo "$as_me:$LINENO: result: $am_cv_prog_cc_stdc" >&5
+echo "${ECHO_T}$am_cv_prog_cc_stdc" >&6
 fi
 case "x$am_cv_prog_cc_stdc" in
   x|xno) ;;
   *) CC="$CC $am_cv_prog_cc_stdc" ;;
 esac
 
-echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:1231: checking how to run the C preprocessor" >&5
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
+echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
 fi
 if test -z "$CPP"; then
-if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  if test "${ac_cv_prog_CPP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-    # This must be in double quotes, not single quotes, because CPP may get
-  # substituted into the Makefile and "${CC-cc}" will confuse make.
-  CPP="${CC-cc} -E"
+      # Double quotes because CPP needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
+    do
+      ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
   # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp.
-  cat > conftest.$ac_ext <<EOF
-#line 1246 "configure"
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1252: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
   :
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -E -traditional-cpp"
-  cat > conftest.$ac_ext <<EOF
-#line 1263 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1269: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -nologo -E"
-  cat > conftest.$ac_ext <<EOF
-#line 1280 "configure"
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  break
+fi
+
+    done
+    ac_cv_prog_CPP=$CPP
+
+fi
+  CPP=$ac_cv_prog_CPP
+else
+  ac_cv_prog_CPP=$CPP
+fi
+echo "$as_me:$LINENO: result: $CPP" >&5
+echo "${ECHO_T}$CPP" >&6
+ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1286: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
   :
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP=/lib/cpp
+  # Broken: fails on valid input.
+continue
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
 fi
-rm -f conftest*
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Passes both tests.
+ac_preproc_ok=:
+break
 fi
-rm -f conftest*
-  ac_cv_prog_CPP="$CPP"
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  :
+else
+  { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check" >&5
+echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check" >&2;}
+   { (exit 1); exit 1; }; }
 fi
-  CPP="$ac_cv_prog_CPP"
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+# On IRIX 5.3, sys/types and inttypes.h are conflicting.
+
+
+
+
+
+
+
+
+
+for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
+                  inttypes.h stdint.h unistd.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Header=yes"
 else
-  ac_cv_prog_CPP="$CPP"
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_Header=no"
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
 fi
-echo "$ac_t""$CPP" 1>&6
+
+done
+
 
 
 
-echo $ac_n "checking for function prototypes""... $ac_c" 1>&6
-echo "configure:1313: checking for function prototypes" >&5
+echo "$as_me:$LINENO: checking for function prototypes" >&5
+echo $ECHO_N "checking for function prototypes... $ECHO_C" >&6
 if test "$am_cv_prog_cc_stdc" != no; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+cat >>confdefs.h <<\_ACEOF
 #define PROTOTYPES 1
-EOF
+_ACEOF
 
   U= ANSI2KNR=
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
   U=_ ANSI2KNR=./ansi2knr
-  # Ensure some checks needed by ansi2knr itself.
-  echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:1326: checking for ANSI C header files" >&5
-if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+fi
+# Ensure some checks needed by ansi2knr itself.
+echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
+if test "${ac_cv_header_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 1331 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
 #include <float.h>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1339: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
+
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
   ac_cv_header_stdc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
   ac_cv_header_stdc=no
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
 
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-cat > conftest.$ac_ext <<EOF
-#line 1356 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <string.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "memchr" >/dev/null 2>&1; then
   :
 else
-  rm -rf conftest*
   ac_cv_header_stdc=no
 fi
 rm -f conftest*
@@ -1371,16 +3205,16 @@
 
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-cat > conftest.$ac_ext <<EOF
-#line 1374 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <stdlib.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "free" >/dev/null 2>&1; then
   :
 else
-  rm -rf conftest*
   ac_cv_header_stdc=no
 fi
 rm -f conftest*
@@ -1389,193 +3223,414 @@
 
 if test $ac_cv_header_stdc = yes; then
   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-if test "$cross_compiling" = yes; then
+  if test "$cross_compiling" = yes; then
   :
 else
-  cat > conftest.$ac_ext <<EOF
-#line 1395 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <ctype.h>
-#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int main () { int i; for (i = 0; i < 256; i++)
-if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
-exit (0); }
+#if ((' ' & 0x0FF) == 0x020)
+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#else
+# define ISLOWER(c) (('a' <= (c) && (c) <= 'i') \
+                     || ('j' <= (c) && (c) <= 'r') \
+                     || ('s' <= (c) && (c) <= 'z'))
+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
+#endif
 
-EOF
-if { (eval echo configure:1406: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int
+main ()
+{
+  int i;
+  for (i = 0; i < 256; i++)
+    if (XOR (islower (i), ISLOWER (i))
+        || toupper (i) != TOUPPER (i))
+      exit(2);
+  exit (0);
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   :
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_header_stdc=no
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+ac_cv_header_stdc=no
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
 fi
-
-echo "$ac_t""$ac_cv_header_stdc" 1>&6
+echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+echo "${ECHO_T}$ac_cv_header_stdc" >&6
 if test $ac_cv_header_stdc = yes; then
-  cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define STDC_HEADERS 1
-EOF
+_ACEOF
 
 fi
 
-  for ac_hdr in string.h
+
+for ac_header in string.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:1433: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  cat > conftest.$ac_ext <<EOF
-#line 1438 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1443: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "$ac_t""no" 1>&6
+  eval "$as_ac_Header=$ac_header_preproc"
 fi
-done
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
 
 fi
 
+done
+
+
 if test "x$U" != "x"; then
-  { echo "configure: error: Compiler not ANSI compliant" 1>&2; exit 1; }
+  { { echo "$as_me:$LINENO: error: Compiler not ANSI compliant" >&5
+echo "$as_me: error: Compiler not ANSI compliant" >&2;}
+   { (exit 1); exit 1; }; }
 fi
-echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:1475: checking how to run the C preprocessor" >&5
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
+echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
 fi
 if test -z "$CPP"; then
-if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  if test "${ac_cv_prog_CPP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-    # This must be in double quotes, not single quotes, because CPP may get
-  # substituted into the Makefile and "${CC-cc}" will confuse make.
-  CPP="${CC-cc} -E"
+      # Double quotes because CPP needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
+    do
+      ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
   # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp.
-  cat > conftest.$ac_ext <<EOF
-#line 1490 "configure"
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1496: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
   :
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -E -traditional-cpp"
-  cat > conftest.$ac_ext <<EOF
-#line 1507 "configure"
-#include "confdefs.h"
-#include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1513: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  :
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP="${CC-cc} -nologo -E"
-  cat > conftest.$ac_ext <<EOF
-#line 1524 "configure"
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  break
+fi
+
+    done
+    ac_cv_prog_CPP=$CPP
+
+fi
+  CPP=$ac_cv_prog_CPP
+else
+  ac_cv_prog_CPP=$CPP
+fi
+echo "$as_me:$LINENO: result: $CPP" >&5
+echo "${ECHO_T}$CPP" >&6
+ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <assert.h>
-Syntax Error
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1530: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
   :
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  CPP=/lib/cpp
-fi
-rm -f conftest*
+  # Broken: fails on valid input.
+continue
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
 fi
-rm -f conftest*
-  ac_cv_prog_CPP="$CPP"
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Passes both tests.
+ac_preproc_ok=:
+break
 fi
-  CPP="$ac_cv_prog_CPP"
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  :
 else
-  ac_cv_prog_CPP="$CPP"
+  { { echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check" >&5
+echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check" >&2;}
+   { (exit 1); exit 1; }; }
 fi
-echo "$ac_t""$CPP" 1>&6
 
-echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:1555: checking whether ${MAKE-make} sets \${MAKE}" >&5
-set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo $ECHO_N "checking whether ${MAKE-make} sets \${MAKE}... $ECHO_C" >&6
+set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y,./+-,__p_,'`
+if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftestmake <<\EOF
+  cat >conftest.make <<\_ACEOF
 all:
 	@echo 'ac_maketemp="${MAKE}"'
-EOF
+_ACEOF
 # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
-eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
+eval `${MAKE-make} -f conftest.make 2>/dev/null | grep temp=`
 if test -n "$ac_maketemp"; then
   eval ac_cv_prog_make_${ac_make}_set=yes
 else
   eval ac_cv_prog_make_${ac_make}_set=no
 fi
-rm -f conftestmake
+rm -f conftest.make
 fi
 if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
   SET_MAKE=
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
   SET_MAKE="MAKE=${MAKE-make}"
 fi
 
@@ -1586,407 +3641,508 @@
 # SunOS /usr/etc/install
 # IRIX /sbin/install
 # AIX /bin/install
+# AmigaOS /C/install, which installs bootblocks on floppy discs
 # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
 # AFS /usr/afsws/bin/install, which mishandles nonexistent args
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
-echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:1593: checking for a BSD compatible install" >&5
+echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
+echo $ECHO_N "checking for a BSD-compatible install... $ECHO_C" >&6
 if test -z "$INSTALL"; then
-if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+if test "${ac_cv_path_install+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
-  for ac_dir in $PATH; do
-    # Account for people who put trailing slashes in PATH elements.
-    case "$ac_dir/" in
-    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
-    *)
-      # OSF1 and SCO ODT 3.0 have their own names for install.
-      # Don't use installbsd from OSF since it installs stuff as root
-      # by default.
-      for ac_prog in ginstall scoinst install; do
-        if test -f $ac_dir/$ac_prog; then
-	  if test $ac_prog = install &&
-            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
-	    # AIX install.  It has an incompatible calling convention.
-	    :
-	  else
-	    ac_cv_path_install="$ac_dir/$ac_prog -c"
-	    break 2
-	  fi
-	fi
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  # Account for people who put trailing slashes in PATH elements.
+case $as_dir/ in
+  ./ | .// | /cC/* | \
+  /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
+  /usr/ucb/* ) ;;
+  *)
+    # OSF1 and SCO ODT 3.0 have their own names for install.
+    # Don't use installbsd from OSF since it installs stuff as root
+    # by default.
+    for ac_prog in ginstall scoinst install; do
+      for ac_exec_ext in '' $ac_executable_extensions; do
+        if $as_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
+          if test $ac_prog = install &&
+            grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+            # AIX install.  It has an incompatible calling convention.
+            :
+          elif test $ac_prog = install &&
+            grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+            # program-specific install script used by HP pwplus--don't use.
+            :
+          else
+            ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
+            break 3
+          fi
+        fi
       done
-      ;;
-    esac
-  done
-  IFS="$ac_save_IFS"
+    done
+    ;;
+esac
+done
+
 
 fi
   if test "${ac_cv_path_install+set}" = set; then
-    INSTALL="$ac_cv_path_install"
+    INSTALL=$ac_cv_path_install
   else
     # As a last resort, use the slow shell script.  We don't cache a
     # path for INSTALL within a source directory, because that will
     # break other packages using the cache if that directory is
     # removed, or if the path is relative.
-    INSTALL="$ac_install_sh"
+    INSTALL=$ac_install_sh
   fi
 fi
-echo "$ac_t""$INSTALL" 1>&6
+echo "$as_me:$LINENO: result: $INSTALL" >&5
+echo "${ECHO_T}$INSTALL" >&6
 
 # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
 # It thinks the first close brace ends the variable substitution.
 test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
 
-test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
+test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
 
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
-# Extract the first word of "ranlib", so it can be a program name with args.
-set dummy ranlib; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1648: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
+set dummy ${ac_tool_prefix}ranlib; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_RANLIB+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$RANLIB"; then
   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_RANLIB="ranlib"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
 fi
 fi
-RANLIB="$ac_cv_prog_RANLIB"
+RANLIB=$ac_cv_prog_RANLIB
 if test -n "$RANLIB"; then
-  echo "$ac_t""$RANLIB" 1>&6
+  echo "$as_me:$LINENO: result: $RANLIB" >&5
+echo "${ECHO_T}$RANLIB" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
-echo $ac_n "checking build system type""... $ac_c" 1>&6
-echo "configure:1676: checking build system type" >&5
-
-build_alias=$build
-case "$build_alias" in
-NONE)
-  case $nonopt in
-  NONE) build_alias=$host_alias ;;
-  *) build_alias=$nonopt ;;
-  esac ;;
-esac
+fi
+if test -z "$ac_cv_prog_RANLIB"; then
+  ac_ct_RANLIB=$RANLIB
+  # Extract the first word of "ranlib", so it can be a program name with args.
+set dummy ranlib; ac_word=$2
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test -n "$ac_ct_RANLIB"; then
+  ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_RANLIB="ranlib"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
 
-build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
-build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
-build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
-build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
-echo "$ac_t""$build" 1>&6
+  test -z "$ac_cv_prog_ac_ct_RANLIB" && ac_cv_prog_ac_ct_RANLIB=":"
+fi
+fi
+ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
+if test -n "$ac_ct_RANLIB"; then
+  echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
+echo "${ECHO_T}$ac_ct_RANLIB" >&6
+else
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
 
-if test $host != $build; then
-  ac_tool_prefix=${host_alias}-
+  RANLIB=$ac_ct_RANLIB
 else
-  ac_tool_prefix=
+  RANLIB="$ac_cv_prog_RANLIB"
 fi
 
-# Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
+if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ar; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1702: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_AR+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$AR"; then
   ac_cv_prog_AR="$AR" # Let the user override the test.
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_AR="${ac_tool_prefix}ar"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_AR="${ac_tool_prefix}ar"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
 fi
 fi
-AR="$ac_cv_prog_AR"
+AR=$ac_cv_prog_AR
 if test -n "$AR"; then
-  echo "$ac_t""$AR" 1>&6
+  echo "$as_me:$LINENO: result: $AR" >&5
+echo "${ECHO_T}$AR" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
-
+fi
 if test -z "$ac_cv_prog_AR"; then
-if test -n "$ac_tool_prefix"; then
+  ac_ct_AR=$AR
   # Extract the first word of "ar", so it can be a program name with args.
 set dummy ar; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1734: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_AR'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_ac_ct_AR+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  if test -n "$AR"; then
-  ac_cv_prog_AR="$AR" # Let the user override the test.
+  if test -n "$ac_ct_AR"; then
+  ac_cv_prog_ac_ct_AR="$ac_ct_AR" # Let the user override the test.
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_AR="ar"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
-  test -z "$ac_cv_prog_AR" && ac_cv_prog_AR="ar"
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_AR="ar"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
+  test -z "$ac_cv_prog_ac_ct_AR" && ac_cv_prog_ac_ct_AR="ar"
 fi
 fi
-AR="$ac_cv_prog_AR"
-if test -n "$AR"; then
-  echo "$ac_t""$AR" 1>&6
+ac_ct_AR=$ac_cv_prog_ac_ct_AR
+if test -n "$ac_ct_AR"; then
+  echo "$as_me:$LINENO: result: $ac_ct_AR" >&5
+echo "${ECHO_T}$ac_ct_AR" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
+  AR=$ac_ct_AR
 else
-  AR="ar"
-fi
+  AR="$ac_cv_prog_AR"
 fi
 
 
-echo $ac_n "checking for inline""... $ac_c" 1>&6
-echo "configure:1768: checking for inline" >&5
-if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for inline" >&5
+echo $ECHO_N "checking for inline... $ECHO_C" >&6
+if test "${ac_cv_c_inline+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_c_inline=no
 for ac_kw in inline __inline__ __inline; do
-  cat > conftest.$ac_ext <<EOF
-#line 1775 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
-
-int main() {
-} $ac_kw foo() {
-; return 0; }
-EOF
-if { (eval echo configure:1782: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+#ifndef __cplusplus
+typedef int foo_t;
+static $ac_kw foo_t static_foo () {return 0; }
+$ac_kw foo_t foo () {return 0; }
+#endif
+
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_c_inline=$ac_kw; break
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 done
 
 fi
-
-echo "$ac_t""$ac_cv_c_inline" 1>&6
-case "$ac_cv_c_inline" in
+echo "$as_me:$LINENO: result: $ac_cv_c_inline" >&5
+echo "${ECHO_T}$ac_cv_c_inline" >&6
+case $ac_cv_c_inline in
   inline | yes) ;;
-  no) cat >> confdefs.h <<\EOF
-#define inline 
-EOF
+  no)
+cat >>confdefs.h <<\_ACEOF
+#define inline
+_ACEOF
  ;;
-  *)  cat >> confdefs.h <<EOF
+  *)  cat >>confdefs.h <<_ACEOF
 #define inline $ac_cv_c_inline
-EOF
+_ACEOF
  ;;
 esac
 
-echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:1808: checking for working const" >&5
-if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 1813 "configure"
-#include "confdefs.h"
-
-int main() {
-
-/* Ultrix mips cc rejects this.  */
-typedef int charset[2]; const charset x;
-/* SunOS 4.1.1 cc rejects this.  */
-char const *const *ccp;
-char **p;
-/* NEC SVR4.0.2 mips cc rejects this.  */
-struct point {int x, y;};
-static struct point const zero = {0,0};
-/* AIX XL C 1.02.0.0 rejects this.
-   It does not let you subtract one const X* pointer from another in an arm
-   of an if-expression whose if-part is not a constant expression */
-const char *g = "string";
-ccp = &g + (g ? g-g : 0);
-/* HPUX 7.0 cc rejects these. */
-++ccp;
-p = (char**) ccp;
-ccp = (char const *const *) p;
-{ /* SCO 3.2v4 cc rejects this.  */
-  char *t;
-  char const *s = 0 ? (char *) 0 : (char const *) 0;
-
-  *t++ = 0;
-}
-{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
-  int x[] = {25, 17};
-  const int *foo = &x[0];
-  ++foo;
-}
-{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
-  typedef const int *iptr;
-  iptr p = 0;
-  ++p;
-}
-{ /* AIX XL C 1.02.0.0 rejects this saying
-     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
-  struct s { int j; const int *ap[3]; };
-  struct s *b; b->j = 5;
-}
-{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
-  const int foo = 10;
-}
-
-; return 0; }
-EOF
-if { (eval echo configure:1862: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+echo "$as_me:$LINENO: checking for an ANSI C-conforming const" >&5
+echo $ECHO_N "checking for an ANSI C-conforming const... $ECHO_C" >&6
+if test "${ac_cv_c_const+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+/* FIXME: Include the comments suggested by Paul. */
+#ifndef __cplusplus
+  /* Ultrix mips cc rejects this.  */
+  typedef int charset[2];
+  const charset x;
+  /* SunOS 4.1.1 cc rejects this.  */
+  char const *const *ccp;
+  char **p;
+  /* NEC SVR4.0.2 mips cc rejects this.  */
+  struct point {int x, y;};
+  static struct point const zero = {0,0};
+  /* AIX XL C 1.02.0.0 rejects this.
+     It does not let you subtract one const X* pointer from another in
+     an arm of an if-expression whose if-part is not a constant
+     expression */
+  const char *g = "string";
+  ccp = &g + (g ? g-g : 0);
+  /* HPUX 7.0 cc rejects these. */
+  ++ccp;
+  p = (char**) ccp;
+  ccp = (char const *const *) p;
+  { /* SCO 3.2v4 cc rejects this.  */
+    char *t;
+    char const *s = 0 ? (char *) 0 : (char const *) 0;
+
+    *t++ = 0;
+  }
+  { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
+    int x[] = {25, 17};
+    const int *foo = &x[0];
+    ++foo;
+  }
+  { /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
+    typedef const int *iptr;
+    iptr p = 0;
+    ++p;
+  }
+  { /* AIX XL C 1.02.0.0 rejects this saying
+       "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
+    struct s { int j; const int *ap[3]; };
+    struct s *b; b->j = 5;
+  }
+  { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
+    const int foo = 10;
+  }
+#endif
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_c_const=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_c_const=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_c_const=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-
-echo "$ac_t""$ac_cv_c_const" 1>&6
+echo "$as_me:$LINENO: result: $ac_cv_c_const" >&5
+echo "${ECHO_T}$ac_cv_c_const" >&6
 if test $ac_cv_c_const = no; then
-  cat >> confdefs.h <<\EOF
-#define const 
-EOF
+
+cat >>confdefs.h <<\_ACEOF
+#define const
+_ACEOF
 
 fi
 
 
 # Extract the first word of "dbx", so it can be a program name with args.
 set dummy dbx; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1886: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_DBX'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_DBX+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$DBX" in
-  /*)
+  case $DBX in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_DBX="$DBX" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_DBX="$DBX" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_DBX="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_DBX="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_DBX" && ac_cv_path_DBX="no"
   ;;
 esac
 fi
-DBX="$ac_cv_path_DBX"
+DBX=$ac_cv_path_DBX
+
 if test -n "$DBX"; then
-  echo "$ac_t""$DBX" 1>&6
+  echo "$as_me:$LINENO: result: $DBX" >&5
+echo "${ECHO_T}$DBX" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
 # Extract the first word of "gdb", so it can be a program name with args.
 set dummy gdb; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1922: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_GDB'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_GDB+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$GDB" in
-  /*)
+  case $GDB in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_GDB="$GDB" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_GDB="$GDB" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_GDB="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_GDB="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_GDB" && ac_cv_path_GDB="no"
   ;;
 esac
 fi
-GDB="$ac_cv_path_GDB"
+GDB=$ac_cv_path_GDB
+
 if test -n "$GDB"; then
-  echo "$ac_t""$GDB" 1>&6
+  echo "$as_me:$LINENO: result: $GDB" >&5
+echo "${ECHO_T}$GDB" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
 # Extract the first word of "sdb", so it can be a program name with args.
 set dummy sdb; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1958: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_SDB'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_SDB+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$SDB" in
-  /*)
+  case $SDB in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_SDB="$SDB" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_SDB="$SDB" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_SDB="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_SDB="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_SDB" && ac_cv_path_SDB="no"
   ;;
 esac
 fi
-SDB="$ac_cv_path_SDB"
+SDB=$ac_cv_path_SDB
+
 if test -n "$SDB"; then
-  echo "$ac_t""$SDB" 1>&6
+  echo "$as_me:$LINENO: result: $SDB" >&5
+echo "${ECHO_T}$SDB" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
 
@@ -2005,43 +4161,49 @@
 ac_aux_path_sendmail=/usr/sbin:/usr/lib
 # Extract the first word of "sendmail", so it can be a program name with args.
 set dummy sendmail; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2008: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_SENDMAIL'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_SENDMAIL+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$SENDMAIL" in
-  /*)
+  case $SENDMAIL in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_SENDMAIL="$SENDMAIL" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_SENDMAIL="$SENDMAIL" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH:$ac_aux_path_sendmail"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_SENDMAIL="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+as_dummy="$PATH:$ac_aux_path_sendmail"
+for as_dir in $as_dummy
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_SENDMAIL="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_SENDMAIL" && ac_cv_path_SENDMAIL="/usr/sbin/sendmail"
   ;;
 esac
 fi
-SENDMAIL="$ac_cv_path_SENDMAIL"
+SENDMAIL=$ac_cv_path_SENDMAIL
+
 if test -n "$SENDMAIL"; then
-  echo "$ac_t""$SENDMAIL" 1>&6
+  echo "$as_me:$LINENO: result: $SENDMAIL" >&5
+echo "${ECHO_T}$SENDMAIL" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
-cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define SENDMAIL "$ac_cv_path_SENDMAIL"
-EOF
+_ACEOF
 
 
 OPS='$(srcdir)/OPS'
@@ -2056,21 +4218,22 @@
          if test x$enableval = xno ; then
                         have_pgp=no
                 fi
-        
-fi
 
+fi;
 
         if test x$have_pgp != xno ; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_PGP 1
-EOF
+_ACEOF
 
                 PGPAUX_TARGET="pgpring pgpewrap"
                 MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS pgp.o pgpinvoke.o pgpkey.o pgplib.o gnupgparse.o pgpmicalg.o pgppacket.o"
                 OPS="$OPS \$(srcdir)/OPS.PGP"
         fi
 
-        # Check whether --with-mixmaster or --without-mixmaster was given.
+
+# Check whether --with-mixmaster or --without-mixmaster was given.
 if test "${with_mixmaster+set}" = set; then
   withval="$with_mixmaster"
   if test -x "$withval" ; then
@@ -2080,81 +4243,88 @@
                  fi
                  OPS="$OPS \$(srcdir)/OPS.MIX"
                  MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS remailer.o"
-                 cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define MIXMASTER "$MIXMASTER"
-EOF
+_ACEOF
 
-                
-fi
 
+fi;
 
 fi
 
 
 
 
-cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define SUBVERSION "$SUBVERSION"
-EOF
+_ACEOF
 
 
 
 # Extract the first word of "ispell", so it can be a program name with args.
 set dummy ispell; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2104: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_ISPELL'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_ISPELL+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$ISPELL" in
-  /*)
+  case $ISPELL in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_ISPELL="$ISPELL" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_ISPELL="$ISPELL" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_ISPELL="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_ISPELL="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_ISPELL" && ac_cv_path_ISPELL="no"
   ;;
 esac
 fi
-ISPELL="$ac_cv_path_ISPELL"
+ISPELL=$ac_cv_path_ISPELL
+
 if test -n "$ISPELL"; then
-  echo "$ac_t""$ISPELL" 1>&6
+  echo "$as_me:$LINENO: result: $ISPELL" >&5
+echo "${ECHO_T}$ISPELL" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
 if test $ISPELL != no; then
-        cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define ISPELL "$ISPELL"
-EOF
+_ACEOF
 
 fi
 
+
 # Check whether --with-slang or --without-slang was given.
 if test "${with_slang+set}" = set; then
   withval="$with_slang"
-  echo $ac_n "checking if this is a BSD system""... $ac_c" 1>&6
-echo "configure:2148: checking if this is a BSD system" >&5
-if eval "test \"`echo '$''{'mutt_cv_bsdish'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  echo "$as_me:$LINENO: checking if this is a BSD system" >&5
+echo $ECHO_N "checking if this is a BSD system... $ECHO_C" >&6
+if test "${mutt_cv_bsdish+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$cross_compiling" = yes; then
   mutt_cv_bsdish=no
 else
-  cat > conftest.$ac_ext <<EOF
-#line 2156 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/param.h>
 
@@ -2166,25 +4336,34 @@
         exit (1);
 #endif
 }
-EOF
-if { (eval echo configure:2169: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_bsdish=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  mutt_cv_bsdish=no
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+mutt_cv_bsdish=no
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
+echo "$as_me:$LINENO: result: $mutt_cv_bsdish" >&5
+echo "${ECHO_T}$mutt_cv_bsdish" >&6
 
-echo "$ac_t""$mutt_cv_bsdish" 1>&6
-
-        echo $ac_n "checking for S-Lang""... $ac_c" 1>&6
-echo "configure:2186: checking for S-Lang" >&5
+        echo "$as_me:$LINENO: checking for S-Lang" >&5
+echo $ECHO_N "checking for S-Lang... $ECHO_C" >&6
         if test $withval = yes; then
                 if test -d $srcdir/../slang; then
                         mutt_cv_slang=$srcdir/../slang/src
@@ -2213,109 +4392,151 @@
                         LDFLAGS="$LDFLAGS -L${withval}/lib"
                 fi
         fi
-        echo "$ac_t""$mutt_cv_slang" 1>&6
+        echo "$as_me:$LINENO: result: $mutt_cv_slang" >&5
+echo "${ECHO_T}$mutt_cv_slang" >&6
         if test $mutt_cv_bsdish = yes; then
-                echo $ac_n "checking for main in -ltermlib""... $ac_c" 1>&6
-echo "configure:2218: checking for main in -ltermlib" >&5
-ac_lib_var=`echo termlib'_'main | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for main in -ltermlib" >&5
+echo $ECHO_N "checking for main in -ltermlib... $ECHO_C" >&6
+if test "${ac_cv_lib_termlib_main+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-ltermlib  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2226 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
-int main() {
-main()
-; return 0; }
-EOF
-if { (eval echo configure:2233: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo termlib | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+main ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_termlib_main=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_termlib_main=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_termlib_main" >&5
+echo "${ECHO_T}$ac_cv_lib_termlib_main" >&6
+if test $ac_cv_lib_termlib_main = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBTERMLIB 1
+_ACEOF
 
   LIBS="-ltermlib $LIBS"
 
-else
-  echo "$ac_t""no" 1>&6
 fi
 
         fi
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_SLANG_CURSES 1
-EOF
+_ACEOF
 
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_COLOR 1
-EOF
+_ACEOF
 
         MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS resize.o"
 
-        
-        echo $ac_n "checking for SLtt_get_terminfo in -lslang""... $ac_c" 1>&6
-echo "configure:2273: checking for SLtt_get_terminfo in -lslang" >&5
-ac_lib_var=`echo slang'_'SLtt_get_terminfo | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+        echo "$as_me:$LINENO: checking for SLtt_get_terminfo in -lslang" >&5
+echo $ECHO_N "checking for SLtt_get_terminfo in -lslang... $ECHO_C" >&6
+if test "${ac_cv_lib_slang_SLtt_get_terminfo+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lslang -lm $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2281 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char SLtt_get_terminfo();
-
-int main() {
-SLtt_get_terminfo()
-; return 0; }
-EOF
-if { (eval echo configure:2292: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+   builtin and then its argument prototype would still apply.  */
+char SLtt_get_terminfo ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+SLtt_get_terminfo ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_slang_SLtt_get_terminfo=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_slang_SLtt_get_terminfo=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_slang_SLtt_get_terminfo" >&5
+echo "${ECHO_T}$ac_cv_lib_slang_SLtt_get_terminfo" >&6
+if test $ac_cv_lib_slang_SLtt_get_terminfo = yes; then
   MUTTLIBS="$MUTTLIBS -lslang -lm"
 else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: unable to compile.  check config.log" 1>&2; exit 1; }
+  { { echo "$as_me:$LINENO: error: unable to compile.  check config.log" >&5
+echo "$as_me: error: unable to compile.  check config.log" >&2;}
+   { (exit 1); exit 1; }; }
 fi
 
 
-        
+
 else
   mutt_cv_curses=/usr
-        # Check whether --with-curses or --without-curses was given.
+
+# Check whether --with-curses or --without-curses was given.
 if test "${with_curses+set}" = set; then
   withval="$with_curses"
   if test $withval != yes; then
@@ -2325,403 +4546,691 @@
                         LDFLAGS="-L${mutt_cv_curses}/lib $LDFLAGS"
                         CPPFLAGS="$CPPFLAGS -I${mutt_cv_curses}/include"
                 fi
-fi
+fi;
 
-
-	echo $ac_n "checking for initscr""... $ac_c" 1>&6
-echo "configure:2331: checking for initscr" >&5
-if eval "test \"`echo '$''{'ac_cv_func_initscr'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+	echo "$as_me:$LINENO: checking for initscr" >&5
+echo $ECHO_N "checking for initscr... $ECHO_C" >&6
+if test "${ac_cv_func_initscr+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 2336 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char initscr(); below.  */
+    which can conflict with char initscr (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char initscr();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char initscr ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_initscr) || defined (__stub___initscr)
 choke me
 #else
-initscr();
+f = initscr;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:2359: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_initscr=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_initscr=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'initscr`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_func_initscr=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_initscr=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_func_initscr" >&5
+echo "${ECHO_T}$ac_cv_func_initscr" >&6
+if test $ac_cv_func_initscr = yes; then
   :
 else
-  echo "$ac_t""no" 1>&6
 
 	cf_ncurses="ncurses"
 	for lib in ncurses ncursesw
 	do
-		echo $ac_n "checking for waddnwstr in -l$lib""... $ac_c" 1>&6
-echo "configure:2381: checking for waddnwstr in -l$lib" >&5
-ac_lib_var=`echo $lib'_'waddnwstr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+		as_ac_Lib=`echo "ac_cv_lib_$lib''_waddnwstr" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for waddnwstr in -l$lib" >&5
+echo $ECHO_N "checking for waddnwstr in -l$lib... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Lib+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$lib  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2389 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char waddnwstr();
-
-int main() {
-waddnwstr()
-; return 0; }
-EOF
-if { (eval echo configure:2400: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+   builtin and then its argument prototype would still apply.  */
+char waddnwstr ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+waddnwstr ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Lib=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_Lib=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Lib'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Lib'}'`" >&6
+if test `eval echo '${'$as_ac_Lib'}'` = yes; then
   cf_ncurses="$lib"; break
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 	done
-        echo $ac_n "checking for initscr in -l$cf_ncurses""... $ac_c" 1>&6
-echo "configure:2422: checking for initscr in -l$cf_ncurses" >&5
-ac_lib_var=`echo $cf_ncurses'_'initscr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+        as_ac_Lib=`echo "ac_cv_lib_$cf_ncurses''_initscr" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for initscr in -l$cf_ncurses" >&5
+echo $ECHO_N "checking for initscr in -l$cf_ncurses... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Lib+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$cf_ncurses  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2430 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char initscr();
-
-int main() {
-initscr()
-; return 0; }
-EOF
-if { (eval echo configure:2441: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+   builtin and then its argument prototype would still apply.  */
+char initscr ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+initscr ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Lib=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_Lib=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Lib'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Lib'}'`" >&6
+if test `eval echo '${'$as_ac_Lib'}'` = yes; then
   MUTTLIBS="$MUTTLIBS -l$cf_ncurses"
                 if test x$mutt_cv_curses = x/usr -a -d /usr/include/ncurses; then
                         CPPFLAGS="$CPPFLAGS -I/usr/include/ncurses"
                 fi
-		
+
                 if test "$cf_ncurses" = ncursesw; then
-			for ac_hdr in ncursesw/ncurses.h
+
+for ac_header in ncursesw/ncurses.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2466: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2471 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2476: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_header_preproc=no
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
  cf_cv_ncurses_header="ncursesw/ncurses.h"
-else
-  echo "$ac_t""no" 1>&6
 fi
+
 done
 
 		else
-			for ac_hdr in ncurses.h
+
+for ac_header in ncurses.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2507: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 2512 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2517: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_header_preproc=no
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
  cf_cv_ncurses_header="ncurses.h"
-else
-  echo "$ac_t""no" 1>&6
 fi
+
 done
 
 		fi
 else
-  echo "$ac_t""no" 1>&6
 
-echo $ac_n "checking for initscr""... $ac_c" 1>&6
-echo "configure:2548: checking for initscr" >&5
-if eval "test \"`echo '$''{'ac_cv_func_initscr'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for initscr" >&5
+echo $ECHO_N "checking for initscr... $ECHO_C" >&6
+if test "${ac_cv_func_initscr+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 2553 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char initscr(); below.  */
+    which can conflict with char initscr (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char initscr();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char initscr ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_initscr) || defined (__stub___initscr)
 choke me
 #else
-initscr();
+f = initscr;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:2576: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_initscr=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_initscr=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'initscr`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_func_initscr=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_initscr=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_func_initscr" >&5
+echo "${ECHO_T}$ac_cv_func_initscr" >&6
+if test $ac_cv_func_initscr = yes; then
   :
 else
-  echo "$ac_t""no" 1>&6
 
 case $host_os in #(vi
 freebsd*) #(vi
-	echo $ac_n "checking for tgoto in -lmytinfo""... $ac_c" 1>&6
-echo "configure:2597: checking for tgoto in -lmytinfo" >&5
-ac_lib_var=`echo mytinfo'_'tgoto | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+	echo "$as_me:$LINENO: checking for tgoto in -lmytinfo" >&5
+echo $ECHO_N "checking for tgoto in -lmytinfo... $ECHO_C" >&6
+if test "${ac_cv_lib_mytinfo_tgoto+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lmytinfo  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2605 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgoto();
-
-int main() {
-tgoto()
-; return 0; }
-EOF
-if { (eval echo configure:2616: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+   builtin and then its argument prototype would still apply.  */
+char tgoto ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+tgoto ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_mytinfo_tgoto=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_mytinfo_tgoto=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_mytinfo_tgoto" >&5
+echo "${ECHO_T}$ac_cv_lib_mytinfo_tgoto" >&6
+if test $ac_cv_lib_mytinfo_tgoto = yes; then
   LIBS="-lmytinfo $LIBS"
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 	;;
 hpux10.*|hpux11.*)
-	echo $ac_n "checking for initscr in -lcur_colr""... $ac_c" 1>&6
-echo "configure:2639: checking for initscr in -lcur_colr" >&5
-ac_lib_var=`echo cur_colr'_'initscr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+	echo "$as_me:$LINENO: checking for initscr in -lcur_colr" >&5
+echo $ECHO_N "checking for initscr in -lcur_colr... $ECHO_C" >&6
+if test "${ac_cv_lib_cur_colr_initscr+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lcur_colr  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2647 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char initscr();
-
-int main() {
-initscr()
-; return 0; }
-EOF
-if { (eval echo configure:2658: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+   builtin and then its argument prototype would still apply.  */
+char initscr ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+initscr ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_cur_colr_initscr=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_cur_colr_initscr=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_cur_colr_initscr" >&5
+echo "${ECHO_T}$ac_cv_lib_cur_colr_initscr" >&6
+if test $ac_cv_lib_cur_colr_initscr = yes; then
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
 		LIBS="-lcur_colr $LIBS"
 		CFLAGS="-I/usr/include/curses_colr $CFLAGS"
 		ac_cv_func_initscr=yes
-		
+
 else
-  echo "$ac_t""no" 1>&6
 
-	echo $ac_n "checking for initscr in -lHcurses""... $ac_c" 1>&6
-echo "configure:2682: checking for initscr in -lHcurses" >&5
-ac_lib_var=`echo Hcurses'_'initscr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+	echo "$as_me:$LINENO: checking for initscr in -lHcurses" >&5
+echo $ECHO_N "checking for initscr in -lHcurses... $ECHO_C" >&6
+if test "${ac_cv_lib_Hcurses_initscr+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lHcurses  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2690 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char initscr();
-
-int main() {
-initscr()
-; return 0; }
-EOF
-if { (eval echo configure:2701: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+   builtin and then its argument prototype would still apply.  */
+char initscr ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+initscr ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_Hcurses_initscr=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_Hcurses_initscr=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_Hcurses_initscr" >&5
+echo "${ECHO_T}$ac_cv_lib_Hcurses_initscr" >&6
+if test $ac_cv_lib_Hcurses_initscr = yes; then
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
 		# HP's header uses __HP_CURSES, but user claims _HP_CURSES.
 		LIBS="-lHcurses $LIBS"
 		CFLAGS="-D__HP_CURSES -D_HP_CURSES $CFLAGS"
 		ac_cv_func_initscr=yes
-		
-else
-  echo "$ac_t""no" 1>&6
+
 fi
 
 fi
@@ -2747,97 +5256,138 @@
 
 	# Check for library containing tgoto.  Do this before curses library
 	# because it may be needed to link the test-case for initscr.
-	echo $ac_n "checking for tgoto""... $ac_c" 1>&6
-echo "configure:2750: checking for tgoto" >&5
-if eval "test \"`echo '$''{'ac_cv_func_tgoto'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+	echo "$as_me:$LINENO: checking for tgoto" >&5
+echo $ECHO_N "checking for tgoto... $ECHO_C" >&6
+if test "${ac_cv_func_tgoto+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 2755 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char tgoto(); below.  */
+    which can conflict with char tgoto (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgoto();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char tgoto ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_tgoto) || defined (__stub___tgoto)
 choke me
 #else
-tgoto();
+f = tgoto;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:2778: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_tgoto=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_tgoto=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'tgoto`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_func_tgoto=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_tgoto=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_func_tgoto" >&5
+echo "${ECHO_T}$ac_cv_func_tgoto" >&6
+if test $ac_cv_func_tgoto = yes; then
   cf_term_lib=predefined
 else
-  echo "$ac_t""no" 1>&6
 
 		for cf_term_lib in termcap termlib unknown
 		do
-			echo $ac_n "checking for tgoto in -l$cf_term_lib""... $ac_c" 1>&6
-echo "configure:2799: checking for tgoto in -l$cf_term_lib" >&5
-ac_lib_var=`echo $cf_term_lib'_'tgoto | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+			as_ac_Lib=`echo "ac_cv_lib_$cf_term_lib''_tgoto" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for tgoto in -l$cf_term_lib" >&5
+echo $ECHO_N "checking for tgoto in -l$cf_term_lib... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Lib+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$cf_term_lib  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2807 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char tgoto();
-
-int main() {
-tgoto()
-; return 0; }
-EOF
-if { (eval echo configure:2818: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+   builtin and then its argument prototype would still apply.  */
+char tgoto ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+tgoto ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Lib=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_Lib=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Lib'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Lib'}'`" >&6
+if test `eval echo '${'$as_ac_Lib'}'` = yes; then
   break
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 		done
-	
+
 fi
 
 
@@ -2845,115 +5395,198 @@
 	test "$cf_term_lib" != predefined && test "$cf_term_lib" != unknown && LIBS="-l$cf_term_lib $cf_save_LIBS"
 	for cf_curs_lib in cursesX curses ncurses xcurses jcurses unknown
 	do
-		echo $ac_n "checking for initscr in -l$cf_curs_lib""... $ac_c" 1>&6
-echo "configure:2848: checking for initscr in -l$cf_curs_lib" >&5
-ac_lib_var=`echo $cf_curs_lib'_'initscr | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+		as_ac_Lib=`echo "ac_cv_lib_$cf_curs_lib''_initscr" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for initscr in -l$cf_curs_lib" >&5
+echo $ECHO_N "checking for initscr in -l$cf_curs_lib... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Lib+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-l$cf_curs_lib  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 2856 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char initscr();
-
-int main() {
-initscr()
-; return 0; }
-EOF
-if { (eval echo configure:2867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+   builtin and then its argument prototype would still apply.  */
+char initscr ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+initscr ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Lib=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_Lib=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Lib'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Lib'}'`" >&6
+if test `eval echo '${'$as_ac_Lib'}'` = yes; then
   break
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 	done
-	test $cf_curs_lib = unknown && { echo "configure: error: no curses library found" 1>&2; exit 1; }
+	test $cf_curs_lib = unknown && { { echo "$as_me:$LINENO: error: no curses library found" >&5
+echo "$as_me: error: no curses library found" >&2;}
+   { (exit 1); exit 1; }; }
 
 	LIBS="-l$cf_curs_lib $cf_save_LIBS"
 	if test "$cf_term_lib" = unknown ; then
-		echo $ac_n "checking if we can link with $cf_curs_lib library""... $ac_c" 1>&6
-echo "configure:2893: checking if we can link with $cf_curs_lib library" >&5
-		cat > conftest.$ac_ext <<EOF
-#line 2895 "configure"
+		echo "$as_me:$LINENO: checking if we can link with $cf_curs_lib library" >&5
+echo $ECHO_N "checking if we can link with $cf_curs_lib library... $ECHO_C" >&6
+		cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <${cf_cv_ncurses_header-curses.h}>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 initscr()
-; return 0; }
-EOF
-if { (eval echo configure:2902: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   cf_result=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  cf_result=no
-fi
-rm -f conftest*
-		echo "$ac_t""$cf_result" 1>&6
-		test $cf_result = no && { echo "configure: error: Cannot link curses library" 1>&2; exit 1; }
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+cf_result=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+		echo "$as_me:$LINENO: result: $cf_result" >&5
+echo "${ECHO_T}$cf_result" >&6
+		test $cf_result = no && { { echo "$as_me:$LINENO: error: Cannot link curses library" >&5
+echo "$as_me: error: Cannot link curses library" >&2;}
+   { (exit 1); exit 1; }; }
 	elif test "$cf_term_lib" != predefined ; then
-		echo $ac_n "checking if we need both $cf_curs_lib and $cf_term_lib libraries""... $ac_c" 1>&6
-echo "configure:2916: checking if we need both $cf_curs_lib and $cf_term_lib libraries" >&5
-		cat > conftest.$ac_ext <<EOF
-#line 2918 "configure"
+		echo "$as_me:$LINENO: checking if we need both $cf_curs_lib and $cf_term_lib libraries" >&5
+echo $ECHO_N "checking if we need both $cf_curs_lib and $cf_term_lib libraries... $ECHO_C" >&6
+		cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <${cf_cv_ncurses_header-curses.h}>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 initscr(); tgoto((char *)0, 0, 0);
-; return 0; }
-EOF
-if { (eval echo configure:2925: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   cf_result=no
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+
 			LIBS="-l$cf_curs_lib -l$cf_term_lib $cf_save_LIBS"
-			cat > conftest.$ac_ext <<EOF
-#line 2935 "configure"
+			cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <${cf_cv_ncurses_header-curses.h}>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 initscr()
-; return 0; }
-EOF
-if { (eval echo configure:2942: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   cf_result=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  cf_result=error
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+cf_result=error
 fi
-rm -f conftest*
-			
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+
 fi
-rm -f conftest*
-		echo "$ac_t""$cf_result" 1>&6
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+		echo "$as_me:$LINENO: result: $cf_result" >&5
+echo "${ECHO_T}$cf_result" >&6
 	fi
 fi
 
@@ -2962,7 +5595,7 @@
 
 fi
 
-		
+
 fi
 
 
@@ -2971,125 +5604,176 @@
         for ac_func in start_color typeahead bkgdset curs_set meta use_default_colors resizeterm
 do
 
-echo $ac_n "checking for $ac_func declaration""... $ac_c" 1>&6
-echo "configure:2974: checking for $ac_func declaration" >&5
-if eval "test \"`echo '$''{'ac_cv_func_decl_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_func declaration" >&5
+echo $ECHO_N "checking for $ac_func declaration... $ECHO_C" >&6
+if eval "test \"\${ac_cv_func_decl_$ac_func+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 2979 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <${cf_cv_ncurses_header-curses.h}>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 #ifndef ${ac_func}
 extern	int	${ac_func}();
 #endif
-; return 0; }
-EOF
-if { (eval echo configure:2988: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-cat > conftest.$ac_ext <<EOF
-#line 2992 "configure"
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <${cf_cv_ncurses_header-curses.h}>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 #ifndef ${ac_func}
 int	(*p)() = ${ac_func};
 #endif
-; return 0; }
-EOF
-if { (eval echo configure:3001: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+
 eval "ac_cv_func_decl_$ac_func=yes"
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+
 eval "ac_cv_func_decl_$ac_func=no"
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+
 eval "ac_cv_func_decl_$ac_func=yes"
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
 
 if eval "test \"`echo '$ac_cv_func_'decl_$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
-  
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+
 ac_tr_func=`echo HAVE_$ac_func | tr '[a-z]' '[A-Z]'`
 
-  cat >> confdefs.h <<EOF
+  cat >>confdefs.h <<_ACEOF
 #define $ac_tr_func 1
-EOF
- 
+_ACEOF
+
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 done
 
         if test "$ac_cv_func_decl_start_color" = yes; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_COLOR 1
-EOF
+_ACEOF
 
         fi
         if test "$ac_cv_func_decl_resizeterm" = yes; then
                 MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS resize.o"
         fi
         LIBS="$old_LIBS"
-        
-fi
 
+fi;
 
-echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:3053: checking for ANSI C header files" >&5
-if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
+if test "${ac_cv_header_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3058 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
 #include <float.h>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3066: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
+
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
   ac_cv_header_stdc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
   ac_cv_header_stdc=no
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
 
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-cat > conftest.$ac_ext <<EOF
-#line 3083 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <string.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "memchr" >/dev/null 2>&1; then
   :
 else
-  rm -rf conftest*
   ac_cv_header_stdc=no
 fi
 rm -f conftest*
@@ -3098,16 +5782,16 @@
 
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-cat > conftest.$ac_ext <<EOF
-#line 3101 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <stdlib.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "free" >/dev/null 2>&1; then
   :
 else
-  rm -rf conftest*
   ac_cv_header_stdc=no
 fi
 rm -f conftest*
@@ -3116,234 +5800,506 @@
 
 if test $ac_cv_header_stdc = yes; then
   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-if test "$cross_compiling" = yes; then
+  if test "$cross_compiling" = yes; then
   :
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3122 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <ctype.h>
-#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int main () { int i; for (i = 0; i < 256; i++)
-if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
-exit (0); }
+#if ((' ' & 0x0FF) == 0x020)
+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#else
+# define ISLOWER(c) (('a' <= (c) && (c) <= 'i') \
+                     || ('j' <= (c) && (c) <= 'r') \
+                     || ('s' <= (c) && (c) <= 'z'))
+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
+#endif
 
-EOF
-if { (eval echo configure:3133: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int
+main ()
+{
+  int i;
+  for (i = 0; i < 256; i++)
+    if (XOR (islower (i), ISLOWER (i))
+        || toupper (i) != TOUPPER (i))
+      exit(2);
+  exit (0);
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   :
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_header_stdc=no
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+ac_cv_header_stdc=no
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
 fi
-
-echo "$ac_t""$ac_cv_header_stdc" 1>&6
+echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+echo "${ECHO_T}$ac_cv_header_stdc" >&6
 if test $ac_cv_header_stdc = yes; then
-  cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define STDC_HEADERS 1
-EOF
+_ACEOF
 
 fi
 
 
-for ac_hdr in stdarg.h sys/ioctl.h ioctl.h sysexits.h
+
+
+
+
+for ac_header in stdarg.h sys/ioctl.h ioctl.h sysexits.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3161: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3166 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3171: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_header_preproc=no
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
 fi
+
 done
 
-for ac_hdr in sys/time.h sys/resource.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3201: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3206 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3211: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+
+
+for ac_header in sys/time.h sys/resource.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_header_preproc=no
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
 fi
+
 done
 
-for ac_hdr in unix.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3241: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3246 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3251: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+
+for ac_header in unix.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_cpp_err=yes
 fi
-rm -f conftest*
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "$ac_t""no" 1>&6
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
 fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
 done
 
 
+
+
 for ac_func in setrlimit getsid
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3281: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3286 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:3309: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
 
-echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:3335: checking return type of signal handlers" >&5
-if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking return type of signal handlers" >&5
+echo $ECHO_N "checking return type of signal handlers... $ECHO_C" >&6
+if test "${ac_cv_type_signal+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3340 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
 #ifdef signal
-#undef signal
+# undef signal
 #endif
 #ifdef __cplusplus
 extern "C" void (*signal (int, void (*)(int)))(int);
@@ -3351,1123 +6307,2384 @@
 void (*signal ()) ();
 #endif
 
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 int i;
-; return 0; }
-EOF
-if { (eval echo configure:3357: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_type_signal=void
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_type_signal=int
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_type_signal=int
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
+echo "$as_me:$LINENO: result: $ac_cv_type_signal" >&5
+echo "${ECHO_T}$ac_cv_type_signal" >&6
 
-echo "$ac_t""$ac_cv_type_signal" 1>&6
-cat >> confdefs.h <<EOF
+cat >>confdefs.h <<_ACEOF
 #define RETSIGTYPE $ac_cv_type_signal
-EOF
+_ACEOF
 
 
 
-echo $ac_n "checking for sig_atomic_t in signal.h""... $ac_c" 1>&6
-echo "configure:3377: checking for sig_atomic_t in signal.h" >&5
-cat > conftest.$ac_ext <<EOF
-#line 3379 "configure"
+echo "$as_me:$LINENO: checking for sig_atomic_t in signal.h" >&5
+echo $ECHO_N "checking for sig_atomic_t in signal.h... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <signal.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "sig_atomic_t" >/dev/null 2>&1; then
-  rm -rf conftest*
-  
+
     ac_cv_type_sig_atomic_t=yes;
-    cat > conftest.$ac_ext <<EOF
-#line 3389 "configure"
+    cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <signal.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "volatile.*sig_atomic_t" >/dev/null 2>&1; then
-  rm -rf conftest*
-  
+
                         is_sig_atomic_t_volatile=yes;
-                        echo "$ac_t""yes, volatile" 1>&6
-                    
+                        echo "$as_me:$LINENO: result: yes, volatile" >&5
+echo "${ECHO_T}yes, volatile" >&6
+
 else
-  rm -rf conftest*
-  
+
                         is_sig_atomic_t_volatile=no;
-                        echo "$ac_t""yes, non volatile" 1>&6
-                    
+                        echo "$as_me:$LINENO: result: yes, non volatile" >&5
+echo "${ECHO_T}yes, non volatile" >&6
+
 fi
 rm -f conftest*
 
-  
+
 else
-  rm -rf conftest*
-  
-    echo "$ac_t""no" 1>&6
-    echo $ac_n "checking for sig_atomic_t""... $ac_c" 1>&6
-echo "configure:3415: checking for sig_atomic_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_sig_atomic_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+    echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+    echo "$as_me:$LINENO: checking for sig_atomic_t" >&5
+echo $ECHO_N "checking for sig_atomic_t... $ECHO_C" >&6
+if test "${ac_cv_type_sig_atomic_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3420 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
 #endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])sig_atomic_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
+int
+main ()
+{
+if ((sig_atomic_t *) 0)
+  return 0;
+if (sizeof (sig_atomic_t))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_type_sig_atomic_t=yes
 else
-  rm -rf conftest*
-  ac_cv_type_sig_atomic_t=no
-fi
-rm -f conftest*
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_type_sig_atomic_t=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type_sig_atomic_t" >&5
+echo "${ECHO_T}$ac_cv_type_sig_atomic_t" >&6
+if test $ac_cv_type_sig_atomic_t = yes; then
+  :
+else
 
-fi
-echo "$ac_t""$ac_cv_type_sig_atomic_t" 1>&6
-if test $ac_cv_type_sig_atomic_t = no; then
-  cat >> confdefs.h <<\EOF
+cat >>confdefs.h <<_ACEOF
 #define sig_atomic_t int
-EOF
+_ACEOF
 
 fi
 
     is_sig_atomic_t_volatile=no
-  
+
 fi
 rm -f conftest*
 
 if test $is_sig_atomic_t_volatile = 'yes'
 then
-    cat >> confdefs.h <<\EOF
+    cat >>confdefs.h <<\_ACEOF
 #define SIG_ATOMIC_VOLATILE_T sig_atomic_t
-EOF
+_ACEOF
 
 else
-    cat >> confdefs.h <<\EOF
+    cat >>confdefs.h <<\_ACEOF
 #define SIG_ATOMIC_VOLATILE_T volatile sig_atomic_t
-EOF
+_ACEOF
 
 fi
 
-echo $ac_n "checking for sys_siglist declaration in signal.h or unistd.h""... $ac_c" 1>&6
-echo "configure:3466: checking for sys_siglist declaration in signal.h or unistd.h" >&5
-if eval "test \"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for sys_siglist declaration in signal.h or unistd.h" >&5
+echo $ECHO_N "checking for sys_siglist declaration in signal.h or unistd.h... $ECHO_C" >&6
+if test "${ac_cv_decl_sys_siglist+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3471 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
 /* NetBSD declares sys_siglist in unistd.h.  */
-#ifdef HAVE_UNISTD_H
-#include <unistd.h>
+#if HAVE_UNISTD_H
+# include <unistd.h>
 #endif
-int main() {
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 char *msg = *(sys_siglist + 1);
-; return 0; }
-EOF
-if { (eval echo configure:3483: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_decl_sys_siglist=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_decl_sys_siglist=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_decl_sys_siglist=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-
-echo "$ac_t""$ac_cv_decl_sys_siglist" 1>&6
+echo "$as_me:$LINENO: result: $ac_cv_decl_sys_siglist" >&5
+echo "${ECHO_T}$ac_cv_decl_sys_siglist" >&6
 if test $ac_cv_decl_sys_siglist = yes; then
-  cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define SYS_SIGLIST_DECLARED 1
-EOF
+_ACEOF
 
 fi
 
 
-echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
-echo "configure:3505: checking whether byte ordering is bigendian" >&5
-if eval "test \"`echo '$''{'ac_cv_c_bigendian'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking whether byte ordering is bigendian" >&5
+echo $ECHO_N "checking whether byte ordering is bigendian... $ECHO_C" >&6
+if test "${ac_cv_c_bigendian+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_cv_c_bigendian=unknown
-# See if sys/param.h defines the BYTE_ORDER macro.
-cat > conftest.$ac_ext <<EOF
-#line 3512 "configure"
+  # See if sys/param.h defines the BYTE_ORDER macro.
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/param.h>
-int main() {
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 #if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
  bogus endian macros
 #endif
-; return 0; }
-EOF
-if { (eval echo configure:3523: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   # It does; now see whether it defined to BIG_ENDIAN or not.
-cat > conftest.$ac_ext <<EOF
-#line 3527 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/param.h>
-int main() {
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 #if BYTE_ORDER != BIG_ENDIAN
  not big endian
 #endif
-; return 0; }
-EOF
-if { (eval echo configure:3538: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_c_bigendian=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_c_bigendian=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+# It does not; compile a test program.
+if test "$cross_compiling" = yes; then
+  # try to guess the endianness by grepping values into an object file
+  ac_cv_c_bigendian=unknown
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+short ascii_mm[] = { 0x4249, 0x4765, 0x6E44, 0x6961, 0x6E53, 0x7953, 0 };
+short ascii_ii[] = { 0x694C, 0x5454, 0x656C, 0x6E45, 0x6944, 0x6E61, 0 };
+void _ascii () { char *s = (char *) ascii_mm; s = (char *) ascii_ii; }
+short ebcdic_ii[] = { 0x89D3, 0xE3E3, 0x8593, 0x95C5, 0x89C4, 0x9581, 0 };
+short ebcdic_mm[] = { 0xC2C9, 0xC785, 0x95C4, 0x8981, 0x95E2, 0xA8E2, 0 };
+void _ebcdic () { char *s = (char *) ebcdic_mm; s = (char *) ebcdic_ii; }
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+ _ascii (); _ebcdic ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  if fgrep BIGenDianSyS conftest.$ac_objext >/dev/null ; then
+  ac_cv_c_bigendian=yes
+fi
+if fgrep LiTTleEnDian conftest.$ac_objext >/dev/null ; then
+  if test "$ac_cv_c_bigendian" = unknown; then
+    ac_cv_c_bigendian=no
+  else
+    # finding both strings is unlikely to happen, but who knows?
+    ac_cv_c_bigendian=unknown
+  fi
+fi
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+int
+main ()
+{
+  /* Are we little or big endian?  From Harbison&Steele.  */
+  union
+  {
+    long l;
+    char c[sizeof (long)];
+  } u;
+  u.l = 1;
+  exit (u.c[sizeof (long) - 1] == 1);
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_c_bigendian=no
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+ac_cv_c_bigendian=yes
 fi
-rm -f conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_c_bigendian" >&5
+echo "${ECHO_T}$ac_cv_c_bigendian" >&6
+case $ac_cv_c_bigendian in
+  yes)
+
+cat >>confdefs.h <<\_ACEOF
+#define WORDS_BIGENDIAN 1
+_ACEOF
+ ;;
+  no)
+     ;;
+  *)
+    { { echo "$as_me:$LINENO: error: unknown endianness
+presetting ac_cv_c_bigendian=no (or yes) will help" >&5
+echo "$as_me: error: unknown endianness
+presetting ac_cv_c_bigendian=no (or yes) will help" >&2;}
+   { (exit 1); exit 1; }; } ;;
+esac
+
+
+
+for ac_header in inttypes.h stdint.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+echo "$as_me:$LINENO: checking for uint32_t" >&5
+echo $ECHO_N "checking for uint32_t... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+
+#include <sys/types.h>
+#if HAVE_INTTYPES_H
+#include <inttypes.h>
+#else
+#if HAVE_STDINT_H
+#include <stdint.h>
+#endif
+#endif
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+if ((uint32_t *) 0)
+  return 0;
+if (sizeof (uint32_t))
+  return 0;
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_UINT32_T 1
+_ACEOF
+
+    echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: checking for int" >&5
+echo $ECHO_N "checking for int... $ECHO_C" >&6
+if test "${ac_cv_type_int+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+if ((int *) 0)
+  return 0;
+if (sizeof (int))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_type_int=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_type_int=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type_int" >&5
+echo "${ECHO_T}$ac_cv_type_int" >&6
+
+echo "$as_me:$LINENO: checking size of int" >&5
+echo $ECHO_N "checking size of int... $ECHO_C" >&6
+if test "${ac_cv_sizeof_int+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test "$ac_cv_type_int" = yes; then
+  # The cast to unsigned long works around a bug in the HP C Compiler
+  # version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
+  # declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
+  # This bug is HP SR number 8606223364.
+  if test "$cross_compiling" = yes; then
+  # Depending upon the size, compute the lo and hi bounds.
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (int))) >= 0)];
+test_array [0] = 0
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_lo=0 ac_mid=0
+  while :; do
+    cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (int))) <= $ac_mid)];
+test_array [0] = 0
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_hi=$ac_mid; break
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_lo=`expr $ac_mid + 1`
+                    if test $ac_lo -le $ac_mid; then
+                      ac_lo= ac_hi=
+                      break
+                    fi
+                    ac_mid=`expr 2 '*' $ac_mid + 1`
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+  done
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (int))) < 0)];
+test_array [0] = 0
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_hi=-1 ac_mid=-1
+  while :; do
+    cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (int))) >= $ac_mid)];
+test_array [0] = 0
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_lo=$ac_mid; break
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_hi=`expr '(' $ac_mid ')' - 1`
+                       if test $ac_mid -le $ac_hi; then
+                         ac_lo= ac_hi=
+                         break
+                       fi
+                       ac_mid=`expr 2 '*' $ac_mid`
 fi
-rm -f conftest*
-if test $ac_cv_c_bigendian = unknown; then
-if test "$cross_compiling" = yes; then
-    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
+rm -f conftest.$ac_objext conftest.$ac_ext
+  done
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3558 "configure"
-#include "confdefs.h"
-main () {
-  /* Are we little or big endian?  From Harbison&Steele.  */
-  union
-  {
-    long l;
-    char c[sizeof (long)];
-  } u;
-  u.l = 1;
-  exit (u.c[sizeof (long) - 1] == 1);
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_lo= ac_hi=
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+# Binary search between lo and hi bounds.
+while test "x$ac_lo" != "x$ac_hi"; do
+  ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (int))) <= $ac_mid)];
+test_array [0] = 0
+
+  ;
+  return 0;
 }
-EOF
-if { (eval echo configure:3571: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_c_bigendian=no
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_hi=$ac_mid
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_lo=`expr '(' $ac_mid ')' + 1`
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+done
+case $ac_lo in
+?*) ac_cv_sizeof_int=$ac_lo;;
+'') { { echo "$as_me:$LINENO: error: cannot compute sizeof (int), 77" >&5
+echo "$as_me: error: cannot compute sizeof (int), 77" >&2;}
+   { (exit 1); exit 1; }; } ;;
+esac
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_c_bigendian=yes
-fi
-rm -fr conftest*
-fi
+  if test "$cross_compiling" = yes; then
+  { { echo "$as_me:$LINENO: error: cannot run test program while cross compiling" >&5
+echo "$as_me: error: cannot run test program while cross compiling" >&2;}
+   { (exit 1); exit 1; }; }
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+long longval () { return (long) (sizeof (int)); }
+unsigned long ulongval () { return (long) (sizeof (int)); }
+#include <stdio.h>
+#include <stdlib.h>
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+
+  FILE *f = fopen ("conftest.val", "w");
+  if (! f)
+    exit (1);
+  if (((long) (sizeof (int))) < 0)
+    {
+      long i = longval ();
+      if (i != ((long) (sizeof (int))))
+	exit (1);
+      fprintf (f, "%ld\n", i);
+    }
+  else
+    {
+      unsigned long i = ulongval ();
+      if (i != ((long) (sizeof (int))))
+	exit (1);
+      fprintf (f, "%lu\n", i);
+    }
+  exit (ferror (f) || fclose (f) != 0);
 
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_sizeof_int=`cat conftest.val`
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+{ { echo "$as_me:$LINENO: error: cannot compute sizeof (int), 77" >&5
+echo "$as_me: error: cannot compute sizeof (int), 77" >&2;}
+   { (exit 1); exit 1; }; }
 fi
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
-echo "$ac_t""$ac_cv_c_bigendian" 1>&6
-if test $ac_cv_c_bigendian = yes; then
-  cat >> confdefs.h <<\EOF
-#define WORDS_BIGENDIAN 1
-EOF
-
 fi
-
-for ac_hdr in inttypes.h stdint.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3598: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+rm -f conftest.val
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3603 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3608: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
-else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
+  ac_cv_sizeof_int=0
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
-done
+echo "$as_me:$LINENO: result: $ac_cv_sizeof_int" >&5
+echo "${ECHO_T}$ac_cv_sizeof_int" >&6
+cat >>confdefs.h <<_ACEOF
+#define SIZEOF_INT $ac_cv_sizeof_int
+_ACEOF
 
-echo $ac_n "checking for uint32_t""... $ac_c" 1>&6
-echo "configure:3635: checking for uint32_t" >&5
-cat > conftest.$ac_ext <<EOF
-#line 3637 "configure"
-#include "confdefs.h"
 
-#include <sys/types.h>
-#if HAVE_INTTYPES_H
-#include <inttypes.h>
-#else
-#if HAVE_STDINT_H
-#include <stdint.h>
-#endif
+echo "$as_me:$LINENO: checking for long" >&5
+echo $ECHO_N "checking for long... $ECHO_C" >&6
+if test "${ac_cv_type_long+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
 #endif
-int main() {
-if ((uint32_t *) 0)
+int
+main ()
+{
+if ((long *) 0)
   return 0;
-if (sizeof (uint32_t))
+if (sizeof (long))
   return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_type_long=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_type_long=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type_long" >&5
+echo "${ECHO_T}$ac_cv_type_long" >&6
+
+echo "$as_me:$LINENO: checking size of long" >&5
+echo $ECHO_N "checking size of long... $ECHO_C" >&6
+if test "${ac_cv_sizeof_long+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  if test "$ac_cv_type_long" = yes; then
+  # The cast to unsigned long works around a bug in the HP C Compiler
+  # version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
+  # declarations like `int a3[[(sizeof (unsigned char)) >= 0]];'.
+  # This bug is HP SR number 8606223364.
+  if test "$cross_compiling" = yes; then
+  # Depending upon the size, compute the lo and hi bounds.
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (long))) >= 0)];
+test_array [0] = 0
 
-; return 0; }
-EOF
-if { (eval echo configure:3656: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
-  
-    cat >> confdefs.h <<\EOF
-#define HAVE_UINT32_T 1
-EOF
-
-    echo "$ac_t""yes" 1>&6
-  
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  echo "$ac_t""no" 1>&6
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_lo=0 ac_mid=0
+  while :; do
+    cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (long))) <= $ac_mid)];
+test_array [0] = 0
 
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_hi=$ac_mid; break
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_lo=`expr $ac_mid + 1`
+                    if test $ac_lo -le $ac_mid; then
+                      ac_lo= ac_hi=
+                      break
+                    fi
+                    ac_mid=`expr 2 '*' $ac_mid + 1`
 fi
-rm -f conftest*
-echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:3674: checking size of int" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  if test "$cross_compiling" = yes; then
-    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
+rm -f conftest.$ac_objext conftest.$ac_ext
+  done
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3682 "configure"
-#include "confdefs.h"
-#include <stdio.h>
-#include <sys/types.h>
-main()
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
 {
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(int));
-  exit(0);
+static int test_array [1 - 2 * !(((long) (sizeof (long))) < 0)];
+test_array [0] = 0
+
+  ;
+  return 0;
 }
-EOF
-if { (eval echo configure:3694: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_int=`cat conftestval`
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_sizeof_int=0
-fi
-rm -fr conftest*
-fi
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_hi=-1 ac_mid=-1
+  while :; do
+    cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (long))) >= $ac_mid)];
+test_array [0] = 0
 
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_lo=$ac_mid; break
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_hi=`expr '(' $ac_mid ')' - 1`
+                       if test $ac_mid -le $ac_hi; then
+                         ac_lo= ac_hi=
+                         break
+                       fi
+                       ac_mid=`expr 2 '*' $ac_mid`
 fi
-echo "$ac_t""$ac_cv_sizeof_int" 1>&6
-cat >> confdefs.h <<EOF
-#define SIZEOF_INT $ac_cv_sizeof_int
-EOF
-
+rm -f conftest.$ac_objext conftest.$ac_ext
+  done
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_lo= ac_hi=
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+# Binary search between lo and hi bounds.
+while test "x$ac_lo" != "x$ac_hi"; do
+  ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+static int test_array [1 - 2 * !(((long) (sizeof (long))) <= $ac_mid)];
+test_array [0] = 0
 
-echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:3714: checking size of long" >&5
-if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_hi=$ac_mid
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_lo=`expr '(' $ac_mid ')' + 1`
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+done
+case $ac_lo in
+?*) ac_cv_sizeof_long=$ac_lo;;
+'') { { echo "$as_me:$LINENO: error: cannot compute sizeof (long), 77" >&5
+echo "$as_me: error: cannot compute sizeof (long), 77" >&2;}
+   { (exit 1); exit 1; }; } ;;
+esac
 else
   if test "$cross_compiling" = yes; then
-    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3722 "configure"
-#include "confdefs.h"
+  { { echo "$as_me:$LINENO: error: cannot run test program while cross compiling" >&5
+echo "$as_me: error: cannot run test program while cross compiling" >&2;}
+   { (exit 1); exit 1; }; }
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+long longval () { return (long) (sizeof (long)); }
+unsigned long ulongval () { return (long) (sizeof (long)); }
 #include <stdio.h>
-#include <sys/types.h>
-main()
+#include <stdlib.h>
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
 {
-  FILE *f=fopen("conftestval", "w");
-  if (!f) exit(1);
-  fprintf(f, "%d\n", sizeof(long));
-  exit(0);
+
+  FILE *f = fopen ("conftest.val", "w");
+  if (! f)
+    exit (1);
+  if (((long) (sizeof (long))) < 0)
+    {
+      long i = longval ();
+      if (i != ((long) (sizeof (long))))
+	exit (1);
+      fprintf (f, "%ld\n", i);
+    }
+  else
+    {
+      unsigned long i = ulongval ();
+      if (i != ((long) (sizeof (long))))
+	exit (1);
+      fprintf (f, "%lu\n", i);
+    }
+  exit (ferror (f) || fclose (f) != 0);
+
+  ;
+  return 0;
 }
-EOF
-if { (eval echo configure:3734: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
-  ac_cv_sizeof_long=`cat conftestval`
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_sizeof_long=`cat conftest.val`
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+{ { echo "$as_me:$LINENO: error: cannot compute sizeof (long), 77" >&5
+echo "$as_me: error: cannot compute sizeof (long), 77" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+fi
+rm -f conftest.val
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
   ac_cv_sizeof_long=0
 fi
-rm -fr conftest*
 fi
-
-fi
-echo "$ac_t""$ac_cv_sizeof_long" 1>&6
-cat >> confdefs.h <<EOF
+echo "$as_me:$LINENO: result: $ac_cv_sizeof_long" >&5
+echo "${ECHO_T}$ac_cv_sizeof_long" >&6
+cat >>confdefs.h <<_ACEOF
 #define SIZEOF_LONG $ac_cv_sizeof_long
-EOF
+_ACEOF
 
 
 
-echo $ac_n "checking for pid_t""... $ac_c" 1>&6
-echo "configure:3755: checking for pid_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for pid_t" >&5
+echo $ECHO_N "checking for pid_t... $ECHO_C" >&6
+if test "${ac_cv_type_pid_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3760 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
 #endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
+int
+main ()
+{
+if ((pid_t *) 0)
+  return 0;
+if (sizeof (pid_t))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_type_pid_t=yes
 else
-  rm -rf conftest*
-  ac_cv_type_pid_t=no
-fi
-rm -f conftest*
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_type_pid_t=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type_pid_t" >&5
+echo "${ECHO_T}$ac_cv_type_pid_t" >&6
+if test $ac_cv_type_pid_t = yes; then
+  :
+else
 
-fi
-echo "$ac_t""$ac_cv_type_pid_t" 1>&6
-if test $ac_cv_type_pid_t = no; then
-  cat >> confdefs.h <<\EOF
+cat >>confdefs.h <<_ACEOF
 #define pid_t int
-EOF
+_ACEOF
 
 fi
 
 
+
+
+
+
+
 for ac_func in fgetpos memmove setegid srand48 strerror
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3791: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3796 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:3819: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
 
+
+
 for ac_func in strcasecmp strdup
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3847: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3852 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:3875: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
 else
-  echo "$ac_t""no" 1>&6
-LIBOBJS="$LIBOBJS ${ac_func}.${ac_objext}"
+  LIBOBJS="$LIBOBJS $ac_func.$ac_objext"
 fi
 done
 
 
 
-echo $ac_n "checking for getopt""... $ac_c" 1>&6
-echo "configure:3903: checking for getopt" >&5
-if eval "test \"`echo '$''{'ac_cv_func_getopt'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for getopt" >&5
+echo $ECHO_N "checking for getopt... $ECHO_C" >&6
+if test "${ac_cv_func_getopt+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 3908 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char getopt(); below.  */
+    which can conflict with char getopt (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char getopt();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char getopt ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_getopt) || defined (__stub___getopt)
 choke me
 #else
-getopt();
+f = getopt;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:3931: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_getopt=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_getopt=no"
-fi
-rm -f conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_func_getopt=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_getopt=no
 fi
-
-if eval "test \"`echo '$ac_cv_func_'getopt`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  :
-else
-  echo "$ac_t""no" 1>&6
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
+echo "$as_me:$LINENO: result: $ac_cv_func_getopt" >&5
+echo "${ECHO_T}$ac_cv_func_getopt" >&6
 
 if test $ac_cv_func_getopt = yes; then
-        for ac_hdr in getopt.h
+
+for ac_header in getopt.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3955: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 3960 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3965: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_cpp_err=yes
 fi
-rm -f conftest*
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "$ac_t""no" 1>&6
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
 fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
 done
 
 fi
 
 mutt_cv_snprintf=no
 SNPRINTFOBJS=""
+
 for ac_func in snprintf
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3998: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4003 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
 else
-  echo "$ac_t""no" 1>&6
-mutt_cv_snprintf=yes
+  mutt_cv_snprintf=yes
 fi
 done
 
+
 for ac_func in vsnprintf
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4054: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4059 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4082: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
 else
-  echo "$ac_t""no" 1>&6
-mutt_cv_snprintf=yes
+  mutt_cv_snprintf=yes
 fi
 done
 
 if test $mutt_cv_snprintf = yes; then
-        LIBOBJS="$LIBOBJS snprintf.o"
+        LIBOBJS="$LIBOBJS snprintf.$ac_objext"
 fi
 
+
 for ac_func in ftruncate
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4114: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4119 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4142: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
 else
-  echo "$ac_t""no" 1>&6
-echo $ac_n "checking for chsize in -lx""... $ac_c" 1>&6
-echo "configure:4164: checking for chsize in -lx" >&5
-ac_lib_var=`echo x'_'chsize | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for chsize in -lx" >&5
+echo $ECHO_N "checking for chsize in -lx... $ECHO_C" >&6
+if test "${ac_cv_lib_x_chsize+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lx  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4172 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char chsize();
-
-int main() {
-chsize()
-; return 0; }
-EOF
-if { (eval echo configure:4183: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo x | sed -e 's/^a-zA-Z0-9_/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+   builtin and then its argument prototype would still apply.  */
+char chsize ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+chsize ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_x_chsize=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_x_chsize=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_x_chsize" >&5
+echo "${ECHO_T}$ac_cv_lib_x_chsize" >&6
+if test $ac_cv_lib_x_chsize = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBX 1
+_ACEOF
 
   LIBS="-lx $LIBS"
 
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 fi
 done
 
 
+
 for ac_func in strftime
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4217: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4222 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
 else
-  echo "$ac_t""no" 1>&6
-echo $ac_n "checking for strftime in -lintl""... $ac_c" 1>&6
-echo "configure:4267: checking for strftime in -lintl" >&5
-ac_lib_var=`echo intl'_'strftime | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for strftime in -lintl" >&5
+echo $ECHO_N "checking for strftime in -lintl... $ECHO_C" >&6
+if test "${ac_cv_lib_intl_strftime+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lintl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4275 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char strftime();
-
-int main() {
-strftime()
-; return 0; }
-EOF
-if { (eval echo configure:4286: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo intl | sed -e 's/^a-zA-Z0-9_/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+   builtin and then its argument prototype would still apply.  */
+char strftime ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+strftime ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_intl_strftime=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_intl_strftime=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_intl_strftime" >&5
+echo "${ECHO_T}$ac_cv_lib_intl_strftime" >&6
+if test $ac_cv_lib_intl_strftime = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBINTL 1
+_ACEOF
 
   LIBS="-lintl $LIBS"
 
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 fi
 done
 
 
+
 for ac_func in fchdir
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4320: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4325 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4348: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
 else
-  echo "$ac_t""no" 1>&6
-mutt_cv_fchdir=no
+  mutt_cv_fchdir=no
 fi
 done
 
 
+
 # Check whether --with-regex or --without-regex was given.
 if test "${with_regex+set}" = set; then
   withval="$with_regex"
   mutt_cv_regex=yes
 else
-  for ac_func in regcomp
+
+for ac_func in regcomp
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4382: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4387 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4410: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
  mutt_cv_regex=no
 else
-  echo "$ac_t""no" 1>&6
-mutt_cv_regex=yes
+  mutt_cv_regex=yes
 fi
 done
 
-fi
-
+fi;
 
 if test $mutt_cv_regex = no ; then
-echo $ac_n "checking whether your system's regexp library is completely broken""... $ac_c" 1>&6
-echo "configure:4440: checking whether your system's regexp library is completely broken" >&5
-if eval "test \"`echo '$''{'mutt_cv_regex_broken'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking whether your system's regexp library is completely broken" >&5
+echo $ECHO_N "checking whether your system's regexp library is completely broken... $ECHO_C" >&6
+if test "${mutt_cv_regex_broken+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$cross_compiling" = yes; then
   mutt_cv_regex_broken=yes
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4448 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <unistd.h>
 #include <regex.h>
 main() { regex_t blah ; regmatch_t p; p.rm_eo = p.rm_eo; return regcomp(&blah, "foo.*bar", REG_NOSUB) || regexec (&blah, "foobar", 0, NULL, 0); }
-EOF
-if { (eval echo configure:4455: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_regex_broken=no
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  mutt_cv_regex_broken=yes
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+mutt_cv_regex_broken=yes
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
-
-echo "$ac_t""$mutt_cv_regex_broken" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_regex_broken" >&5
+echo "${ECHO_T}$mutt_cv_regex_broken" >&6
         if test $mutt_cv_regex_broken = yes ; then
                 echo "Using the included GNU regex instead." >&6
                 mutt_cv_regex=yes
@@ -4475,47 +8692,51 @@
 fi
 
 if test $mutt_cv_regex = yes; then
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_GNU_REGEX 1
-EOF
+_ACEOF
 
-        LIBOBJS="$LIBOBJS regex.o"
+        LIBOBJS="$LIBOBJS regex.$ac_objext"
 fi
 
 
+
 # Check whether --with-homespool or --without-homespool was given.
 if test "${with_homespool+set}" = set; then
   withval="$with_homespool"
   with_homespool=${withval}
-fi
-
+fi;
 if test x$with_homespool != x; then
         if test $with_homespool = yes; then
                 with_homespool=mailbox
         fi
-        cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define MAILPATH "$with_homespool"
-EOF
+_ACEOF
 
-        cat >> confdefs.h <<\EOF
+        cat >>confdefs.h <<\_ACEOF
 #define HOMESPOOL 1
-EOF
+_ACEOF
 
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_DOTLOCK 1
-EOF
+_ACEOF
 
         mutt_cv_setgid=no
 else
-        # Check whether --with-mailpath or --without-mailpath was given.
+
+# Check whether --with-mailpath or --without-mailpath was given.
 if test "${with_mailpath+set}" = set; then
   withval="$with_mailpath"
   mutt_cv_mailpath=$withval
 else
-   echo $ac_n "checking where new mail is stored""... $ac_c" 1>&6
-echo "configure:4515: checking where new mail is stored" >&5
-if eval "test \"`echo '$''{'mutt_cv_mailpath'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+   echo "$as_me:$LINENO: checking where new mail is stored" >&5
+echo $ECHO_N "checking where new mail is stored... $ECHO_C" >&6
+if test "${mutt_cv_mailpath+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   mutt_cv_mailpath=no
                         if test -d /var/mail; then
@@ -4528,29 +8749,31 @@
                                 mutt_cv_mailpath=/usr/mail
                         fi
 fi
+echo "$as_me:$LINENO: result: $mutt_cv_mailpath" >&5
+echo "${ECHO_T}$mutt_cv_mailpath" >&6
 
-echo "$ac_t""$mutt_cv_mailpath" 1>&6
-                
-fi
-
+fi;
         if test $mutt_cv_mailpath = no; then
-                { echo "configure: error: "Could not determine where new mail is stored."" 1>&2; exit 1; }
+                { { echo "$as_me:$LINENO: error: \"Could not determine where new mail is stored.\"" >&5
+echo "$as_me: error: \"Could not determine where new mail is stored.\"" >&2;}
+   { (exit 1); exit 1; }; }
         fi
-        cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define MAILPATH "$mutt_cv_mailpath"
-EOF
+_ACEOF
 
 
-        echo $ac_n "checking if $mutt_cv_mailpath is world writable""... $ac_c" 1>&6
-echo "configure:4544: checking if $mutt_cv_mailpath is world writable" >&5
-if eval "test \"`echo '$''{'mutt_cv_worldwrite'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+        echo "$as_me:$LINENO: checking if $mutt_cv_mailpath is world writable" >&5
+echo $ECHO_N "checking if $mutt_cv_mailpath is world writable... $ECHO_C" >&6
+if test "${mutt_cv_worldwrite+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$cross_compiling" = yes; then
   mutt_cv_worldwrite=no
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4552 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -4563,41 +8786,51 @@
         if (s.st_mode & S_IWOTH) exit (0);
         exit (1);
 }
-EOF
-if { (eval echo configure:4566: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_worldwrite=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  mutt_cv_worldwrite=no
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+mutt_cv_worldwrite=no
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
-
-echo "$ac_t""$mutt_cv_worldwrite" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_worldwrite" >&5
+echo "${ECHO_T}$mutt_cv_worldwrite" >&6
 
         mutt_cv_setgid=no
         if test $mutt_cv_worldwrite = yes; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_DOTLOCK 1
-EOF
+_ACEOF
 
         else
 
-                echo $ac_n "checking if $mutt_cv_mailpath is group writable""... $ac_c" 1>&6
-echo "configure:4591: checking if $mutt_cv_mailpath is group writable" >&5
-if eval "test \"`echo '$''{'mutt_cv_groupwrite'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+                echo "$as_me:$LINENO: checking if $mutt_cv_mailpath is group writable" >&5
+echo $ECHO_N "checking if $mutt_cv_mailpath is group writable... $ECHO_C" >&6
+if test "${mutt_cv_groupwrite+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$cross_compiling" = yes; then
   mutt_cv_groupwrite=no
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4599 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -4610,50 +8843,59 @@
         if (s.st_mode & S_IWGRP) exit (0);
         exit (1);
 }
-EOF
-if { (eval echo configure:4613: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_groupwrite=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  mutt_cv_groupwrite=no
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+mutt_cv_groupwrite=no
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
+echo "$as_me:$LINENO: result: $mutt_cv_groupwrite" >&5
+echo "${ECHO_T}$mutt_cv_groupwrite" >&6
 
-echo "$ac_t""$mutt_cv_groupwrite" 1>&6
+	fi
 
-                if test $mutt_cv_groupwrite = yes; then
-                        cat >> confdefs.h <<\EOF
+cat >>confdefs.h <<\_ACEOF
 #define USE_DOTLOCK 1
-EOF
+_ACEOF
 
-                        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_SETGID 1
-EOF
+_ACEOF
 
                         mutt_cv_setgid=yes
-                fi
-        fi
 fi
 
 # Check whether --enable-external_dotlock or --disable-external_dotlock was given.
 if test "${enable_external_dotlock+set}" = set; then
   enableval="$enable_external_dotlock"
   mutt_cv_external_dotlock="$enableval"
-fi
-
+fi;
 
 if test "x$mutt_cv_setgid" = "xyes" || test "x$mutt_cv_fchdir" = "xno" \
         || test "x$mutt_cv_external_dotlock" = "xyes"
 then
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define DL_STANDALONE 1
-EOF
+_ACEOF
 
         DOTLOCK_TARGET="mutt_dotlock"
 else
@@ -4663,17 +8905,18 @@
 
 
 
-echo $ac_n "checking where to put the documentation""... $ac_c" 1>&6
-echo "configure:4666: checking where to put the documentation" >&5
+echo "$as_me:$LINENO: checking where to put the documentation" >&5
+echo $ECHO_N "checking where to put the documentation... $ECHO_C" >&6
+
 # Check whether --with-docdir or --without-docdir was given.
 if test "${with_docdir+set}" = set; then
   withval="$with_docdir"
   mutt_cv_docdir=$withval
 else
   mutt_cv_docdir="$mutt_cv_prefix/doc/mutt"
-fi
-
-echo "$ac_t""$mutt_cv_docdir" 1>&6
+fi;
+echo "$as_me:$LINENO: result: $mutt_cv_docdir" >&5
+echo "${ECHO_T}$mutt_cv_docdir" >&6
 
 docdir=$mutt_cv_docdir
 
@@ -4688,17 +8931,18 @@
 
 
 
+
 # Check whether --with-domain or --without-domain was given.
 if test "${with_domain+set}" = set; then
   withval="$with_domain"
   if test $withval != yes; then
-                cat >> confdefs.h <<EOF
+
+cat >>confdefs.h <<_ACEOF
 #define DOMAIN "$withval"
-EOF
+_ACEOF
 
         fi
-fi
-
+fi;
 
 need_socket="no"
 
@@ -4707,25 +8951,26 @@
 if test "${enable_pop+set}" = set; then
   enableval="$enable_pop"
          if test x$enableval = xyes ; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_POP 1
-EOF
+_ACEOF
 
                 MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS pop.o pop_lib.o pop_auth.o"
                 need_socket="yes"
                 need_md5="yes"
         fi
 
-fi
-
+fi;
 
 # Check whether --enable-imap or --disable-imap was given.
 if test "${enable_imap+set}" = set; then
   enableval="$enable_imap"
          if test x$enableval = xyes ; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_IMAP 1
-EOF
+_ACEOF
 
                 LIBIMAP="-Limap -limap"
                 LIBIMAPDEPS="\$(top_srcdir)/imap/imap.h imap/libimap.a"
@@ -4734,8 +8979,7 @@
                 need_md5="yes"
         fi
 
-fi
-
+fi;
 
 
 if test x$need_imap = xyes; then
@@ -4747,295 +8991,412 @@
 fi
 
 
+# Check whether --enable-nntp or --disable-nntp was given.
+if test "${enable_nntp+set}" = set; then
+  enableval="$enable_nntp"
+  	if test x$enableval = xyes ; then
+		cat >>confdefs.h <<\_ACEOF
+#define USE_NNTP 1
+_ACEOF
+
+		MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS nntp.o newsrc.o"
+		need_socket="yes"
+	fi
+
+fi;
+
+
 if test "$need_socket" = "yes"
 then
-        echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
-echo "configure:4752: checking for socklen_t" >&5
-        cat > conftest.$ac_ext <<EOF
-#line 4754 "configure"
+        echo "$as_me:$LINENO: checking for socklen_t" >&5
+echo $ECHO_N "checking for socklen_t... $ECHO_C" >&6
+        cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <sys/socket.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "socklen_t" >/dev/null 2>&1; then
-  rm -rf conftest*
-  echo "$ac_t""yes" 1>&6
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
 else
-  rm -rf conftest*
-  echo "$ac_t""no" 1>&6
-                cat >> confdefs.h <<\EOF
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
+
+cat >>confdefs.h <<\_ACEOF
 #define socklen_t int
-EOF
+_ACEOF
 
 fi
 rm -f conftest*
 
-        echo $ac_n "checking for gethostent""... $ac_c" 1>&6
-echo "configure:4773: checking for gethostent" >&5
-if eval "test \"`echo '$''{'ac_cv_func_gethostent'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+        echo "$as_me:$LINENO: checking for gethostent" >&5
+echo $ECHO_N "checking for gethostent... $ECHO_C" >&6
+if test "${ac_cv_func_gethostent+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4778 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char gethostent(); below.  */
+    which can conflict with char gethostent (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char gethostent();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char gethostent ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_gethostent) || defined (__stub___gethostent)
 choke me
 #else
-gethostent();
+f = gethostent;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4801: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_gethostent=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_gethostent=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'gethostent`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_func_gethostent=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_gethostent=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_func_gethostent" >&5
+echo "${ECHO_T}$ac_cv_func_gethostent" >&6
+if test $ac_cv_func_gethostent = yes; then
   :
 else
-  echo "$ac_t""no" 1>&6
-echo $ac_n "checking for gethostent in -lnsl""... $ac_c" 1>&6
-echo "configure:4819: checking for gethostent in -lnsl" >&5
-ac_lib_var=`echo nsl'_'gethostent | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for gethostent in -lnsl" >&5
+echo $ECHO_N "checking for gethostent in -lnsl... $ECHO_C" >&6
+if test "${ac_cv_lib_nsl_gethostent+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lnsl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4827 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char gethostent();
-
-int main() {
-gethostent()
-; return 0; }
-EOF
-if { (eval echo configure:4838: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo nsl | sed -e 's/^a-zA-Z0-9_/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+   builtin and then its argument prototype would still apply.  */
+char gethostent ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+gethostent ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_nsl_gethostent=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_nsl_gethostent=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostent" >&5
+echo "${ECHO_T}$ac_cv_lib_nsl_gethostent" >&6
+if test $ac_cv_lib_nsl_gethostent = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBNSL 1
+_ACEOF
 
   LIBS="-lnsl $LIBS"
 
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 fi
 
-        echo $ac_n "checking for setsockopt""... $ac_c" 1>&6
-echo "configure:4868: checking for setsockopt" >&5
-if eval "test \"`echo '$''{'ac_cv_func_setsockopt'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+        echo "$as_me:$LINENO: checking for setsockopt" >&5
+echo $ECHO_N "checking for setsockopt... $ECHO_C" >&6
+if test "${ac_cv_func_setsockopt+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4873 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char setsockopt(); below.  */
+    which can conflict with char setsockopt (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char setsockopt();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char setsockopt ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_setsockopt) || defined (__stub___setsockopt)
 choke me
 #else
-setsockopt();
+f = setsockopt;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4896: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_setsockopt=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_setsockopt=no"
-fi
-rm -f conftest*
-fi
-
-if eval "test \"`echo '$ac_cv_func_'setsockopt`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_func_setsockopt=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_setsockopt=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_func_setsockopt" >&5
+echo "${ECHO_T}$ac_cv_func_setsockopt" >&6
+if test $ac_cv_func_setsockopt = yes; then
   :
 else
-  echo "$ac_t""no" 1>&6
-echo $ac_n "checking for setsockopt in -lsocket""... $ac_c" 1>&6
-echo "configure:4914: checking for setsockopt in -lsocket" >&5
-ac_lib_var=`echo socket'_'setsockopt | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  ac_save_LIBS="$LIBS"
-LIBS="-lsocket  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 4922 "configure"
-#include "confdefs.h"
-/* Override any gcc2 internal prototype to avoid an error.  */
-/* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char setsockopt();
 
-int main() {
-setsockopt()
-; return 0; }
-EOF
-if { (eval echo configure:4933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
+echo "$as_me:$LINENO: checking for setsockopt in -lsocket" >&5
+echo $ECHO_N "checking for setsockopt in -lsocket... $ECHO_C" >&6
+if test "${ac_cv_lib_socket_setsockopt+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lsocket  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo socket | sed -e 's/^a-zA-Z0-9_/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char setsockopt ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+setsockopt ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_socket_setsockopt=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_socket_setsockopt=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_socket_setsockopt" >&5
+echo "${ECHO_T}$ac_cv_lib_socket_setsockopt" >&6
+if test $ac_cv_lib_socket_setsockopt = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBSOCKET 1
+_ACEOF
 
   LIBS="-lsocket $LIBS"
 
-else
-  echo "$ac_t""no" 1>&6
 fi
 
 fi
 
-        for ac_func in getaddrinfo
+
+for ac_func in getaddrinfo
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4965: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 4970 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:4993: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_SOCKET 1
-EOF
+_ACEOF
 
         MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS account.o mutt_socket.o mutt_tunnel.o"
 fi
 
 
+
 # Check whether --with-gss or --without-gss was given.
 if test "${with_gss+set}" = set; then
   withval="$with_gss"
   gss_prefix="$withval"
 else
   gss_prefix="no"
-fi
-
+fi;
 if test "$gss_prefix" != "no"
 then
   if test "$need_imap" = "yes"
   then
-    
+
   GSSAPI_PREFIX=$gss_prefix
   GSSAPI_IMPL="none"
     if test "$GSSAPI_PREFIX" != "yes"
@@ -5046,38 +9407,42 @@
   fi
   # Extract the first word of "krb5-config", so it can be a program name with args.
 set dummy krb5-config; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:5049: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_KRB5CFGPATH'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_KRB5CFGPATH+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$KRB5CFGPATH" in
-  /*)
+  case $KRB5CFGPATH in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_KRB5CFGPATH="$KRB5CFGPATH" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_KRB5CFGPATH="$KRB5CFGPATH" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$krb5_path"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_KRB5CFGPATH="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $krb5_path
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_KRB5CFGPATH="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_KRB5CFGPATH" && ac_cv_path_KRB5CFGPATH="none"
   ;;
 esac
 fi
-KRB5CFGPATH="$ac_cv_path_KRB5CFGPATH"
+KRB5CFGPATH=$ac_cv_path_KRB5CFGPATH
+
 if test -n "$KRB5CFGPATH"; then
-  echo "$ac_t""$KRB5CFGPATH" 1>&6
+  echo "$as_me:$LINENO: result: $KRB5CFGPATH" >&5
+echo "${ECHO_T}$KRB5CFGPATH" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
   if test "$KRB5CFGPATH" != "none"
@@ -5101,141 +9466,198 @@
       LDFLAGS="$LDFLAGS $GSSAPI_LDFLAGS"
     fi
 
-        echo $ac_n "checking for gss_init_sec_context in -lgssapi_krb5""... $ac_c" 1>&6
-echo "configure:5104: checking for gss_init_sec_context in -lgssapi_krb5" >&5
-ac_lib_var=`echo gssapi_krb5'_'gss_init_sec_context | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+        echo "$as_me:$LINENO: checking for gss_init_sec_context in -lgssapi_krb5" >&5
+echo $ECHO_N "checking for gss_init_sec_context in -lgssapi_krb5... $ECHO_C" >&6
+if test "${ac_cv_lib_gssapi_krb5_gss_init_sec_context+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5112 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char gss_init_sec_context();
-
-int main() {
-gss_init_sec_context()
-; return 0; }
-EOF
-if { (eval echo configure:5123: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+   builtin and then its argument prototype would still apply.  */
+char gss_init_sec_context ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+gss_init_sec_context ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_gssapi_krb5_gss_init_sec_context=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_gssapi_krb5_gss_init_sec_context=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_gssapi_krb5_gss_init_sec_context" >&5
+echo "${ECHO_T}$ac_cv_lib_gssapi_krb5_gss_init_sec_context" >&6
+if test $ac_cv_lib_gssapi_krb5_gss_init_sec_context = yes; then
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
       GSSAPI_IMPL="MIT",
       GSSAPI_LIBS="$GSSAPI_LDFLAGS -lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err"
-      
-else
-  echo "$ac_t""no" 1>&6
+
 fi
 
 
         if test "$GSSAPI_IMPL" = "none"
     then
-      echo $ac_n "checking for gss_init_sec_context in -lgssapi""... $ac_c" 1>&6
-echo "configure:5150: checking for gss_init_sec_context in -lgssapi" >&5
-ac_lib_var=`echo gssapi'_'gss_init_sec_context | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+      echo "$as_me:$LINENO: checking for gss_init_sec_context in -lgssapi" >&5
+echo $ECHO_N "checking for gss_init_sec_context in -lgssapi... $ECHO_C" >&6
+if test "${ac_cv_lib_gssapi_gss_init_sec_context+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lgssapi -lkrb5 -ldes -lasn1 -lroken -lcrypt -lcom_err $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5158 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char gss_init_sec_context();
-
-int main() {
-gss_init_sec_context()
-; return 0; }
-EOF
-if { (eval echo configure:5169: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+   builtin and then its argument prototype would still apply.  */
+char gss_init_sec_context ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+gss_init_sec_context ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_gssapi_gss_init_sec_context=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_gssapi_gss_init_sec_context=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_gssapi_gss_init_sec_context" >&5
+echo "${ECHO_T}$ac_cv_lib_gssapi_gss_init_sec_context" >&6
+if test $ac_cv_lib_gssapi_gss_init_sec_context = yes; then
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
           GSSAPI_IMPL="Heimdal"
           GSSAPI_LIBS="$GSSAPI_LDFLAGS -lgssapi -lkrb5 -ldes -lasn1 -lroken"
           GSSAPI_LIBS="$GSSAPI_LIBS -lcrypt -lcom_err"
-          
-else
-  echo "$ac_t""no" 1>&6
+
 fi
 
     fi
 
                             if test "$GSSAPI_IMPL" = "none"
     then
-      echo $ac_n "checking for g_order_init in -lgssapi_krb5""... $ac_c" 1>&6
-echo "configure:5198: checking for g_order_init in -lgssapi_krb5" >&5
-ac_lib_var=`echo gssapi_krb5'_'g_order_init | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+      echo "$as_me:$LINENO: checking for g_order_init in -lgssapi_krb5" >&5
+echo $ECHO_N "checking for g_order_init in -lgssapi_krb5... $ECHO_C" >&6
+if test "${ac_cv_lib_gssapi_krb5_g_order_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lgssapi_krb5 -lkrb5 -lcrypto -lcom_err $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5206 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char g_order_init();
-
-int main() {
-g_order_init()
-; return 0; }
-EOF
-if { (eval echo configure:5217: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
+   builtin and then its argument prototype would still apply.  */
+char g_order_init ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+g_order_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_gssapi_krb5_g_order_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_gssapi_krb5_g_order_init=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_gssapi_krb5_g_order_init" >&5
+echo "${ECHO_T}$ac_cv_lib_gssapi_krb5_g_order_init" >&6
+if test $ac_cv_lib_gssapi_krb5_g_order_init = yes; then
 
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  
         GSSAPI_IMPL="OldMIT",
         GSSAPI_LIBS="$GSSAPI_LDFLAGS -lgssapi_krb5 -lkrb5 -lcrypto -lcom_err"
-        
-else
-  echo "$ac_t""no" 1>&6
+
 fi
 
     fi
@@ -5245,76 +9667,88 @@
   LDFLAGS="$saved_LDFLAGS"
   LIBS="$saved_LIBS"
 
-    echo $ac_n "checking GSSAPI implementation""... $ac_c" 1>&6
-echo "configure:5248: checking GSSAPI implementation" >&5
-    echo "$ac_t""$GSSAPI_IMPL" 1>&6
+    echo "$as_me:$LINENO: checking GSSAPI implementation" >&5
+echo $ECHO_N "checking GSSAPI implementation... $ECHO_C" >&6
+    echo "$as_me:$LINENO: result: $GSSAPI_IMPL" >&5
+echo "${ECHO_T}$GSSAPI_IMPL" >&6
     if test "$GSSAPI_IMPL" = "none"
     then
-      cat > confcache <<\EOF
+      cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
-# scripts and configure runs.  It is not useful on other systems.
-# If it contains results you don't want to keep, you may remove or edit it.
+# scripts and configure runs, see configure's option --config-cache.
+# It is not useful on other systems.  If it contains results you don't
+# want to keep, you may remove or edit it.
 #
-# By default, configure uses ./config.cache as the cache file,
-# creating it if it does not exist already.  You can give configure
-# the --cache-file=FILE option to use a different cache file; that is
-# what configure does when it calls configure scripts in
-# subdirectories, so they share the cache.
-# Giving --cache-file=/dev/null disables caching, for debugging configure.
-# config.status only pays attention to the cache file if you give it the
-# --recheck option to rerun configure.
+# config.status only pays attention to the cache file if you give it
+# the --recheck option to rerun configure.
 #
-EOF
+# `ac_cv_env_foo' variables (set or unset) will be overridden when
+# loading this file, other *unset* `ac_cv_foo' will be assigned the
+# following values.
+
+_ACEOF
+
 # The following way of writing the cache mishandles newlines in values,
 # but we know of no workaround that is simple, portable, and efficient.
 # So, don't put newlines in cache variables' values.
 # Ultrix sh set writes to stderr and can't be redirected directly,
 # and sets the high bit in the cache file unless we assign to the vars.
-(set) 2>&1 |
-  case `(ac_space=' '; set | grep ac_space) 2>&1` in
-  *ac_space=\ *)
-    # `set' does not quote correctly, so add quotes (double-quote substitution
-    # turns \\\\ into \\, and sed turns \\ into \).
-    sed -n \
-      -e "s/'/'\\\\''/g" \
-      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
-    ;;
-  *)
-    # `set' quotes correctly as required by POSIX, so do not add quotes.
-    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
-    ;;
-  esac >> confcache
-if cmp -s $cache_file confcache; then
-  :
-else
+{
+  (set) 2>&1 |
+    case `(ac_space=' '; set | grep ac_space) 2>&1` in
+    *ac_space=\ *)
+      # `set' does not quote correctly, so add quotes (double-quote
+      # substitution turns \\\\ into \\, and sed turns \\ into \).
+      sed -n \
+        "s/'/'\\\\''/g;
+    	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+      ;;
+    *)
+      # `set' quotes correctly as required by POSIX, so do not add quotes.
+      sed -n \
+        "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+      ;;
+    esac;
+} |
+  sed '
+     t clear
+     : clear
+     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     t end
+     /^ac_cv_env/!s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
+     : end' >>confcache
+if cmp -s $cache_file confcache; then :; else
   if test -w $cache_file; then
-    echo "updating cache $cache_file"
-    cat confcache > $cache_file
+    test "x$cache_file" != "x/dev/null" && echo "updating cache $cache_file"
+    cat confcache >$cache_file
   else
     echo "not updating unwritable cache $cache_file"
   fi
 fi
 rm -f confcache
-
-      echo "$ac_t""GSSAPI libraries not found" 1>&6
+      echo "$as_me:$LINENO: result: GSSAPI libraries not found" >&5
+echo "${ECHO_T}GSSAPI libraries not found" >&6
     fi
     if test "$GSSAPI_IMPL" = "Heimdal"
     then
-      cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_HEIMDAL 1
-EOF
+_ACEOF
 
     fi
     CPPFLAGS="$CPPFLAGS $GSSAPI_CFLAGS"
     MUTTLIBS="$MUTTLIBS $GSSAPI_LIBS"
-    cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_GSS 1
-EOF
+_ACEOF
 
     need_gss="yes"
   else
-    echo "configure: warning: GSS was requested but IMAP is not enabled" 1>&2
+    { echo "$as_me:$LINENO: WARNING: GSS was requested but IMAP is not enabled" >&5
+echo "$as_me: WARNING: GSS was requested but IMAP is not enabled" >&2;}
   fi
 fi
 
@@ -5328,13 +9762,17 @@
 fi
 
 
+
+
 # Check whether --with-ssl or --without-ssl was given.
 if test "${with_ssl+set}" = set; then
   withval="$with_ssl"
          if test "$with_ssl" != "no"
         then
           if test "$need_socket" != "yes"; then
-           { echo "configure: error: SSL support is only useful with POP or IMAP support" 1>&2; exit 1; }
+           { { echo "$as_me:$LINENO: error: SSL support is only useful with POP or IMAP support" >&5
+echo "$as_me: error: SSL support is only useful with POP or IMAP support" >&2;}
+   { (exit 1); exit 1; }; }
           fi
 
           if test "$with_ssl" != "yes"
@@ -5344,162 +9782,227 @@
           fi
           saved_LIBS="$LIBS"
 
-          echo $ac_n "checking for X509_new in -lcrypto""... $ac_c" 1>&6
-echo "configure:5347: checking for X509_new in -lcrypto" >&5
-ac_lib_var=`echo crypto'_'X509_new | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for X509_new in -lcrypto" >&5
+echo $ECHO_N "checking for X509_new in -lcrypto... $ECHO_C" >&6
+if test "${ac_cv_lib_crypto_X509_new+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lcrypto  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5355 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char X509_new();
-
-int main() {
-X509_new()
-; return 0; }
-EOF
-if { (eval echo configure:5366: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo crypto | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+   builtin and then its argument prototype would still apply.  */
+char X509_new ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+X509_new ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_crypto_X509_new=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_crypto_X509_new=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_crypto_X509_new" >&5
+echo "${ECHO_T}$ac_cv_lib_crypto_X509_new" >&6
+if test $ac_cv_lib_crypto_X509_new = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBCRYPTO 1
+_ACEOF
 
   LIBS="-lcrypto $LIBS"
 
 else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: Unable to find SSL library" 1>&2; exit 1; }
+  { { echo "$as_me:$LINENO: error: Unable to find SSL library" >&5
+echo "$as_me: error: Unable to find SSL library" >&2;}
+   { (exit 1); exit 1; }; }
 fi
 
-          echo $ac_n "checking for SSL_new in -lssl""... $ac_c" 1>&6
-echo "configure:5395: checking for SSL_new in -lssl" >&5
-ac_lib_var=`echo ssl'_'SSL_new | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for SSL_new in -lssl" >&5
+echo $ECHO_N "checking for SSL_new in -lssl... $ECHO_C" >&6
+if test "${ac_cv_lib_ssl_SSL_new+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lssl -lcrypto $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5403 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char SSL_new();
-
-int main() {
-SSL_new()
-; return 0; }
-EOF
-if { (eval echo configure:5414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo ssl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+   builtin and then its argument prototype would still apply.  */
+char SSL_new ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+SSL_new ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_ssl_SSL_new=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_ssl_SSL_new=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_ssl_SSL_new" >&5
+echo "${ECHO_T}$ac_cv_lib_ssl_SSL_new" >&6
+if test $ac_cv_lib_ssl_SSL_new = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBSSL 1
+_ACEOF
 
   LIBS="-lssl $LIBS"
 
 else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: Unable to find SSL library" 1>&2; exit 1; }
+  { { echo "$as_me:$LINENO: error: Unable to find SSL library" >&5
+echo "$as_me: error: Unable to find SSL library" >&2;}
+   { (exit 1); exit 1; }; }
 fi
 
 
-          for ac_func in RAND_status RAND_egd
+
+
+for ac_func in RAND_status RAND_egd
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5446: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 5451 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:5474: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
 
-          cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_SSL 1
-EOF
+_ACEOF
 
           LIBS="$saved_LIBS"
           MUTTLIBS="$MUTTLIBS -lssl -lcrypto"
@@ -5508,8 +10011,7 @@
 
         fi
 
-fi
-
+fi;
 
 
 if test x$need_ssl = xyes; then
@@ -5520,13 +10022,17 @@
   USE_SSL_FALSE=
 fi
 
+
+
 # Check whether --with-nss or --without-nss was given.
 if test "${with_nss+set}" = set; then
   withval="$with_nss"
          if test "$with_nss" != no
         then
           if test "$need_socket" != "yes"; then
-           { echo "configure: error: SSL support is only useful with POP or IMAP support" 1>&2; exit 1; }
+           { { echo "$as_me:$LINENO: error: SSL support is only useful with POP or IMAP support" >&5
+echo "$as_me: error: SSL support is only useful with POP or IMAP support" >&2;}
+   { (exit 1); exit 1; }; }
           fi
 
           if test "$with_nss" != "yes"
@@ -5535,9 +10041,10 @@
            CPPFLAGS="$CPPFLAGS -I$withval/include -I$withval/public/security"
           fi
 
-          cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_NSS 1
-EOF
+_ACEOF
 
           MUTTLIBS="$MUTTLIBS -lssl -lnss -lcertdb -lcerthi -lcryptohi"
           MUTTLIBS="$MUTTLIBS -lpk11wrap -lsoftoken -lsecutil -ldbm -lplds4 -lplc4 -lfreebl"
@@ -5547,16 +10054,18 @@
           need_ssl=yes
         fi
 
-fi
+fi;
 
 
 # Check whether --with-sasl or --without-sasl was given.
 if test "${with_sasl+set}" = set; then
   withval="$with_sasl"
-  
+
         if test "$need_socket" != "yes"
         then
-          { echo "configure: error: SASL support is only useful with POP or IMAP support" 1>&2; exit 1; }
+          { { echo "$as_me:$LINENO: error: SASL support is only useful with POP or IMAP support" >&5
+echo "$as_me: error: SASL support is only useful with POP or IMAP support" >&2;}
+   { (exit 1); exit 1; }; }
         fi
 
         if test "$with_sasl" != "no"
@@ -5569,68 +10078,89 @@
 
           saved_LIBS="$LIBS"
 
-          echo $ac_n "checking for sasl_client_init in -lsasl""... $ac_c" 1>&6
-echo "configure:5572: checking for sasl_client_init in -lsasl" >&5
-ac_lib_var=`echo sasl'_'sasl_client_init | sed 'y%./+-%__p_%'`
-if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+echo "$as_me:$LINENO: checking for sasl_client_init in -lsasl" >&5
+echo $ECHO_N "checking for sasl_client_init in -lsasl... $ECHO_C" >&6
+if test "${ac_cv_lib_sasl_sasl_client_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_save_LIBS="$LIBS"
+  ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsasl  $LIBS"
-cat > conftest.$ac_ext <<EOF
-#line 5580 "configure"
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char sasl_client_init();
-
-int main() {
-sasl_client_init()
-; return 0; }
-EOF
-if { (eval echo configure:5591: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_lib_$ac_lib_var=no"
-fi
-rm -f conftest*
-LIBS="$ac_save_LIBS"
-
-fi
-if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_lib=HAVE_LIB`echo sasl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
-    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_lib 1
-EOF
+   builtin and then its argument prototype would still apply.  */
+char sasl_client_init ();
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+sasl_client_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_sasl_sasl_client_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_lib_sasl_sasl_client_init=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_sasl_sasl_client_init" >&5
+echo "${ECHO_T}$ac_cv_lib_sasl_sasl_client_init" >&6
+if test $ac_cv_lib_sasl_sasl_client_init = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBSASL 1
+_ACEOF
 
   LIBS="-lsasl $LIBS"
 
 else
-  echo "$ac_t""no" 1>&6
-{ echo "configure: error: could not find libsasl" 1>&2; exit 1; }
+  { { echo "$as_me:$LINENO: error: could not find libsasl" >&5
+echo "$as_me: error: could not find libsasl" >&2;}
+   { (exit 1); exit 1; }; }
 fi
 
 
           MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS mutt_sasl.o"
           MUTTLIBS="$MUTTLIBS -lsasl"
           LIBS="$saved_LIBS"
-          cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_SASL 1
-EOF
+_ACEOF
 
           need_sasl=yes
           need_md5=no
         fi
-        
-fi
 
+fi;
 
 
 if test x$need_sasl = xyes; then
@@ -5641,6 +10171,7 @@
   USE_SASL_FALSE=
 fi
 
+
 if test "$need_md5" = "yes"
 then
         MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS md5c.o"
@@ -5651,39 +10182,39 @@
 if test "${enable_debug+set}" = set; then
   enableval="$enable_debug"
    if test x$enableval = xyes ; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define DEBUG 1
-EOF
+_ACEOF
 
           fi
-         
-fi
 
+fi;
 
 # Check whether --enable-flock or --disable-flock was given.
 if test "${enable_flock+set}" = set; then
   enableval="$enable_flock"
   if test $enableval = yes; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_FLOCK 1
-EOF
+_ACEOF
 
         fi
-fi
-
+fi;
 
 mutt_cv_fcntl=yes
 # Check whether --enable-fcntl or --disable-fcntl was given.
 if test "${enable_fcntl+set}" = set; then
   enableval="$enable_fcntl"
   if test $enableval = no; then mutt_cv_fcntl=no; fi
-fi
-
+fi;
 
 if test $mutt_cv_fcntl = yes; then
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define USE_FCNTL 1
-EOF
+_ACEOF
 
 fi
 
@@ -5694,8 +10225,7 @@
   if test $enableval = no; then
         mutt_cv_warnings=no
 fi
-fi
-
+fi;
 
 if test x$GCC = xyes -a $mutt_cv_warnings = yes; then
         CFLAGS="-Wall -pedantic $CFLAGS"
@@ -5705,84 +10235,83 @@
 if test "${enable_nfs_fix+set}" = set; then
   enableval="$enable_nfs_fix"
   if test x$enableval = xyes; then
-                cat >> confdefs.h <<\EOF
+                cat >>confdefs.h <<\_ACEOF
 #define NFS_ATTRIBUTE_HACK 1
-EOF
+_ACEOF
 
         fi
-fi
-
+fi;
 
 # Check whether --enable-buffy-size or --disable-buffy-size was given.
 if test "${enable_buffy_size+set}" = set; then
   enableval="$enable_buffy_size"
   if test x$enableval = xyes; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define BUFFY_SIZE 1
-EOF
+_ACEOF
 
         fi
-fi
-
+fi;
 
 # Check whether --enable-mailtool or --disable-mailtool was given.
 if test "${enable_mailtool+set}" = set; then
   enableval="$enable_mailtool"
   if test x$enableval = xyes; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define SUN_ATTACHMENT 1
-EOF
+_ACEOF
 
         fi
-fi
-
+fi;
 
 # Check whether --enable-locales-fix or --disable-locales-fix was given.
 if test "${enable_locales_fix+set}" = set; then
   enableval="$enable_locales_fix"
   if test x$enableval = xyes; then
-                cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define LOCALES_HACK 1
-EOF
+_ACEOF
 
         fi
-fi
+fi;
+
+# Check whether --enable-compressed or --disable-compressed was given.
+if test "${enable_compressed+set}" = set; then
+  enableval="$enable_compressed"
+  if test x$enableval = xyes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define USE_COMPRESSED 1
+_ACEOF
+
+        fi
+fi;
 
 
 # Check whether --with-exec-shell or --without-exec-shell was given.
 if test "${with_exec_shell+set}" = set; then
   withval="$with_exec_shell"
   if test $withval != yes; then
-                cat >> confdefs.h <<EOF
+                cat >>confdefs.h <<_ACEOF
 #define EXECSHELL "$withval"
-EOF
+_ACEOF
 
         fi
-fi
-
+fi;
 
 # Check whether --enable-exact-address or --disable-exact-address was given.
 if test "${enable_exact_address+set}" = set; then
   enableval="$enable_exact_address"
   if test $enableval = yes; then
-                cat >> confdefs.h <<\EOF
+                cat >>confdefs.h <<\_ACEOF
 #define EXACT_ADDRESS 1
-EOF
-
-        fi
-fi
-
-
-# Check whether --enable-compressed or --disable-compressed was given.
-if test "${enable_compressed+set}" = set; then
-  enableval="$enable_compressed"
-  if test x$enableval = xyes; then
-                cat >> confdefs.h <<\EOF
-#define USE_COMPRESSED 1
-EOF
+_ACEOF
 
         fi
-fi
+fi;
 
 
 
@@ -5790,117 +10319,185 @@
 
 
 
-
-echo $ac_n "checking for off_t""... $ac_c" 1>&6
-echo "configure:5782: checking for off_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_off_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for off_t" >&5
+echo $ECHO_N "checking for off_t... $ECHO_C" >&6
+if test "${ac_cv_type_off_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 5787 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
 #endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
+int
+main ()
+{
+if ((off_t *) 0)
+  return 0;
+if (sizeof (off_t))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_type_off_t=yes
 else
-  rm -rf conftest*
-  ac_cv_type_off_t=no
-fi
-rm -f conftest*
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_type_off_t=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type_off_t" >&5
+echo "${ECHO_T}$ac_cv_type_off_t" >&6
+if test $ac_cv_type_off_t = yes; then
+  :
+else
 
-fi
-echo "$ac_t""$ac_cv_type_off_t" 1>&6
-if test $ac_cv_type_off_t = no; then
-  cat >> confdefs.h <<\EOF
+cat >>confdefs.h <<_ACEOF
 #define off_t long
-EOF
+_ACEOF
 
 fi
 
-echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:5815: checking for size_t" >&5
-if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for size_t" >&5
+echo $ECHO_N "checking for size_t... $ECHO_C" >&6
+if test "${ac_cv_type_size_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 5820 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
-#include <sys/types.h>
-#if STDC_HEADERS
-#include <stdlib.h>
-#include <stddef.h>
+$ac_includes_default
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
 #endif
-EOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
-  rm -rf conftest*
+int
+main ()
+{
+if ((size_t *) 0)
+  return 0;
+if (sizeof (size_t))
+  return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_type_size_t=yes
 else
-  rm -rf conftest*
-  ac_cv_type_size_t=no
-fi
-rm -f conftest*
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_type_size_t=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type_size_t" >&5
+echo "${ECHO_T}$ac_cv_type_size_t" >&6
+if test $ac_cv_type_size_t = yes; then
+  :
+else
 
-fi
-echo "$ac_t""$ac_cv_type_size_t" 1>&6
-if test $ac_cv_type_size_t = no; then
-  cat >> confdefs.h <<\EOF
+cat >>confdefs.h <<_ACEOF
 #define size_t unsigned
-EOF
+_ACEOF
 
 fi
 
 # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
 # for constant arguments.  Useless!
-echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
-echo "configure:5850: checking for working alloca.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for working alloca.h" >&5
+echo $ECHO_N "checking for working alloca.h... $ECHO_C" >&6
+if test "${ac_cv_working_alloca_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 5855 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <alloca.h>
-int main() {
-char *p = alloca(2 * sizeof(int));
-; return 0; }
-EOF
-if { (eval echo configure:5862: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  ac_cv_header_alloca_h=yes
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_header_alloca_h=no
-fi
-rm -f conftest*
-fi
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+char *p = (char *) alloca (2 * sizeof (int));
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_working_alloca_h=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_working_alloca_h=no
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: $ac_cv_working_alloca_h" >&5
+echo "${ECHO_T}$ac_cv_working_alloca_h" >&6
+if test $ac_cv_working_alloca_h = yes; then
 
-echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
-if test $ac_cv_header_alloca_h = yes; then
-  cat >> confdefs.h <<\EOF
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_ALLOCA_H 1
-EOF
+_ACEOF
 
 fi
 
-echo $ac_n "checking for alloca""... $ac_c" 1>&6
-echo "configure:5883: checking for alloca" >&5
-if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for alloca" >&5
+echo $ECHO_N "checking for alloca... $ECHO_C" >&6
+if test "${ac_cv_func_alloca_works+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 5888 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
-
 #ifdef __GNUC__
 # define alloca __builtin_alloca
 #else
@@ -5922,48 +10519,69 @@
 # endif
 #endif
 
-int main() {
-char *p = (char *) alloca(1);
-; return 0; }
-EOF
-if { (eval echo configure:5916: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+char *p = (char *) alloca (1);
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_func_alloca_works=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  ac_cv_func_alloca_works=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_cv_func_alloca_works=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
+echo "$as_me:$LINENO: result: $ac_cv_func_alloca_works" >&5
+echo "${ECHO_T}$ac_cv_func_alloca_works" >&6
 
-echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
 if test $ac_cv_func_alloca_works = yes; then
-  cat >> confdefs.h <<\EOF
-#define HAVE_ALLOCA 1
-EOF
 
-fi
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_ALLOCA 1
+_ACEOF
 
-if test $ac_cv_func_alloca_works = no; then
+else
   # The SVR3 libPW and SVR4 libucb both contain incompatible functions
-  # that cause trouble.  Some versions do not even contain alloca or
-  # contain a buggy version.  If you still want to use their alloca,
-  # use ar to extract alloca.o from them instead of compiling alloca.c.
-  ALLOCA=alloca.${ac_objext}
-  cat >> confdefs.h <<\EOF
+# that cause trouble.  Some versions do not even contain alloca or
+# contain a buggy version.  If you still want to use their alloca,
+# use ar to extract alloca.o from them instead of compiling alloca.c.
+
+ALLOCA=alloca.$ac_objext
+
+cat >>confdefs.h <<\_ACEOF
 #define C_ALLOCA 1
-EOF
+_ACEOF
 
 
-echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
-echo "configure:5948: checking whether alloca needs Cray hooks" >&5
-if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking whether \`alloca.c' needs Cray hooks" >&5
+echo $ECHO_N "checking whether \`alloca.c' needs Cray hooks... $ECHO_C" >&6
+if test "${ac_cv_os_cray+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 5953 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #if defined(CRAY) && ! defined(CRAY2)
 webecray
@@ -5971,88 +10589,109 @@
 wenotbecray
 #endif
 
-EOF
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "webecray" >/dev/null 2>&1; then
-  rm -rf conftest*
   ac_cv_os_cray=yes
 else
-  rm -rf conftest*
   ac_cv_os_cray=no
 fi
 rm -f conftest*
 
 fi
-
-echo "$ac_t""$ac_cv_os_cray" 1>&6
+echo "$as_me:$LINENO: result: $ac_cv_os_cray" >&5
+echo "${ECHO_T}$ac_cv_os_cray" >&6
 if test $ac_cv_os_cray = yes; then
-for ac_func in _getb67 GETB67 getb67; do
-  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:5978: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  for ac_func in _getb67 GETB67 getb67; do
+    as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 5983 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:6006: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<EOF
+cat >>confdefs.h <<_ACEOF
 #define CRAY_STACKSEG_END $ac_func
-EOF
+_ACEOF
 
-  break
-else
-  echo "$ac_t""no" 1>&6
+    break
 fi
 
-done
+  done
 fi
 
-echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
-echo "configure:6033: checking stack direction for C alloca" >&5
-if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking stack direction for C alloca" >&5
+echo $ECHO_N "checking stack direction for C alloca... $ECHO_C" >&6
+if test "${ac_cv_c_stack_direction+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$cross_compiling" = yes; then
   ac_cv_c_stack_direction=0
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6041 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+int
 find_stack_direction ()
 {
   static char *addr = 0;
@@ -6065,138 +10704,250 @@
   else
     return (&dummy > addr) ? 1 : -1;
 }
+
+int
 main ()
 {
-  exit (find_stack_direction() < 0);
+  exit (find_stack_direction () < 0);
 }
-EOF
-if { (eval echo configure:6060: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_c_stack_direction=1
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_c_stack_direction=-1
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+ac_cv_c_stack_direction=-1
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
+echo "$as_me:$LINENO: result: $ac_cv_c_stack_direction" >&5
+echo "${ECHO_T}$ac_cv_c_stack_direction" >&6
 
-echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
-cat >> confdefs.h <<EOF
+cat >>confdefs.h <<_ACEOF
 #define STACK_DIRECTION $ac_cv_c_stack_direction
-EOF
+_ACEOF
+
 
 fi
 
-for ac_hdr in unistd.h
+
+
+for ac_header in stdlib.h unistd.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:6085: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6090 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:6095: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "$ac_t""no" 1>&6
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
 fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
 done
 
+
 for ac_func in getpagesize
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6124: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6129 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:6152: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
-echo $ac_n "checking for working mmap""... $ac_c" 1>&6
-echo "configure:6177: checking for working mmap" >&5
-if eval "test \"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for working mmap" >&5
+echo $ECHO_N "checking for working mmap... $ECHO_C" >&6
+if test "${ac_cv_func_mmap_fixed_mapped+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$cross_compiling" = yes; then
   ac_cv_func_mmap_fixed_mapped=no
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6185 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
+$ac_includes_default
+/* malloc might have been renamed as rpl_malloc. */
+#undef malloc
 
 /* Thanks to Mike Haertel and Jim Avera for this test.
    Here is a matrix of mmap possibilities:
@@ -6210,34 +10961,34 @@
    back from the file, nor mmap's back from the file at a different
    address.  (There have been systems where private was not correctly
    implemented like the infamous i386 svr4.0, and systems where the
-   VM page cache was not coherent with the filesystem buffer cache
+   VM page cache was not coherent with the file system buffer cache
    like early versions of FreeBSD and possibly contemporary NetBSD.)
    For shared mappings, we should conversely verify that changes get
-   propogated back to all the places they're supposed to be.
+   propagated back to all the places they're supposed to be.
 
    Grep wants private fixed already mapped.
    The main things grep needs to know about mmap are:
    * does it exist and is it safe to write into the mmap'd area
    * how to use it (BSD variants)  */
-#include <sys/types.h>
+
 #include <fcntl.h>
 #include <sys/mman.h>
 
-/* This mess was copied from the GNU getpagesize.h.  */
-#ifndef HAVE_GETPAGESIZE
-# ifdef HAVE_UNISTD_H
-#  include <unistd.h>
-# endif
+#if !STDC_HEADERS && !HAVE_STDLIB_H
+char *malloc ();
+#endif
 
+/* This mess was copied from the GNU getpagesize.h.  */
+#if !HAVE_GETPAGESIZE
 /* Assume that all systems that can run configure have sys/param.h.  */
-# ifndef HAVE_SYS_PARAM_H
+# if !HAVE_SYS_PARAM_H
 #  define HAVE_SYS_PARAM_H 1
 # endif
 
 # ifdef _SC_PAGESIZE
 #  define getpagesize() sysconf(_SC_PAGESIZE)
 # else /* no _SC_PAGESIZE */
-#  ifdef HAVE_SYS_PARAM_H
+#  if HAVE_SYS_PARAM_H
 #   include <sys/param.h>
 #   ifdef EXEC_PAGESIZE
 #    define getpagesize() EXEC_PAGESIZE
@@ -6264,107 +11015,104 @@
 
 #endif /* no HAVE_GETPAGESIZE */
 
-#ifdef __cplusplus
-extern "C" { void *malloc(unsigned); }
-#else
-char *malloc();
-#endif
-
 int
-main()
+main ()
 {
-	char *data, *data2, *data3;
-	int i, pagesize;
-	int fd;
-
-	pagesize = getpagesize();
-
-	/*
-	 * First, make a file with some known garbage in it.
-	 */
-	data = malloc(pagesize);
-	if (!data)
-		exit(1);
-	for (i = 0; i < pagesize; ++i)
-		*(data + i) = rand();
-	umask(0);
-	fd = creat("conftestmmap", 0600);
-	if (fd < 0)
-		exit(1);
-	if (write(fd, data, pagesize) != pagesize)
-		exit(1);
-	close(fd);
-
-	/*
-	 * Next, try to mmap the file at a fixed address which
-	 * already has something else allocated at it.  If we can,
-	 * also make sure that we see the same garbage.
-	 */
-	fd = open("conftestmmap", O_RDWR);
-	if (fd < 0)
-		exit(1);
-	data2 = malloc(2 * pagesize);
-	if (!data2)
-		exit(1);
-	data2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);
-	if (data2 != mmap(data2, pagesize, PROT_READ | PROT_WRITE,
-	    MAP_PRIVATE | MAP_FIXED, fd, 0L))
-		exit(1);
-	for (i = 0; i < pagesize; ++i)
-		if (*(data + i) != *(data2 + i))
-			exit(1);
-
-	/*
-	 * Finally, make sure that changes to the mapped area
-	 * do not percolate back to the file as seen by read().
-	 * (This is a bug on some variants of i386 svr4.0.)
-	 */
-	for (i = 0; i < pagesize; ++i)
-		*(data2 + i) = *(data2 + i) + 1;
-	data3 = malloc(pagesize);
-	if (!data3)
-		exit(1);
-	if (read(fd, data3, pagesize) != pagesize)
-		exit(1);
-	for (i = 0; i < pagesize; ++i)
-		if (*(data + i) != *(data3 + i))
-			exit(1);
-	close(fd);
-	unlink("conftestmmap");
-	exit(0);
+  char *data, *data2, *data3;
+  int i, pagesize;
+  int fd;
+
+  pagesize = getpagesize ();
+
+  /* First, make a file with some known garbage in it. */
+  data = (char *) malloc (pagesize);
+  if (!data)
+    exit (1);
+  for (i = 0; i < pagesize; ++i)
+    *(data + i) = rand ();
+  umask (0);
+  fd = creat ("conftest.mmap", 0600);
+  if (fd < 0)
+    exit (1);
+  if (write (fd, data, pagesize) != pagesize)
+    exit (1);
+  close (fd);
+
+  /* Next, try to mmap the file at a fixed address which already has
+     something else allocated at it.  If we can, also make sure that
+     we see the same garbage.  */
+  fd = open ("conftest.mmap", O_RDWR);
+  if (fd < 0)
+    exit (1);
+  data2 = (char *) malloc (2 * pagesize);
+  if (!data2)
+    exit (1);
+  data2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);
+  if (data2 != mmap (data2, pagesize, PROT_READ | PROT_WRITE,
+                     MAP_PRIVATE | MAP_FIXED, fd, 0L))
+    exit (1);
+  for (i = 0; i < pagesize; ++i)
+    if (*(data + i) != *(data2 + i))
+      exit (1);
+
+  /* Finally, make sure that changes to the mapped area do not
+     percolate back to the file as seen by read().  (This is a bug on
+     some variants of i386 svr4.0.)  */
+  for (i = 0; i < pagesize; ++i)
+    *(data2 + i) = *(data2 + i) + 1;
+  data3 = (char *) malloc (pagesize);
+  if (!data3)
+    exit (1);
+  if (read (fd, data3, pagesize) != pagesize)
+    exit (1);
+  for (i = 0; i < pagesize; ++i)
+    if (*(data + i) != *(data3 + i))
+      exit (1);
+  close (fd);
+  exit (0);
 }
-
-EOF
-if { (eval echo configure:6325: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   ac_cv_func_mmap_fixed_mapped=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  ac_cv_func_mmap_fixed_mapped=no
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+ac_cv_func_mmap_fixed_mapped=no
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
 fi
-
-echo "$ac_t""$ac_cv_func_mmap_fixed_mapped" 1>&6
+echo "$as_me:$LINENO: result: $ac_cv_func_mmap_fixed_mapped" >&5
+echo "${ECHO_T}$ac_cv_func_mmap_fixed_mapped" >&6
 if test $ac_cv_func_mmap_fixed_mapped = yes; then
-  cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_MMAP 1
-EOF
+_ACEOF
 
 fi
+rm -f conftest.mmap
 
 
-    echo $ac_n "checking whether we are using the GNU C Library 2.1 or newer""... $ac_c" 1>&6
-echo "configure:6349: checking whether we are using the GNU C Library 2.1 or newer" >&5
-if eval "test \"`echo '$''{'ac_cv_gnu_library_2_1'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+    echo "$as_me:$LINENO: checking whether we are using the GNU C Library 2.1 or newer" >&5
+echo $ECHO_N "checking whether we are using the GNU C Library 2.1 or newer... $ECHO_C" >&6
+if test "${ac_cv_gnu_library_2_1+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6354 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <features.h>
@@ -6373,133 +11121,256 @@
   Lucky GNU user
  #endif
 #endif
-	
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "Lucky GNU user" >/dev/null 2>&1; then
-  rm -rf conftest*
   ac_cv_gnu_library_2_1=yes
 else
-  rm -rf conftest*
   ac_cv_gnu_library_2_1=no
 fi
 rm -f conftest*
 
-      
-    
+
+
 fi
+echo "$as_me:$LINENO: result: $ac_cv_gnu_library_2_1" >&5
+echo "${ECHO_T}$ac_cv_gnu_library_2_1" >&6
 
-echo "$ac_t""$ac_cv_gnu_library_2_1" 1>&6
-    
     GLIBC21="$ac_cv_gnu_library_2_1"
-  
 
-                                    
-   for ac_hdr in argz.h limits.h locale.h nl_types.h malloc.h stddef.h \
+
+
+
+
+
+
+
+
+
+
+
+
+for ac_header in argz.h limits.h locale.h nl_types.h malloc.h stddef.h \
 stdlib.h string.h unistd.h sys/param.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:6390: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6395 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:6400: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_cpp_err=yes
 fi
-rm -f conftest*
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "$ac_t""no" 1>&6
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
 fi
+
 done
 
-   for ac_func in feof_unlocked fgets_unlocked getcwd getegid geteuid \
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+for ac_func in feof_unlocked fgets_unlocked getcwd getegid geteuid \
 getgid getuid mempcpy munmap putenv setenv setlocale stpcpy strchr strcasecmp \
 strdup strtoul tsearch __argz_count __argz_stringify __argz_next
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6431: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6436 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:6459: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
 
-   
-    
-  # Check whether --with-iconv or --without-iconv was given.
+
+
+
+# Check whether --with-iconv or --without-iconv was given.
 if test "${with_iconv+set}" = set; then
   withval="$with_iconv"
-  
+
     if test "$withval" != no ; then
     for dir in `echo "$withval" | tr : ' '`; do
       if test -d $dir/include; then CPPFLAGS="$CPPFLAGS -I$dir/include"; fi
@@ -6508,82 +11379,122 @@
     else
       use_iconv=no
     fi
-   
+
 else
   use_iconv=yes
-fi
-
+fi;
 
   if test "$use_iconv" = yes ; then
-  echo $ac_n "checking for iconv""... $ac_c" 1>&6
-echo "configure:6506: checking for iconv" >&5
-if eval "test \"`echo '$''{'am_cv_func_iconv'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+  echo "$as_me:$LINENO: checking for iconv" >&5
+echo $ECHO_N "checking for iconv... $ECHO_C" >&6
+if test "${am_cv_func_iconv+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  
+
     am_cv_func_iconv="no, consider installing GNU libiconv"
     am_cv_lib_iconv=no
-    cat > conftest.$ac_ext <<EOF
-#line 6514 "configure"
+    cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <iconv.h>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 iconv_t cd = iconv_open("","");
        iconv(cd,NULL,NULL,NULL,NULL);
        iconv_close(cd);
-; return 0; }
-EOF
-if { (eval echo configure:6524: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   am_cv_func_iconv=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
     if test "$am_cv_func_iconv" != yes; then
       am_save_LIBS="$LIBS"
       LIBS="$LIBS -liconv"
-      cat > conftest.$ac_ext <<EOF
-#line 6536 "configure"
+      cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <iconv.h>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 iconv_t cd = iconv_open("","");
          iconv(cd,NULL,NULL,NULL,NULL);
          iconv_close(cd);
-; return 0; }
-EOF
-if { (eval echo configure:6546: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   am_cv_lib_iconv=yes
         am_cv_func_iconv=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
       LIBS="$am_save_LIBS"
     fi
-  
-fi
 
-echo "$ac_t""$am_cv_func_iconv" 1>&6
+fi
+echo "$as_me:$LINENO: result: $am_cv_func_iconv" >&5
+echo "${ECHO_T}$am_cv_func_iconv" >&6
   if test "$am_cv_func_iconv" = yes; then
-    cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_ICONV 1
-EOF
+_ACEOF
+
+    echo "$as_me:$LINENO: checking for iconv declaration" >&5
+echo $ECHO_N "checking for iconv declaration... $ECHO_C" >&6
+    if test "${am_cv_proto_iconv+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
 
-    echo $ac_n "checking for iconv declaration""... $ac_c" 1>&6
-echo "configure:6567: checking for iconv declaration" >&5
-    if eval "test \"`echo '$''{'am_cv_proto_iconv'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  
-      cat > conftest.$ac_ext <<EOF
-#line 6573 "configure"
+      cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <stdlib.h>
@@ -6598,246 +11509,423 @@
 size_t iconv();
 #endif
 
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 
-; return 0; }
-EOF
-if { (eval echo configure:6592: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   am_cv_proto_iconv_arg1=""
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  am_cv_proto_iconv_arg1="const"
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+am_cv_proto_iconv_arg1="const"
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
       am_cv_proto_iconv="extern size_t iconv (iconv_t cd, $am_cv_proto_iconv_arg1 char * *inbuf, size_t *inbytesleft, char * *outbuf, size_t *outbytesleft);"
 fi
 
     am_cv_proto_iconv=`echo "$am_cv_proto_iconv" | tr -s ' ' | sed -e 's/( /(/'`
-    echo "$ac_t""${ac_t:-
-         }$am_cv_proto_iconv" 1>&6
-    cat >> confdefs.h <<EOF
+    echo "$as_me:$LINENO: result: ${ac_t:-
+         }$am_cv_proto_iconv" >&5
+echo "${ECHO_T}${ac_t:-
+         }$am_cv_proto_iconv" >&6
+
+cat >>confdefs.h <<_ACEOF
 #define ICONV_CONST $am_cv_proto_iconv_arg1
-EOF
+_ACEOF
 
   fi
   LIBICONV=
   if test "$am_cv_lib_iconv" = yes; then
     LIBICONV="-liconv"
   fi
-  
+
 
   fi # use_iconv
 
-   
-  echo $ac_n "checking for nl_langinfo and CODESET""... $ac_c" 1>&6
-echo "configure:6623: checking for nl_langinfo and CODESET" >&5
-if eval "test \"`echo '$''{'am_cv_langinfo_codeset'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+
+  echo "$as_me:$LINENO: checking for nl_langinfo and CODESET" >&5
+echo $ECHO_N "checking for nl_langinfo and CODESET... $ECHO_C" >&6
+if test "${am_cv_langinfo_codeset+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6628 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <langinfo.h>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 char* cs = nl_langinfo(CODESET);
-; return 0; }
-EOF
-if { (eval echo configure:6635: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   am_cv_langinfo_codeset=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  am_cv_langinfo_codeset=no
-fi
-rm -f conftest*
-    
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+am_cv_langinfo_codeset=no
 fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 
-echo "$ac_t""$am_cv_langinfo_codeset" 1>&6
+fi
+echo "$as_me:$LINENO: result: $am_cv_langinfo_codeset" >&5
+echo "${ECHO_T}$am_cv_langinfo_codeset" >&6
   if test $am_cv_langinfo_codeset = yes; then
-    cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_LANGINFO_CODESET 1
-EOF
+_ACEOF
 
   fi
 
    if test $ac_cv_header_locale_h = yes; then
-    echo $ac_n "checking for LC_MESSAGES""... $ac_c" 1>&6
-echo "configure:6658: checking for LC_MESSAGES" >&5
-if eval "test \"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+    echo "$as_me:$LINENO: checking for LC_MESSAGES" >&5
+echo $ECHO_N "checking for LC_MESSAGES... $ECHO_C" >&6
+if test "${am_cv_val_LC_MESSAGES+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6663 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <locale.h>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 return LC_MESSAGES
-; return 0; }
-EOF
-if { (eval echo configure:6670: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   am_cv_val_LC_MESSAGES=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  am_cv_val_LC_MESSAGES=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+am_cv_val_LC_MESSAGES=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-
-echo "$ac_t""$am_cv_val_LC_MESSAGES" 1>&6
+echo "$as_me:$LINENO: result: $am_cv_val_LC_MESSAGES" >&5
+echo "${ECHO_T}$am_cv_val_LC_MESSAGES" >&6
     if test $am_cv_val_LC_MESSAGES = yes; then
-      cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_LC_MESSAGES 1
-EOF
+_ACEOF
 
     fi
   fi
-   echo $ac_n "checking whether NLS is requested""... $ac_c" 1>&6
-echo "configure:6691: checking whether NLS is requested" >&5
+   echo "$as_me:$LINENO: checking whether NLS is requested" >&5
+echo $ECHO_N "checking whether NLS is requested... $ECHO_C" >&6
         # Check whether --enable-nls or --disable-nls was given.
 if test "${enable_nls+set}" = set; then
   enableval="$enable_nls"
   USE_NLS=$enableval
 else
   USE_NLS=yes
-fi
+fi;
+    echo "$as_me:$LINENO: result: $USE_NLS" >&5
+echo "${ECHO_T}$USE_NLS" >&6
 
-    echo "$ac_t""$USE_NLS" 1>&6
-    
 
     BUILD_INCLUDED_LIBINTL=no
     USE_INCLUDED_LIBINTL=no
     INTLLIBS=
 
         if test "$USE_NLS" = "yes"; then
-      cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define ENABLE_NLS 1
-EOF
+_ACEOF
+
+      echo "$as_me:$LINENO: checking whether included gettext is requested" >&5
+echo $ECHO_N "checking whether included gettext is requested... $ECHO_C" >&6
 
-      echo $ac_n "checking whether included gettext is requested""... $ac_c" 1>&6
-echo "configure:6713: checking whether included gettext is requested" >&5
-      # Check whether --with-included-gettext or --without-included-gettext was given.
+# Check whether --with-included-gettext or --without-included-gettext was given.
 if test "${with_included_gettext+set}" = set; then
   withval="$with_included_gettext"
   nls_cv_force_use_gnu_gettext=$withval
 else
   nls_cv_force_use_gnu_gettext=no
-fi
-
-      echo "$ac_t""$nls_cv_force_use_gnu_gettext" 1>&6
+fi;
+      echo "$as_me:$LINENO: result: $nls_cv_force_use_gnu_gettext" >&5
+echo "${ECHO_T}$nls_cv_force_use_gnu_gettext" >&6
 
       nls_cv_use_gnu_gettext="$nls_cv_force_use_gnu_gettext"
       if test "$nls_cv_force_use_gnu_gettext" != "yes"; then
                         	CATOBJEXT=NONE
 
-                
-        
 
-	ac_safe=`echo "libintl.h" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for libintl.h""... $ac_c" 1>&6
-echo "configure:6733: checking for libintl.h" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 6738 "configure"
+
+
+	if test "${ac_cv_header_libintl_h+set}" = set; then
+  echo "$as_me:$LINENO: checking for libintl.h" >&5
+echo $ECHO_N "checking for libintl.h... $ECHO_C" >&6
+if test "${ac_cv_header_libintl_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_libintl_h" >&5
+echo "${ECHO_T}$ac_cv_header_libintl_h" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking libintl.h usability" >&5
+echo $ECHO_N "checking libintl.h usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <libintl.h>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking libintl.h presence" >&5
+echo $ECHO_N "checking libintl.h presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <libintl.h>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:6743: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_header_preproc=no
 fi
-rm -f conftest*
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: libintl.h: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: libintl.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: libintl.h: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: libintl.h: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: libintl.h: present but cannot be compiled" >&5
+echo "$as_me: WARNING: libintl.h: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: libintl.h: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: libintl.h: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: libintl.h: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: libintl.h: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for libintl.h" >&5
+echo $ECHO_N "checking for libintl.h... $ECHO_C" >&6
+if test "${ac_cv_header_libintl_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_header_libintl_h=$ac_header_preproc
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-  echo $ac_n "checking for GNU gettext in libc""... $ac_c" 1>&6
-echo "configure:6760: checking for GNU gettext in libc" >&5
-if eval "test \"`echo '$''{'gt_cv_func_gnugettext1_libc'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: result: $ac_cv_header_libintl_h" >&5
+echo "${ECHO_T}$ac_cv_header_libintl_h" >&6
+
+fi
+if test $ac_cv_header_libintl_h = yes; then
+  echo "$as_me:$LINENO: checking for GNU gettext in libc" >&5
+echo $ECHO_N "checking for GNU gettext in libc... $ECHO_C" >&6
+if test "${gt_cv_func_gnugettext1_libc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6765 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <libintl.h>
 extern int _nl_msg_cat_cntr;
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 bindtextdomain ("", "");
 return (int) gettext ("") + _nl_msg_cat_cntr
-; return 0; }
-EOF
-if { (eval echo configure:6774: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   gt_cv_func_gnugettext1_libc=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  gt_cv_func_gnugettext1_libc=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+gt_cv_func_gnugettext1_libc=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-
-echo "$ac_t""$gt_cv_func_gnugettext1_libc" 1>&6
+echo "$as_me:$LINENO: result: $gt_cv_func_gnugettext1_libc" >&5
+echo "${ECHO_T}$gt_cv_func_gnugettext1_libc" >&6
 
 	   if test "$gt_cv_func_gnugettext1_libc" != "yes"; then
-	     echo $ac_n "checking for GNU gettext in libintl""... $ac_c" 1>&6
-echo "configure:6790: checking for GNU gettext in libintl" >&5
-if eval "test \"`echo '$''{'gt_cv_func_gnugettext1_libintl'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+	     echo "$as_me:$LINENO: checking for GNU gettext in libintl" >&5
+echo $ECHO_N "checking for GNU gettext in libintl... $ECHO_C" >&6
+if test "${gt_cv_func_gnugettext1_libintl+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   gt_save_LIBS="$LIBS"
 		LIBS="$LIBS -lintl $LIBICONV"
-		cat > conftest.$ac_ext <<EOF
-#line 6797 "configure"
+		cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <libintl.h>
 extern int _nl_msg_cat_cntr;
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 bindtextdomain ("", "");
 return (int) gettext ("") + _nl_msg_cat_cntr
-; return 0; }
-EOF
-if { (eval echo configure:6806: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   gt_cv_func_gnugettext1_libintl=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  gt_cv_func_gnugettext1_libintl=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+gt_cv_func_gnugettext1_libintl=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 		LIBS="$gt_save_LIBS"
 fi
-
-echo "$ac_t""$gt_cv_func_gnugettext1_libintl" 1>&6
+echo "$as_me:$LINENO: result: $gt_cv_func_gnugettext1_libintl" >&5
+echo "${ECHO_T}$gt_cv_func_gnugettext1_libintl" >&6
 	   fi
 
 	   	   	   	   	   if test "$gt_cv_func_gnugettext1_libc" = "yes" \
 	      || { test "$gt_cv_func_gnugettext1_libintl" = "yes" \
 		   && test "$PACKAGE" != gettext; }; then
-	     cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_GETTEXT 1
-EOF
+_ACEOF
 
 
 	     if test "$gt_cv_func_gnugettext1_libintl" = "yes"; then
@@ -6846,58 +11934,79 @@
 
 	     gt_save_LIBS="$LIBS"
 	     LIBS="$LIBS $INTLLIBS"
-	     for ac_func in dcgettext
+
+for ac_func in dcgettext
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:6839: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 6844 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:6867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
@@ -6905,10 +12014,10 @@
 
 	     	     # Extract the first word of "msgfmt", so it can be a program name with args.
 set dummy msgfmt; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:6896: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_MSGFMT+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case "$MSGFMT" in
   /*)
@@ -6932,54 +12041,60 @@
 fi
 MSGFMT="$ac_cv_path_MSGFMT"
 if test "$MSGFMT" != ":"; then
-  echo "$ac_t""$MSGFMT" 1>&6
+  echo "$as_me:$LINENO: result: $MSGFMT" >&5
+echo "${ECHO_T}$MSGFMT" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
 	     # Extract the first word of "gmsgfmt", so it can be a program name with args.
 set dummy gmsgfmt; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:6930: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_GMSGFMT+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$GMSGFMT" in
-  /*)
+  case $GMSGFMT in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_GMSGFMT="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_GMSGFMT="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
   ;;
 esac
 fi
-GMSGFMT="$ac_cv_path_GMSGFMT"
+GMSGFMT=$ac_cv_path_GMSGFMT
+
 if test -n "$GMSGFMT"; then
-  echo "$ac_t""$GMSGFMT" 1>&6
+  echo "$as_me:$LINENO: result: $GMSGFMT" >&5
+echo "${ECHO_T}$GMSGFMT" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
 
 	     	     # Extract the first word of "xgettext", so it can be a program name with args.
 set dummy xgettext; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:6967: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_XGETTEXT+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case "$XGETTEXT" in
   /*)
@@ -7003,20 +12118,21 @@
 fi
 XGETTEXT="$ac_cv_path_XGETTEXT"
 if test "$XGETTEXT" != ":"; then
-  echo "$ac_t""$XGETTEXT" 1>&6
+  echo "$as_me:$LINENO: result: $XGETTEXT" >&5
+echo "${ECHO_T}$XGETTEXT" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
 
 	     CATOBJEXT=.gmo
 	   fi
-	
-else
-  echo "$ac_t""no" 1>&6
+
 fi
 
 
+
         if test "$CATOBJEXT" = "NONE"; then
 	  	  	  nls_cv_use_gnu_gettext=yes
         fi
@@ -7026,10 +12142,10 @@
                 INTLOBJS="\$(GETTOBJS)"
         # Extract the first word of "msgfmt", so it can be a program name with args.
 set dummy msgfmt; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:7017: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_MSGFMT+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case "$MSGFMT" in
   /*)
@@ -7053,53 +12169,59 @@
 fi
 MSGFMT="$ac_cv_path_MSGFMT"
 if test "$MSGFMT" != ":"; then
-  echo "$ac_t""$MSGFMT" 1>&6
+  echo "$as_me:$LINENO: result: $MSGFMT" >&5
+echo "${ECHO_T}$MSGFMT" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
         # Extract the first word of "gmsgfmt", so it can be a program name with args.
 set dummy gmsgfmt; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:7051: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_GMSGFMT+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  case "$GMSGFMT" in
-  /*)
+  case $GMSGFMT in
+  [\\/]* | ?:[\\/]*)
   ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a path.
   ;;
-  ?:/*)			 
-  ac_cv_path_GMSGFMT="$GMSGFMT" # Let the user override the test with a dos path.
-  ;;
   *)
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do 
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_path_GMSGFMT="$ac_dir/$ac_word"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_path_GMSGFMT="$as_dir/$ac_word$ac_exec_ext"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
   test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
   ;;
 esac
 fi
-GMSGFMT="$ac_cv_path_GMSGFMT"
+GMSGFMT=$ac_cv_path_GMSGFMT
+
 if test -n "$GMSGFMT"; then
-  echo "$ac_t""$GMSGFMT" 1>&6
+  echo "$as_me:$LINENO: result: $GMSGFMT" >&5
+echo "${ECHO_T}$GMSGFMT" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
         # Extract the first word of "xgettext", so it can be a program name with args.
 set dummy xgettext; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:7087: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_path_XGETTEXT+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case "$XGETTEXT" in
   /*)
@@ -7123,12 +12245,14 @@
 fi
 XGETTEXT="$ac_cv_path_XGETTEXT"
 if test "$XGETTEXT" != ":"; then
-  echo "$ac_t""$XGETTEXT" 1>&6
+  echo "$as_me:$LINENO: result: $XGETTEXT" >&5
+echo "${ECHO_T}$XGETTEXT" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
-        
+
 	BUILD_INCLUDED_LIBINTL=yes
 	USE_INCLUDED_LIBINTL=yes
         CATOBJEXT=.gmo
@@ -7140,7 +12264,8 @@
 			if $GMSGFMT --statistics /dev/null >/dev/null 2>&1; then
 	  : ;
 	else
-	  echo "$ac_t""found msgfmt program is not GNU msgfmt; ignore it" 1>&6
+	  echo "$as_me:$LINENO: result: found msgfmt program is not GNU msgfmt; ignore it" >&5
+echo "${ECHO_T}found msgfmt program is not GNU msgfmt; ignore it" >&6
 	  GMSGFMT=":"
 	fi
       fi
@@ -7149,14 +12274,16 @@
 			if $XGETTEXT --omit-header /dev/null >/dev/null 2>&1; then
 	  : ;
 	else
-	  echo "$ac_t""found xgettext program is not GNU xgettext; ignore it" 1>&6
+	  echo "$as_me:$LINENO: result: found xgettext program is not GNU xgettext; ignore it" >&5
+echo "${ECHO_T}found xgettext program is not GNU xgettext; ignore it" >&6
 	  XGETTEXT=":"
 	fi
       fi
 
             POSUB=po
     fi
-    
+              ac_config_commands="$ac_config_commands default-1"
+
 
 
             if test "$PACKAGE" = gettext; then
@@ -7165,43 +12292,49 @@
 
                                             for ac_prog in bison
 do
-# Extract the first word of "$ac_prog", so it can be a program name with args.
+  # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:7158: checking for $ac_word" >&5
-if eval "test \"`echo '$''{'ac_cv_prog_INTLBISON'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for $ac_word" >&5
+echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
+if test "${ac_cv_prog_INTLBISON+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$INTLBISON"; then
   ac_cv_prog_INTLBISON="$INTLBISON" # Let the user override the test.
 else
-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
-  ac_dummy="$PATH"
-  for ac_dir in $ac_dummy; do
-    test -z "$ac_dir" && ac_dir=.
-    if test -f $ac_dir/$ac_word; then
-      ac_cv_prog_INTLBISON="$ac_prog"
-      break
-    fi
-  done
-  IFS="$ac_save_ifs"
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for ac_exec_ext in '' $ac_executable_extensions; do
+  if $as_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+    ac_cv_prog_INTLBISON="$ac_prog"
+    echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+done
+
 fi
 fi
-INTLBISON="$ac_cv_prog_INTLBISON"
+INTLBISON=$ac_cv_prog_INTLBISON
 if test -n "$INTLBISON"; then
-  echo "$ac_t""$INTLBISON" 1>&6
+  echo "$as_me:$LINENO: result: $INTLBISON" >&5
+echo "${ECHO_T}$INTLBISON" >&6
 else
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 
-test -n "$INTLBISON" && break
+  test -n "$INTLBISON" && break
 done
 
     if test -z "$INTLBISON"; then
       ac_verc_fail=yes
     else
-            echo $ac_n "checking version of bison""... $ac_c" 1>&6
-echo "configure:7191: checking version of bison" >&5
+            echo "$as_me:$LINENO: checking version of bison" >&5
+echo $ECHO_N "checking version of bison... $ECHO_C" >&6
       ac_prog_version=`$INTLBISON --version 2>&1 | sed -n 's/^.*GNU Bison.* \([0-9]*\.[0-9.]*\).*$/\1/p'`
       case $ac_prog_version in
         '') ac_prog_version="v. ?.??, bad"; ac_verc_fail=yes;;
@@ -7209,7 +12342,8 @@
            ac_prog_version="$ac_prog_version, ok"; ac_verc_fail=no;;
         *) ac_prog_version="$ac_prog_version, bad"; ac_verc_fail=yes;;
       esac
-      echo "$ac_t""$ac_prog_version" 1>&6
+      echo "$as_me:$LINENO: result: $ac_prog_version" >&5
+echo "${ECHO_T}$ac_prog_version" >&6
     fi
     if test $ac_verc_fail = yes; then
       INTLBISON=:
@@ -7220,35 +12354,35 @@
       POFILES="$POFILES $lang.po"
     done
 
-        
-    
-    
-    
-    
-    
-    
-    
-    
+
+
+
+
+
+
+
+
+
 
         nls_cv_header_intl=
     nls_cv_header_libgt=
 
         DATADIRNAME=share
-    
+
 
         INSTOBJEXT=.mo
-    
+
 
         GENCAT=gencat
-    
-  
+
+
 
    if test "x$CATOBJEXT" != "x"; then
      if test "x$ALL_LINGUAS" = "x"; then
        LINGUAS=
      else
-       echo $ac_n "checking for catalogs to be installed""... $ac_c" 1>&6
-echo "configure:7238: checking for catalogs to be installed" >&5
+       echo "$as_me:$LINENO: checking for catalogs to be installed" >&5
+echo $ECHO_N "checking for catalogs to be installed... $ECHO_C" >&6
        NEW_LINGUAS=
        for presentlang in $ALL_LINGUAS; do
          useit=no
@@ -7267,7 +12401,8 @@
          fi
        done
        LINGUAS=$NEW_LINGUAS
-       echo "$ac_t""$LINGUAS" 1>&6
+       echo "$as_me:$LINENO: result: $LINGUAS" >&5
+echo "${ECHO_T}$LINGUAS" >&6
      fi
 
           if test -n "$LINGUAS"; then
@@ -7282,90 +12417,167 @@
    if test -z "$MKINSTALLDIRS"; then
      MKINSTALLDIRS="\$(top_srcdir)/mkinstalldirs"
    fi
-   
+
 
       INTL_LIBTOOL_SUFFIX_PREFIX=
-   
-  
-for ac_hdr in iconv.h
-do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:7281: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
-else
-  cat > conftest.$ac_ext <<EOF
-#line 7286 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7291: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+
+
+
+for ac_header in iconv.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
+  ac_cpp_err=yes
 fi
-rm -f conftest*
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- echo $ac_n "checking whether iconv.h defines iconv_t""... $ac_c" 1>&6
-echo "configure:7312: checking whether iconv.h defines iconv_t" >&5
-         cat > conftest.$ac_ext <<EOF
-#line 7314 "configure"
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+ echo "$as_me:$LINENO: checking whether iconv.h defines iconv_t" >&5
+echo $ECHO_N "checking whether iconv.h defines iconv_t... $ECHO_C" >&6
+         cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <iconv.h>
-EOF
+
+_ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "typedef.*iconv_t" >/dev/null 2>&1; then
-  rm -rf conftest*
-  echo "$ac_t""yes" 1>&6
-                 cat >> confdefs.h <<\EOF
+  echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_ICONV_T_DEF 1
-EOF
+_ACEOF
 
 else
-  rm -rf conftest*
-  echo "$ac_t""no" 1>&6
+  echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6
 fi
 rm -f conftest*
 
-else
-  echo "$ac_t""no" 1>&6
 fi
+
 done
 
 
 if test "$am_cv_func_iconv" != "yes"
 then
 #  AC_MSG_ERROR([Unable to find an iconv function. See INSTALL for help])
-  echo "configure: warning: Unable to find an iconv function. See INSTALL for help" 1>&2
+  { echo "$as_me:$LINENO: WARNING: Unable to find an iconv function. See INSTALL for help" >&5
+echo "$as_me: WARNING: Unable to find an iconv function. See INSTALL for help" >&2;}
 else
 
-echo $ac_n "checking whether this iconv is good enough""... $ac_c" 1>&6
-echo "configure:7345: checking whether this iconv is good enough" >&5
-if eval "test \"`echo '$''{'mutt_cv_iconv_good'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking whether this iconv is good enough" >&5
+echo $ECHO_N "checking whether this iconv is good enough... $ECHO_C" >&6
+if test "${mutt_cv_iconv_good+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   mutt_save_LIBS="$LIBS"
         LIBS="$LIBS $LIBICONV"
         if test "$cross_compiling" = yes; then
   mutt_cv_iconv_good=yes
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7355 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <iconv.h>
@@ -7381,40 +12593,51 @@
            !(ob == buf && obl == sizeof(buf)) ||
            iconv_close(cd)));
 }
-                
-EOF
-if { (eval echo configure:7373: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_iconv_good=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  mutt_cv_iconv_good=no
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+mutt_cv_iconv_good=no
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
         LIBS="$mutt_save_LIBS"
 fi
-
-echo "$ac_t""$mutt_cv_iconv_good" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_iconv_good" >&5
+echo "${ECHO_T}$mutt_cv_iconv_good" >&6
 if test "$mutt_cv_iconv_good" = no; then
-  { echo "configure: error: Try using libiconv instead" 1>&2; exit 1; }
+  { { echo "$as_me:$LINENO: error: Try using libiconv instead" >&5
+echo "$as_me: error: Try using libiconv instead" >&2;}
+   { (exit 1); exit 1; }; }
 fi
 
-echo $ac_n "checking whether iconv is non-transcribing""... $ac_c" 1>&6
-echo "configure:7394: checking whether iconv is non-transcribing" >&5
-if eval "test \"`echo '$''{'mutt_cv_iconv_nontrans'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking whether iconv is non-transcribing" >&5
+echo $ECHO_N "checking whether iconv is non-transcribing... $ECHO_C" >&6
+if test "${mutt_cv_iconv_nontrans+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   mutt_save_LIBS="$LIBS"
         LIBS="$LIBS $LIBICONV"
         if test "$cross_compiling" = yes; then
   mutt_cv_iconv_nontrans=no
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7404 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <iconv.h>
@@ -7431,33 +12654,42 @@
   return ((cd = iconv_open("UTF-8", "UTF-8")) == (iconv_t)(-1) ||
           iconv(cd, &ib, &ibl, &ob, &obl));
 }
-                
-EOF
-if { (eval echo configure:7423: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
-then
+
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_iconv_nontrans=no
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -fr conftest*
-  mutt_cv_iconv_nontrans=yes
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+mutt_cv_iconv_nontrans=yes
 fi
-rm -fr conftest*
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-
         LIBS="$mutt_save_LIBS"
 fi
-
-echo "$ac_t""$mutt_cv_iconv_nontrans" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_iconv_nontrans" >&5
+echo "${ECHO_T}$mutt_cv_iconv_nontrans" >&6
 if test "$mutt_cv_iconv_nontrans" = yes; then
-  cat >> confdefs.h <<\EOF
+  cat >>confdefs.h <<\_ACEOF
 #define ICONV_NONTRANS 1
-EOF
+_ACEOF
 
 else
-  cat >> confdefs.h <<\EOF
+  cat >>confdefs.h <<\_ACEOF
 #define ICONV_NONTRANS 0
-EOF
+_ACEOF
 
 fi
 
@@ -7466,117 +12698,213 @@
 CPPFLAGS="$CPPFLAGS -I\$(top_srcdir)/intl"
 
 if test "$BUILD_INCLUDED_LIBINTL" = "yes"; then
-  cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_BIND_TEXTDOMAIN_CODESET 1
-EOF
+_ACEOF
 
 else
-  for ac_func in bind_textdomain_codeset
+
+for ac_func in bind_textdomain_codeset
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7464: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7469 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:7492: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
 fi
 
 
-for ac_hdr in wchar.h
+
+for ac_header in wchar.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:7523: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7528 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7533: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "$ac_t""no" 1>&6
+  eval "$as_ac_Header=$ac_header_preproc"
 fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
 done
 
 
-echo $ac_n "checking for wchar_t""... $ac_c" 1>&6
-echo "configure:7561: checking for wchar_t" >&5
-if eval "test \"`echo '$''{'mutt_cv_wchar_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for wchar_t" >&5
+echo $ECHO_N "checking for wchar_t... $ECHO_C" >&6
+if test "${mutt_cv_wchar_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7566 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <stddef.h>
@@ -7584,39 +12912,59 @@
 #ifdef HAVE_WCHAR_H
 #include <wchar.h>
 #endif
-                
-int main() {
- wchar_t wc; return 0; 
-; return 0; }
-EOF
-if { (eval echo configure:7579: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+ wchar_t wc; return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_wchar_t=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  mutt_cv_wchar_t=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+mutt_cv_wchar_t=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-
-echo "$ac_t""$mutt_cv_wchar_t" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_wchar_t" >&5
+echo "${ECHO_T}$mutt_cv_wchar_t" >&6
 
 if test "$mutt_cv_wchar_t" = no; then
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define wchar_t int
-EOF
+_ACEOF
 
 fi
 
-echo $ac_n "checking for wint_t""... $ac_c" 1>&6
-echo "configure:7601: checking for wint_t" >&5
-if eval "test \"`echo '$''{'mutt_cv_wint_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for wint_t" >&5
+echo $ECHO_N "checking for wint_t... $ECHO_C" >&6
+if test "${mutt_cv_wint_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7606 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <stddef.h>
@@ -7624,245 +12972,412 @@
 #ifdef HAVE_WCHAR_H
 #include <wchar.h>
 #endif
-                
-int main() {
- wint_t wc; return 0; 
-; return 0; }
-EOF
-if { (eval echo configure:7619: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+ wint_t wc; return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_wint_t=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  mutt_cv_wint_t=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+mutt_cv_wint_t=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-
-echo "$ac_t""$mutt_cv_wint_t" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_wint_t" >&5
+echo "${ECHO_T}$mutt_cv_wint_t" >&6
 
 if test "$mutt_cv_wint_t" = no; then
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define wint_t int
-EOF
+_ACEOF
 
 fi
 
-for ac_hdr in wctype.h
+
+for ac_header in wctype.h
 do
-ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
-echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:7644: checking for $ac_hdr" >&5
-if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7649 "configure"
-#include "confdefs.h"
-#include <$ac_hdr>
-EOF
-ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7654: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
-ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
-if test -z "$ac_err"; then
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=yes"
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  echo "$ac_err" >&5
-  echo "configure: failed program was:" >&5
+  echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_header_$ac_safe=no"
-fi
-rm -f conftest*
+  ac_header_preproc=no
 fi
-if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_hdr 1
-EOF
- 
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  echo "$ac_t""no" 1>&6
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
 fi
+
 done
 
+
+
+
+
 for ac_func in iswalnum iswalpha  iswcntrl iswdigit
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7683: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7688 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:7711: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
+
+
+
+
+
+
 for ac_func in iswgraph iswlower iswprint iswpunct iswspace iswupper
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7738: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7743 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:7766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
+
+
+
 for ac_func in iswxdigit towupper towlower
 do
-echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7793: checking for $ac_func" >&5
-if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7798 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func(); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
 /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
-char $ac_func();
-
-int main() {
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+char (*f) ();
 
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
 #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-$ac_func();
+f = $ac_func;
 #endif
 
-; return 0; }
-EOF
-if { (eval echo configure:7821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=yes"
-else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  eval "ac_cv_func_$ac_func=no"
-fi
-rm -f conftest*
-fi
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_var=no"
+fi
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
-  echo "$ac_t""yes" 1>&6
-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
-  cat >> confdefs.h <<EOF
-#define $ac_tr_func 1
-EOF
- 
-else
-  echo "$ac_t""no" 1>&6
 fi
 done
 
 
-echo $ac_n "checking for mbstate_t""... $ac_c" 1>&6
-echo "configure:7847: checking for mbstate_t" >&5
-if eval "test \"`echo '$''{'mutt_cv_mbstate_t'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for mbstate_t" >&5
+echo $ECHO_N "checking for mbstate_t... $ECHO_C" >&6
+if test "${mutt_cv_mbstate_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7852 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #include <stddef.h>
@@ -7870,49 +13385,69 @@
 #ifdef HAVE_WCHAR_H
 #include <wchar.h>
 #endif
-                
-int main() {
- mbstate_t s; return 0; 
-; return 0; }
-EOF
-if { (eval echo configure:7865: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
-  rm -rf conftest*
+
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
+ mbstate_t s; return 0;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_mbstate_t=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  mutt_cv_mbstate_t=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+mutt_cv_mbstate_t=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-
-echo "$ac_t""$mutt_cv_mbstate_t" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_mbstate_t" >&5
+echo "${ECHO_T}$mutt_cv_mbstate_t" >&6
 
 if test "$mutt_cv_mbstate_t" = no; then
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define mbstate_t int
-EOF
+_ACEOF
 
 fi
 
 wc_funcs=maybe
+
 # Check whether --with-wc-funcs or --without-wc-funcs was given.
 if test "${with_wc_funcs+set}" = set; then
   withval="$with_wc_funcs"
   wc_funcs=$withval
-fi
-
+fi;
 
 if test "$wc_funcs" != yes -a "$wc_funcs" != no; then
-        echo $ac_n "checking for wchar_t functions""... $ac_c" 1>&6
-echo "configure:7896: checking for wchar_t functions" >&5
-if eval "test \"`echo '$''{'mutt_cv_wc_funcs'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+        echo "$as_me:$LINENO: checking for wchar_t functions" >&5
+echo $ECHO_N "checking for wchar_t functions... $ECHO_C" >&6
+if test "${mutt_cv_wc_funcs+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   mutt_cv_wc_funcs=no
-                cat > conftest.$ac_ext <<EOF
-#line 7902 "configure"
+                cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 
 #define _XOPEN_SOURCE 1
@@ -7924,533 +13459,1476 @@
 #ifdef HAVE_WCHAR_H
 #include <wchar.h>
 #endif
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 mbrtowc(0, 0, 0, 0); wctomb(0, 0); wcwidth(0);
         iswprint(0); iswspace(0); towlower(0); towupper(0); iswalnum(0)
-; return 0; }
-EOF
-if { (eval echo configure:7919: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_wc_funcs=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-
-echo "$ac_t""$mutt_cv_wc_funcs" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_wc_funcs" >&5
+echo "${ECHO_T}$mutt_cv_wc_funcs" >&6
         wc_funcs=$mutt_cv_wc_funcs
 fi
 
 if test $wc_funcs = yes; then
-        cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_WC_FUNCS 1
-EOF
+_ACEOF
 
 fi
 
-echo $ac_n "checking for nl_langinfo and CODESET""... $ac_c" 1>&6
-echo "configure:7941: checking for nl_langinfo and CODESET" >&5
-if eval "test \"`echo '$''{'mutt_cv_langinfo_codeset'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for nl_langinfo and CODESET" >&5
+echo $ECHO_N "checking for nl_langinfo and CODESET... $ECHO_C" >&6
+if test "${mutt_cv_langinfo_codeset+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7946 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <langinfo.h>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 char* cs = nl_langinfo(CODESET);
-; return 0; }
-EOF
-if { (eval echo configure:7953: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_langinfo_codeset=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  mutt_cv_langinfo_codeset=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+mutt_cv_langinfo_codeset=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-
-echo "$ac_t""$mutt_cv_langinfo_codeset" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_langinfo_codeset" >&5
+echo "${ECHO_T}$mutt_cv_langinfo_codeset" >&6
 if test $mutt_cv_langinfo_codeset = yes; then
-  cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_LANGINFO_CODESET 1
-EOF
+_ACEOF
 
 fi
 
-echo $ac_n "checking for nl_langinfo and YESEXPR""... $ac_c" 1>&6
-echo "configure:7974: checking for nl_langinfo and YESEXPR" >&5
-if eval "test \"`echo '$''{'mutt_cv_langinfo_yesexpr'+set}'`\" = set"; then
-  echo $ac_n "(cached) $ac_c" 1>&6
+echo "$as_me:$LINENO: checking for nl_langinfo and YESEXPR" >&5
+echo $ECHO_N "checking for nl_langinfo and YESEXPR... $ECHO_C" >&6
+if test "${mutt_cv_langinfo_yesexpr+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat > conftest.$ac_ext <<EOF
-#line 7979 "configure"
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
 #include "confdefs.h"
 #include <langinfo.h>
-int main() {
+#ifdef F77_DUMMY_MAIN
+#  ifdef __cplusplus
+     extern "C"
+#  endif
+   int F77_DUMMY_MAIN() { return 1; }
+#endif
+int
+main ()
+{
 char* cs = nl_langinfo(YESEXPR);
-; return 0; }
-EOF
-if { (eval echo configure:7986: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
-  rm -rf conftest*
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
   mutt_cv_langinfo_yesexpr=yes
 else
-  echo "configure: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  rm -rf conftest*
-  mutt_cv_langinfo_yesexpr=no
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+mutt_cv_langinfo_yesexpr=no
 fi
-rm -f conftest*
+rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-
-echo "$ac_t""$mutt_cv_langinfo_yesexpr" 1>&6
+echo "$as_me:$LINENO: result: $mutt_cv_langinfo_yesexpr" >&5
+echo "${ECHO_T}$mutt_cv_langinfo_yesexpr" >&6
 if test $mutt_cv_langinfo_yesexpr = yes; then
-  cat >> confdefs.h <<\EOF
+
+cat >>confdefs.h <<\_ACEOF
 #define HAVE_LANGINFO_YESEXPR 1
-EOF
+_ACEOF
 
 fi
 
-trap '' 1 2 15
-cat > confcache <<\EOF
+                                                                                                    ac_config_files="$ac_config_files Makefile intl/Makefile m4/Makefile po/Makefile.in doc/Makefile contrib/Makefile muttbug.sh imap/Makefile Muttrc.head doc/instdoc.sh"
+cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
-# scripts and configure runs.  It is not useful on other systems.
-# If it contains results you don't want to keep, you may remove or edit it.
+# scripts and configure runs, see configure's option --config-cache.
+# It is not useful on other systems.  If it contains results you don't
+# want to keep, you may remove or edit it.
 #
-# By default, configure uses ./config.cache as the cache file,
-# creating it if it does not exist already.  You can give configure
-# the --cache-file=FILE option to use a different cache file; that is
-# what configure does when it calls configure scripts in
-# subdirectories, so they share the cache.
-# Giving --cache-file=/dev/null disables caching, for debugging configure.
-# config.status only pays attention to the cache file if you give it the
-# --recheck option to rerun configure.
+# config.status only pays attention to the cache file if you give it
+# the --recheck option to rerun configure.
 #
-EOF
+# `ac_cv_env_foo' variables (set or unset) will be overridden when
+# loading this file, other *unset* `ac_cv_foo' will be assigned the
+# following values.
+
+_ACEOF
+
 # The following way of writing the cache mishandles newlines in values,
 # but we know of no workaround that is simple, portable, and efficient.
 # So, don't put newlines in cache variables' values.
 # Ultrix sh set writes to stderr and can't be redirected directly,
 # and sets the high bit in the cache file unless we assign to the vars.
-(set) 2>&1 |
-  case `(ac_space=' '; set | grep ac_space) 2>&1` in
-  *ac_space=\ *)
-    # `set' does not quote correctly, so add quotes (double-quote substitution
-    # turns \\\\ into \\, and sed turns \\ into \).
-    sed -n \
-      -e "s/'/'\\\\''/g" \
-      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
-    ;;
-  *)
-    # `set' quotes correctly as required by POSIX, so do not add quotes.
-    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
-    ;;
-  esac >> confcache
-if cmp -s $cache_file confcache; then
-  :
-else
+{
+  (set) 2>&1 |
+    case `(ac_space=' '; set | grep ac_space) 2>&1` in
+    *ac_space=\ *)
+      # `set' does not quote correctly, so add quotes (double-quote
+      # substitution turns \\\\ into \\, and sed turns \\ into \).
+      sed -n \
+        "s/'/'\\\\''/g;
+    	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+      ;;
+    *)
+      # `set' quotes correctly as required by POSIX, so do not add quotes.
+      sed -n \
+        "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+      ;;
+    esac;
+} |
+  sed '
+     t clear
+     : clear
+     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     t end
+     /^ac_cv_env/!s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
+     : end' >>confcache
+if cmp -s $cache_file confcache; then :; else
   if test -w $cache_file; then
-    echo "updating cache $cache_file"
-    cat confcache > $cache_file
+    test "x$cache_file" != "x/dev/null" && echo "updating cache $cache_file"
+    cat confcache >$cache_file
   else
     echo "not updating unwritable cache $cache_file"
   fi
 fi
 rm -f confcache
 
-trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15
-
 test "x$prefix" = xNONE && prefix=$ac_default_prefix
 # Let make expand exec_prefix.
 test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
 
-# Any assignment to VPATH causes Sun make to only execute
-# the first set of double-colon rules, so remove it if not needed.
-# If there is a colon in the path, we need to keep it.
+# VPATH may cause trouble with some makes, so we remove $(srcdir),
+# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# trailing colons and then remove the whole line if VPATH becomes empty
+# (actually we leave an empty line to preserve line numbers).
 if test "x$srcdir" = x.; then
-  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
+  ac_vpsub='/^[ 	]*VPATH[ 	]*=/{
+s/:*\$(srcdir):*/:/;
+s/:*\${srcdir}:*/:/;
+s/:*@srcdir@:*/:/;
+s/^\([^=]*=[ 	]*\):*/\1/;
+s/:*$//;
+s/^[^=]*=[ 	]*$//;
+}'
 fi
 
-trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15
-
 DEFS=-DHAVE_CONFIG_H
 
-# Without the "./", some shells look in PATH for config.status.
-: ${CONFIG_STATUS=./config.status}
+if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"AMDEP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"AMDEP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+if test -z "${BUILD_IMAP_TRUE}" && test -z "${BUILD_IMAP_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_IMAP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_IMAP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+if test -z "${USE_GSS_TRUE}" && test -z "${USE_GSS_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"USE_GSS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"USE_GSS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+if test -z "${USE_SSL_TRUE}" && test -z "${USE_SSL_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"USE_SSL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"USE_SSL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
+if test -z "${USE_SASL_TRUE}" && test -z "${USE_SASL_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"USE_SASL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"USE_SASL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 
-echo creating $CONFIG_STATUS
-rm -f $CONFIG_STATUS
-cat > $CONFIG_STATUS <<EOF
-#! /bin/sh
-# Generated automatically by configure.
+: ${CONFIG_STATUS=./config.status}
+ac_clean_files_save=$ac_clean_files
+ac_clean_files="$ac_clean_files $CONFIG_STATUS"
+{ echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
+echo "$as_me: creating $CONFIG_STATUS" >&6;}
+cat >$CONFIG_STATUS <<_ACEOF
+#! $SHELL
+# Generated by $as_me.
 # Run this file to recreate the current configuration.
-# This directory was configured as follows,
-# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
-#
-# $0 $ac_configure_args
-#
 # Compiler output produced by configure, useful for debugging
-# configure, is in ./config.log if it exists.
+# configure, is in config.log if it exists.
 
-ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
-for ac_option
+debug=false
+SHELL=\${CONFIG_SHELL-$SHELL}
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+## --------------------- ##
+## M4sh Initialization.  ##
+## --------------------- ##
+
+# Be Bourne compatible
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+  emulate sh
+  NULLCMD=:
+  # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
+  # is contrary to our usage.  Disable this feature.
+  alias -g '${1+"$@"}'='"$@"'
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+  set -o posix
+fi
+
+# NLS nuisances.
+# Support unset when possible.
+if (FOO=FOO; unset FOO) >/dev/null 2>&1; then
+  as_unset=unset
+else
+  as_unset=false
+fi
+
+(set +x; test -n "`(LANG=C; export LANG) 2>&1`") &&
+    { $as_unset LANG || test "${LANG+set}" != set; } ||
+      { LANG=C; export LANG; }
+(set +x; test -n "`(LC_ALL=C; export LC_ALL) 2>&1`") &&
+    { $as_unset LC_ALL || test "${LC_ALL+set}" != set; } ||
+      { LC_ALL=C; export LC_ALL; }
+(set +x; test -n "`(LC_TIME=C; export LC_TIME) 2>&1`") &&
+    { $as_unset LC_TIME || test "${LC_TIME+set}" != set; } ||
+      { LC_TIME=C; export LC_TIME; }
+(set +x; test -n "`(LC_CTYPE=C; export LC_CTYPE) 2>&1`") &&
+    { $as_unset LC_CTYPE || test "${LC_CTYPE+set}" != set; } ||
+      { LC_CTYPE=C; export LC_CTYPE; }
+(set +x; test -n "`(LANGUAGE=C; export LANGUAGE) 2>&1`") &&
+    { $as_unset LANGUAGE || test "${LANGUAGE+set}" != set; } ||
+      { LANGUAGE=C; export LANGUAGE; }
+(set +x; test -n "`(LC_COLLATE=C; export LC_COLLATE) 2>&1`") &&
+    { $as_unset LC_COLLATE || test "${LC_COLLATE+set}" != set; } ||
+      { LC_COLLATE=C; export LC_COLLATE; }
+(set +x; test -n "`(LC_NUMERIC=C; export LC_NUMERIC) 2>&1`") &&
+    { $as_unset LC_NUMERIC || test "${LC_NUMERIC+set}" != set; } ||
+      { LC_NUMERIC=C; export LC_NUMERIC; }
+(set +x; test -n "`(LC_MESSAGES=C; export LC_MESSAGES) 2>&1`") &&
+    { $as_unset LC_MESSAGES || test "${LC_MESSAGES+set}" != set; } ||
+      { LC_MESSAGES=C; export LC_MESSAGES; }
+
+
+# Required to use basename.
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+if (basename /) >/dev/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
+  as_basename=basename
+else
+  as_basename=false
+fi
+
+
+# Name of the executable.
+as_me=`$as_basename "$0" ||
+$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+	 X"$0" : 'X\(//\)$' \| \
+	 X"$0" : 'X\(/\)$' \| \
+	 .     : '\(.\)' 2>/dev/null ||
+echo X/"$0" |
+    sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
+  	  /^X\/\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\/\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+
+
+# PATH needs CR, and LINENO needs CR and PATH.
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# The user is always right.
+if test "${PATH_SEPARATOR+set}" != set; then
+  echo "#! /bin/sh" >conftest.sh
+  echo  "exit 0"   >>conftest.sh
+  chmod +x conftest.sh
+  if (PATH=".;."; conftest.sh) >/dev/null 2>&1; then
+    PATH_SEPARATOR=';'
+  else
+    PATH_SEPARATOR=:
+  fi
+  rm -f conftest.sh
+fi
+
+
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2"  || {
+  # Find who we are.  Look in the path if we contain no path at all
+  # relative or not.
+  case $0 in
+    *[\\/]* ) as_myself=$0 ;;
+    *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+done
+
+       ;;
+  esac
+  # We did not find ourselves, most probably we were run as `sh COMMAND'
+  # in which case we are not to be found in the path.
+  if test "x$as_myself" = x; then
+    as_myself=$0
+  fi
+  if test ! -f "$as_myself"; then
+    { { echo "$as_me:$LINENO: error: cannot find myself; rerun with an absolute path" >&5
+echo "$as_me: error: cannot find myself; rerun with an absolute path" >&2;}
+   { (exit 1); exit 1; }; }
+  fi
+  case $CONFIG_SHELL in
+  '')
+    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+do
+  IFS=$as_save_IFS
+  test -z "$as_dir" && as_dir=.
+  for as_base in sh bash ksh sh5; do
+	 case $as_dir in
+	 /*)
+	   if ("$as_dir/$as_base" -c '
+  as_lineno_1=$LINENO
+  as_lineno_2=$LINENO
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  test "x$as_lineno_1" != "x$as_lineno_2" &&
+  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+	     $as_unset BASH_ENV || test "${BASH_ENV+set}" != set || { BASH_ENV=; export BASH_ENV; }
+	     $as_unset ENV || test "${ENV+set}" != set || { ENV=; export ENV; }
+	     CONFIG_SHELL=$as_dir/$as_base
+	     export CONFIG_SHELL
+	     exec "$CONFIG_SHELL" "$0" ${1+"$@"}
+	   fi;;
+	 esac
+       done
+done
+;;
+  esac
+
+  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+  # uniformly replaced by the line number.  The first 'sed' inserts a
+  # line-number line before each line; the second 'sed' does the real
+  # work.  The second script uses 'N' to pair each line-number line
+  # with the numbered line, and appends trailing '-' during
+  # substitution so that $LINENO is not a special case at line end.
+  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+  # second 'sed' script.  Blame Lee E. McMahon for sed's syntax.  :-)
+  sed '=' <$as_myself |
+    sed '
+      N
+      s,$,-,
+      : loop
+      s,^\(['$as_cr_digits']*\)\(.*\)[$]LINENO\([^'$as_cr_alnum'_]\),\1\2\1\3,
+      t loop
+      s,-$,,
+      s,^['$as_cr_digits']*\n,,
+    ' >$as_me.lineno &&
+  chmod +x $as_me.lineno ||
+    { { echo "$as_me:$LINENO: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&5
+echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2;}
+   { (exit 1); exit 1; }; }
+
+  # Don't try to exec as it changes $[0], causing all sort of problems
+  # (the dirname of $[0] is not the place where we might find the
+  # original and so on.  Autoconf is especially sensible to this).
+  . ./$as_me.lineno
+  # Exit status is that of the last command.
+  exit
+}
+
+
+case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
+  *c*,-n*) ECHO_N= ECHO_C='
+' ECHO_T='	' ;;
+  *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
+  *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
+esac
+
+if expr a : '\(a\)' >/dev/null 2>&1; then
+  as_expr=expr
+else
+  as_expr=false
+fi
+
+rm -f conf$$ conf$$.exe conf$$.file
+echo >conf$$.file
+if ln -s conf$$.file conf$$ 2>/dev/null; then
+  # We could just check for DJGPP; but this test a) works b) is more generic
+  # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
+  if test -f conf$$.exe; then
+    # Don't use ln at all; we don't have any links
+    as_ln_s='cp -p'
+  else
+    as_ln_s='ln -s'
+  fi
+elif ln conf$$.file conf$$ 2>/dev/null; then
+  as_ln_s=ln
+else
+  as_ln_s='cp -p'
+fi
+rm -f conf$$ conf$$.exe conf$$.file
+
+if mkdir -p . 2>/dev/null; then
+  as_mkdir_p=:
+else
+  as_mkdir_p=false
+fi
+
+as_executable_p="test -f"
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="sed y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g"
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="sed y%*+%pp%;s%[^_$as_cr_alnum]%_%g"
+
+
+# IFS
+# We need space, tab and new line, in precisely that order.
+as_nl='
+'
+IFS=" 	$as_nl"
+
+# CDPATH.
+$as_unset CDPATH || test "${CDPATH+set}" != set || { CDPATH=$PATH_SEPARATOR; export CDPATH; }
+
+exec 6>&1
+
+# Open the log real soon, to keep \$[0] and so on meaningful, and to
+# report actual input values of CONFIG_FILES etc. instead of their
+# values after options handling.  Logging --version etc. is OK.
+exec 5>>config.log
+{
+  echo
+  sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
+## Running $as_me. ##
+_ASBOX
+} >&5
+cat >&5 <<_CSEOF
+
+This file was extended by $as_me, which was
+generated by GNU Autoconf 2.53a.  Invocation command line was
+
+  CONFIG_FILES    = $CONFIG_FILES
+  CONFIG_HEADERS  = $CONFIG_HEADERS
+  CONFIG_LINKS    = $CONFIG_LINKS
+  CONFIG_COMMANDS = $CONFIG_COMMANDS
+  $ $0 $@
+
+_CSEOF
+echo "on `(hostname || uname -n) 2>/dev/null | sed 1q`" >&5
+echo >&5
+_ACEOF
+
+# Files that config.status was made for.
+if test -n "$ac_config_files"; then
+  echo "config_files=\"$ac_config_files\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_headers"; then
+  echo "config_headers=\"$ac_config_headers\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_links"; then
+  echo "config_links=\"$ac_config_links\"" >>$CONFIG_STATUS
+fi
+
+if test -n "$ac_config_commands"; then
+  echo "config_commands=\"$ac_config_commands\"" >>$CONFIG_STATUS
+fi
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+ac_cs_usage="\
+\`$as_me' instantiates files from templates according to the
+current configuration.
+
+Usage: $0 [OPTIONS] [FILE]...
+
+  -h, --help       print this help, then exit
+  -V, --version    print version number, then exit
+  -d, --debug      don't remove temporary files
+      --recheck    update $as_me by reconfiguring in the same conditions
+  --file=FILE[:TEMPLATE]
+                   instantiate the configuration file FILE
+  --header=FILE[:TEMPLATE]
+                   instantiate the configuration header FILE
+
+Configuration files:
+$config_files
+
+Configuration headers:
+$config_headers
+
+Configuration commands:
+$config_commands
+
+Report bugs to <bug-autoconf@gnu.org>."
+_ACEOF
+
+cat >>$CONFIG_STATUS <<_ACEOF
+ac_cs_version="\\
+config.status
+configured by $0, generated by GNU Autoconf 2.53a,
+  with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
+
+Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
+Free Software Foundation, Inc.
+This config.status script is free software; the Free Software Foundation
+gives unlimited permission to copy, distribute and modify it."
+srcdir=$srcdir
+INSTALL="$INSTALL"
+_ACEOF
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+# If no file are specified by the user, then we need to provide default
+# value.  By we need to know if files were specified by the user.
+ac_need_defaults=:
+while test $# != 0
 do
-  case "\$ac_option" in
+  case $1 in
+  --*=*)
+    ac_option=`expr "x$1" : 'x\([^=]*\)='`
+    ac_optarg=`expr "x$1" : 'x[^=]*=\(.*\)'`
+    ac_shift=:
+    ;;
+  -*)
+    ac_option=$1
+    ac_optarg=$2
+    ac_shift=shift
+    ;;
+  *) # This is not an option, so the user has probably given explicit
+     # arguments.
+     ac_option=$1
+     ac_need_defaults=false;;
+  esac
+
+  case $ac_option in
+  # Handling of the options.
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
-    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
-    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
-  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
-    echo "$CONFIG_STATUS generated by autoconf version 2.13"
-    exit 0 ;;
-  -help | --help | --hel | --he | --h)
-    echo "\$ac_cs_usage"; exit 0 ;;
-  *) echo "\$ac_cs_usage"; exit 1 ;;
+    echo "running $SHELL $0 " $ac_configure_args " --no-create --no-recursion"
+    exec $SHELL $0 $ac_configure_args --no-create --no-recursion ;;
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+  --version | --vers* | -V )
+    echo "$ac_cs_version"; exit 0 ;;
+  --he | --h)
+    # Conflict between --help and --header
+    { { echo "$as_me:$LINENO: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: ambiguous option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; };;
+  --help | --hel | -h )
+    echo "$ac_cs_usage"; exit 0 ;;
+  --debug | --d* | -d )
+    debug=: ;;
+  --file | --fil | --fi | --f )
+    $ac_shift
+    CONFIG_FILES="$CONFIG_FILES $ac_optarg"
+    ac_need_defaults=false;;
+  --header | --heade | --head | --hea )
+    $ac_shift
+    CONFIG_HEADERS="$CONFIG_HEADERS $ac_optarg"
+    ac_need_defaults=false;;
+
+  # This is an error.
+  -*) { { echo "$as_me:$LINENO: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&5
+echo "$as_me: error: unrecognized option: $1
+Try \`$0 --help' for more information." >&2;}
+   { (exit 1); exit 1; }; } ;;
+
+  *) ac_config_targets="$ac_config_targets $1" ;;
+
   esac
+  shift
 done
 
-ac_given_srcdir=$srcdir
-ac_given_INSTALL="$INSTALL"
+_ACEOF
 
-trap 'rm -fr `echo "Makefile intl/Makefile m4/Makefile
-        po/Makefile.in doc/Makefile contrib/Makefile
-        muttbug.sh
-        imap/Makefile
-        Muttrc.head
-        doc/instdoc.sh config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
-EOF
-cat >> $CONFIG_STATUS <<EOF
-
-# Protect against being on the right side of a sed subst in config.status.
-sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
- s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
-$ac_vpsub
-$extrasub
-s%@SHELL@%$SHELL%g
-s%@CFLAGS@%$CFLAGS%g
-s%@CPPFLAGS@%$CPPFLAGS%g
-s%@CXXFLAGS@%$CXXFLAGS%g
-s%@FFLAGS@%$FFLAGS%g
-s%@DEFS@%$DEFS%g
-s%@LDFLAGS@%$LDFLAGS%g
-s%@LIBS@%$LIBS%g
-s%@exec_prefix@%$exec_prefix%g
-s%@prefix@%$prefix%g
-s%@program_transform_name@%$program_transform_name%g
-s%@bindir@%$bindir%g
-s%@sbindir@%$sbindir%g
-s%@libexecdir@%$libexecdir%g
-s%@datadir@%$datadir%g
-s%@sysconfdir@%$sysconfdir%g
-s%@sharedstatedir@%$sharedstatedir%g
-s%@localstatedir@%$localstatedir%g
-s%@libdir@%$libdir%g
-s%@includedir@%$includedir%g
-s%@oldincludedir@%$oldincludedir%g
-s%@infodir@%$infodir%g
-s%@mandir@%$mandir%g
-s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
-s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g
-s%@INSTALL_DATA@%$INSTALL_DATA%g
-s%@PACKAGE@%$PACKAGE%g
-s%@VERSION@%$VERSION%g
-s%@ACLOCAL@%$ACLOCAL%g
-s%@AUTOCONF@%$AUTOCONF%g
-s%@AUTOMAKE@%$AUTOMAKE%g
-s%@AUTOHEADER@%$AUTOHEADER%g
-s%@MAKEINFO@%$MAKEINFO%g
-s%@SET_MAKE@%$SET_MAKE%g
-s%@host@%$host%g
-s%@host_alias@%$host_alias%g
-s%@host_cpu@%$host_cpu%g
-s%@host_vendor@%$host_vendor%g
-s%@host_os@%$host_os%g
-s%@CC@%$CC%g
-s%@CPP@%$CPP%g
-s%@U@%$U%g
-s%@ANSI2KNR@%$ANSI2KNR%g
-s%@RANLIB@%$RANLIB%g
-s%@build@%$build%g
-s%@build_alias@%$build_alias%g
-s%@build_cpu@%$build_cpu%g
-s%@build_vendor@%$build_vendor%g
-s%@build_os@%$build_os%g
-s%@AR@%$AR%g
-s%@DBX@%$DBX%g
-s%@GDB@%$GDB%g
-s%@SDB@%$SDB%g
-s%@DEBUGGER@%$DEBUGGER%g
-s%@SENDMAIL@%$SENDMAIL%g
-s%@OPS@%$OPS%g
-s%@PGPAUX_TARGET@%$PGPAUX_TARGET%g
-s%@SUBVERSION@%$SUBVERSION%g
-s%@ISPELL@%$ISPELL%g
-s%@LIBOBJS@%$LIBOBJS%g
-s%@DOTLOCK_TARGET@%$DOTLOCK_TARGET%g
-s%@docdir@%$docdir%g
-s%@DOTLOCK_GROUP@%$DOTLOCK_GROUP%g
-s%@DOTLOCK_PERMISSION@%$DOTLOCK_PERMISSION%g
-s%@BUILD_IMAP_TRUE@%$BUILD_IMAP_TRUE%g
-s%@BUILD_IMAP_FALSE@%$BUILD_IMAP_FALSE%g
-s%@KRB5CFGPATH@%$KRB5CFGPATH%g
-s%@USE_GSS_TRUE@%$USE_GSS_TRUE%g
-s%@USE_GSS_FALSE@%$USE_GSS_FALSE%g
-s%@USE_SSL_TRUE@%$USE_SSL_TRUE%g
-s%@USE_SSL_FALSE@%$USE_SSL_FALSE%g
-s%@USE_SASL_TRUE@%$USE_SASL_TRUE%g
-s%@USE_SASL_FALSE@%$USE_SASL_FALSE%g
-s%@MUTTLIBS@%$MUTTLIBS%g
-s%@MUTT_LIB_OBJECTS@%$MUTT_LIB_OBJECTS%g
-s%@LIBIMAP@%$LIBIMAP%g
-s%@LIBIMAPDEPS@%$LIBIMAPDEPS%g
-s%@ALLOCA@%$ALLOCA%g
-s%@GLIBC21@%$GLIBC21%g
-s%@LIBICONV@%$LIBICONV%g
-s%@USE_NLS@%$USE_NLS%g
-s%@MSGFMT@%$MSGFMT%g
-s%@GMSGFMT@%$GMSGFMT%g
-s%@XGETTEXT@%$XGETTEXT%g
-s%@INTLBISON@%$INTLBISON%g
-s%@BUILD_INCLUDED_LIBINTL@%$BUILD_INCLUDED_LIBINTL%g
-s%@USE_INCLUDED_LIBINTL@%$USE_INCLUDED_LIBINTL%g
-s%@CATALOGS@%$CATALOGS%g
-s%@CATOBJEXT@%$CATOBJEXT%g
-s%@GMOFILES@%$GMOFILES%g
-s%@INTLLIBS@%$INTLLIBS%g
-s%@INTLOBJS@%$INTLOBJS%g
-s%@POFILES@%$POFILES%g
-s%@POSUB@%$POSUB%g
-s%@DATADIRNAME@%$DATADIRNAME%g
-s%@INSTOBJEXT@%$INSTOBJEXT%g
-s%@GENCAT@%$GENCAT%g
-s%@MKINSTALLDIRS@%$MKINSTALLDIRS%g
-s%@INTL_LIBTOOL_SUFFIX_PREFIX@%$INTL_LIBTOOL_SUFFIX_PREFIX%g
+cat >>$CONFIG_STATUS <<_ACEOF
+#
+# INIT-COMMANDS section.
+#
+
+AMDEP_TRUE="$AMDEP_TRUE" ac_aux_dir="$ac_aux_dir"
+
+
+_ACEOF
+
+
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+for ac_config_target in $ac_config_targets
+do
+  case "$ac_config_target" in
+  # Handling of arguments.
+  "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
+  "intl/Makefile" ) CONFIG_FILES="$CONFIG_FILES intl/Makefile" ;;
+  "m4/Makefile" ) CONFIG_FILES="$CONFIG_FILES m4/Makefile" ;;
+  "po/Makefile.in" ) CONFIG_FILES="$CONFIG_FILES po/Makefile.in" ;;
+  "doc/Makefile" ) CONFIG_FILES="$CONFIG_FILES doc/Makefile" ;;
+  "contrib/Makefile" ) CONFIG_FILES="$CONFIG_FILES contrib/Makefile" ;;
+  "muttbug.sh" ) CONFIG_FILES="$CONFIG_FILES muttbug.sh" ;;
+  "imap/Makefile" ) CONFIG_FILES="$CONFIG_FILES imap/Makefile" ;;
+  "Muttrc.head" ) CONFIG_FILES="$CONFIG_FILES Muttrc.head" ;;
+  "doc/instdoc.sh" ) CONFIG_FILES="$CONFIG_FILES doc/instdoc.sh" ;;
+  "depfiles" ) CONFIG_COMMANDS="$CONFIG_COMMANDS depfiles" ;;
+  "default-1" ) CONFIG_COMMANDS="$CONFIG_COMMANDS default-1" ;;
+  "config.h" ) CONFIG_HEADERS="$CONFIG_HEADERS config.h" ;;
+  *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
+echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# If the user did not use the arguments to specify the items to instantiate,
+# then the envvar interface is used.  Set only those that are not.
+# We use the long form for the default assignment because of an extremely
+# bizarre bug on SunOS 4.1.3.
+if $ac_need_defaults; then
+  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
+  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
+  test "${CONFIG_COMMANDS+set}" = set || CONFIG_COMMANDS=$config_commands
+fi
+
+# Create a temporary directory, and hook for its removal unless debugging.
+$debug ||
+{
+  trap 'exit_status=$?; rm -rf $tmp && exit $exit_status' 0
+  trap '{ (exit 1); exit 1; }' 1 2 13 15
+}
+
+# Create a (secure) tmp directory for tmp files.
+: ${TMPDIR=/tmp}
+{
+  tmp=`(umask 077 && mktemp -d -q "$TMPDIR/csXXXXXX") 2>/dev/null` &&
+  test -n "$tmp" && test -d "$tmp"
+}  ||
+{
+  tmp=$TMPDIR/cs$$-$RANDOM
+  (umask 077 && mkdir $tmp)
+} ||
+{
+   echo "$me: cannot create a temporary directory in $TMPDIR" >&2
+   { (exit 1); exit 1; }
+}
+
+_ACEOF
+
+cat >>$CONFIG_STATUS <<_ACEOF
+
+#
+# CONFIG_FILES section.
+#
 
+# No need to generate the scripts if there are no CONFIG_FILES.
+# This happens for instance when ./config.status config.h
+if test -n "\$CONFIG_FILES"; then
+  # Protect against being on the right side of a sed subst in config.status.
+  sed 's/,@/@@/; s/@,/@@/; s/,;t t\$/@;t t/; /@;t t\$/s/[\\\\&,]/\\\\&/g;
+   s/@@/,@/; s/@@/@,/; s/@;t t\$/,;t t/' >\$tmp/subs.sed <<\\CEOF
+s,@SHELL@,$SHELL,;t t
+s,@PATH_SEPARATOR@,$PATH_SEPARATOR,;t t
+s,@PACKAGE_NAME@,$PACKAGE_NAME,;t t
+s,@PACKAGE_TARNAME@,$PACKAGE_TARNAME,;t t
+s,@PACKAGE_VERSION@,$PACKAGE_VERSION,;t t
+s,@PACKAGE_STRING@,$PACKAGE_STRING,;t t
+s,@PACKAGE_BUGREPORT@,$PACKAGE_BUGREPORT,;t t
+s,@exec_prefix@,$exec_prefix,;t t
+s,@prefix@,$prefix,;t t
+s,@program_transform_name@,$program_transform_name,;t t
+s,@bindir@,$bindir,;t t
+s,@sbindir@,$sbindir,;t t
+s,@libexecdir@,$libexecdir,;t t
+s,@datadir@,$datadir,;t t
+s,@sysconfdir@,$sysconfdir,;t t
+s,@sharedstatedir@,$sharedstatedir,;t t
+s,@localstatedir@,$localstatedir,;t t
+s,@libdir@,$libdir,;t t
+s,@includedir@,$includedir,;t t
+s,@oldincludedir@,$oldincludedir,;t t
+s,@infodir@,$infodir,;t t
+s,@mandir@,$mandir,;t t
+s,@build_alias@,$build_alias,;t t
+s,@host_alias@,$host_alias,;t t
+s,@target_alias@,$target_alias,;t t
+s,@DEFS@,$DEFS,;t t
+s,@ECHO_C@,$ECHO_C,;t t
+s,@ECHO_N@,$ECHO_N,;t t
+s,@ECHO_T@,$ECHO_T,;t t
+s,@LIBS@,$LIBS,;t t
+s,@INSTALL_PROGRAM@,$INSTALL_PROGRAM,;t t
+s,@INSTALL_SCRIPT@,$INSTALL_SCRIPT,;t t
+s,@INSTALL_DATA@,$INSTALL_DATA,;t t
+s,@PACKAGE@,$PACKAGE,;t t
+s,@VERSION@,$VERSION,;t t
+s,@ACLOCAL@,$ACLOCAL,;t t
+s,@AUTOCONF@,$AUTOCONF,;t t
+s,@AUTOMAKE@,$AUTOMAKE,;t t
+s,@AUTOHEADER@,$AUTOHEADER,;t t
+s,@MAKEINFO@,$MAKEINFO,;t t
+s,@AMTAR@,$AMTAR,;t t
+s,@install_sh@,$install_sh,;t t
+s,@STRIP@,$STRIP,;t t
+s,@ac_ct_STRIP@,$ac_ct_STRIP,;t t
+s,@INSTALL_STRIP_PROGRAM@,$INSTALL_STRIP_PROGRAM,;t t
+s,@AWK@,$AWK,;t t
+s,@SET_MAKE@,$SET_MAKE,;t t
+s,@build@,$build,;t t
+s,@build_cpu@,$build_cpu,;t t
+s,@build_vendor@,$build_vendor,;t t
+s,@build_os@,$build_os,;t t
+s,@host@,$host,;t t
+s,@host_cpu@,$host_cpu,;t t
+s,@host_vendor@,$host_vendor,;t t
+s,@host_os@,$host_os,;t t
+s,@CC@,$CC,;t t
+s,@CFLAGS@,$CFLAGS,;t t
+s,@LDFLAGS@,$LDFLAGS,;t t
+s,@CPPFLAGS@,$CPPFLAGS,;t t
+s,@ac_ct_CC@,$ac_ct_CC,;t t
+s,@EXEEXT@,$EXEEXT,;t t
+s,@OBJEXT@,$OBJEXT,;t t
+s,@DEPDIR@,$DEPDIR,;t t
+s,@am__include@,$am__include,;t t
+s,@am__quote@,$am__quote,;t t
+s,@AMDEP_TRUE@,$AMDEP_TRUE,;t t
+s,@AMDEP_FALSE@,$AMDEP_FALSE,;t t
+s,@AMDEPBACKSLASH@,$AMDEPBACKSLASH,;t t
+s,@CCDEPMODE@,$CCDEPMODE,;t t
+s,@CPP@,$CPP,;t t
+s,@U@,$U,;t t
+s,@ANSI2KNR@,$ANSI2KNR,;t t
+s,@RANLIB@,$RANLIB,;t t
+s,@ac_ct_RANLIB@,$ac_ct_RANLIB,;t t
+s,@AR@,$AR,;t t
+s,@ac_ct_AR@,$ac_ct_AR,;t t
+s,@DBX@,$DBX,;t t
+s,@GDB@,$GDB,;t t
+s,@SDB@,$SDB,;t t
+s,@DEBUGGER@,$DEBUGGER,;t t
+s,@SENDMAIL@,$SENDMAIL,;t t
+s,@OPS@,$OPS,;t t
+s,@PGPAUX_TARGET@,$PGPAUX_TARGET,;t t
+s,@SUBVERSION@,$SUBVERSION,;t t
+s,@ISPELL@,$ISPELL,;t t
+s,@LIBOBJS@,$LIBOBJS,;t t
+s,@DOTLOCK_TARGET@,$DOTLOCK_TARGET,;t t
+s,@docdir@,$docdir,;t t
+s,@DOTLOCK_GROUP@,$DOTLOCK_GROUP,;t t
+s,@DOTLOCK_PERMISSION@,$DOTLOCK_PERMISSION,;t t
+s,@BUILD_IMAP_TRUE@,$BUILD_IMAP_TRUE,;t t
+s,@BUILD_IMAP_FALSE@,$BUILD_IMAP_FALSE,;t t
+s,@KRB5CFGPATH@,$KRB5CFGPATH,;t t
+s,@USE_GSS_TRUE@,$USE_GSS_TRUE,;t t
+s,@USE_GSS_FALSE@,$USE_GSS_FALSE,;t t
+s,@USE_SSL_TRUE@,$USE_SSL_TRUE,;t t
+s,@USE_SSL_FALSE@,$USE_SSL_FALSE,;t t
+s,@USE_SASL_TRUE@,$USE_SASL_TRUE,;t t
+s,@USE_SASL_FALSE@,$USE_SASL_FALSE,;t t
+s,@MUTTLIBS@,$MUTTLIBS,;t t
+s,@MUTT_LIB_OBJECTS@,$MUTT_LIB_OBJECTS,;t t
+s,@LIBIMAP@,$LIBIMAP,;t t
+s,@LIBIMAPDEPS@,$LIBIMAPDEPS,;t t
+s,@ALLOCA@,$ALLOCA,;t t
+s,@GLIBC21@,$GLIBC21,;t t
+s,@LIBICONV@,$LIBICONV,;t t
+s,@USE_NLS@,$USE_NLS,;t t
+s,@MSGFMT@,$MSGFMT,;t t
+s,@GMSGFMT@,$GMSGFMT,;t t
+s,@XGETTEXT@,$XGETTEXT,;t t
+s,@INTLBISON@,$INTLBISON,;t t
+s,@BUILD_INCLUDED_LIBINTL@,$BUILD_INCLUDED_LIBINTL,;t t
+s,@USE_INCLUDED_LIBINTL@,$USE_INCLUDED_LIBINTL,;t t
+s,@CATALOGS@,$CATALOGS,;t t
+s,@CATOBJEXT@,$CATOBJEXT,;t t
+s,@GMOFILES@,$GMOFILES,;t t
+s,@INTLLIBS@,$INTLLIBS,;t t
+s,@INTLOBJS@,$INTLOBJS,;t t
+s,@POFILES@,$POFILES,;t t
+s,@POSUB@,$POSUB,;t t
+s,@DATADIRNAME@,$DATADIRNAME,;t t
+s,@INSTOBJEXT@,$INSTOBJEXT,;t t
+s,@GENCAT@,$GENCAT,;t t
+s,@MKINSTALLDIRS@,$MKINSTALLDIRS,;t t
+s,@INTL_LIBTOOL_SUFFIX_PREFIX@,$INTL_LIBTOOL_SUFFIX_PREFIX,;t t
 CEOF
-EOF
 
-cat >> $CONFIG_STATUS <<\EOF
+_ACEOF
 
-# Split the substitutions into bite-sized pieces for seds with
-# small command number limits, like on Digital OSF/1 and HP-UX.
-ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
-ac_file=1 # Number of current file.
-ac_beg=1 # First line for current file.
-ac_end=$ac_max_sed_cmds # Line after last line for current file.
-ac_more_lines=:
-ac_sed_cmds=""
-while $ac_more_lines; do
-  if test $ac_beg -gt 1; then
-    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
-  else
-    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
-  fi
-  if test ! -s conftest.s$ac_file; then
-    ac_more_lines=false
-    rm -f conftest.s$ac_file
-  else
-    if test -z "$ac_sed_cmds"; then
-      ac_sed_cmds="sed -f conftest.s$ac_file"
+  cat >>$CONFIG_STATUS <<\_ACEOF
+  # Split the substitutions into bite-sized pieces for seds with
+  # small command number limits, like on Digital OSF/1 and HP-UX.
+  ac_max_sed_lines=48
+  ac_sed_frag=1 # Number of current file.
+  ac_beg=1 # First line for current file.
+  ac_end=$ac_max_sed_lines # Line after last line for current file.
+  ac_more_lines=:
+  ac_sed_cmds=
+  while $ac_more_lines; do
+    if test $ac_beg -gt 1; then
+      sed "1,${ac_beg}d; ${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    else
+      sed "${ac_end}q" $tmp/subs.sed >$tmp/subs.frag
+    fi
+    if test ! -s $tmp/subs.frag; then
+      ac_more_lines=false
     else
-      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
+      # The purpose of the label and of the branching condition is to
+      # speed up the sed processing (if there are no `@' at all, there
+      # is no need to browse any of the substitutions).
+      # These are the two extra sed commands mentioned above.
+      (echo ':t
+  /@[a-zA-Z_][a-zA-Z_0-9]*@/!b' && cat $tmp/subs.frag) >$tmp/subs-$ac_sed_frag.sed
+      if test -z "$ac_sed_cmds"; then
+  	ac_sed_cmds="sed -f $tmp/subs-$ac_sed_frag.sed"
+      else
+  	ac_sed_cmds="$ac_sed_cmds | sed -f $tmp/subs-$ac_sed_frag.sed"
+      fi
+      ac_sed_frag=`expr $ac_sed_frag + 1`
+      ac_beg=$ac_end
+      ac_end=`expr $ac_end + $ac_max_sed_lines`
     fi
-    ac_file=`expr $ac_file + 1`
-    ac_beg=$ac_end
-    ac_end=`expr $ac_end + $ac_max_sed_cmds`
-  fi
-done
-if test -z "$ac_sed_cmds"; then
-  ac_sed_cmds=cat
-fi
-EOF
-
-cat >> $CONFIG_STATUS <<EOF
-
-CONFIG_FILES=\${CONFIG_FILES-"Makefile intl/Makefile m4/Makefile
-        po/Makefile.in doc/Makefile contrib/Makefile
-        muttbug.sh
-        imap/Makefile
-        Muttrc.head
-        doc/instdoc.sh"}
-EOF
-cat >> $CONFIG_STATUS <<\EOF
-for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
+  done
+  if test -z "$ac_sed_cmds"; then
+    ac_sed_cmds=cat
+  fi
+fi # test -n "$CONFIG_FILES"
+
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+for ac_file in : $CONFIG_FILES; do test "x$ac_file" = x: && continue
   # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
-  case "$ac_file" in
-  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
-       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
-  *) ac_file_in="${ac_file}.in" ;;
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+        cat >$tmp/stdin
+        ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
   esac
 
-  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.
-
-  # Remove last slash and all that follows it.  Not all systems have dirname.
-  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
-  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
-    # The file is in a subdirectory.
-    test ! -d "$ac_dir" && mkdir "$ac_dir"
-    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
-    # A "../" for each directory in $ac_dir_suffix.
-    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
-  else
-    ac_dir_suffix= ac_dots=
-  fi
-
-  case "$ac_given_srcdir" in
-  .)  srcdir=.
-      if test -z "$ac_dots"; then top_srcdir=.
-      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
-  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
+  # Compute @srcdir@, @top_srcdir@, and @INSTALL@ for subdirectories.
+  ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$ac_file" : 'X\(//\)[^/]' \| \
+         X"$ac_file" : 'X\(//\)$' \| \
+         X"$ac_file" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+  { if $as_mkdir_p; then
+    mkdir -p "$ac_dir"
+  else
+    as_dir="$ac_dir"
+    as_dirs=
+    while test ! -d "$as_dir"; do
+      as_dirs="$as_dir $as_dirs"
+      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$as_dir" : 'X\(//\)[^/]' \| \
+         X"$as_dir" : 'X\(//\)$' \| \
+         X"$as_dir" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    done
+    test ! -n "$as_dirs" || mkdir $as_dirs
+  fi || { { echo "$as_me:$LINENO: error: cannot create directory \"$ac_dir\"" >&5
+echo "$as_me: error: cannot create directory \"$ac_dir\"" >&2;}
+   { (exit 1); exit 1; }; }; }
+
+  ac_builddir=.
+
+if test "$ac_dir" != .; then
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A "../" for each directory in $ac_dir_suffix.
+  ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
+else
+  ac_dir_suffix= ac_top_builddir=
+fi
+
+case $srcdir in
+  .)  # No --srcdir option.  We are building in place.
+    ac_srcdir=.
+    if test -z "$ac_top_builddir"; then
+       ac_top_srcdir=.
+    else
+       ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
+    fi ;;
+  [\\/]* | ?:[\\/]* )  # Absolute path.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir ;;
   *) # Relative path.
-    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
-    top_srcdir="$ac_dots$ac_given_srcdir" ;;
-  esac
+    ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_builddir$srcdir ;;
+esac
+# Don't blindly perform a `cd "$ac_dir"/$ac_foo && pwd` since $ac_foo can be
+# absolute.
+ac_abs_builddir=`cd "$ac_dir" && cd $ac_builddir && pwd`
+ac_abs_top_builddir=`cd "$ac_dir" && cd ${ac_top_builddir}. && pwd`
+ac_abs_srcdir=`cd "$ac_dir" && cd $ac_srcdir && pwd`
+ac_abs_top_srcdir=`cd "$ac_dir" && cd $ac_top_srcdir && pwd`
 
-  case "$ac_given_INSTALL" in
-  [/$]*) INSTALL="$ac_given_INSTALL" ;;
-  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
-  esac
 
-  echo creating "$ac_file"
-  rm -f "$ac_file"
-  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
-  case "$ac_file" in
-  *Makefile*) ac_comsub="1i\\
-# $configure_input" ;;
-  *) ac_comsub= ;;
+  case $INSTALL in
+  [\\/$]* | ?:[\\/]* ) ac_INSTALL=$INSTALL ;;
+  *) ac_INSTALL=$ac_top_builddir$INSTALL ;;
   esac
 
-  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
-  sed -e "$ac_comsub
-s%@configure_input@%$configure_input%g
-s%@srcdir@%$srcdir%g
-s%@top_srcdir@%$top_srcdir%g
-s%@INSTALL@%$INSTALL%g
-" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
-fi; done
-rm -f conftest.s*
+  if test x"$ac_file" != x-; then
+    { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+    rm -f "$ac_file"
+  fi
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated by config.status.  */
+  if test x"$ac_file" = x-; then
+    configure_input=
+  else
+    configure_input="$ac_file.  "
+  fi
+  configure_input=$configure_input"Generated from `echo $ac_file_in |
+                                     sed 's,.*/,,'` by configure."
+
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+         # Absolute (can't be DOS-style, as IFS=:)
+         test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         echo $f;;
+      *) # Relative
+         if test -f "$f"; then
+           # Build tree
+           echo $f
+         elif test -f "$srcdir/$f"; then
+           # Source tree
+           echo $srcdir/$f
+         else
+           # /dev/null tree
+           { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+_ACEOF
+cat >>$CONFIG_STATUS <<_ACEOF
+  sed "$ac_vpsub
+$extrasub
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+:t
+/@[a-zA-Z_][a-zA-Z_0-9]*@/!b
+s,@configure_input@,$configure_input,;t t
+s,@srcdir@,$ac_srcdir,;t t
+s,@abs_srcdir@,$ac_abs_srcdir,;t t
+s,@top_srcdir@,$ac_top_srcdir,;t t
+s,@abs_top_srcdir@,$ac_abs_top_srcdir,;t t
+s,@builddir@,$ac_builddir,;t t
+s,@abs_builddir@,$ac_abs_builddir,;t t
+s,@top_builddir@,$ac_top_builddir,;t t
+s,@abs_top_builddir@,$ac_abs_top_builddir,;t t
+s,@INSTALL@,$ac_INSTALL,;t t
+" $ac_file_inputs | (eval "$ac_sed_cmds") >$tmp/out
+  rm -f $tmp/stdin
+  if test x"$ac_file" != x-; then
+    mv $tmp/out $ac_file
+  else
+    cat $tmp/out
+    rm -f $tmp/out
+  fi
+
+done
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+#
+# CONFIG_HEADER section.
+#
 
 # These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
 # NAME is the cpp macro being defined and VALUE is the value it is being given.
 #
 # ac_d sets the value in "#define NAME VALUE" lines.
-ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
-ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
-ac_dC='\3'
-ac_dD='%g'
-# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
-ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
-ac_uB='\([ 	]\)%\1#\2define\3'
+ac_dA='s,^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
+ac_dB='[ 	].*$,\1#\2'
+ac_dC=' '
+ac_dD=',;t'
+# ac_u turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
+ac_uA='s,^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
+ac_uB='$,\1#\2define\3'
 ac_uC=' '
-ac_uD='\4%g'
-# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
-ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
-ac_eB='$%\1#\2define\3'
-ac_eC=' '
-ac_eD='%g'
-
-if test "${CONFIG_HEADERS+set}" != set; then
-EOF
-cat >> $CONFIG_STATUS <<EOF
-  CONFIG_HEADERS="config.h"
-EOF
-cat >> $CONFIG_STATUS <<\EOF
-fi
-for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
+ac_uD=',;t'
+
+for ac_file in : $CONFIG_HEADERS; do test "x$ac_file" = x: && continue
   # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
-  case "$ac_file" in
-  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
-       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
-  *) ac_file_in="${ac_file}.in" ;;
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+        cat >$tmp/stdin
+        ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
   esac
 
-  echo creating $ac_file
+  test x"$ac_file" != x- && { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
 
-  rm -f conftest.frag conftest.in conftest.out
-  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
-  cat $ac_file_inputs > conftest.in
-
-EOF
-
-# Transform confdefs.h into a sed script conftest.vals that substitutes
-# the proper values into config.h.in to produce config.h.  And first:
-# Protect against being on the right side of a sed subst in config.status.
-# Protect against being in an unquoted here document in config.status.
-rm -f conftest.vals
-cat > conftest.hdr <<\EOF
-s/[\\&%]/\\&/g
-s%[\\$`]%\\&%g
-s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
-s%ac_d%ac_u%gp
-s%ac_u%ac_e%gp
-EOF
-sed -n -f conftest.hdr confdefs.h > conftest.vals
-rm -f conftest.hdr
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+         # Absolute (can't be DOS-style, as IFS=:)
+         test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         echo $f;;
+      *) # Relative
+         if test -f "$f"; then
+           # Build tree
+           echo $f
+         elif test -f "$srcdir/$f"; then
+           # Source tree
+           echo $srcdir/$f
+         else
+           # /dev/null tree
+           { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+  # Remove the trailing spaces.
+  sed 's/[ 	]*$//' $ac_file_inputs >$tmp/in
+
+_ACEOF
+
+# Transform confdefs.h into two sed scripts, `conftest.defines' and
+# `conftest.undefs', that substitutes the proper values into
+# config.h.in to produce config.h.  The first handles `#define'
+# templates, and the second `#undef' templates.
+# And first: Protect against being on the right side of a sed subst in
+# config.status.  Protect against being in an unquoted here document
+# in config.status.
+rm -f conftest.defines conftest.undefs
+# Using a here document instead of a string reduces the quoting nightmare.
+# Putting comments in sed scripts is not portable.
+#
+# `end' is used to avoid that the second main sed command (meant for
+# 0-ary CPP macros) applies to n-ary macro definitions.
+# See the Autoconf documentation for `clear'.
+cat >confdef2sed.sed <<\_ACEOF
+s/[\\&,]/\\&/g
+s,[\\$`],\\&,g
+t clear
+: clear
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	(][^ 	(]*\)\(([^)]*)\)[ 	]*\(.*\)$,${ac_dA}\1${ac_dB}\1\2${ac_dC}\3${ac_dD},gp
+t end
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	][^ 	]*\)[ 	]*\(.*\)$,${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD},gp
+: end
+_ACEOF
+# If some macros were called several times there might be several times
+# the same #defines, which is useless.  Nevertheless, we may not want to
+# sort them, since we want the *last* AC-DEFINE to be honored.
+uniq confdefs.h | sed -n -f confdef2sed.sed >conftest.defines
+sed 's/ac_d/ac_u/g' conftest.defines >conftest.undefs
+rm -f confdef2sed.sed
 
 # This sed command replaces #undef with comments.  This is necessary, for
 # example, in the case of _POSIX_SOURCE, which is predefined and required
 # on some systems where configure will not decide to define it.
-cat >> conftest.vals <<\EOF
-s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
-EOF
-
-# Break up conftest.vals because some shells have a limit on
-# the size of here documents, and old seds have small limits too.
-
+cat >>conftest.undefs <<\_ACEOF
+s,^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*,/* & */,
+_ACEOF
+
+# Break up conftest.defines because some shells have a limit on the size
+# of here documents, and old seds have small limits too (100 cmds).
+echo '  # Handle all the #define templates only if necessary.' >>$CONFIG_STATUS
+echo '  if egrep "^[ 	]*#[ 	]*define" $tmp/in >/dev/null; then' >>$CONFIG_STATUS
+echo '  # If there are no defines, we may have an empty if/fi' >>$CONFIG_STATUS
+echo '  :' >>$CONFIG_STATUS
 rm -f conftest.tail
-while :
+while grep . conftest.defines >/dev/null
 do
-  ac_lines=`grep -c . conftest.vals`
-  # grep -c gives empty output for an empty file on some AIX systems.
-  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
-  # Write a limited-size here document to conftest.frag.
-  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
-  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
+  # Write a limited-size here document to $tmp/defines.sed.
+  echo '  cat >$tmp/defines.sed <<CEOF' >>$CONFIG_STATUS
+  # Speed up: don't consider the non `#define' lines.
+  echo '/^[ 	]*#[ 	]*define/!b' >>$CONFIG_STATUS
+  # Work around the forget-to-reset-the-flag bug.
+  echo 't clr' >>$CONFIG_STATUS
+  echo ': clr' >>$CONFIG_STATUS
+  sed ${ac_max_here_lines}q conftest.defines >>$CONFIG_STATUS
   echo 'CEOF
-  sed -f conftest.frag conftest.in > conftest.out
-  rm -f conftest.in
-  mv conftest.out conftest.in
-' >> $CONFIG_STATUS
-  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
-  rm -f conftest.vals
-  mv conftest.tail conftest.vals
-done
-rm -f conftest.vals
-
-cat >> $CONFIG_STATUS <<\EOF
-  rm -f conftest.frag conftest.h
-  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
-  cat conftest.in >> conftest.h
-  rm -f conftest.in
-  if cmp -s $ac_file conftest.h 2>/dev/null; then
-    echo "$ac_file is unchanged"
-    rm -f conftest.h
-  else
-    # Remove last slash and all that follows it.  Not all systems have dirname.
-      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
-      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
-      # The file is in a subdirectory.
-      test ! -d "$ac_dir" && mkdir "$ac_dir"
-    fi
-    rm -f $ac_file
-    mv conftest.h $ac_file
+  sed -f $tmp/defines.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+' >>$CONFIG_STATUS
+  sed 1,${ac_max_here_lines}d conftest.defines >conftest.tail
+  rm -f conftest.defines
+  mv conftest.tail conftest.defines
+done
+rm -f conftest.defines
+echo '  fi # egrep' >>$CONFIG_STATUS
+echo >>$CONFIG_STATUS
+
+# Break up conftest.undefs because some shells have a limit on the size
+# of here documents, and old seds have small limits too (100 cmds).
+echo '  # Handle all the #undef templates' >>$CONFIG_STATUS
+rm -f conftest.tail
+while grep . conftest.undefs >/dev/null
+do
+  # Write a limited-size here document to $tmp/undefs.sed.
+  echo '  cat >$tmp/undefs.sed <<CEOF' >>$CONFIG_STATUS
+  # Speed up: don't consider the non `#undef'
+  echo '/^[ 	]*#[ 	]*undef/!b' >>$CONFIG_STATUS
+  # Work around the forget-to-reset-the-flag bug.
+  echo 't clr' >>$CONFIG_STATUS
+  echo ': clr' >>$CONFIG_STATUS
+  sed ${ac_max_here_lines}q conftest.undefs >>$CONFIG_STATUS
+  echo 'CEOF
+  sed -f $tmp/undefs.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+' >>$CONFIG_STATUS
+  sed 1,${ac_max_here_lines}d conftest.undefs >conftest.tail
+  rm -f conftest.undefs
+  mv conftest.tail conftest.undefs
+done
+rm -f conftest.undefs
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated by config.status.  */
+  if test x"$ac_file" = x-; then
+    echo "/* Generated by configure.  */" >$tmp/config.h
+  else
+    echo "/* $ac_file.  Generated by configure.  */" >$tmp/config.h
   fi
-fi; done
-
-EOF
-cat >> $CONFIG_STATUS <<EOF
+  cat $tmp/in >>$tmp/config.h
+  rm -f $tmp/in
+  if test x"$ac_file" != x-; then
+    if cmp -s $ac_file $tmp/config.h 2>/dev/null; then
+      { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
+echo "$as_me: $ac_file is unchanged" >&6;}
+    else
+      ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$ac_file" : 'X\(//\)[^/]' \| \
+         X"$ac_file" : 'X\(//\)$' \| \
+         X"$ac_file" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+      { if $as_mkdir_p; then
+    mkdir -p "$ac_dir"
+  else
+    as_dir="$ac_dir"
+    as_dirs=
+    while test ! -d "$as_dir"; do
+      as_dirs="$as_dir $as_dirs"
+      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$as_dir" : 'X\(//\)[^/]' \| \
+         X"$as_dir" : 'X\(//\)$' \| \
+         X"$as_dir" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    done
+    test ! -n "$as_dirs" || mkdir $as_dirs
+  fi || { { echo "$as_me:$LINENO: error: cannot create directory \"$ac_dir\"" >&5
+echo "$as_me: error: cannot create directory \"$ac_dir\"" >&2;}
+   { (exit 1); exit 1; }; }; }
 
+      rm -f $ac_file
+      mv $tmp/config.h $ac_file
+    fi
+  else
+    cat $tmp/config.h
+    rm -f $tmp/config.h
+  fi
+  # Run the commands associated with the file.
+  case $ac_file in
+    config.h ) # update the timestamp
+echo 'timestamp for config.h' >"./stamp-h1"
+ ;;
+  esac
+done
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
 
+#
+# CONFIG_COMMANDS section.
+#
+for ac_file in : $CONFIG_COMMANDS; do test "x$ac_file" = x: && continue
+  ac_dest=`echo "$ac_file" | sed 's,:.*,,'`
+  ac_source=`echo "$ac_file" | sed 's,[^:]*:,,'`
+  ac_dir=`(dirname "$ac_dest") 2>/dev/null ||
+$as_expr X"$ac_dest" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$ac_dest" : 'X\(//\)[^/]' \| \
+         X"$ac_dest" : 'X\(//\)$' \| \
+         X"$ac_dest" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_dest" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+  ac_builddir=.
+
+if test "$ac_dir" != .; then
+  ac_dir_suffix=/`echo "$ac_dir" | sed 's,^\.[\\/],,'`
+  # A "../" for each directory in $ac_dir_suffix.
+  ac_top_builddir=`echo "$ac_dir_suffix" | sed 's,/[^\\/]*,../,g'`
+else
+  ac_dir_suffix= ac_top_builddir=
+fi
+
+case $srcdir in
+  .)  # No --srcdir option.  We are building in place.
+    ac_srcdir=.
+    if test -z "$ac_top_builddir"; then
+       ac_top_srcdir=.
+    else
+       ac_top_srcdir=`echo $ac_top_builddir | sed 's,/$,,'`
+    fi ;;
+  [\\/]* | ?:[\\/]* )  # Absolute path.
+    ac_srcdir=$srcdir$ac_dir_suffix;
+    ac_top_srcdir=$srcdir ;;
+  *) # Relative path.
+    ac_srcdir=$ac_top_builddir$srcdir$ac_dir_suffix
+    ac_top_srcdir=$ac_top_builddir$srcdir ;;
+esac
+# Don't blindly perform a `cd "$ac_dir"/$ac_foo && pwd` since $ac_foo can be
+# absolute.
+ac_abs_builddir=`cd "$ac_dir" && cd $ac_builddir && pwd`
+ac_abs_top_builddir=`cd "$ac_dir" && cd ${ac_top_builddir}. && pwd`
+ac_abs_srcdir=`cd "$ac_dir" && cd $ac_srcdir && pwd`
+ac_abs_top_srcdir=`cd "$ac_dir" && cd $ac_top_srcdir && pwd`
+
+
+  { echo "$as_me:$LINENO: executing $ac_dest commands" >&5
+echo "$as_me: executing $ac_dest commands" >&6;}
+  case $ac_dest in
+    depfiles ) test x"$AMDEP_TRUE" != x"" || for mf in $CONFIG_FILES; do
+  # Strip MF so we end up with the name of the file.
+  mf=`echo "$mf" | sed -e 's/:.*$//'`
+  # Check whether this is an Automake generated Makefile or not.
+  # We used to match only the files named `Makefile.in', but
+  # some people rename them; so instead we look at the file content.
+  # Grep'ing the first line is not enough: some people post-process
+  # each Makefile.in and add a new line on top of each file to say so.
+  # So let's grep whole file.
+  if grep '^#.*generated by automake' $mf > /dev/null 2>&1; then
+    dirpart=`(dirname "$mf") 2>/dev/null ||
+$as_expr X"$mf" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$mf" : 'X\(//\)[^/]' \| \
+         X"$mf" : 'X\(//\)$' \| \
+         X"$mf" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$mf" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+  else
+    continue
+  fi
+  grep '^DEP_FILES *= *[^ #]' < "$mf" > /dev/null || continue
+  # Extract the definition of DEP_FILES from the Makefile without
+  # running `make'.
+  DEPDIR=`sed -n -e '/^DEPDIR = / s///p' < "$mf"`
+  test -z "$DEPDIR" && continue
+  # When using ansi2knr, U may be empty or an underscore; expand it
+  U=`sed -n -e '/^U = / s///p' < "$mf"`
+  test -d "$dirpart/$DEPDIR" || mkdir "$dirpart/$DEPDIR"
+  # We invoke sed twice because it is the simplest approach to
+  # changing $(DEPDIR) to its actual value in the expansion.
+  for file in `sed -n -e '
+    /^DEP_FILES = .*\\\\$/ {
+      s/^DEP_FILES = //
+      :loop
+	s/\\\\$//
+	p
+	n
+	/\\\\$/ b loop
+      p
+    }
+    /^DEP_FILES = / s/^DEP_FILES = //p' < "$mf" | \
+       sed -e 's/\$(DEPDIR)/'"$DEPDIR"'/g' -e 's/\$U/'"$U"'/g'`; do
+    # Make sure the directory exists.
+    test -f "$dirpart/$file" && continue
+    fdir=`(dirname "$file") 2>/dev/null ||
+$as_expr X"$file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$file" : 'X\(//\)[^/]' \| \
+         X"$file" : 'X\(//\)$' \| \
+         X"$file" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    { if $as_mkdir_p; then
+    mkdir -p $dirpart/$fdir
+  else
+    as_dir=$dirpart/$fdir
+    as_dirs=
+    while test ! -d "$as_dir"; do
+      as_dirs="$as_dir $as_dirs"
+      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$as_dir" : 'X\(//\)[^/]' \| \
+         X"$as_dir" : 'X\(//\)$' \| \
+         X"$as_dir" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$as_dir" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+    done
+    test ! -n "$as_dirs" || mkdir $as_dirs
+  fi || { { echo "$as_me:$LINENO: error: cannot create directory $dirpart/$fdir" >&5
+echo "$as_me: error: cannot create directory $dirpart/$fdir" >&2;}
+   { (exit 1); exit 1; }; }; }
 
-EOF
-cat >> $CONFIG_STATUS <<\EOF
-test -z "$CONFIG_HEADERS" || echo timestamp > stamp-h
-for ac_file in $CONFIG_FILES; do
+    # echo "creating $dirpart/$file"
+    echo '# dummy' > "$dirpart/$file"
+  done
+done
+ ;;
+    default-1 ) for ac_file in $CONFIG_FILES; do
         # Support "outfile[:infile[:infile...]]"
         case "$ac_file" in
           *:*) ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
@@ -8478,11 +14956,34 @@
           fi
           ;;
         esac
-      done
+      done ;;
+  esac
+done
+_ACEOF
 
-exit 0
-EOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+{ (exit 0); exit 0; }
+_ACEOF
 chmod +x $CONFIG_STATUS
-rm -fr confdefs* $ac_clean_files
-test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1
+ac_clean_files=$ac_clean_files_save
+
+
+# configure is writing to config.log, and then calls config.status.
+# config.status does its own redirection, appending to config.log.
+# Unfortunately, on DOS this fails, as config.log is still kept open
+# by configure, so config.status won't be able to write to it; its
+# output is simply discarded.  So we exec the FD to /dev/null,
+# effectively closing config.log, so it can be properly (re)opened and
+# appended to by config.status.  When coming back to configure, we
+# need to make the FD available again.
+if test "$no_create" != yes; then
+  ac_cs_success=:
+  exec 5>/dev/null
+  $SHELL $CONFIG_STATUS || ac_cs_success=false
+  exec 5>>config.log
+  # Use ||, not &&, to avoid exiting from the if with $? = 1, which
+  # would make configure fail if this is the last instruction.
+  $ac_cs_success || { (exit 1); exit 1; }
+fi
 
diff -uNr mutt-1.4.orig/configure.in mutt-1.4/configure.in
--- mutt-1.4.orig/configure.in	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/configure.in	Sun Nov  3 21:57:20 2002
@@ -457,6 +457,14 @@
 ])
 AM_CONDITIONAL(BUILD_IMAP, test x$need_imap = xyes)
 
+AC_ARG_ENABLE(nntp, [  --enable-nntp              Enable NNTP support],
+[	if test x$enableval = xyes ; then
+		AC_DEFINE(USE_NNTP)
+		MUTT_LIB_OBJECTS="$MUTT_LIB_OBJECTS nntp.o newsrc.o"
+		need_socket="yes"
+	fi
+])
+
 dnl -- end socket dependencies --
 
 if test "$need_socket" = "yes"
diff -uNr mutt-1.4.orig/curs_main.c mutt-1.4/curs_main.c
--- mutt-1.4.orig/curs_main.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/curs_main.c	Sun Nov  3 21:57:20 2002
@@ -18,6 +18,7 @@
 
 #include "mutt.h"
 #include "mutt_curses.h"
+#include "mx.h"
 #include "mutt_menu.h"
 #include "mailbox.h"
 #include "mapping.h"
@@ -33,6 +34,10 @@
 #include "imap.h"
 #endif
 
+#ifdef USE_NNTP
+#include "nntp.h"
+#endif
+
 
 
 #ifdef HAVE_PGP
@@ -405,12 +410,27 @@
   { NULL }
 };
 
+#ifdef USE_NNTP
+struct mapping_t IndexNewsHelp[] = {
+  { N_("Quit"),     OP_QUIT },
+  { N_("Del"),      OP_DELETE },
+  { N_("Undel"),    OP_UNDELETE },
+  { N_("Save"),     OP_SAVE },
+  { N_("Post"),     OP_POST },
+  { N_("Followup"), OP_FOLLOWUP },
+  { N_("Catchup"),  OP_CATCHUP },
+  { N_("Help"),     OP_HELP },
+  { NULL }
+};
+#endif
+
 /* This function handles the message index window as well as commands returned
  * from the pager (MENU_PAGER).
  */
 int mutt_index_menu (void)
 {
   char buf[LONG_STRING], helpstr[SHORT_STRING];
+  int flags;
   int op = OP_NULL;
   int done = 0;                /* controls when to exit the "event" loop */
   int i = 0, j;
@@ -432,7 +452,11 @@
   menu->make_entry = index_make_entry;
   menu->color = index_color;
   menu->current = ci_first_message ();
-  menu->help = mutt_compile_help (helpstr, sizeof (helpstr), MENU_MAIN, IndexHelp);
+  menu->help = mutt_compile_help (helpstr, sizeof (helpstr), MENU_MAIN,
+#ifdef USE_NNTP
+	(Context && (Context->magic == M_NNTP)) ? IndexNewsHelp :
+#endif
+	IndexHelp);
   
   if (!attach_msg) 
     mutt_buffy_check(1); /* force the buffy check after we enter the folder */
@@ -633,6 +657,9 @@
       mutt_curs_set (1);	/* fallback from the pager */
     }
 
+#ifdef USE_NNTP
+    unset_option (OPTNEWS);	/* for any case */
+#endif
     switch (op)
     {
 
@@ -683,6 +710,120 @@
 	menu_current_bottom (menu);
 	break;
 
+#ifdef USE_NNTP
+      case OP_GET_MESSAGE:
+      case OP_GET_PARENT:
+	CHECK_MSGCOUNT;
+	if (Context->magic == M_NNTP)
+	{
+	  HEADER *h;
+
+	  if (op == OP_GET_MESSAGE)
+	  {
+	    buf[0] = 0;
+	    if (mutt_get_field (_("Enter Message-Id: "), buf, sizeof (buf), 0) != 0
+		  || !buf[0])
+	      break;
+	  }
+	  else
+	  {
+	    LIST *ref = CURHDR->env->references;
+	    if (!ref)
+	    {
+	      mutt_error _("Article has no parent reference!");
+	      break;
+	    }
+	    strfcpy (buf, ref->data, sizeof (buf));
+	  }
+	  if (!Context->id_hash)
+	    Context->id_hash = mutt_make_id_hash (Context);
+	  if ((h = hash_find (Context->id_hash, buf)))
+	  {
+	    if (h->virtual != -1)
+	    {
+	      menu->current = h->virtual;
+	      menu->redraw = REDRAW_MOTION_RESYNCH;
+	    }
+	    else if (h->collapsed)
+	    {
+	      mutt_uncollapse_thread (Context, h);
+	      mutt_set_virtual (Context);
+	      menu->current = h->virtual;
+	      menu->redraw = REDRAW_MOTION_RESYNCH;
+	    }
+	    else
+	      mutt_error _("Message not visible in limited view.");
+	  }
+	  else
+	  {
+	    if (nntp_check_msgid (Context, buf) == 0)
+	    {
+	      h = Context->hdrs[Context->msgcount-1];
+	      mutt_sort_headers (Context, 0);
+	      menu->current = h->virtual;
+	      menu->redraw = REDRAW_FULL;
+	    }
+	    else
+	      mutt_error (_("Article %s not found on server"), buf); 
+	  }
+	}
+	break;
+
+      case OP_GET_CHILDREN:
+      case OP_RECONSTRUCT_THREAD:
+	CHECK_MSGCOUNT;
+	if (Context->magic == M_NNTP)
+	{
+	  HEADER *h;
+	  int old = CURHDR->index, i;
+
+	  if (!CURHDR->env->message_id)
+	  {
+	    mutt_error _("No Message-Id. Unable to perform operation");
+	    break;
+	  }
+
+	  if (!Context->id_hash)
+	    Context->id_hash = mutt_make_id_hash (Context);
+	  strfcpy (buf, CURHDR->env->message_id, sizeof (buf));
+
+	  if (op == OP_RECONSTRUCT_THREAD)
+	  {
+	    LIST *ref = CURHDR->env->references;
+	    while (ref)
+	    {
+	      nntp_check_msgid (Context, ref->data);
+	      /* the last msgid in References is the root message */
+	      if (!ref->next)
+		strfcpy (buf, ref->data, sizeof (buf));
+	      ref = ref->next;
+	    }
+	  }
+	  mutt_message _("Check for children of message...");
+	  if (nntp_check_children (Context, buf) == 0)
+	  {
+	    mutt_sort_headers (Context, (op == OP_RECONSTRUCT_THREAD));
+	    h = hash_find (Context->id_hash, buf);
+	    /* if the root message was retrieved, move to it */
+	    if (h)
+	      menu->current = h->virtual;
+	    else /* try to restore old position */
+	      for (i = 0; i < Context->msgcount; i++)
+		if (Context->hdrs[i]->index == old)
+		{
+		  menu->current = Context->hdrs[i]->virtual;
+		  /* As an added courtesy, recenter the menu
+		   * with the current entry at the middle of the screen */
+		  menu_check_recenter (menu);
+		  menu_current_middle (menu);
+		}
+	  }
+	  menu->redraw = REDRAW_FULL;
+	  mutt_clear_error ();
+	}
+	break;
+#endif
+
       case OP_JUMP:
 
 	CHECK_MSGCOUNT;
@@ -778,11 +919,33 @@
         break;
 
       case OP_MAIN_LIMIT:
+      case OP_TOGGLE_READ:
 
 	CHECK_MSGCOUNT;
 	menu->oldcurrent = (Context->vcount && menu->current >= 0 && menu->current < Context->vcount) ?
 		CURHDR->index : -1;
-	if (mutt_pattern_func (M_LIMIT, _("Limit to messages matching: ")) == 0)
+	if (op == OP_TOGGLE_READ)
+	{
+	  char buf[LONG_STRING];
+
+	  if (!Context->pattern || strncmp (Context->pattern, "!~R!~D~s", 8) != 0)
+	  {
+	    snprintf (buf, sizeof (buf), "!~R!~D~s%s",
+		      Context->pattern ? Context->pattern : ".*");
+	    set_option (OPTHIDEREAD);
+	  }
+	  else
+	  {
+	    strfcpy (buf, Context->pattern + 8, sizeof(buf));
+	    if (!*buf || strncmp (buf, ".*", 2) == 0)
+	      snprintf (buf, sizeof(buf), "~A");
+	    unset_option (OPTHIDEREAD);
+	  }
+	  FREE (&Context->pattern);
+	  Context->pattern = safe_strdup (buf);
+	}
+	if ((op == OP_TOGGLE_READ && mutt_pattern_func (M_LIMIT, NULL) == 0) ||
+	    mutt_pattern_func (M_LIMIT, _("Limit to messages matching: ")) == 0)
 	{
 	  if (menu->oldcurrent >= 0)
 	  {
@@ -980,20 +1143,43 @@
 	break;
 
       case OP_MAIN_CHANGE_FOLDER:
-      
-	if (attach_msg)
-	  op = OP_MAIN_CHANGE_FOLDER_READONLY;
-
-	/* fallback to the readonly case */
-
       case OP_MAIN_CHANGE_FOLDER_READONLY:
+#ifdef USE_NNTP
+      case OP_MAIN_CHANGE_GROUP:
+      case OP_MAIN_CHANGE_GROUP_READONLY:
+#endif
+
+	if (attach_msg || option (OPTREADONLY) ||
+#ifdef USE_NNTP
+	    op == OP_MAIN_CHANGE_GROUP_READONLY ||
+#endif
+	    op == OP_MAIN_CHANGE_FOLDER_READONLY)
+	  flags = M_READONLY;
+	else
+	  flags = 0;
 
-        if ((op == OP_MAIN_CHANGE_FOLDER_READONLY) || option (OPTREADONLY))
+	if (flags)
           cp = _("Open mailbox in read-only mode");
         else
           cp = _("Open mailbox");
 
 	buf[0] = '\0';
+#ifdef USE_NNTP
+	unset_option (OPTNEWS);
+	if (op == OP_MAIN_CHANGE_GROUP ||
+	    op == OP_MAIN_CHANGE_GROUP_READONLY)
+	{
+	  set_option (OPTNEWS);
+	  if (!(CurrentNewsSrv = mutt_select_newsserver (NewsServer)))
+	    break;
+	  if (flags)
+	    cp = _("Open newsgroup in read-only mode");
+	  else
+	    cp = _("Open newsgroup");
+	  nntp_buffy (buf);
+	}
+	else
+#endif
 	mutt_buffy (buf, sizeof (buf));
 
 	if (mutt_enter_fname (cp, buf, sizeof (buf), &menu->redraw, 1) == -1)
@@ -1004,6 +1190,14 @@
 	  break;
 	}
 
+#ifdef USE_NNTP
+        if (option (OPTNEWS))
+	{
+	  unset_option (OPTNEWS);
+          nntp_expand_path (buf, sizeof (buf), &CurrentNewsSrv->conn->account);
+	}
+        else
+#endif
 	mutt_expand_path (buf, sizeof (buf));
 	if (mx_get_magic (buf) <= 0)
 	{
@@ -1039,15 +1233,18 @@
       
 	mutt_folder_hook (buf);
 
-	if ((Context = mx_open_mailbox (buf, 
-					(option (OPTREADONLY) || op == OP_MAIN_CHANGE_FOLDER_READONLY) ?
-					M_READONLY : 0, NULL)) != NULL)
+	if ((Context = mx_open_mailbox (buf, flags, NULL)) != NULL)
 	{
 	  menu->current = ci_first_message ();
 	}
 	else
 	  menu->current = 0;
 
+#ifdef USE_NNTP
+	/* mutt_buffy_check() must be done with mail-reader mode! */
+	menu->help = mutt_compile_help (helpstr, sizeof (helpstr), MENU_MAIN,
+	  (Context && (Context->magic == M_NNTP)) ? IndexNewsHelp : IndexHelp);
+#endif
 	mutt_clear_error ();
 	mutt_buffy_check(1); /* force the buffy check after we have changed
 			      the folder */
@@ -1422,6 +1619,15 @@
 	}
 #endif
 
+#ifdef USE_NNTP
+	if (Context->magic == M_NNTP)
+	{
+	  mutt_flushinp ();
+	  mutt_error _("Can't change 'important' flag on NNTP server.");
+	  break;
+	}
+#endif
+
         if (tag)
         {
 	  for (j = 0; j < Context->vcount; j++)
@@ -1767,6 +1973,17 @@
 	}
 	break;
 
+#ifdef USE_NNTP
+      case OP_CATCHUP:
+	if (Context && Context->magic == M_NNTP)
+	{
+	  if (mutt_newsgroup_catchup (CurrentNewsSrv,
+		((NNTP_DATA *)Context->data)->group))
+	    menu->redraw = REDRAW_INDEX | REDRAW_STATUS;
+	}
+	break;
+#endif
+
       case OP_DISPLAY_ADDRESS:
 
 	CHECK_MSGCOUNT;
@@ -1801,6 +2018,15 @@
 	}
 #endif
 
+#ifdef USE_NNTP
+	if (Context->magic == M_NNTP)
+	{
+	  mutt_flushinp ();
+	  mutt_error _("Can't edit message on newsserver.");
+	  break;
+	}
+#endif
+
         mutt_edit_message (Context, tag ? NULL : CURHDR);
 	menu->redraw = REDRAW_FULL;
 
@@ -1955,6 +2181,37 @@
       
         menu->redraw = REDRAW_FULL;
         break;
+
+#ifdef USE_NNTP
+      case OP_POST:
+      case OP_FOLLOWUP:
+      case OP_FORWARD_TO_GROUP:
+
+	CHECK_ATTACH;
+	if (op != OP_FOLLOWUP || !CURHDR->env->followup_to ||
+	    mutt_strcasecmp (CURHDR->env->followup_to, "poster") ||
+	    query_quadoption (OPT_FOLLOWUPTOPOSTER,_("Reply by mail as poster prefers?")) != M_YES)
+	{
+	  if (Context && Context->magic == M_NNTP &&
+	      !((NNTP_DATA *)Context->data)->allowed &&
+	      query_quadoption (OPT_TOMODERATED, _("Posting to this group not allowed, may be moderated. Continue?")) != M_YES)
+	    break;
+	  if (op == OP_POST)
+	    ci_send_message (SENDNEWS, NULL, NULL, Context, NULL);
+	  else
+	  {
+	    CHECK_MSGCOUNT;
+	    if (op == OP_FOLLOWUP)
+	      ci_send_message (SENDNEWS|SENDREPLY, NULL, NULL, Context,
+			       tag ? NULL : CURHDR);
+	    else
+	      ci_send_message (SENDNEWS|SENDFORWARD, NULL, NULL, Context,
+			       tag ? NULL : CURHDR);
+	  }
+	  menu->redraw = REDRAW_FULL;
+	  break;
+	}
+#endif
       
       case OP_REPLY:
 
@@ -2081,6 +2338,12 @@
   if (!attach_msg)
     imap_logout_all ();
 #endif
+#ifdef USE_NNTP
+  /* Close all open NNTP connections */
+  if (!attach_msg)
+    nntp_logout_all ();
+#endif
+
 
   mutt_menuDestroy (&menu);
   return (close);
diff -uNr mutt-1.4.orig/depcomp mutt-1.4/depcomp
--- mutt-1.4.orig/depcomp	Tue Feb 27 17:59:45 2001
+++ mutt-1.4/depcomp	Sun Nov  3 21:57:30 2002
@@ -18,6 +18,11 @@
 # Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
 # 02111-1307, USA.
 
+# As a special exception to the GNU General Public License, if you
+# distribute this file as part of a program that contains a
+# configuration script generated by Autoconf, you may include it under
+# the same distribution terms that you use for the rest of that program.
+
 # Originally written by Alexandre Oliva <oliva@dcc.unicamp.br>.
 
 if test -z "$depmode" || test -z "$source" || test -z "$object"; then
@@ -26,7 +31,16 @@
 fi
 # `libtool' can also be set to `yes' or `no'.
 
-depfile=${depfile-`echo "$object" | sed 's,\([^/]*\)$,.deps/\1,;s/\.\([^.]*\)$/.P\1/'`}
+if test -z "$depfile"; then
+   base=`echo "$object" | sed -e 's,^.*/,,' -e 's,\.\([^.]*\)$,.P\1,'`
+   dir=`echo "$object" | sed 's,/.*$,/,'`
+   if test "$dir" = "$object"; then
+      dir=
+   fi
+   # FIXME: should be _deps on DOS.
+   depfile="$dir.deps/$base"
+fi
+
 tmpdepfile=${tmpdepfile-`echo "$depfile" | sed 's/\.\([^.]*\)$/.T\1/'`}
 
 rm -f "$tmpdepfile"
@@ -50,10 +64,12 @@
 case "$depmode" in
 gcc3)
 ## gcc 3 implements dependency tracking that does exactly what
-## we want.  Yay!
-  if "$@" -MT "$object" -MF "$tmpdepfile" -MD -MP; then :
+## we want.  Yay!  Note: for some reason libtool 1.4 doesn't like
+## it if -MD -MP comes after the -MF stuff.  Hmm.
+  "$@" -MT "$object" -MD -MP -MF "$tmpdepfile"
+  stat=$?
+  if test $stat -eq 0; then :
   else
-    stat=$?
     rm -f "$tmpdepfile"
     exit $stat
   fi
@@ -73,9 +89,10 @@
   if test -z "$gccflag"; then
     gccflag=-MD,
   fi
-  if "$@" -Wp,"$gccflag$tmpdepfile"; then :
+  "$@" -Wp,"$gccflag$tmpdepfile"
+  stat=$?
+  if test $stat -eq 0; then :
   else
-    stat=$?
     rm -f "$tmpdepfile"
     exit $stat
   fi
@@ -126,19 +143,24 @@
   if test -f "$tmpdepfile"; then  # yes, the sourcefile depend on other files
     echo "$object : \\" > "$depfile"
 
-    # Clip off the initial element (the dependent). Don't try to be
+    # Clip off the initial element (the dependent).  Don't try to be
     # clever and replace this with sed code, as IRIX sed won't handle
     # lines with more than a fixed number of characters (4096 in
-    # IRIX 6.2 sed, 8192 in IRIX 6.5).
+    # IRIX 6.2 sed, 8192 in IRIX 6.5).  We also remove comment lines;
+    # the IRIX cc adds comments like `#:fec' to the end of the
+    # dependency line.
     tr ' ' '
-' < "$tmpdepfile" | sed 's/^[^\.]*\.o://' | tr '
+' < "$tmpdepfile" \
+    | sed -e 's/^.*\.o://' -e 's/#.*$//' -e '/^$/ d' | \
+    tr '
 ' ' ' >> $depfile
+    echo >> $depfile
 
+    # The second pass generates a dummy entry for each header file.
     tr ' ' '
-' < "$tmpdepfile" | \
-## Some versions of the HPUX 10.20 sed can't process this invocation
-## correctly.  Breaking it into two sed invocations is a workaround.
-      sed -e 's/^\\$//' -e '/^$/d' -e '/:$/d' | sed -e 's/$/ :/' >> "$depfile"
+' < "$tmpdepfile" \
+   | sed -e 's/^.*\.o://' -e 's/#.*$//' -e '/^$/ d' -e 's/$/:/' \
+   >> $depfile
   else
     # The sourcefile does not contain any dependencies, so just
     # store a dummy comment line, to avoid errors with the Makefile
@@ -150,8 +172,12 @@
 
 aix)
   # The C for AIX Compiler uses -M and outputs the dependencies
-  # in a .u file.
-  tmpdepfile=`echo "$object" | sed 's/\(.*\)\..*$/\1.u/'`
+  # in a .u file.  This file always lives in the current directory.
+  # Also, the AIX compiler puts `$object:' at the start of each line;
+  # $object doesn't have directory information.
+  stripped=`echo "$object" | sed -e 's,^.*/,,' -e 's/\(.*\)\..*$/\1/'`
+  tmpdepfile="$stripped.u"
+  outname="$stripped.o"
   if test "$libtool" = yes; then
     "$@" -Wc,-M
   else
@@ -166,21 +192,11 @@
   fi
 
   if test -f "$tmpdepfile"; then
-    echo "$object : \\" > "$depfile"
-
-    # Clip off the initial element (the dependent). Don't try to be
-    # clever and replace this with sed code, as IRIX sed won't handle
-    # lines with more than a fixed number of characters (4096 in
-    # IRIX 6.2 sed, 8192 in IRIX 6.5).
-    tr ' ' '
-' < "$tmpdepfile" | sed 's/^[^\.]*\.o://' | tr '
-' ' ' >> $depfile
-
-    tr ' ' '
-' < "$tmpdepfile" | \
-## Some versions of the HPUX 10.20 sed can't process this invocation
-## correctly.  Breaking it into two sed invocations is a workaround.
-      sed -e 's/^\\$//' -e '/^$/d' -e '/:$/d' | sed -e 's/$/ :/' >> "$depfile"
+    # Each line is of the form `foo.o: dependent.h'.
+    # Do two passes, one to just change these to
+    # `$object: dependent.h' and one to simply `dependent.h:'.
+    sed -e "s,^$outname:,$object :," < "$tmpdepfile" > "$depfile"
+    sed -e "s,^$outname: \(.*\)$,\1:," < "$tmpdepfile" >> "$depfile"
   else
     # The sourcefile does not contain any dependencies, so just
     # store a dummy comment line, to avoid errors with the Makefile
@@ -190,40 +206,88 @@
   rm -f "$tmpdepfile"
   ;;
 
+tru64)
+   # The Tru64 compiler uses -MD to generate dependencies as a side
+   # effect.  `cc -MD -o foo.o ...' puts the dependencies into `foo.o.d'.
+   # At least on Alpha/Redhat 6.1, Compaq CCC V6.2-504 seems to put
+   # dependencies in `foo.d' instead, so we check for that too.
+   # Subdirectories are respected.
+   dir=`echo "$object" | sed -e 's|/[^/]*$|/|'`
+   test "x$dir" = "x$object" && dir=
+   base=`echo "$object" | sed -e 's|^.*/||' -e 's/\.o$//' -e 's/\.lo$//'`
+
+   if test "$libtool" = yes; then
+      tmpdepfile1="$dir.libs/$base.lo.d"
+      tmpdepfile2="$dir.libs/$base.d"
+      "$@" -Wc,-MD
+   else
+      tmpdepfile1="$dir$base.o.d"
+      tmpdepfile2="$dir$base.d"
+      "$@" -MD
+   fi
+
+   stat=$?
+   if test $stat -eq 0; then :
+   else
+      rm -f "$tmpdepfile1" "$tmpdepfile2"
+      exit $stat
+   fi
+
+   if test -f "$tmpdepfile1"; then
+      tmpdepfile="$tmpdepfile1"
+   else
+      tmpdepfile="$tmpdepfile2"
+   fi
+   if test -f "$tmpdepfile"; then
+      sed -e "s,^.*\.[a-z]*:,$object:," < "$tmpdepfile" > "$depfile"
+      # That's a space and a tab in the [].
+      sed -e 's,^.*\.[a-z]*:[ 	]*,,' -e 's,$,:,' < "$tmpdepfile" >> "$depfile"
+   else
+      echo "#dummy" > "$depfile"
+   fi
+   rm -f "$tmpdepfile"
+   ;;
+
 #nosideeffect)
   # This comment above is used by automake to tell side-effect
   # dependency tracking mechanisms from slower ones.
 
 dashmstdout)
   # Important note: in order to support this mode, a compiler *must*
-  # always write the proprocessed file to stdout, regardless of -o,
-  # because we must use -o when running libtool.
-  test -z "$dashmflag" && dashmflag=-M
-  ( IFS=" "
-    case " $* " in
-    *" --mode=compile "*) # this is libtool, let us make it quiet
-      for arg
-      do # cycle over the arguments
-        case "$arg" in
-	"--mode=compile")
-	  # insert --quiet before "--mode=compile"
-	  set fnord "$@" --quiet
-	  shift # fnord
-	  ;;
-	esac
-	set fnord "$@" "$arg"
-	shift # fnord
-	shift # "$arg"
-      done
+  # always write the proprocessed file to stdout, regardless of -o.
+  "$@" || exit $?
+
+  # Remove the call to Libtool.
+  if test "$libtool" = yes; then
+    while test $1 != '--mode=compile'; do
+      shift
+    done
+    shift
+  fi
+
+  # Remove `-o $object'.  We will use -o /dev/null later,
+  # however we can't do the remplacement now because
+  # `-o $object' might simply not be used
+  IFS=" "
+  for arg
+  do
+    case $arg in
+    -o)
+      shift
+      ;;
+    $object)
+      shift
+      ;;
+    *)
+      set fnord "$@" "$arg"
+      shift # fnord
+      shift # $arg
       ;;
     esac
-    "$@" $dashmflag | sed 's:^[^:]*\:[ 	]*:'"$object"'\: :' > "$tmpdepfile"
-  ) &
-  proc=$!
-  "$@"
-  stat=$?
-  wait "$proc"
-  if test "$stat" != 0; then exit $stat; fi
+  done
+
+  test -z "$dashmflag" && dashmflag=-M
+  "$@" -o /dev/null $dashmflag | sed 's:^[^:]*\:[ 	]*:'"$object"'\: :' > "$tmpdepfile"
   rm -f "$depfile"
   cat < "$tmpdepfile" > "$depfile"
   tr ' ' '
@@ -241,36 +305,31 @@
   ;;
 
 makedepend)
+  "$@" || exit $?
   # X makedepend
-  (
-    shift
-    cleared=no
-    for arg in "$@"; do
-      case $cleared in no)
-        set ""; shift
-	cleared=yes
-      esac
-      case "$arg" in
-        -D*|-I*)
-	  set fnord "$@" "$arg"; shift;;
-	-*)
-	  ;;
-	*)
-	  set fnord "$@" "$arg"; shift;;
-      esac
-    done
-    obj_suffix="`echo $object | sed 's/^.*\././'`"
-    touch "$tmpdepfile"
-    ${MAKEDEPEND-makedepend} 2>/dev/null -o"$obj_suffix" -f"$tmpdepfile" "$@"
-  ) &
-  proc=$!
-  "$@"
-  stat=$?
-  wait "$proc"
-  if test "$stat" != 0; then exit $stat; fi
+  shift
+  cleared=no
+  for arg in "$@"; do
+    case $cleared in
+    no)
+      set ""; shift
+      cleared=yes ;;
+    esac
+    case "$arg" in
+    -D*|-I*)
+      set fnord "$@" "$arg"; shift ;;
+    -*)
+      ;;
+    *)
+      set fnord "$@" "$arg"; shift ;;
+    esac
+  done
+  obj_suffix="`echo $object | sed 's/^.*\././'`"
+  touch "$tmpdepfile"
+  ${MAKEDEPEND-makedepend} -o"$obj_suffix" -f"$tmpdepfile" "$@"
   rm -f "$depfile"
   cat < "$tmpdepfile" > "$depfile"
-  tail +3 "$tmpdepfile" | tr ' ' '
+  sed '1,2d' "$tmpdepfile" | tr ' ' '
 ' | \
 ## Some versions of the HPUX 10.20 sed can't process this invocation
 ## correctly.  Breaking it into two sed invocations is a workaround.
@@ -280,35 +339,39 @@
 
 cpp)
   # Important note: in order to support this mode, a compiler *must*
-  # always write the proprocessed file to stdout, regardless of -o,
-  # because we must use -o when running libtool.
-  ( IFS=" "
-    case " $* " in
-    *" --mode=compile "*)
-      for arg
-      do # cycle over the arguments
-        case $arg in
-	"--mode=compile")
-	  # insert --quiet before "--mode=compile"
-	  set fnord "$@" --quiet
-	  shift # fnord
-	  ;;
-	esac
-	set fnord "$@" "$arg"
-	shift # fnord
-	shift # "$arg"
-      done
+  # always write the proprocessed file to stdout.
+  "$@" || exit $?
+
+  # Remove the call to Libtool.
+  if test "$libtool" = yes; then
+    while test $1 != '--mode=compile'; do
+      shift
+    done
+    shift
+  fi
+
+  # Remove `-o $object'.
+  IFS=" "
+  for arg
+  do
+    case $arg in
+    -o)
+      shift
+      ;;
+    $object)
+      shift
+      ;;
+    *)
+      set fnord "$@" "$arg"
+      shift # fnord
+      shift # $arg
       ;;
     esac
-    "$@" -E |
+  done
+
+  "$@" -E |
     sed -n '/^# [0-9][0-9]* "\([^"]*\)".*/ s:: \1 \\:p' |
     sed '$ s: \\$::' > "$tmpdepfile"
-  ) &
-  proc=$!
-  "$@"
-  stat=$?
-  wait "$proc"
-  if test "$stat" != 0; then exit $stat; fi
   rm -f "$depfile"
   echo "$object : \\" > "$depfile"
   cat < "$tmpdepfile" >> "$depfile"
@@ -320,32 +383,25 @@
   # Important note: in order to support this mode, a compiler *must*
   # always write the proprocessed file to stdout, regardless of -o,
   # because we must use -o when running libtool.
-  ( IFS=" "
-    case " $* " in
-    *" --mode=compile "*)
-      for arg
-      do # cycle over the arguments
-        case $arg in
-	"--mode=compile")
-	  # insert --quiet before "--mode=compile"
-	  set fnord "$@" --quiet
-	  shift # fnord
-	  ;;
-	esac
+  "$@" || exit $?
+  IFS=" "
+  for arg
+  do
+    case "$arg" in
+    "-Gm"|"/Gm"|"-Gi"|"/Gi"|"-ZI"|"/ZI")
+	set fnord "$@"
+	shift
+	shift
+	;;
+    *)
 	set fnord "$@" "$arg"
-	shift # fnord
-	shift # "$arg"
-      done
-      ;;
+	shift
+	shift
+	;;
     esac
-    "$@" -E |
-    sed -n '/^#line [0-9][0-9]* "\([^"]*\)"/ s::echo "`cygpath -u \\"\1\\"`":p' | sort | uniq > "$tmpdepfile"
-  ) &
-  proc=$!
-  "$@"
-  stat=$?
-  wait "$proc"
-  if test "$stat" != 0; then exit $stat; fi
+  done
+  "$@" -E |
+  sed -n '/^#line [0-9][0-9]* "\([^"]*\)"/ s::echo "`cygpath -u \\"\1\\"`":p' | sort | uniq > "$tmpdepfile"
   rm -f "$depfile"
   echo "$object : \\" > "$depfile"
   . "$tmpdepfile" | sed 's% %\\ %g' | sed -n '/^\(.*\)$/ s::	\1 \\:p' >> "$depfile"
diff -uNr mutt-1.4.orig/doc/manual-1.html mutt-1.4/doc/manual-1.html
--- mutt-1.4.orig/doc/manual-1.html	Wed May 29 11:29:54 2002
+++ mutt-1.4/doc/manual-1.html	Thu Jan  1 01:00:00 1970
@@ -1,97 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client: Introduction</TITLE>
- <LINK HREF="manual-2.html" REL=next>
-
- <LINK HREF="manual.html#toc1" REL=contents>
-</HEAD>
-<BODY>
-<A HREF="manual-2.html">Next</A>
-Previous
-<A HREF="manual.html#toc1">Contents</A>
-<HR>
-<H2><A NAME="s1">1.</A> <A HREF="manual.html#toc1">Introduction</A></H2>
-
-<P><B>Mutt</B> is a small but very powerful text-based MIME mail client.  Mutt is
-highly configurable, and is well suited to the mail power user with advanced
-features like key bindings, keyboard macros, mail threading, regular
-expression searches and a powerful pattern matching language for selecting
-groups of messages.</P>
-
-<H2><A NAME="ss1.1">1.1</A> <A HREF="manual.html#toc1.1">Mutt Home Page</A>
-</H2>
-
-<P>
-<A HREF="http://www.mutt.org/">http://www.mutt.org/</A></P>
-
-<H2><A NAME="ss1.2">1.2</A> <A HREF="manual.html#toc1.2">Mailing Lists</A>
-</H2>
-
-<P>To subscribe to one of the following mailing lists, send a message with the
-word <EM>subscribe</EM> in the body to
-<CODE>list-name</CODE><EM>-request</EM><CODE>@mutt.org</CODE>.</P>
-<P>
-<UL>
-<LI>
-<A HREF="mailto:mutt-announce-request@mutt.org">mutt-announce@mutt.org</A> -- low traffic list for announcements</LI>
-<LI>
-<A HREF="mailto:mutt-users-request@mutt.org">mutt-users@mutt.org</A> -- help, bug reports and feature requests</LI>
-<LI>
-<A HREF="mailto:mutt-dev-request@mutt.org">mutt-dev@mutt.org</A> -- development mailing list</LI>
-</UL>
-</P>
-<P><B>Note:</B> all messages posted to <EM>mutt-announce</EM> are automatically
-forwarded to <EM>mutt-users</EM>, so you do not need to be subscribed to both
-lists.</P>
-
-<H2><A NAME="ss1.3">1.3</A> <A HREF="manual.html#toc1.3">Software Distribution Sites</A>
-</H2>
-
-<P>
-<UL>
-<LI>
-<A HREF="ftp://ftp.mutt.org/pub/mutt/">ftp://ftp.mutt.org/pub/mutt/</A></LI>
-<LI>
-<A HREF="ftp://ftp.guug.de/pub/mutt/">ftp://ftp.guug.de/pub/mutt/</A></LI>
-</UL>
-</P>
-<P>For a list of mirror sites, please refer to 
-<A HREF="http://www.mutt.org/download.html">http://www.mutt.org/download.html</A>.</P>
-
-<H2><A NAME="ss1.4">1.4</A> <A HREF="manual.html#toc1.4">IRC</A>
-</H2>
-
-<P>Visit channel <EM>#mutt</EM> on 
-<A HREF="http://www.openprojects.net">OpenProjects.Net (www.openprojects.net)</A> to chat with other people interested in Mutt.</P>
-
-<H2><A NAME="ss1.5">1.5</A> <A HREF="manual.html#toc1.5">USENET</A>
-</H2>
-
-<P>See the newsgroup 
-<A HREF="news:comp.mail.mutt">comp.mail.mutt</A>.</P>
-
-<H2><A NAME="ss1.6">1.6</A> <A HREF="manual.html#toc1.6">Copyright</A>
-</H2>
-
-<P>Mutt is Copyright (C) 1996-2000 Michael R. Elkins
-&lt;me@cs.hmc.edu&gt; and others</P>
-<P>This program is free software; you can redistribute it and/or modify
-it under the terms of the GNU General Public License as published by
-the Free Software Foundation; either version 2 of the License, or
-(at your option) any later version.</P>
-<P>This program is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-GNU General Public License for more details.</P>
-<P>You should have received a copy of the GNU General Public License
-along with this program; if not, write to the Free Software
-Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111, USA.</P>
-
-<HR>
-<A HREF="manual-2.html">Next</A>
-Previous
-<A HREF="manual.html#toc1">Contents</A>
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual-2.html mutt-1.4/doc/manual-2.html
--- mutt-1.4.orig/doc/manual-2.html	Wed May 29 11:29:54 2002
+++ mutt-1.4/doc/manual-2.html	Thu Jan  1 01:00:00 1970
@@ -1,667 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client: Getting Started</TITLE>
- <LINK HREF="manual-3.html" REL=next>
- <LINK HREF="manual-1.html" REL=previous>
- <LINK HREF="manual.html#toc2" REL=contents>
-</HEAD>
-<BODY>
-<A HREF="manual-3.html">Next</A>
-<A HREF="manual-1.html">Previous</A>
-<A HREF="manual.html#toc2">Contents</A>
-<HR>
-<H2><A NAME="s2">2.</A> <A HREF="manual.html#toc2">Getting Started</A></H2>
-
-
-<P>This section is intended as a brief overview of how to use Mutt.  There are
-many other features which are described elsewhere in the manual.  There
-is even more information available in the Mutt FAQ and various web
-pages.  See the 
-<A HREF="http://www.mutt.org/mutt/">Mutt Page</A> for more details.</P>
-<P>The keybindings described in this section are the defaults as distributed.
-Your local system administrator may have altered the defaults for your site.
-You can always type ``?'' in any menu to display the current bindings.</P>
-<P>The first thing you need to do is invoke mutt, simply by typing mutt
-at the command line.  There are various command-line options, see 
-either the mutt man page or the 
-<A HREF="manual-6.html#commandline">reference</A>.</P>
-
-<H2><A NAME="ss2.1">2.1</A> <A HREF="manual.html#toc2.1">Moving Around in Menus</A>
-</H2>
-
-
-<P>Information is presented in menus, very similar to ELM.  Here is a table
-showing the common keys used to navigate menus in Mutt.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-j or Down       next-entry      move to the next entry
-k or Up         previous-entry  move to the previous entry
-z or PageDn     page-down       go to the next page
-Z or PageUp     page-up         go to the previous page
-= or Home       first-entry     jump to the first entry
-* or End        last-entry      jump to the last entry
-q               quit            exit the current menu
-?               help            list all keybindings for the current menu
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="editing"></A> <A NAME="ss2.2">2.2</A> <A HREF="manual.html#toc2.2">Editing Input Fields</A>
-</H2>
-
-<P>Mutt has a builtin line editor which is used as the primary way to input
-textual data such as email addresses or filenames.  The keys used to move
-around while editing are very similar to those of Emacs.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-^A or &lt;Home>    bol             move to the start of the line
-^B or &lt;Left>    backward-char   move back one char
-Esc B           backward-word   move back one word
-^D or &lt;Delete>  delete-char     delete the char under the cursor
-^E or &lt;End>     eol             move to the end of the line
-^F or &lt;Right>   forward-char    move forward one char
-Esc F           forward-word    move forward one word
-&lt;Tab>           complete        complete filename or alias
-^T              complete-query  complete address with query
-^K              kill-eol        delete to the end of the line
-ESC d           kill-eow        delete to the end ot the word
-^W              kill-word       kill the word in front of the cursor
-^U              kill-line       delete entire line
-^V              quote-char      quote the next typed key
-&lt;Up>            history-up      recall previous string from history
-&lt;Down>          history-down    recall next string from history
-&lt;BackSpace>     backspace       kill the char in front of the cursor
-Esc u           upcase-word     convert word to upper case
-Esc l           downcase-word   convert word to lower case
-Esc c           capitalize-word capitalize the word
-^G              n/a             abort
-&lt;Return>        n/a             finish editing
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>You can remap the <EM>editor</EM> functions using the 
-<A HREF="manual-3.html#bind">bind</A>
-command.  For example, to make the <EM>Delete</EM> key delete the character in
-front of the cursor rather than under, you could use</P>
-<P><CODE>bind editor &lt;delete&gt; backspace</CODE></P>
-
-<H2><A NAME="ss2.3">2.3</A> <A HREF="manual.html#toc2.3">Reading Mail - The Index and Pager</A>
-</H2>
-
-
-<P>Similar to many other mail clients, there are two modes in which mail is
-read in Mutt.  The first is the index of messages in the mailbox, which is
-called the ``index'' in Mutt.  The second mode is the display of the
-message contents.  This is called the ``pager.''</P>
-<P>The next few sections describe the functions provided in each of these
-modes.</P>
-
-<H3>The Message Index</H3>
-
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-c               change to a different mailbox
-ESC c           change to a folder in read-only mode
-C               copy the current message to another mailbox
-ESC C           decode a message and copy it to a folder
-ESC s           decode a message and save it to a folder
-D               delete messages matching a pattern
-d               delete the current message
-F               mark as important
-l               show messages matching a pattern
-N               mark message as new
-o               change the current sort method
-O               reverse sort the mailbox
-q               save changes and exit
-s               save-message
-T               tag messages matching a pattern
-t               toggle the tag on a message
-ESC t           toggle tag on entire message thread
-U               undelete messages matching a pattern
-u               undelete-message
-v               view-attachments
-x               abort changes and exit
-&lt;Return>        display-message
-&lt;Tab>           jump to the next new message
-@               show the author's full e-mail address
-$               save changes to mailbox
-/               search
-ESC /           search-reverse
-^L              clear and redraw the screen
-^T              untag messages matching a pattern
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3>Status Flags</H3>
-
-
-<P>In addition to who sent the message and the subject, a short summary of
-the disposition of each message is printed beside the message number.
-Zero or more of the following ``flags'' may appear, which mean:</P>
-
-<P>
-<DL>
-<DT><B>D</B><DD><P>message is deleted (is marked for deletion)</P>
-<DT><B>d</B><DD><P>message have attachments marked for deletion</P>
-<DT><B>K</B><DD><P>contains a PGP public key</P>
-<DT><B>N</B><DD><P>message is new</P>
-<DT><B>O</B><DD><P>message is old</P>
-<DT><B>P</B><DD><P>message is PGP encrypted</P>
-<DT><B>r</B><DD><P>message has been replied to</P>
-<DT><B>S</B><DD><P>message is PGP signed, and the signature is succesfully verified</P>
-<DT><B>s</B><DD><P>message is PGP signed</P>
-<DT><B>!</B><DD><P>message is flagged</P>
-<DT><B>*</B><DD><P>message is tagged</P>
-</DL>
-</P>
-<P>Some of the status flags can be turned on or off using
-<UL>
-<LI><B>set-flag</B> (default: w)</LI>
-<LI><B>clear-flag</B> (default: W)</LI>
-</UL>
-</P>
-
-<P>Furthermore, the following flags reflect who the message is addressed
-to.  They can be customized with the
-<A HREF="manual-6.html#to_chars">$to_chars</A> variable.</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-+       message is to you and you only
-T       message is to you, but also to or cc'ed to others
-C       message is cc'ed to you
-F       message is from you
-L       message is sent to a subscribed mailing list
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3>The Pager</H3>
-
-
-<P>By default, Mutt uses its builtin pager to display the body of messages.
-The pager is very similar to the Unix program <EM>less</EM> though not nearly as
-featureful.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-&lt;Return>        go down one line
-&lt;Space>         display the next page (or next message if at the end of a message)
--               go back to the previous page
-n               search for next match
-S               skip beyond quoted text
-T               toggle display of quoted text
-?               show keybindings
-/               search for a regular expression (pattern)
-ESC /           search backwards for a regular expression
-\               toggle search pattern coloring
-^               jump to the top of the message
-$               jump to the bottom of the message
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>In addition, many of the functions from the <EM>index</EM> are available in
-the pager, such as <EM>delete-message</EM> or <EM>copy-message</EM> (this is one
-advantage over using an external pager to view messages).</P>
-<P>Also, the internal pager supports a couple other advanced features. For
-one, it will accept and translate the ``standard'' nroff sequences for
-bold and underline. These sequences are a series of either the letter,
-backspace (^H), the letter again for bold or the letter, backspace,
-``_'' for denoting underline. Mutt will attempt to display these
-in bold and underline respectively if your terminal supports them. If
-not, you can use the bold and underline 
-<A HREF="manual-3.html#color">color</A>
-objects to specify a color or mono attribute for them.</P>
-<P>Additionally, the internal pager supports the ANSI escape sequences for
-character attributes.  Mutt translates them into the correct color and
-character settings.  The sequences Mutt supports are:</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-ESC [ Ps;Ps;Ps;...;Ps m
-where Ps =
-0    All Attributes Off
-1    Bold on
-4    Underline on
-5    Blink on
-7    Reverse video on
-3x   Foreground color is x
-4x   Background color is x
-
-Colors are
-0    black
-1    red
-2    green
-3    yellow
-4    blue
-5    magenta
-6    cyan
-7    white
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Mutt uses these attributes for handling text/enriched messages, and they
-can also be used by an external 
-<A HREF="manual-5.html#auto_view">autoview</A>
-script for highlighting purposes.  <B>Note:</B> If you change the colors for your
-display, for example by changing the color associated with color2 for
-your xterm, then that color will be used instead of green.</P>
-
-<H3><A NAME="threads"></A> Threaded Mode</H3>
-
-<P>When the mailbox is 
-<A HREF="manual-6.html#sort">sorted</A> by <EM>threads</EM>, there are
-a few additional functions available in the <EM>index</EM> and <EM>pager</EM> modes.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-^D      delete-thread           delete all messages in the current thread
-^U      undelete-thread         undelete all messages in the current thread
-^N      next-thread             jump to the start of the next thread
-^P      previous-thread         jump to the start of the previous thread
-^R      read-thread             mark the current thread as read
-ESC d   delete-subthread        delete all messages in the current subthread
-ESC u   undelete-subthread      undelete all messages in the current subthread
-ESC n   next-subthread          jump to the start of the next subthread
-ESC p   previous-subthread      jump to the start of the previous subthread
-ESC r   read-subthread          mark the current subthread as read
-ESC t   tag-thread              toggle the tag on the current thread
-ESC v   collapse-thread         toggle collapse for the current thread
-ESC V   collapse-all            toggle collapse for all threads
-P       parent-message          jump to parent message in thread
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P><B>Note:</B> Collapsing a thread displays only the first message
-in the thread and hides the others. This is useful when threads
-contain so many messages that you can only see a handful of threads on
-the screen. See %M in 
-<A HREF="manual-6.html#index_format">$index_format</A>.
-For example, you could use "%?M?(#%03M)&amp;(%4l)?" in 
-<A HREF="manual-6.html#index_format">$index_format</A> to optionally
-display the number of hidden messages if the thread is collapsed.</P>
-<P>See also: 
-<A HREF="manual-6.html#strict_threads">$strict_threads</A>.</P>
-
-<H3>Miscellaneous Functions</H3>
-
-<P><B>create-alias</B>
-<A NAME="create-alias"></A>  (default: a)<BR></P>
-<P>Creates a new alias based upon the current message (or prompts for a
-new one).  Once editing is complete, an 
-<A HREF="manual-3.html#alias">alias</A>
-command is added to the file specified by the 
-<A HREF="manual-6.html#alias_file">$alias_file</A> variable for future use. <B>Note:</B>
-Specifying an 
-<A HREF="manual-6.html#alias_file">$alias_file</A>
-does not add the aliases specified there-in, you must also 
-<A HREF="manual-3.html#source">source</A> the file.</P>
-
-<P><B>check-traditional-pgp</B>
-<A NAME="check-traditional-pgp"></A>  (default: ESC P)<BR></P>
-<P>This function will search the current message for content signed or
-encrypted with PGP the "traditional" way, that is, without proper
-MIME tagging.  Technically, this function will temporarily change
-the MIME content types of the body parts containing PGP data; this
-is similar to the 
-<A HREF="#edit-type">edit-type</A> function's
-effect.</P>
-
-
-<P><B>display-toggle-weed</B>
-<A NAME="display-toggle-weed"></A>  (default: h)<BR></P>
-<P>Toggles the weeding of message header fields specified by 
-<A HREF="manual-3.html#ignore">ignore</A> commands.</P>
-
-<P><B>edit</B>
-<A NAME="edit"></A>  (default: e)<BR></P>
-<P>This command (available in the ``index'' and ``pager'') allows you to
-edit the raw current message as it's present in the mail folder.
-After you have finished editing, the changed message will be
-appended to the current folder, and the original message will be
-marked for deletion.</P>
-
-<P><B>edit-type</B>
-<A NAME="edit-type"></A> <BR>
-(default: ^E on the attachment menu, and in the pager and index menus; ^T on the
-compose menu)</P>
-<P>This command is used to temporarily edit an attachment's content
-type to fix, for instance, bogus character set parameters.  When
-invoked from the index or from the pager, you'll have the
-opportunity to edit the top-level attachment's content type.  On the
-<A HREF="manual-5.html#attach_menu">attachment menu</A>, you can change any
-attachment's content type. These changes are not persistent, and get
-lost upon changing folders.</P>
-<P>Note that this command is also available on the 
-<A HREF="manual-5.html#compose_menu">compose menu</A>.  There, it's used to
-fine-tune the properties of attachments you are going to send.</P>
-
-<P><B>enter-command</B>
-<A NAME="enter-command"></A>  (default: ``:'')<BR></P>
-<P>This command is used to execute any command you would normally put in a
-configuration file.  A common use is to check the settings of variables, or
-in conjunction with 
-<A HREF="manual-3.html#macro">macros</A> to change settings on the
-fly.</P>
-
-<P><B>extract-keys</B>
-<A NAME="extract-keys"></A>  (default: ^K)<BR></P>
-<P>This command extracts PGP public keys from the current or tagged
-message(s) and adds them to your PGP public key ring.</P>
-
-<P><B>forget-passphrase</B>
-<A NAME="forget-passphrase"></A>  (default:
-^F)<BR> </P>
-<P>This command wipes the PGP passphrase from memory. It is useful, if
-you misspelled the passphrase.</P>
-
-<P><B>list-reply</B>
-<A NAME="list-reply"></A>  (default: L)<BR></P>
-<P>Reply to the current or tagged message(s) by extracting any addresses which
-match the addresses given by the 
-<A HREF="manual-3.html#lists">lists or subscribe</A>
-commands, but also honor any <CODE>Mail-Followup-To</CODE> header(s) if the
-<A HREF="manual-6.html#honor_followup_to">$honor_followup_to</A>
-configuration variable is set.  Using this when replying to messages posted
-to mailing lists helps avoid duplicate copies being sent to the author of
-the message you are replying to.</P>
-<P><B>pipe-message</B>
-<A NAME="pipe-message"></A>  (default: |)<BR></P>
-<P>Asks for an external Unix command and pipes the current or
-tagged message(s) to it.  The variables 
-<A HREF="manual-6.html#pipe_decode">$pipe_decode</A>, 
-<A HREF="manual-6.html#pipe_split">$pipe_split</A>, 
-<A HREF="manual-6.html#pipe_sep">$pipe_sep</A> and 
-<A HREF="manual-6.html#wait_key">$wait_key</A> control the exact behaviour of this
-function.</P>
-<P><B>resend-message</B>
-<A NAME="resend-message"></A>  (default: ESC e)<BR></P>
-<P>With resend-message, mutt takes the current message as a template for a
-new message.  This function is best described as "recall from arbitrary
-folders".  It can conveniently be used to forward MIME messages while
-preserving the original mail structure. Note that the amount of headers
-included here depends on the value of the 
-<A HREF="manual-6.html#weed">$weed</A>
-variable.</P>
-<P>This function is also available from the attachment menu. You can use this
-to easily resend a message which was included with a bounce message
-as a message/rfc822 body part.</P>
-<P><B>shell-escape</B>
-<A NAME="shell-escape"></A>  (default: !)<BR></P>
-<P>Asks for an external Unix command and executes it.  The 
-<A HREF="manual-6.html#wait_key">$wait_key</A> can be used to control
-whether Mutt will wait for a key to be pressed when the command returns
-(presumably to let the user read the output of the command), based on
-the return status of the named command.</P>
-<P><B>toggle-quoted</B>
-<A NAME="toggle-quoted"></A>  (default: T)<BR></P>
-<P>The <EM>pager</EM> uses the 
-<A HREF="manual-6.html#quote_regexp">$quote_regexp</A> variable to detect quoted text when
-displaying the body of the message.  This function toggles the display
-of the quoted material in the message.  It is particularly useful when
-are interested in just the response and there is a large amount of
-quoted text in the way.</P>
-<P><B>skip-quoted</B>
-<A NAME="skip-quoted"></A>  (default: S)<BR></P>
-<P>This function will go to the next line of non-quoted text which come
-after a line of quoted text in the internal pager.</P>
-
-<H2><A NAME="ss2.4">2.4</A> <A HREF="manual.html#toc2.4">Sending Mail</A>
-</H2>
-
-
-<P>The following bindings are available in the <EM>index</EM> for sending
-messages.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-m       compose         compose a new message
-r       reply           reply to sender
-g       group-reply     reply to all recipients
-L       list-reply      reply to mailing list address
-f       forward         forward message
-b       bounce          bounce (remail) message
-ESC k   mail-key        mail a PGP public key to someone
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Bouncing a message sends the message as is to the recipient you
-specify.  Forwarding a message allows you to add comments or
-modify the message you are forwarding.  These items are discussed
-in greater detail in the next chapter 
-<A HREF="#forwarding_mail">``Forwarding and Bouncing Mail''</A>.</P>
-<P>Mutt will then enter the <EM>compose</EM> menu and prompt you for the
-recipients to place on the ``To:'' header field.  Next, it will ask
-you for the ``Subject:'' field for the message, providing a default if
-you are replying to or forwarding a message.  See also 
-<A HREF="manual-6.html#askcc">$askcc</A>, 
-<A HREF="manual-6.html#askbcc">$askbcc</A>, 
-<A HREF="manual-6.html#autoedit">$autoedit</A>, and 
-<A HREF="manual-6.html#fast_reply">$fast_reply</A> for changing how Mutt asks these
-questions.</P>
-<P>Mutt will then automatically start your 
-<A HREF="manual-6.html#editor">$editor</A> on the message body.  If the 
-<A HREF="manual-6.html#edit_headers">$edit_headers</A> variable is set, the headers will be at
-the top of the message in your editor.  Any messages you are replying
-to will be added in sort order to the message, with appropriate 
-<A HREF="manual-6.html#attribution">$attribution</A>, 
-<A HREF="manual-6.html#indent_string">$indent_string</A> and 
-<A HREF="manual-6.html#post_indent_string">$post_indent_string</A>.  When forwarding a
-message, if the 
-<A HREF="manual-6.html#mime_forward">$mime_forward</A>
-variable is unset, a copy of the forwarded message will be included.  If
-you have specified a 
-<A HREF="manual-6.html#signature">$signature</A>, it
-will be appended to the message.</P>
-<P>Once you have finished editing the body of your mail message, you are
-returned to the <EM>compose</EM> menu.  The following options are available:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-a       attach-file             attach a file
-A       attach-message          attach message(s) to the message
-ESC k   attach-key              attach a PGP public key
-d       edit-description        edit description on attachment
-D       detach-file             detach a file
-t       edit-to                 edit the To field
-ESC f   edit-from               edit the From field
-r       edit-reply-to           edit the Reply-To field
-c       edit-cc                 edit the Cc field
-b       edit-bcc                edit the Bcc field
-y       send-message            send the message
-s       edit-subject            edit the Subject
-f       edit-fcc                specify an ``Fcc'' mailbox
-p       pgp-menu                select PGP options (``i'' version only)
-P       postpone-message        postpone this message until later
-q       quit                    quit (abort) sending the message
-w       write-fcc               write the message to a folder
-i       ispell                  check spelling (if available on your system)
-^F      forget-passphrase       whipe PGP passphrase from memory
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P><B>Note:</B> The attach-message function will prompt you for a folder to
-attach messages from. You can now tag messages in that folder and they
-will be attached to the message you are sending. Note that certain
-operations like composing a new mail, replying, forwarding, etc. are
-not permitted when you are in that folder. The %r in 
-<A HREF="manual-6.html#status_format">$status_format</A> will change to
-a 'A' to indicate that you are in attach-message mode.</P>
-
-<H3>Editing the message header</H3>
-
-<P>When editing the header of your outgoing message, there are a couple of
-special features available.</P>
-<P>If you specify<BR>
-<CODE>Fcc:</CODE> <EM>filename</EM><BR>
-Mutt will pick up <EM>filename</EM>
-just as if you had used the <EM>edit-fcc</EM> function in the <EM>compose</EM> menu.</P>
-<P>You can also attach files to your message by specifying<BR>
-<CODE>Attach:</CODE> <EM>filename</EM>  [ <EM>description</EM> ]<BR>
-where <EM>filename</EM> is the file to attach and <EM>description</EM> is an
-optional string to use as the description of the attached file.</P>
-<P>When replying to messages, if you remove the <EM>In-Reply-To:</EM> field from
-the header field, Mutt will not generate a <EM>References:</EM> field, which
-allows you to create a new message thread.</P>
-<P>Also see 
-<A HREF="manual-6.html#edit_headers">edit_headers</A>.</P>
-
-<H3>Using Mutt with PGP</H3>
-
-<P>If you want to use PGP, you can specify </P>
-<P><CODE>Pgp:</CODE> [ <CODE>E</CODE> | <CODE>S</CODE> | <CODE>S&lt;id</CODE>&gt; ] <BR></P>
-<P>``E'' encrypts, ``S'' signs and
-``S&lt;id&gt;'' signs with the given key, setting 
-<A HREF="manual-6.html#pgp_sign_as">$pgp_sign_as</A> permanently.</P>
-<P>If you have told mutt to PGP encrypt a message, it will guide you
-through a key selection process when you try to send the message.
-Mutt will not ask you any questions about keys which have a
-certified user ID matching one of the message recipients' mail
-addresses.  However, there may be situations in which there are
-several keys, weakly certified user ID fields, or where no matching
-keys can be found.</P>
-<P>In these cases, you are dropped into a menu with a list of keys from
-which you can select one.  When you quit this menu, or mutt can't
-find any matching keys, you are prompted for a user ID.  You can, as
-usually, abort this prompt using <CODE>^G</CODE>.  When you do so, mutt will
-return to the compose screen.</P>
-<P>Once you have successfully finished the key selection, the message
-will be encrypted using the selected public keys, and sent out.</P>
-<P>Most fields of the entries in the key selection menu (see also 
-<A HREF="manual-6.html#pgp_entry_format">$pgp_entry_format</A>) 
-have obvious meanings.  But some explanations on the capabilities, flags, 
-and validity fields are in order.</P>
-<P>The flags sequence (%f) will expand to one of the following flags:
-<BLOCKQUOTE><CODE>
-<PRE>
-R            The key has been revoked and can't be used.
-X            The key is expired and can't be used.
-d            You have marked the key as disabled.
-c            There are unknown critical self-signature 
-             packets.
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>The capabilities field (%c) expands to a two-character sequence
-representing a key's capabilities.  The first character gives
-the key's encryption capabilities: A minus sign (<B>-</B>) means 
-that the key cannot be used for encryption.  A dot (<B>.</B>) means that
-it's marked as a signature key in one of the user IDs, but may 
-also be used for encryption.  The letter <B>e</B> indicates that 
-this key can be used for encryption.</P>
-<P>The second character indicates the key's signing capabilities.  Once 
-again, a ``<B>-</B>'' implies ``not for signing'', ``<B>.</B>'' implies
-that the key is marked as an encryption key in one of the user-ids, and
-``<B>s</B>'' denotes a key which can be used for signing.</P>
-<P>Finally, the validity field (%t) indicates how well-certified a user-id
-is.  A question mark (<B>?</B>) indicates undefined validity, a minus 
-character (<B>-</B>) marks an untrusted association, a space character 
-means a partially trusted association, and a plus character (<B>+</B>) 
-indicates complete validity.</P>
-
-<H3>Sending anonymous messages via mixmaster.</H3>
-
-<P>You may also have configured mutt to co-operate with Mixmaster, an
-anonymous remailer.  Mixmaster permits you to send your messages
-anonymously using a chain of remailers. Mixmaster support in mutt is for 
-mixmaster version 2.04 (beta 45 appears to be the latest) and 2.03. 
-It does not support earlier versions or the later so-called version 3 betas, 
-of which the latest appears to be called 2.9b23.</P>
-<P>To use it, you'll have to obey certain restrictions.  Most
-important, you cannot use the <CODE>Cc</CODE> and <CODE>Bcc</CODE> headers.  To tell
-Mutt to use mixmaster, you have to select a remailer chain, using
-the mix function on the compose menu.  </P>
-<P>The chain selection screen is divided into two parts.  In the
-(larger) upper part, you get a list of remailers you may use.  In
-the lower part, you see the currently selected chain of remailers.</P>
-<P>You can navigate in the chain using the <CODE>chain-prev</CODE> and
-<CODE>chain-next</CODE> functions, which are by default bound to the left
-and right arrows and to the <CODE>h</CODE> and <CODE>l</CODE> keys (think vi
-keyboard bindings).  To insert a remailer at the current chain
-position, use the <CODE>insert</CODE> function.  To append a remailer behind
-the current chain position, use <CODE>select-entry</CODE> or <CODE>append</CODE>.
-You can also delete entries from the chain, using the corresponding
-function.  Finally, to abandon your changes, leave the menu, or
-<CODE>accept</CODE> them pressing (by default) the <CODE>Return</CODE> key.</P>
-<P>Note that different remailers do have different capabilities,
-indicated in the %c entry of the remailer menu lines (see
-<A HREF="manual-6.html#mix_entry_format">$mix_entry_format</A>).  Most important is
-the ``middleman'' capability, indicated by a capital ``M'': This
-means that the remailer in question cannot be used as the final
-element of a chain, but will only forward messages to other
-mixmaster remailers.  For details on the other capabilities, please
-have a look at the mixmaster documentation.</P>
-
-<H2><A NAME="forwarding_mail"></A> <A NAME="ss2.5">2.5</A> <A HREF="manual.html#toc2.5">Forwarding and Bouncing Mail</A>
-</H2>
-
-
-<P>Bouncing and forwarding let you send an existing message to recipients
-that you specify.  Bouncing a message uses the 
-<A HREF="manual-6.html#sendmail">sendmail</A> command to send a copy to alternative addresses as if
-they were the message's original recipients.  Forwarding a message, on
-the other hand, allows you to modify the message before it is resent
-(for example, by adding your own comments).</P>
-<P>The following keys are bound by default:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-f       forward         forward message
-b       bounce          bounce (remail) message
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Forwarding can be done by including the original message in the new
-message's body (surrounded by indicating lines) or including it as a MIME
-attachment, depending on the value of the 
-<A HREF="manual-6.html#mime_forward">$mime_forward</A> variable.  Decoding of attachments,
-like in the pager, can be controlled by the 
-<A HREF="manual-6.html#forward_decode">$forward_decode</A> and 
-<A HREF="manual-6.html#mime_forward_decode">$mime_forward_decode</A> variables,
-respectively.  The desired forwarding format may depend on the content,
-therefore <EM>$mime_forward</EM> is a quadoption which, for
-example, can be set to ``ask-no''.</P>
-<P>The inclusion of headers is controlled by the current setting of the
-<A HREF="manual-6.html#weed">$weed</A> variable, unless 
-<A HREF="manual-6.html#mime_forward">mime_forward</A> is set.</P>
-<P>Editing the message to forward follows the same procedure as sending or
-replying to a message does.</P>
-
-<H2><A NAME="postponing_mail"></A> <A NAME="ss2.6">2.6</A> <A HREF="manual.html#toc2.6">Postponing Mail</A>
-</H2>
-
-
-<P>At times it is desirable to delay sending a message that you have
-already begun to compose.  When the <EM>postpone-message</EM> function is
-used in the <EM>compose</EM> menu, the body of your message and attachments
-are stored in the mailbox specified by the 
-<A HREF="manual-6.html#postponed">$postponed</A> variable.  This means that you can recall the
-message even if you exit Mutt and then restart it at a later time.</P>
-<P>Once a message is postponed, there are several ways to resume it.  From the
-command line you can use the ``-p'' option, or if you <EM>compose</EM> a new
-message from the <EM>index</EM> or <EM>pager</EM> you will be prompted if postponed
-messages exist.  If multiple messages are currently postponed, the
-<EM>postponed</EM> menu will pop up and you can select which message you would
-like to resume.</P>
-<P><B>Note:</B> If you postpone a reply to a message, the reply setting of
-the message is only updated when you actually finish the message and
-send it.  Also, you must be in the same folder with the message you
-replied to for the status of the message to be updated.</P>
-<P>See also the 
-<A HREF="manual-6.html#postpone">$postpone</A> quad-option.</P>
-
-<HR>
-<A HREF="manual-3.html">Next</A>
-<A HREF="manual-1.html">Previous</A>
-<A HREF="manual.html#toc2">Contents</A>
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual-3.html mutt-1.4/doc/manual-3.html
--- mutt-1.4.orig/doc/manual-3.html	Wed May 29 11:29:55 2002
+++ mutt-1.4/doc/manual-3.html	Thu Jan  1 01:00:00 1970
@@ -1,793 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client: Configuration</TITLE>
- <LINK HREF="manual-4.html" REL=next>
- <LINK HREF="manual-2.html" REL=previous>
- <LINK HREF="manual.html#toc3" REL=contents>
-</HEAD>
-<BODY>
-<A HREF="manual-4.html">Next</A>
-<A HREF="manual-2.html">Previous</A>
-<A HREF="manual.html#toc3">Contents</A>
-<HR>
-<H2><A NAME="s3">3.</A> <A HREF="manual.html#toc3">Configuration</A></H2>
-
-
-<P>While the default configuration (or ``preferences'') make Mutt
-usable right out of the box, it is often desirable to tailor Mutt to
-suit your own tastes. When Mutt is first invoked, it will attempt to
-read the ``system'' configuration file (defaults set by your local
-system administrator), unless the ``-n'' 
-<A HREF="manual-6.html#commandline">command line</A> option is specified.  This file is typically
-<CODE>/usr/local/share/mutt/Muttrc</CODE> or <CODE>/etc/Muttrc</CODE>. Mutt
-will next look for a file named <CODE>.muttrc</CODE> in your home
-directory.  If this file does not exist and your home directory has
-a subdirectory named <CODE>.mutt</CODE>, mutt try to load a file named
-<CODE>.mutt/muttrc</CODE>. </P>
-<P><CODE>.muttrc</CODE> is the file where you will usually place your 
-<A HREF="manual-6.html#commands">commands</A> to configure Mutt.</P>
-<P>In addition, mutt supports version specific configuration files that are
-parsed instead of the default files as explained above.  For instance, if
-your system has a <CODE>Muttrc-0.88</CODE> file in the system configuration
-directory, and you are running version 0.88 of mutt, this file will be
-sourced instead of the <CODE>Muttrc</CODE> file.  The same is true of the user
-configuration file, if you have a file <CODE>.muttrc-0.88.6</CODE> in your home
-directory, when you run mutt version 0.88.6, it will source this file
-instead of the default <CODE>.muttrc</CODE> file.  The version number is the
-same which is visible using the ``-v'' 
-<A HREF="manual-6.html#commandline">command line</A> switch or using the <CODE>show-version</CODE> key (default:
-V) from the index menu.</P>
-
-<H2><A NAME="muttrc-syntax"></A> <A NAME="ss3.1">3.1</A> <A HREF="manual.html#toc3.1">Syntax of Initialization Files</A>
-</H2>
-
-
-<P>An initialization file consists of a series of 
-<A HREF="manual-6.html#commands">commands</A>.  Each line of the file may contain one or more commands.
-When multiple commands are used, they must be separated by a semicolon (;).
-<BLOCKQUOTE><CODE>
-<PRE>
-set realname='Mutt user' ; ignore x-
-</PRE>
-</CODE></BLOCKQUOTE>
-
-The hash mark, or pound sign
-(``#''), is used as a ``comment'' character. You can use it to
-annotate your initialization file. All text after the comment character
-to the end of the line is ignored. For example,</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-my_hdr X-Disclaimer: Why are you listening to me? # This is a comment
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Single quotes (') and double quotes (&quot;) can be used to quote strings
-which contain spaces or other special characters.  The difference between
-the two types of quotes is similar to that of many popular shell programs,
-namely that a single quote is used to specify a literal string (one that is
-not interpreted for shell variables or quoting with a backslash [see
-next paragraph]), while double quotes indicate a string for which
-should be evaluated.  For example, backtics are evaluated inside of double
-quotes, but <B>not</B> for single quotes.</P>
-<P>\ quotes the next character, just as in shells such as bash and zsh.
-For example, if want to put quotes ``&quot;'' inside of a string, you can use
-``\'' to force the next character to be a literal instead of interpreted
-character.
-<BLOCKQUOTE><CODE>
-<PRE>
-set realname="Michael \"MuttDude\" Elkins"
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>``\\'' means to insert a literal ``\'' into the line.
-``\n'' and ``\r'' have their usual C meanings of linefeed and
-carriage-return, respectively.</P>
-<P>A \ at the end of a line can be used to split commands over
-multiple lines, provided that the split points don't appear in the
-middle of command names.</P>
-<P>It is also possible to substitute the output of a Unix command in an
-initialization file.  This is accomplished by enclosing the command in
-backquotes (``).  For example,
-<BLOCKQUOTE><CODE>
-<PRE>
-my_hdr X-Operating-System: `uname -a`
-</PRE>
-</CODE></BLOCKQUOTE>
-
-The output of the Unix command ``uname -a'' will be substituted before the
-line is parsed.  Note that since initialization files are line oriented, only
-the first line of output from the Unix command will be substituted.</P>
-<P>UNIX environments can be accessed like the way it is done in shells like
-sh and bash: Prepend the name of the environment by a ``$''.  For
-example,
-<BLOCKQUOTE><CODE>
-<PRE>
-set record=+sent_on_$HOSTNAME
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>The commands understood by mutt are explained in the next paragraphs.
-For a complete list, see the 
-<A HREF="manual-6.html#commands">command reference</A>.</P>
-
-<H2><A NAME="alias"></A> <A NAME="ss3.2">3.2</A> <A HREF="manual.html#toc3.2">Defining/Using aliases</A>
-</H2>
-
-
-<P>Usage: <CODE>alias</CODE> <EM>key</EM> <EM>address</EM> [ , <EM>address</EM>, ... ]</P>
-<P>It's usually very cumbersome to remember or type out the address of someone
-you are communicating with.  Mutt allows you to create ``aliases'' which map
-a short string to a full address.</P>
-<P><B>Note:</B> if you want to create an alias for a group (by specifying more than
-one address), you <B>must</B> separate the addresses with a comma (``,'').</P>
-<P>To remove an alias or aliases (``*'' means all aliases):</P>
-<P><CODE>unalias</CODE> [ * | <EM>key</EM> <EM>...</EM> ]</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-alias muttdude me@cs.hmc.edu (Michael Elkins)
-alias theguys manny, moe, jack
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Unlike other mailers, Mutt doesn't require aliases to be defined
-in a special file.  The <CODE>alias</CODE> command can appear anywhere in
-a configuration file, as long as this file is 
-<A HREF="#source">sourced</A>.  Consequently, you can have multiple alias files, or
-you can have all aliases defined in your muttrc.</P>
-<P>On the other hand, the 
-<A HREF="manual-2.html#create-alias">create-alias</A>
-function can use only one file, the one pointed to by the 
-<A HREF="manual-6.html#alias_file">$alias_file</A> variable (which is
-<CODE>~/.muttrc</CODE> by default). This file is not special either,
-in the sense that Mutt will happily append aliases to any file, but in
-order for the new aliases to take effect you need to explicitly 
-<A HREF="#source">source</A> this file too.</P>
-<P>For example:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-source /usr/local/share/Mutt.aliases
-source ~/.mail_aliases
-set alias_file=~/.mail_aliases
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>To use aliases, you merely use the alias at any place in mutt where mutt
-prompts for addresses, such as the <EM>To:</EM> or <EM>Cc:</EM> prompt.  You can
-also enter aliases in your editor at the appropriate headers if you have the
-<A HREF="manual-6.html#edit_headers">$edit_headers</A> variable set.</P>
-<P>In addition, at the various address prompts, you can use the tab character
-to expand a partial alias to the full alias.  If there are multiple matches,
-mutt will bring up a menu with the matching aliases.  In order to be
-presented with the full list of aliases, you must hit tab with out a partial
-alias, such as at the beginning of the prompt or after a comma denoting
-multiple addresses.</P>
-<P>In the alias menu, you can select as many aliases as you want with the
-<EM>select-entry</EM> key (default: RET), and use the <EM>exit</EM> key
-(default: q) to return to the address prompt.</P>
-
-<H2><A NAME="bind"></A> <A NAME="ss3.3">3.3</A> <A HREF="manual.html#toc3.3">Changing the default key bindings</A>
-</H2>
-
-<P>Usage: <CODE>bind</CODE> <EM>map</EM> <EM>key</EM> <EM>function</EM></P>
-<P>This command allows you to change the default key bindings (operation
-invoked when pressing a key).</P>
-<P><EM>map</EM> specifies in which menu the binding belongs.  The currently
-defined maps are:</P>
-<P>
-<UL>
-<LI>generic</LI>
-<LI>alias</LI>
-<LI>attach</LI>
-<LI>browser</LI>
-<LI>editor</LI>
-<LI>index</LI>
-<LI>compose</LI>
-<LI>pager</LI>
-<LI>pgp</LI>
-<LI>postpone</LI>
-</UL>
-</P>
-<P><EM>key</EM> is the key (or key sequence) you wish to bind.  To specify a
-control character, use the sequence <EM>\Cx</EM>, where <EM>x</EM> is the
-letter of the control character (for example, to specify control-A use
-``\Ca'').  Note that the case of <EM>x</EM> as well as <EM>\C</EM> is
-ignored, so that <EM>\CA, \Ca, \cA</EM> and <EM>\ca</EM> are all
-equivalent.  An alternative form is to specify the key as a three digit
-octal number prefixed with a ``\'' (for example <EM>\177</EM> is
-equivalent to <EM>\c?</EM>).</P>
-<P>In addition, <EM>key</EM> may consist of:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-\t              tab
-&lt;tab>           tab
-\r              carriage return
-\n              newline
-\e              escape
-&lt;esc>           escape
-&lt;up>            up arrow
-&lt;down>          down arrow
-&lt;left>          left arrow
-&lt;right>         right arrow
-&lt;pageup>        Page Up
-&lt;pagedown>      Page Down
-&lt;backspace>     Backspace
-&lt;delete>        Delete
-&lt;insert>        Insert
-&lt;enter>         Enter
-&lt;return>        Return
-&lt;home>          Home
-&lt;end>           End
-&lt;space>         Space bar
-&lt;f1>            function key 1
-&lt;f10>           function key 10
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P><EM>key</EM> does not need to be enclosed in quotes unless it contains a
-space (`` '').</P>
-<P><EM>function</EM> specifies which action to take when <EM>key</EM> is pressed.
-For a complete list of functions, see the 
-<A HREF="manual-6.html#functions">reference</A>.  The special function <CODE>noop</CODE> unbinds the specify key
-sequence.</P>
-
-<H2><A NAME="charset-hook"></A> <A NAME="ss3.4">3.4</A> <A HREF="manual.html#toc3.4">Defining aliases for character sets </A>
-</H2>
-
-<P>Usage: <CODE>charset-hook</CODE> <EM>alias</EM> <EM>charset</EM><BR>
-Usage: <CODE>iconv-hook</CODE> <EM>charset</EM> <EM>local-charset</EM></P>
-<P>The <CODE>charset-hook</CODE> command defines an alias for a character set.
-This is useful to properly display messages which are tagged with a
-character set name not known to mutt.</P>
-<P>The <CODE>iconv-hook</CODE> command defines a system-specific name for a
-character set.  This is helpful when your systems character
-conversion library insists on using strange, system-specific names
-for character sets.</P>
-
-
-<H2><A NAME="folder-hook"></A> <A NAME="ss3.5">3.5</A> <A HREF="manual.html#toc3.5">Setting variables based upon mailbox</A>
-</H2>
-
-<P>Usage: <CODE>folder-hook</CODE> [!]<EM>regexp</EM> <EM>command</EM></P>
-<P>It is often desirable to change settings based on which mailbox you are
-reading.  The folder-hook command provides a method by which you can execute
-any configuration command.  <EM>pattern</EM> is a regular expression specifying
-in which mailboxes to execute <EM>command</EM> before loading.  If a mailbox
-matches multiple folder-hook's, they are executed in the order given in the
-muttrc.</P>
-<P><B>Note:</B> if you use the ``!'' shortcut for 
-<A HREF="manual-6.html#spoolfile">$spoolfile</A> at the beginning of the pattern, you must place it
-inside of double or single quotes in order to distinguish it from the
-logical <EM>not</EM> operator for the expression.</P>
-<P>Note that the settings are <EM>not</EM> restored when you leave the mailbox.
-For example, a command action to perform is to change the sorting method
-based upon the mailbox being read:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-folder-hook mutt set sort=threads
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>However, the sorting method is not restored to its previous value when
-reading a different mailbox.  To specify a <EM>default</EM> command, use the
-pattern ``.'':</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-folder-hook . set sort=date-sent
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="macro"></A> <A NAME="ss3.6">3.6</A> <A HREF="manual.html#toc3.6">Keyboard macros</A>
-</H2>
-
-<P>Usage: <CODE>macro</CODE> <EM>menu</EM> <EM>key</EM> <EM>sequence</EM> [ <EM>description</EM> ]</P>
-<P>Macros are useful when you would like a single key to perform a series of
-actions.  When you press <EM>key</EM> in menu <EM>menu</EM>, Mutt will behave as if
-you had typed <EM>sequence</EM>.  So if you have a common sequence of commands
-you type, you can create a macro to execute those commands with a single
-key.</P>
-<P><EM>key</EM> and <EM>sequence</EM> are expanded by the same rules as the 
-<A HREF="#bind">key bindings</A>.  There are some additions however.  The
-first is that control characters in <EM>sequence</EM> can also be specified
-as <EM>^x</EM>.  In order to get a caret (`^'') you need to use
-<EM>^^</EM>.  Secondly, to specify a certain key such as <EM>up</EM>
-or to invoke a function directly, you can use the format
-<EM>&lt;key name&gt;</EM> and <EM>&lt;function name&gt;</EM>.  For a listing of key
-names see the section on 
-<A HREF="#bind">key bindings</A>.  Functions
-are listed in the 
-<A HREF="manual-6.html#functions">function reference</A>.</P>
-<P>The advantage with using function names directly is that the macros will
-work regardless of the current key bindings, so they are not dependent on
-the user having particular key definitions.  This makes them more robust
-and portable, and also facilitates defining of macros in files used by more
-than one user (eg. the system Muttrc).</P>
-<P>Optionally you can specify a descriptive text after <EM>sequence</EM>,
-which is shown in the help screens.</P>
-<P><B>Note:</B> Macro definitions (if any) listed in the help screen(s), are
-silently truncated at the screen width, and are not wrapped.   </P>
-
-<H2><A NAME="color"></A> <A NAME="ss3.7">3.7</A> <A HREF="manual.html#toc3.7">Using color and mono video attributes</A>
-</H2>
-
-<P>Usage: <CODE>color</CODE> <EM>object</EM> <EM>foreground</EM> <EM>background</EM> [ <EM>regexp</EM> ]<BR>
-Usage: <CODE>color</CODE> index <EM>foreground</EM> <EM>background</EM> <EM>pattern</EM><BR>
-Usage: <CODE>uncolor</CODE> index <EM>pattern</EM> [ <EM>pattern</EM> ...  ]<BR></P>
-<P>If your terminal supports color, you can spice up Mutt by creating your own
-color scheme.  To define the color of an object (type of information), you
-must specify both a foreground color <B>and</B> a background color (it is not
-possible to only specify one or the other).</P>
-<P><EM>object</EM> can be one of:</P>
-<P>
-<UL>
-<LI>attachment</LI>
-<LI>body (match <EM>regexp</EM> in the body of messages)</LI>
-<LI>bold (hiliting bold patterns in the body of messages)</LI>
-<LI>error (error messages printed by Mutt)</LI>
-<LI>header (match <EM>regexp</EM> in the message header)</LI>
-<LI>hdrdefault (default color of the message header in the pager)</LI>
-<LI>index (match <EM>pattern</EM> in the message index)</LI>
-<LI>indicator (arrow or bar used to indicate the current item in a menu)</LI>
-<LI>markers (the ``+'' markers at the beginning of wrapped lines in the pager)</LI>
-<LI>message (informational messages)</LI>
-<LI>normal</LI>
-<LI>quoted (text matching 
-<A HREF="manual-6.html#quote_regexp">$quote_regexp</A> in the body of a message)</LI>
-<LI>quoted1, quoted2, ..., quoted<B>N</B> (higher levels of quoting)</LI>
-<LI>search (hiliting of words in the pager)</LI>
-<LI>signature</LI>
-<LI>status (mode lines used to display info about the mailbox or message)</LI>
-<LI>tilde (the ``~'' used to pad blank lines in the pager)</LI>
-<LI>tree (thread tree drawn in the message index and attachment menu)</LI>
-<LI>underline (hiliting underlined patterns in the body of messages)</LI>
-</UL>
-</P>
-<P><EM>foreground</EM> and <EM>background</EM> can be one of the following:</P>
-<P>
-<UL>
-<LI>white</LI>
-<LI>black</LI>
-<LI>green</LI>
-<LI>magenta</LI>
-<LI>blue</LI>
-<LI>cyan</LI>
-<LI>yellow</LI>
-<LI>red</LI>
-<LI>default</LI>
-<LI>color<EM>x</EM></LI>
-</UL>
-</P>
-<P><EM>foreground</EM> can optionally be prefixed with the keyword <CODE>bright</CODE> to make
-the foreground color boldfaced (e.g., <CODE>brightred</CODE>).</P>
-<P>If your terminal supports it, the special keyword <EM>default</EM> can be
-used as a transparent color.  The value <EM>brightdefault</EM> is also valid.
-If Mutt is linked against the <EM>S-Lang</EM> library, you also need to set
-the <EM>COLORFGBG</EM> environment variable to the default colors of your
-terminal for this to work; for example (for Bourne-like shells):</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-set COLORFGBG="green;black"
-export COLORFGBG
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P><B>Note:</B> The <EM>S-Lang</EM> library requires you to use the <EM>lightgray</EM>
-and <EM>brown</EM> keywords instead of <EM>white</EM> and <EM>yellow</EM> when
-setting this variable.</P>
-<P><B>Note:</B> The uncolor command can be applied to the index object only.  It
-removes entries from the list. You <B>must</B> specify the same pattern
-specified in the color command for it to be removed.  The pattern ``*'' is
-a special token which means to clear the color index list of all entries.</P>
-<P>Mutt also recognizes the keywords <EM>color0</EM>, <EM>color1</EM>, ...,
-<EM>color</EM><B>N-1</B> (<B>N</B> being the number of colors supported
-by your terminal).  This is useful when you remap the colors for your
-display (for example by changing the color associated with <EM>color2</EM>
-for your xterm), since color names may then lose their normal meaning.</P>
-<P>If your terminal does not support color, it is still possible change the video
-attributes through the use of the ``mono'' command:</P>
-<P>Usage: <CODE>mono</CODE> <EM>&lt;object&gt; &lt;attribute&gt;</EM> [ <EM>regexp</EM> ]<BR>
-Usage: <CODE>mono</CODE> index <EM>attribute</EM> <EM>pattern</EM><BR>
-Usage: <CODE>unmono</CODE> index <EM>pattern</EM> [ <EM>pattern</EM> ...  ]<BR></P>
-<P>where <EM>attribute</EM> is one of the following:</P>
-<P>
-<UL>
-<LI>none</LI>
-<LI>bold</LI>
-<LI>underline</LI>
-<LI>reverse</LI>
-<LI>standout</LI>
-</UL>
-</P>
-
-<H2><A NAME="ignore"></A> <A NAME="ss3.8">3.8</A> <A HREF="manual.html#toc3.8">Ignoring (weeding) unwanted message headers</A>
-</H2>
-
-<P>Usage: <CODE>[un]ignore</CODE> <EM>pattern</EM> [ <EM>pattern</EM> ... ]</P>
-<P>Messages often have many header fields added by automatic processing systems,
-or which may not seem useful to display on the screen.  This command allows
-you to specify header fields which you don't normally want to see.</P>
-<P>You do not need to specify the full header field name.  For example,
-``ignore content-'' will ignore all header fields that begin with the pattern
-``content-''.</P>
-<P>To remove a previously added token from the list, use the ``unignore'' command.
-Note that if you do ``ignore x-'' it is not possible to ``unignore x-mailer,''
-for example.  The ``unignore'' command does <B>not</B> make Mutt display headers
-with the given pattern.</P>
-<P>``unignore *'' will remove all tokens from the ignore list.</P>
-<P>For example:
-<BLOCKQUOTE><CODE>
-<PRE>
-# Sven's draconian header weeding
-ignore *
-unignore from date subject to cc
-unignore organization organisation x-mailer: x-newsreader: x-mailing-list:
-unignore posted-to:
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="lists"></A> <A NAME="ss3.9">3.9</A> <A HREF="manual.html#toc3.9">Mailing lists</A>
-</H2>
-
-<P>Usage: <CODE>[un]lists</CODE> <EM>address</EM> [ <EM>address</EM> ... ]<BR>
-Usage: <CODE>[un]subscribe</CODE> <EM>address</EM> [ <EM>address</EM> ... ]</P>
-<P>Mutt has a few nice features for 
-<A HREF="manual-4.html#using_lists">handling mailing lists</A>.  In order to take advantage of them, you must
-specify which addresses belong to mailing lists, and which mailing
-lists you are subscribed to.  Once you have done this, the 
-<A HREF="manual-2.html#list-reply">list-reply</A> function will work for all known lists.
-Additionally, when you send a message to a subscribed list, mutt will
-add a Mail-Followup-To header to tell other users' mail user agents
-not to send copies of replies to your personal address.   Note that
-the Mail-Followup-To header is a non-standard extension which is not
-supported by all mail user agents.  Adding it is not bullet-proof against
-receiving personal CCs of list messages.  Also note that the generation
-of the Mail-Followup-To header is controlled by the 
-<A HREF="manual-6.html#followup_to">followup_to</A> configuration variable.</P>
-<P>More precisely, Mutt maintains lists of known and subscribed mailing
-lists.  Every subscribed mailing list is known.  To mark
-a mailing list as known, use the ``lists'' command.  To mark it as
-subscribed, use ``subscribe''.</P>
-<P>Specify as much of the address as you need to to remove ambiguity.  For
-example, if you've subscribed to the Mutt mailing list, you will receive mail
-addresssed to <EM>mutt-users@mutt.org</EM>.  So, to tell Mutt that this is a
-mailing list, you could add ``lists mutt-users'' to your
-initialization file.  To tell mutt that you are subscribed to it,
-add ``subscribe mutt-users'' to your initialization file instead.
-If you also happen to get mail from someone whose address is
-<EM>mutt-users@example.com</EM>, you could use ``lists mutt-users@mutt.org'' 
-or ``subscribe mutt-users@mutt.org'' to
-match only mail from the actual list.</P>
-<P>The ``unlists'' command is used to remove a token from the list of
-known and subscribed mailing-lists. Use ``unlists *'' to remove all
-tokens.</P>
-<P>To remove a mailing list from the list of subscribed mailing lists,
-but keep it on the list of known mailing lists, use ``unsubscribe''.</P>
-
-
-<H2><A NAME="mbox-hook"></A> <A NAME="ss3.10">3.10</A> <A HREF="manual.html#toc3.10">Using Multiple spool mailboxes</A>
-</H2>
-
-<P>Usage: <CODE>mbox-hook</CODE> [!]<EM>pattern</EM> <EM>mailbox</EM></P>
-<P>This command is used to move read messages from a specified mailbox to a
-different mailbox automatically when you quit or change folders.
-<EM>pattern</EM> is a regular expression specifying the mailbox to treat as a
-``spool'' mailbox and <EM>mailbox</EM> specifies where mail should be saved when
-read.</P>
-<P>Unlike some of the other <EM>hook</EM> commands, only the <EM>first</EM> matching
-pattern is used (it is not possible to save read mail in more than a single
-mailbox).</P>
-
-<H2><A NAME="mailboxes"></A> <A NAME="ss3.11">3.11</A> <A HREF="manual.html#toc3.11">Defining mailboxes which receive mail</A>
-</H2>
-
-<P>Usage: <CODE>mailboxes</CODE> [!]<EM>filename</EM> [ <EM>filename</EM> ... ]</P>
-<P>This command specifies folders which can receive mail and
-which will be checked for new messages.  By default, the
-main menu status bar displays how many of these folders have
-new messages.</P>
-<P>When changing folders, pressing <EM>space</EM> will cycle
-through folders with new mail.</P>
-<P>Pressing TAB in the directory browser will bring up a menu showing the files
-specified by the <CODE>mailboxes</CODE> command, and indicate which contain new
-messages.  Mutt will automatically enter this mode when invoked from the
-command line with the <CODE>-y</CODE> option.</P>
-<P><B>Note:</B> new mail is detected by comparing the last modification time to
-the last access time.  Utilities like <CODE>biff</CODE> or <CODE>frm</CODE> or any other
-program which accesses the mailbox might cause Mutt to never detect new mail
-for that mailbox if they do not properly reset the access time.  Backup
-tools are another common reason for updated access times.</P>
-
-<P><B>Note:</B> the filenames in the <CODE>mailboxes</CODE> command are resolved when
-the command is executed, so if these names contain 
-<A HREF="manual-4.html#shortcuts">shortcut characters</A> (such as ``='' and ``!''), any variable
-definition that affect these characters (like 
-<A HREF="manual-6.html#folder">$folder</A> and 
-<A HREF="manual-6.html#spoolfile">$spoolfile</A>)
-should be executed before the <CODE>mailboxes</CODE> command.</P>
-
-<H2><A NAME="my_hdr"></A> <A NAME="ss3.12">3.12</A> <A HREF="manual.html#toc3.12">User defined headers</A>
-</H2>
-
-<P>Usage:<BR>
-<CODE>my_hdr</CODE> <EM>string</EM><BR>
-<CODE>unmy_hdr</CODE> <EM>field</EM> [ <EM>field</EM> ... ]</P>
-<P>The ``my_hdr'' command allows you to create your own header
-fields which will be added to every message you send.</P>
-<P>For example, if you would like to add an ``Organization:'' header field to
-all of your outgoing messages, you can put the command</P>
-<P>
-<BLOCKQUOTE>
-my_hdr Organization: A Really Big Company, Anytown, USA
-</BLOCKQUOTE>
-</P>
-<P>in your <CODE>.muttrc</CODE>.</P>
-<P><B>Note:</B>  space characters are <EM>not</EM> allowed between the keyword and
-the colon (``:'').  The standard for electronic mail (RFC822) says that
-space is illegal there, so Mutt enforces the rule.</P>
-<P>If you would like to add a header field to a single message, you should
-either set the 
-<A HREF="manual-6.html#edit_headers">edit_headers</A> variable,
-or use the <EM>edit-headers</EM> function (default: ``E'') in the send-menu so
-that you can edit the header of your message along with the body.</P>
-<P>To remove user defined header fields, use the ``unmy_hdr''
-command.  You may specify an asterisk (``*'') to remove all header
-fields, or the fields to remove.  For example, to remove all ``To'' and
-``Cc'' header fields, you could use:</P>
-<P>
-<BLOCKQUOTE>
-unmy_hdr to cc
-</BLOCKQUOTE>
-</P>
-
-<H2><A NAME="hdr_order"></A> <A NAME="ss3.13">3.13</A> <A HREF="manual.html#toc3.13">Defining the order of headers when viewing messages</A>
-</H2>
-
-<P>Usage: <CODE>hdr_order</CODE> <EM>header1</EM> <EM>header2</EM> <EM>header3</EM></P>
-<P>With this command, you can specify an order in which mutt will attempt
-to present headers to you when viewing messages.</P>
-<P>``unhdr_order *'' will clear all previous headers from the order list,
-thus removing the header order effects set by the system-wide startup
-file.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-hdr_order From Date: From: To: Cc: Subject:
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="save-hook"></A> <A NAME="ss3.14">3.14</A> <A HREF="manual.html#toc3.14">Specify default save filename</A>
-</H2>
-
-<P>Usage: <CODE>save-hook</CODE> [!]<EM>pattern</EM> <EM>filename</EM></P>
-<P>This command is used to override the default filename used when saving
-messages.  <EM>filename</EM> will be used as the default filename if the message is
-<EM>From:</EM> an address matching <EM>regexp</EM> or if you are the author and the
-message is addressed <EM>to:</EM> something matching <EM>regexp</EM>.</P>
-<P>See 
-<A HREF="manual-4.html#pattern_hook">Message Matching in Hooks</A> for information on the exact format of <EM>pattern</EM>.</P>
-<P>Examples:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-save-hook me@(turing\\.)?cs\\.hmc\\.edu$ +elkins
-save-hook aol\\.com$ +spam
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Also see the 
-<A HREF="#fcc-save-hook">fcc-save-hook</A> command.</P>
-
-<H2><A NAME="fcc-hook"></A> <A NAME="ss3.15">3.15</A> <A HREF="manual.html#toc3.15">Specify default Fcc: mailbox when composing</A>
-</H2>
-
-<P>Usage: <CODE>fcc-hook</CODE> [!]<EM>pattern</EM> <EM>mailbox</EM></P>
-<P>This command is used to save outgoing mail in a mailbox other than
-<A HREF="manual-6.html#record">$record</A>.  Mutt searches the initial list of
-message recipients for the first matching <EM>regexp</EM> and uses <EM>mailbox</EM>
-as the default Fcc: mailbox.  If no match is found the message will be saved
-to 
-<A HREF="manual-6.html#record">$record</A> mailbox.</P>
-<P>See 
-<A HREF="manual-4.html#pattern_hook">Message Matching in Hooks</A> for information on the exact format of <EM>pattern</EM>.</P>
-<P>Example: <CODE>fcc-hook aol.com$ +spammers</CODE></P>
-<P>The above will save a copy of all messages going to the aol.com domain to
-the `+spammers' mailbox by default.  Also see the 
-<A HREF="#fcc-save-hook">fcc-save-hook</A> command.</P>
-
-<H2><A NAME="fcc-save-hook"></A> <A NAME="ss3.16">3.16</A> <A HREF="manual.html#toc3.16">Specify default save filename and default Fcc: mailbox at once</A>
-</H2>
-
-<P>Usage: <CODE>fcc-save-hook</CODE> [!]<EM>pattern</EM> <EM>mailbox</EM></P>
-<P>This command is a shortcut, equivalent to doing both a 
-<A HREF="#fcc-hook">fcc-hook</A>
-and a 
-<A HREF="#save-hook">save-hook</A> with its arguments.</P>
-
-<H2><A NAME="send-hook"></A> <A NAME="ss3.17">3.17</A> <A HREF="manual.html#toc3.17">Change settings based upon message recipients</A>
-</H2>
-
-<P>Usage: <CODE>send-hook</CODE> [!]<EM>pattern</EM> <EM>command</EM></P>
-<P>This command can be used to execute arbitrary configuration commands based
-upon recipients of the message.  <EM>pattern</EM> is a regular expression
-matching the desired address.  <EM>command</EM> is executed when <EM>regexp</EM>
-matches recipients of the message.  When multiple matches occur, commands are
-executed in the order they are specified in the muttrc.</P>
-<P>See 
-<A HREF="manual-4.html#pattern_hook">Message Matching in Hooks</A> for information on the exact format of <EM>pattern</EM>.</P>
-<P>Example: <CODE>send-hook mutt &quot;set mime_forward signature=''&quot;</CODE></P>
-<P>Another typical use for this command is to change the values of the
-<A HREF="manual-6.html#attribution">$attribution</A>, 
-<A HREF="manual-6.html#signature">$signature</A> and 
-<A HREF="manual-6.html#locale">$locale</A>
-variables in order to change the language of the attributions and
-signatures based upon the recipients.</P>
-<P><B>Note:</B> the send-hook's are only executed ONCE after getting the initial
-list of recipients.  Adding a recipient after replying or editing the
-message will NOT cause any send-hook to be executed.  Also note that
-my_hdr commands which modify recipient headers, or the message's
-subject, don't have any effect on the current message when executed
-from a send-hook.</P>
-
-<H2><A NAME="message-hook"></A> <A NAME="ss3.18">3.18</A> <A HREF="manual.html#toc3.18">Change settings before formatting a message</A>
-</H2>
-
-<P>Usage: <CODE>message-hook</CODE> [!]<EM>pattern</EM> <EM>command</EM></P>
-<P>This command can be used to execute arbitrary configuration commands
-before viewing or formatting a message based upon information about the message.
-<EM>command</EM> is executed if the <EM>pattern</EM> matches the message to be
-displayed. When multiple matches occur, commands are executed in the order
-they are specified in the muttrc.</P>
-<P>See 
-<A HREF="manual-4.html#pattern_hook">Message Matching in Hooks</A> for
-information on the exact format of <EM>pattern</EM>.</P>
-<P>Example:
-<BLOCKQUOTE><CODE>
-<PRE>
-message-hook ~A 'set pager=builtin'
-message-hook '~f freshmeat-news' 'set pager="less \"+/^  subject: .*\""'
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="pgp-hook"></A> <A NAME="ss3.19">3.19</A> <A HREF="manual.html#toc3.19">Choosing the PGP key of the recipient</A>
-</H2>
-
-<P>Usage: <CODE>pgp-hook</CODE> <EM>pattern</EM> <EM>keyid</EM></P>
-<P>When encrypting messages with PGP, you may want to associate a certain
-PGP key with a given e-mail address automatically, either because the
-recipient's public key can't be deduced from the destination address,
-or because, for some reasons, you need to override the key Mutt would
-normally use.  The pgp-hook command provides a method by which you can
-specify the ID of the public key to be used when encrypting messages to
-a certain recipient.</P>
-
-<H2><A NAME="push"></A> <A NAME="ss3.20">3.20</A> <A HREF="manual.html#toc3.20">Adding key sequences to the keyboard buffer</A>
-</H2>
-
-<P>Usage: <CODE>push</CODE> <EM>string</EM></P>
-<P>This command adds the named string to the keyboard buffer. The string may
-contain control characters, key names and function names like the sequence
-string in the 
-<A HREF="#macro">macro</A> command. You may use it to
-automatically run a sequence of commands at startup, or when entering
-certain folders.</P>
-
-<H2><A NAME="exec"></A> <A NAME="ss3.21">3.21</A> <A HREF="manual.html#toc3.21">Executing functions</A>
-</H2>
-
-<P>Usage: <CODE>exec</CODE> <EM>function</EM> [ <EM>function</EM> ... ]</P>
-<P>This command can be used to execute any function. Functions are
-listed in the 
-<A HREF="manual-6.html#functions">function reference</A>.
-``exec function'' is equivalent to ``push &lt;function&gt;''.</P>
-
-<H2><A NAME="score-command"></A> <A NAME="ss3.22">3.22</A> <A HREF="manual.html#toc3.22">Message Scoring</A>
-</H2>
-
-<P>Usage: <CODE>score</CODE> <EM>pattern</EM> <EM>value</EM><BR>
-Usage: <CODE>unscore</CODE> <EM>pattern</EM> [ <EM>pattern</EM> ... ]</P>
-<P>The <CODE>score</CODE> commands adds <EM>value</EM> to a message's score if <EM>pattern</EM>
-matches it.  <EM>pattern</EM> is a string in the format described in the 
-<A HREF="manual-4.html#patterns">patterns</A> section (note: For efficiency reasons, patterns
-which scan information not available in the index, such as <CODE>~b</CODE>,
-<CODE>~B</CODE> or <CODE>~h</CODE>, may not be used).  <EM>value</EM> is a
-positive or negative integer.  A message's final score is the sum total of all
-matching <CODE>score</CODE> entries.  However, you may optionally prefix <EM>value</EM> with
-an equal sign (=) to cause evaluation to stop at a particular entry if there is
-a match.  Negative final scores are rounded up to 0.</P>
-<P>The <CODE>unscore</CODE> command removes score entries from the list.  You <B>must</B>
-specify the same pattern specified in the <CODE>score</CODE> command for it to be
-removed.  The pattern ``*'' is a special token which means to clear the list
-of all score entries.</P>
-
-<H2><A NAME="set"></A> <A NAME="ss3.23">3.23</A> <A HREF="manual.html#toc3.23">Setting variables</A>
-</H2>
-
-<P>Usage: <CODE>set</CODE> [no|inv]<EM>variable</EM>[=<EM>value</EM>] [ <EM>variable</EM> ... ]<BR>
-Usage: <CODE>toggle</CODE> <EM>variable</EM> [<EM>variable</EM> ... ]<BR>
-Usage: <CODE>unset</CODE> <EM>variable</EM> [<EM>variable</EM> ... ]<BR>
-Usage: <CODE>reset</CODE> <EM>variable</EM> [<EM>variable</EM> ... ]</P>
-<P>This command is used to set (and unset) 
-<A HREF="manual-6.html#variables">configuration variables</A>.  There are four basic types of variables:
-boolean, number, string and quadoption.  <EM>boolean</EM> variables can be
-<EM>set</EM> (true) or <EM>unset</EM> (false).  <EM>number</EM> variables can be
-assigned a positive integer value.</P>
-<P><EM>string</EM> variables consist of any number of printable characters.
-<EM>strings</EM> must be enclosed in quotes if they contain spaces or tabs.  You
-may also use the ``C'' escape sequences <B>\n</B> and <B>\t</B> for
-newline and tab, respectively.</P>
-<P><EM>quadoption</EM> variables are used to control whether or not to be prompted
-for certain actions, or to specify a default action.  A value of <EM>yes</EM>
-will cause the action to be carried out automatically as if you had answered
-yes to the question.  Similarly, a value of <EM>no</EM> will cause the the
-action to be carried out as if you had answered ``no.''  A value of
-<EM>ask-yes</EM> will cause a prompt with a default answer of ``yes'' and
-<EM>ask-no</EM> will provide a default answer of ``no.''</P>
-<P>Prefixing a variable with ``no'' will unset it.  Example: <CODE>set noaskbcc</CODE>.</P>
-<P>For <EM>boolean</EM> variables, you may optionally prefix the variable name with
-<CODE>inv</CODE> to toggle the value (on or off).  This is useful when writing
-macros.  Example: <CODE>set invsmart_wrap</CODE>.</P>
-<P>The <CODE>toggle</CODE> command automatically prepends the <CODE>inv</CODE> prefix to all
-specified variables.</P>
-<P>The <CODE>unset</CODE> command automatically prepends the <CODE>no</CODE> prefix to all
-specified variables.</P>
-<P>Using the enter-command function in the <EM>index</EM> menu, you can query the
-value of a variable by prefixing the name of the variable with a question
-mark:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-set ?allow_8bit
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>The question mark is actually only required for boolean and quadoption 
-variables.</P>
-<P>The <CODE>reset</CODE> command resets all given variables to the compile time
-defaults (hopefully mentioned in this manual). If you use the command
-<CODE>set</CODE> and prefix the variable with ``&amp;'' this has the same
-behavior as the reset command.</P>
-<P>With the <CODE>reset</CODE> command there exists the special variable ``all'',
-which allows you to reset all variables to their system defaults.</P>
-
-<H2><A NAME="source"></A> <A NAME="ss3.24">3.24</A> <A HREF="manual.html#toc3.24">Reading initialization commands from another file</A>
-</H2>
-
-<P>Usage: <CODE>source</CODE> <EM>filename</EM></P>
-<P>This command allows the inclusion of initialization commands
-from other files.  For example, I place all of my aliases in
-<CODE>~/.mail_aliases</CODE> so that I can make my
-<CODE>~/.muttrc</CODE> readable and keep my aliases private.</P>
-<P>If the filename begins with a tilde (``~''), it will be expanded to the
-path of your home directory.</P>
-<P>If the filename ends with a vertical bar (|), then <EM>filename</EM> is
-considered to be an executable program from which to read input (eg.
-<CODE>source ~</CODE>bin/myscript|/).</P>
-
-<H2><A NAME="unhook"></A> <A NAME="ss3.25">3.25</A> <A HREF="manual.html#toc3.25">Removing hooks</A>
-</H2>
-
-<P>Usage: <CODE>unhook</CODE> [ * | <EM>hook-type</EM> ]</P>
-<P>This command permits you to flush hooks you have previously defined.
-You can either remove all hooks by giving the ``*'' character as an
-argument, or you can remove all hooks of a specific type by saying
-something like <CODE>unhook send-hook</CODE>.</P>
-
-<HR>
-<A HREF="manual-4.html">Next</A>
-<A HREF="manual-2.html">Previous</A>
-<A HREF="manual.html#toc3">Contents</A>
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual-4.html mutt-1.4/doc/manual-4.html
--- mutt-1.4.orig/doc/manual-4.html	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/doc/manual-4.html	Thu Jan  1 01:00:00 1970
@@ -1,873 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client: Advanced Usage</TITLE>
- <LINK HREF="manual-5.html" REL=next>
- <LINK HREF="manual-3.html" REL=previous>
- <LINK HREF="manual.html#toc4" REL=contents>
-</HEAD>
-<BODY>
-<A HREF="manual-5.html">Next</A>
-<A HREF="manual-3.html">Previous</A>
-<A HREF="manual.html#toc4">Contents</A>
-<HR>
-<H2><A NAME="s4">4.</A> <A HREF="manual.html#toc4">Advanced Usage</A></H2>
-
-<H2><A NAME="regexp"></A> <A NAME="ss4.1">4.1</A> <A HREF="manual.html#toc4.1">Regular Expressions</A>
-</H2>
-
-<P>All string patterns in Mutt including those in more complex
-<A HREF="#patterns">patterns</A> must be specified
-using regular expressions (regexp) in the ``POSIX extended'' syntax (which
-is more or less the syntax used by egrep and GNU awk).  For your
-convenience, we have included below a brief description of this syntax.</P>
-<P>The search is case sensitive if the pattern contains at least one upper
-case letter, and case insensitive otherwise. Note that ``\''
-must be quoted if used for a regular expression in an initialization
-command: ``\\''.</P>
-<P>A regular expression is a pattern that describes a set of strings.
-Regular expressions are constructed analogously to arithmetic
-expressions, by using various operators to combine smaller expressions.</P>
-<P>Note that the regular expression can be enclosed/delimited by either &quot;
-or ' which is useful if the regular expression includes a white-space
-character.  See 
-<A HREF="manual-3.html#muttrc-syntax">Syntax of Initialization Files</A>
-for more information on &quot; and ' delimiter processing.  To match a
-literal &quot; or ' you must preface it with \ (backslash).</P>
-<P>The fundamental building blocks are the regular expressions that match
-a single character.  Most characters, including all letters and digits,
-are regular expressions that match themselves.  Any metacharacter with
-special meaning may be quoted by preceding it with a backslash.</P>
-<P>The period ``.'' matches any single character.  The caret ``^'' and
-the dollar sign ``$'' are metacharacters that respectively match
-the empty string at the beginning and end of a line.</P>
-<P>A list of characters enclosed by ``['' and ``]'' matches any
-single character in that list; if the first character of the list
-is a caret ``^'' then it matches any character <B>not</B> in the
-list.  For example, the regular expression <B>[0123456789]</B>
-matches any single digit.  A range of ASCII characters may be specified
-by giving the first and last characters, separated by a hyphen
-``&hyphen;''.  Most metacharacters lose their special meaning inside
-lists.  To include a literal ``]'' place it first in the list.
-Similarly, to include a literal ``^'' place it anywhere but first.
-Finally, to include a literal hyphen ``&hyphen;'' place it last.</P>
-<P>Certain named classes of characters are predefined.  Character classes
-consist of ``[:'', a keyword denoting the class, and ``:]''.
-The following classes are defined by the POSIX standard:</P>
-<P>
-<DL>
-<DT><B>[:alnum:]</B><DD><P>Alphanumeric characters.</P>
-<DT><B>[:alpha:]</B><DD><P>Alphabetic characters.</P>
-<DT><B>[:blank:]</B><DD><P>Space or tab characters.</P>
-<DT><B>[:cntrl:]</B><DD><P>Control characters.</P>
-<DT><B>[:digit:]</B><DD><P>Numeric characters.</P>
-<DT><B>[:graph:]</B><DD><P>Characters that are both printable and visible.  (A space is printable,
-but not visible, while an ``a'' is both.)</P>
-<DT><B>[:lower:]</B><DD><P>Lower-case alphabetic characters.</P>
-<DT><B>[:print:]</B><DD><P>Printable characters (characters that are not control characters.)</P>
-<DT><B>[:punct:]</B><DD><P>Punctuation characters (characters that are not letter, digits, control
-characters, or space characters).</P>
-<DT><B>[:space:]</B><DD><P>Space characters (such as space, tab and formfeed, to name a few).</P>
-<DT><B>[:upper:]</B><DD><P>Upper-case alphabetic characters.</P>
-<DT><B>[:xdigit:]</B><DD><P>Characters that are hexadecimal digits.</P>
-</DL>
-</P>
-<P>A character class is only valid in a regular expression inside the
-brackets of a character list.  Note that the brackets in these
-class names are part of the symbolic names, and must be included
-in addition to the brackets delimiting the bracket list.  For
-example, <B>[[:digit:]]</B> is equivalent to
-<B>[0-9]</B>.</P>
-<P>Two additional special sequences can appear in character lists.  These
-apply to non-ASCII character sets, which can have single symbols (called
-collating elements) that are represented with more than one character,
-as well as several characters that are equivalent for collating or
-sorting purposes:</P>
-<P>
-<DL>
-<DT><B>Collating Symbols</B><DD><P>A collating symbols is a multi-character collating element enclosed in
-``[.'' and ``.]''.  For example, if ``ch'' is a collating
-element, then <B>[[.ch.]]</B> is a regexp that matches
-this collating element, while <B>[ch]</B> is a regexp that
-matches either ``c'' or ``h''.</P>
-<DT><B>Equivalence Classes</B><DD><P>An equivalence class is a locale-specific name for a list of
-characters that are equivalent. The name is enclosed in ``[=''
-and ``=]''.  For example, the name ``e'' might be used to
-represent all of ``&egrave;'' ``&eacute;'' and ``e''.  In this case,
-<B>[[=e=]]</B> is a regexp that matches any of
-``&egrave;'', ``&eacute;'' and ``e''.</P>
-</DL>
-</P>
-<P>A regular expression matching a single character may be followed by one
-of several repetition operators:</P>
-<P>
-<DL>
-<DT><B>?</B><DD><P>The preceding item is optional and matched at most once.</P>
-<DT><B>*</B><DD><P>The preceding item will be matched zero or more times.</P>
-<DT><B>+</B><DD><P>The preceding item will be matched one or more times.</P>
-<DT><B>{n}</B><DD><P>The preceding item is matched exactly <EM>n</EM> times.</P>
-<DT><B>{n,}</B><DD><P>The preceding item is matched <EM>n</EM> or more times.</P>
-<DT><B>{,m}</B><DD><P>The preceding item is matched at most <EM>m</EM> times.</P>
-<DT><B>{n,m}</B><DD><P>The preceding item is matched at least <EM>n</EM> times, but no more than
-<EM>m</EM> times.</P>
-</DL>
-</P>
-<P>Two regular expressions may be concatenated; the resulting regular
-expression matches any string formed by concatenating two substrings
-that respectively match the concatenated subexpressions.</P>
-<P>Two regular expressions may be joined by the infix operator ``|'';
-the resulting regular expression matches any string matching either
-subexpression.</P>
-<P>Repetition takes precedence over concatenation, which in turn takes
-precedence over alternation.  A whole subexpression may be enclosed in
-parentheses to override these precedence rules.</P>
-<P><B>Note:</B> If you compile Mutt with the GNU <EM>rx</EM> package, the
-following operators may also be used in regular expressions:</P>
-<P>
-<DL>
-<DT><B>\\y</B><DD><P>Matches the empty string at either the beginning or the end of a word.</P>
-<DT><B>\\B</B><DD><P>Matches the empty string within a word.</P>
-<DT><B>\\&lt;</B><DD><P>Matches the empty string at the beginning of a word.</P>
-<DT><B>\\&gt;</B><DD><P>Matches the empty string at the end of a word.</P>
-<DT><B>\\w</B><DD><P>Matches any word-constituent character (letter, digit, or underscore).</P>
-<DT><B>\\W</B><DD><P>Matches any character that is not word-constituent.</P>
-<DT><B>\\`</B><DD><P>Matches the empty string at the beginning of a buffer (string).</P>
-<DT><B>\\'</B><DD><P>Matches the empty string at the end of a buffer.</P>
-</DL>
-</P>
-<P>Please note however that these operators are not defined by POSIX, so
-they may or may not be available in stock libraries on various systems.</P>
-
-<H2><A NAME="patterns"></A> <A NAME="ss4.2">4.2</A> <A HREF="manual.html#toc4.2">Patterns</A>
-</H2>
-
-<P>Many of Mutt's commands allow you to specify a pattern to match
-(limit, tag-pattern, delete-pattern, etc.).  There are several ways to select
-messages:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-~A              all messages
-~b EXPR         messages which contain EXPR in the message body
-~B EXPR         messages which contain EXPR in the whole message
-~c USER         messages carbon-copied to USER
-~C EXPR         message is either to: or cc: EXPR
-~D              deleted messages
-~d [MIN]-[MAX]  messages with ``date-sent'' in a Date range
-~E              expired messages
-~e EXPR         message which contains EXPR in the ``Sender'' field
-~F              flagged messages
-~f USER         messages originating from USER
-~g              PGP signed messages
-~G              PGP encrypted messages
-~h EXPR         messages which contain EXPR in the message header
-~k              message contains PGP key material
-~i ID           message which match ID in the ``Message-ID'' field
-~L EXPR         message is either originated or received by EXPR
-~l              message is addressed to a known mailing list
-~m [MIN]-[MAX]  message in the range MIN to MAX *)
-~n [MIN]-[MAX]  messages with a score in the range MIN to MAX *)
-~N              new messages
-~O              old messages
-~p              message is addressed to you (consults $alternates)
-~P              message is from you (consults $alternates)
-~Q              messages which have been replied to
-~R              read messages
-~r [MIN]-[MAX]  messages with ``date-received'' in a Date range
-~S              superseded messages
-~s SUBJECT      messages having SUBJECT in the ``Subject'' field.
-~T              tagged messages
-~t USER         messages addressed to USER
-~U              unread messages
-~v              message is part of a collapsed thread.
-~x EXPR         messages which contain EXPR in the `References' field
-~y EXPR         messages which contain EXPR in the `X-Label' field
-~z [MIN]-[MAX]  messages with a size in the range MIN to MAX *)
-~=              duplicated messages (see $duplicate_threads)
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Where EXPR, USER, ID, and SUBJECT are 
-<A HREF="#regexp">regular expressions</A>.</P>
-<P>*) The forms <CODE>&lt;[MAX]</CODE>, <CODE>&gt;[MIN]</CODE>,
-<CODE>[MIN]-</CODE> and <CODE>-[MAX]</CODE>
-are allowed, too.</P>
-
-<H3>Pattern Modifier</H3>
-
-
-<P>Note that patterns matching 'lists' of addresses (notably c,C,p,P and t)
-match if there is at least one match in the whole list. If you want to
-make sure that all elements of that list match, you need to prefix your
-pattern with ^.
-This example matches all mails which only has recipients from Germany.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-^~C \.de$
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3>Complex Patterns</H3>
-
-
-<P>Logical AND is performed by specifying more than one criterion.  For
-example:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-~t mutt ~f elkins
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>would select messages which contain the word ``mutt'' in the list of
-recipients <B>and</B> that have the word ``elkins'' in the ``From'' header
-field.</P>
-<P>Mutt also recognizes the following operators to create more complex search
-patterns:</P>
-<P>
-<UL>
-<LI>! -- logical NOT operator</LI>
-<LI>| -- logical OR operator</LI>
-<LI>() -- logical grouping operator</LI>
-</UL>
-</P>
-<P>Here is an example illustrating a complex search pattern.  This pattern will
-select all messages which do not contain ``mutt'' in the ``To'' or ``Cc''
-field and which are from ``elkins''.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-!(~t mutt|~c mutt) ~f elkins
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Here is an example using white space in the regular expression (note
-the ' and &quot; delimiters).  For this to match, the mail's subject must
-match the ``^Junk +From +Me$'' and it must be from either ``Jim +Somebody''
-or ``Ed +SomeoneElse'':</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
- '~s "^Junk +From +Me$" ~f ("Jim +Somebody"|"Ed +SomeoneElse")'
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3>Searching by Date</H3>
-
-<P>Mutt supports two types of dates, <EM>absolute</EM> and <EM>relative</EM>.</P>
-<P><B>Absolute</B>.  Dates <B>must</B> be in DD/MM/YY format (month and year are
-optional, defaulting to the current month and year).  An example of a valid
-range of dates is:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-Limit to messages matching: ~d 20/1/95-31/10
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>If you omit the minimum (first) date, and just specify ``-DD/MM/YY'', all
-messages <EM>before</EM> the given date will be selected.  If you omit the maximum
-(second) date, and specify ``DD/MM/YY-'', all messages <EM>after</EM> the given
-date will be selected.  If you specify a single date with no dash (``-''),
-only messages sent on the given date will be selected. </P>
-<P><B>Error Margins</B>.  You can add error margins to absolute dates.
-An error margin is a sign (+ or -), followed by a digit, followed by
-one of the following units:
-<PRE>
-y       years
-m       months
-w       weeks
-d       days
-</PRE>
-
-As a special case, you can replace the sign by a ``*'' character,
-which is equivalent to giving identical plus and minus error margins.</P>
-<P>Example: To select any messages two weeks around January 15, 2001,
-you'd use the following pattern: 
-<BLOCKQUOTE><CODE>
-<PRE>
- 
-Limit to messages matching: ~d 15/1/2001*2w
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<P><B>Relative</B>.  This type of date is relative to the current date, and may
-be specified as:
-<UL>
-<LI>&gt;<EM>offset</EM> (messages older than <EM>offset</EM> units)</LI>
-<LI>&lt;<EM>offset</EM> (messages newer than <EM>offset</EM> units)</LI>
-<LI>=<EM>offset</EM> (messages exactly <EM>offset</EM> units old)</LI>
-</UL>
-</P>
-<P><EM>offset</EM> is specified as a positive number with one of the following
-units:
-<PRE>
-y       years
-m       months
-w       weeks
-d       days
-</PRE>
-</P>
-<P>Example: to select messages less than 1 month old, you would use
-<BLOCKQUOTE><CODE>
-<PRE>
-Limit to messages matching: ~d &lt;1m
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-
-<P><B>Note:</B> all dates used when searching are relative to the
-<B>local</B> time zone, so unless you change the setting of your 
-<A HREF="manual-6.html#index_format">$index_format</A> to include a
-<CODE>%[...]</CODE> format, these are <B>not</B> the dates shown
-in the main index.</P>
-
-<H2><A NAME="ss4.3">4.3</A> <A HREF="manual.html#toc4.3">Using Tags</A>
-</H2>
-
-
-<P>Sometimes it is desirable to perform an operation on a group of
-messages all at once rather than one at a time.  An example might be
-to save messages to a mailing list to a separate folder, or to
-delete all messages with a given subject.  To tag all messages
-matching a pattern, use the tag-pattern function, which is bound to
-``shift-T'' by default.  Or you can select individual messages by
-hand using the ``tag-message'' function, which is bound to ``t'' by
-default.  See 
-<A HREF="#patterns">patterns</A> for Mutt's pattern
-matching syntax.</P>
-<P>Once you have tagged the desired messages, you can use the
-``tag-prefix'' operator, which is the ``;'' (semicolon) key by default.
-When the ``tag-prefix'' operator is used, the <B>next</B> operation will
-be applied to all tagged messages if that operation can be used in that
-manner.  If the 
-<A HREF="manual-6.html#auto_tag">$auto_tag</A>
-variable is set, the next operation applies to the tagged messages
-automatically, without requiring the ``tag-prefix''.</P>
-
-<H2><A NAME="hooks"></A> <A NAME="ss4.4">4.4</A> <A HREF="manual.html#toc4.4">Using Hooks</A>
-</H2>
-
-<P>A <EM>hook</EM> is a concept borrowed from the EMACS editor which allows you to
-execute arbitrary commands before performing some operation.  For example,
-you may wish to tailor your configuration based upon which mailbox you are
-reading, or to whom you are sending mail.  In the Mutt world, a <EM>hook</EM>
-consists of a 
-<A HREF="#regexp">regular expression</A> or
-<A HREF="#patterns">pattern</A> along with a
-configuration option/command.  See
-<UL>
-<LI>
-<A HREF="manual-3.html#folder-hook">folder-hook</A></LI>
-<LI>
-<A HREF="manual-3.html#send-hook">send-hook</A></LI>
-<LI>
-<A HREF="manual-3.html#message-hook">message-hook</A></LI>
-<LI>
-<A HREF="manual-3.html#save-hook">save-hook</A></LI>
-<LI>
-<A HREF="manual-3.html#mbox-hook">mbox-hook</A></LI>
-<LI>
-<A HREF="manual-3.html#fcc-hook">fcc-hook</A></LI>
-<LI>
-<A HREF="manual-3.html#fcc-save-hook">fcc-save-hook</A></LI>
-</UL>
-
-for specific details on each type of <EM>hook</EM> available.</P>
-<P><B>Note:</B> if a hook changes configuration settings, these changes remain
-effective until the end of the current mutt session. As this is generally
-not desired, a default hook needs to be added before all other hooks to
-restore configuration defaults. Here is an example with send-hook and the
-my_hdr directive:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-send-hook . 'unmy_hdr From:'
-send-hook ~Cb@b.b my_hdr from: c@c.c
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3><A NAME="pattern_hook"></A> Message Matching in Hooks</H3>
-
-<P>Hooks that act upon messages (<CODE>send-hook, save-hook, fcc-hook,
-message-hook</CODE>) are evaluated in a slightly different manner.  For the other
-types of hooks, a 
-<A HREF="#regexp">regular expression</A> is
-sufficient.  But in dealing with messages a finer grain of control is
-needed for matching since for different purposes you want to match
-different criteria.</P>
-<P>Mutt allows the use of the 
-<A HREF="#patterns">search pattern</A>
-language for matching messages in hook commands.  This works in
-exactly the same way as it would when <EM>limiting</EM> or
-<EM>searching</EM> the mailbox, except that you are restricted to those
-operators which match information mutt extracts from the header of
-the message (i.e.  from, to, cc, date, subject, etc.).</P>
-<P>For example, if you wanted to set your return address based upon sending
-mail to a specific address, you could do something like:
-<BLOCKQUOTE><CODE>
-<PRE>
-send-hook '~t ^me@cs\.hmc\.edu$' 'my_hdr From: Mutt User &lt;user@host>'
-</PRE>
-</CODE></BLOCKQUOTE>
-
-which would execute the given command when sending mail to
-<EM>me@cs.hmc.edu</EM>.</P>
-<P>However, it is not required that you write the pattern to match using the
-full searching language.  You can still specify a simple <EM>regular
-expression</EM> like the other hooks, in which case Mutt will translate your
-pattern into the full language, using the translation specified by the 
-<A HREF="manual-6.html#default_hook">$default_hook</A> variable.  The
-pattern is translated at the time the hook is declared, so the value of 
-<A HREF="manual-6.html#default_hook">$default_hook</A> that is in effect
-at that time will be used.</P>
-
-<H2><A NAME="query"></A> <A NAME="ss4.5">4.5</A> <A HREF="manual.html#toc4.5">External Address Queries</A>
-</H2>
-
-<P>Mutt supports connecting to external directory databases such as LDAP,
-ph/qi, bbdb, or NIS through a wrapper script which connects to mutt
-using a simple interface.  Using the 
-<A HREF="manual-6.html#query_command">$query_command</A> variable, you specify the wrapper
-command to use.  For example:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-set query_command = "mutt_ldap_query.pl '%s'"
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>The wrapper script should accept the query on the command-line.  It
-should return a one line message, then each matching response on a
-single line, each line containing a tab separated address then name then
-some other optional information.  On error, or if there are no matching
-addresses, return a non-zero exit code and a one line error message.</P>
-<P>An example multiple response output:
-<BLOCKQUOTE><CODE>
-<PRE>
-Searching database ... 20 entries ... 3 matching:
-me@cs.hmc.edu           Michael Elkins  mutt dude
-blong@fiction.net       Brandon Long    mutt and more
-roessler@guug.de        Thomas Roessler mutt pgp
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>There are two mechanisms for accessing the query function of mutt.  One
-is to do a query from the index menu using the query function (default: Q).
-This will prompt for a query, then bring up the query menu which will
-list the matching responses.  From the query menu, you can select
-addresses to create aliases, or to mail.  You can tag multiple messages
-to mail, start a new query, or have a new query appended to the current
-responses.</P>
-<P>The other mechanism for accessing the query function is for address
-completion, similar to the alias completion.  In any prompt for address
-entry, you can use the complete-query function (default: ^T) to run a
-query based on the current address you have typed.  Like aliases, mutt
-will look for what you have typed back to the last space or comma.  If
-there is a single response for that query, mutt will expand the address
-in place.  If there are multiple responses, mutt will activate the query
-menu.  At the query menu, you can select one or more addresses to be
-added to the prompt.</P>
-
-<H2><A NAME="ss4.6">4.6</A> <A HREF="manual.html#toc4.6">Mailbox Formats</A>
-</H2>
-
-<P>Mutt supports reading and writing of four different mailbox formats:
-mbox, MMDF, MH and Maildir.  The mailbox type is autodetected, so there
-is no need to use a flag for different mailbox types.  When creating new
-mailboxes, Mutt uses the default specified with the 
-<A HREF="manual-6.html#mbox_type">$mbox_type</A> variable.</P>
-<P><B>mbox</B>.  This is the most widely used mailbox format for UNIX.  All
-messages are stored in a single file.  Each message has a line of the form:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-From me@cs.hmc.edu Fri, 11 Apr 1997 11:44:56 PST
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>to denote the start of a new message (this is often referred to as the
-``From_'' line).</P>
-<P><B>MMDF</B>.  This is a variant of the <EM>mbox</EM> format.  Each message is
-surrounded by lines containing ``^A^A^A^A'' (four control-A's).</P>
-<P><B>MH</B>. A radical departure from <EM>mbox</EM> and <EM>MMDF</EM>, a mailbox
-consists of a directory and each message is stored in a separate file.
-The filename indicates the message number (however, this is may not
-correspond to the message number Mutt displays). Deleted messages are
-renamed with a comma (,) prepended to the filename. <B>Note:</B> Mutt
-detects this type of mailbox by looking for either <CODE>.mh_sequences</CODE>
-or <CODE>.xmhcache</CODE> (needed to distinguish normal directories from MH
-mailboxes).</P>
-<P><B>Maildir</B>.  The newest of the mailbox formats, used by the Qmail MTA (a
-replacement for sendmail).  Similar to <EM>MH</EM>, except that it adds three
-subdirectories of the mailbox: <EM>tmp</EM>, <EM>new</EM> and <EM>cur</EM>.  Filenames
-for the messages are chosen in such a way they are unique, even when two
-programs are writing the mailbox over NFS, which means that no file locking
-is needed.</P>
-
-<H2><A NAME="shortcuts"></A> <A NAME="ss4.7">4.7</A> <A HREF="manual.html#toc4.7">Mailbox Shortcuts</A>
-</H2>
-
-<P>There are a number of built in shortcuts which refer to specific mailboxes.
-These shortcuts can be used anywhere you are prompted for a file or mailbox
-path.</P>
-<P>
-<UL>
-<LI>! -- refers to your 
-<A HREF="manual-6.html#spoolfile">$spoolfile</A> (incoming) mailbox</LI>
-<LI>&gt; -- refers to your 
-<A HREF="manual-6.html#mbox">$mbox</A> file</LI>
-<LI>&lt; -- refers to your 
-<A HREF="manual-6.html#record">$record</A> file</LI>
-<LI>- or !! -- refers to the file you've last visited</LI>
-<LI>~ -- refers to your home directory</LI>
-<LI>= or + -- refers to your 
-<A HREF="manual-6.html#folder">$folder</A> directory</LI>
-<LI>@<EM>alias</EM> -- refers to the 
-<A HREF="manual-3.html#save-hook">default save folder</A> as determined by the address of the alias</LI>
-</UL>
-</P>
-
-<H2><A NAME="using_lists"></A> <A NAME="ss4.8">4.8</A> <A HREF="manual.html#toc4.8">Handling Mailing Lists</A>
-</H2>
-
-
-<P>Mutt has a few configuration options that make dealing with large
-amounts of mail easier.  The first thing you must do is to let Mutt
-know what addresses you consider to be mailing lists (technically
-this does not have to be a mailing list, but that is what it is most
-often used for), and what lists you are subscribed to.  This is
-accomplished through the use of the 
-<A HREF="manual-3.html#lists">lists and subscribe</A> commands in your muttrc.</P>
-<P>Now that Mutt knows what your mailing lists are, it can do several
-things, the first of which is the ability to show the name of a list
-through which you received a message (i.e., of a subscribed list) in
-the <EM>index</EM> menu display.  This is useful to distinguish between
-personal and list mail in the same mailbox.  In the 
-<A HREF="manual-6.html#index_format">$index_format</A> variable, the escape ``%L''
-will return the string ``To &lt;list&gt;'' when ``list'' appears in the
-``To'' field, and ``Cc &lt;list&gt;'' when it appears in the ``Cc''
-field (otherwise it returns the name of the author).</P>
-<P>Often times the ``To'' and ``Cc'' fields in mailing list messages
-tend to get quite large. Most people do not bother to remove the
-author of the message they are reply to from the list, resulting in
-two or more copies being sent to that person.  The ``list-reply''
-function, which by default is bound to ``L'' in the <EM>index</EM> menu
-and <EM>pager</EM>, helps reduce the clutter by only replying to the
-known mailing list addresses instead of all recipients (except as
-specified by <CODE>Mail-Followup-To</CODE>, see below).</P>
-<P>Mutt also supports the <CODE>Mail-Followup-To</CODE> header.  When you send
-a message to a list of recipients which includes one or several
-subscribed mailing lists, and if the 
-<A HREF="manual-6.html#followup_to">$followup_to</A> option is set, mutt will generate
-a Mail-Followup-To header which contains all the recipients to whom
-you send this message, but not your address. This indicates that
-group-replies or list-replies (also known as ``followups'') to this
-message should only be sent to the original recipients of the
-message, and not separately to you - you'll receive your copy through
-one of the mailing lists you are subscribed to.</P>
-<P>Conversely, when group-replying or list-replying to a message which
-has a <CODE>Mail-Followup-To</CODE> header, mutt will respect this header if
-the 
-<A HREF="manual-6.html#honor_followup_to">$honor_followup_to</A> configuration
-variable is set.  Using list-reply will in this case also make sure
-that the reply goes to the mailing list, even if it's not specified
-in the list of recipients in the <CODE>Mail-Followup-To</CODE>.</P>
-<P>Note that, when header editing is enabled, you can create a
-<CODE>Mail-Followup-To</CODE> header manually.  Mutt will only auto-generate
-this header if it doesn't exist when you send the message.</P>
-
-<P>The other method some mailing list admins use is to generate a
-``Reply-To'' field which points back to the mailing list address rather
-than the author of the message.  This can create problems when trying
-to reply directly to the author in private, since most mail clients
-will automatically reply to the address given in the ``Reply-To''
-field.  Mutt uses the 
-<A HREF="manual-6.html#reply_to">$reply_to</A>
-variable to help decide which address to use.  If set, you will be
-prompted as to whether or not you would like to use the address given in
-the ``Reply-To'' field, or reply directly to the address given in the
-``From'' field.  When unset, the ``Reply-To'' field will be used when
-present.</P>
-<P>The ``X-Label:'' header field can be used to further identify mailing
-lists or list subject matter (or just to annotate messages
-individually).  The 
-<A HREF="manual-6.html#index_format">$index_format</A> variable's ``%y'' and
-``%Y'' escapes can be used to expand ``X-Label:'' fields in the
-index, and Mutt's pattern-matcher can match regular expressions to
-``X-Label:'' fields with the ``&nbsp;y'' selector.  ``X-Label:'' is not a
-standard message header field, but it can easily be inserted by procmail
-and other mail filtering agents.</P>
-<P>Lastly, Mutt has the ability to 
-<A HREF="manual-6.html#sort">sort</A> the mailbox into
-<A HREF="manual-2.html#threads">threads</A>.  A thread is a group of messages which all relate to the same
-subject.  This is usually organized into a tree-like structure where a
-message and all of its replies are represented graphically.  If you've ever
-used a threaded news client, this is the same concept.  It makes dealing
-with large volume mailing lists easier because you can easily delete
-uninteresting threads and quickly find topics of value.</P>
-
-<H2><A NAME="ss4.9">4.9</A> <A HREF="manual.html#toc4.9">Delivery Status Notification (DSN) Support</A>
-</H2>
-
-<P>RFC1894 defines a set of MIME content types for relaying information
-about the status of electronic mail messages.  These can be thought of as
-``return receipts.'' Berkeley sendmail 8.8.x currently has some command
-line options in which the mail client can make requests as to what type
-of status messages should be returned.</P>
-<P>To support this, there are two variables. 
-<A HREF="manual-6.html#dsn_notify">$dsn_notify</A> is used to request receipts for
-different results (such as failed message, message delivered, etc.).
-<A HREF="manual-6.html#dsn_return">$dsn_return</A> requests how much
-of your message should be returned with the receipt (headers or full
-message).  Refer to the man page on sendmail for more details on DSN.</P>
-
-<H2><A NAME="ss4.10">4.10</A> <A HREF="manual.html#toc4.10">POP3 Support (OPTIONAL)</A>
-</H2>
-
-
-<P>If Mutt was compiled with POP3 support (by running the <EM>configure</EM>
-script with the <EM>--enable-pop</EM> flag), it has the ability to work
-with mailboxes located on a remote POP3 server and fetch mail for local
-browsing.</P>
-<P>You can access the remote POP3 mailbox by selecting the folder
-<CODE>pop://popserver/</CODE>.</P>
-<P>You can select an alternative port by specifying it with the server, ie:
-<CODE>pop://popserver:port/</CODE>.</P>
-<P>You can also specify different username for each folder, ie:
-<CODE>pop://username@popserver[:port]/</CODE>.</P>
-<P>Polling for new mail is more expensive over POP3 than locally. For this
-reason the frequency at which Mutt will check for mail remotely can be
-controlled by the
-<A HREF="manual-6.html#pop_checkinterval">$pop_checkinterval</A>
-variable, which defaults to every 60 seconds.</P>
-<P>If Mutt was compiled with SSL support (by running the <EM>configure</EM>
-script with the <EM>--with-ssl</EM> flag), connections to POP3 servers
-can be encrypted. This naturally requires that the server supports
-SSL encrypted connections. To access a folder with POP3/SSL, you should
-use pops: prefix, ie:
-<CODE>pops://[username@]popserver[:port]/</CODE>.</P>
-<P>Another way to access your POP3 mail is the <EM>fetch-mail</EM> function
-(default: G).  It allows to connect to 
-<A HREF="manual-6.html#pop_host">pop_host</A>, fetch all your new mail and place it in the
-local 
-<A HREF="manual-6.html#spoolfile">spoolfile</A>.  After this
-point, Mutt runs exactly as if the mail had always been local.</P>
-<P><B>Note:</B> If you only need to fetch all messages to local mailbox
-you should consider using a specialized program, such as 
-<A HREF="http://www.ccil.org/~esr/fetchmail">fetchmail</A></P>
-
-<H2><A NAME="ss4.11">4.11</A> <A HREF="manual.html#toc4.11">IMAP Support (OPTIONAL)</A>
-</H2>
-
-
-<P>If Mutt was compiled with IMAP support (by running the <EM>configure</EM>
-script with the <EM>--enable-imap</EM> flag), it has the ability to work
-with folders located on a remote IMAP server.</P>
-<P>You can access the remote inbox by selecting the folder
-<CODE>imap://imapserver/INBOX</CODE>, where <CODE>imapserver</CODE> is the name of the
-IMAP server and <CODE>INBOX</CODE> is the special name for your spool mailbox on
-the IMAP server. If you want to access another mail folder at the IMAP
-server, you should use <CODE>imap://imapserver/path/to/folder</CODE> where
-<CODE>path/to/folder</CODE> is the path of the folder you want to access.</P>
-<P>You can select an alternative port by specifying it with the server, ie:
-<CODE>imap://imapserver:port/INBOX</CODE>.</P>
-<P>You can also specify different username for each folder, ie:
-<CODE>imap://username@imapserver[:port]/INBOX</CODE>.</P>
-<P>If Mutt was compiled with SSL support (by running the <EM>configure</EM>
-script with the <EM>--with-ssl</EM> flag), connections to IMAP servers
-can be encrypted. This naturally requires that the server supports
-SSL encrypted connections. To access a folder with IMAP/SSL, you should
-use <CODE>imaps://[username@]imapserver[:port]/path/to/folder</CODE> as your 
-folder path.</P>
-<P>Pine-compatible notation is also supported, ie
-<CODE>{[username@]imapserver[:port][/ssl]}path/to/folder</CODE></P>
-<P>Note that not all servers use / as the hierarchy separator.  Mutt should
-correctly notice which separator is being used by the server and convert
-paths accordingly.</P>
-<P>When browsing folders on an IMAP server, you can toggle whether to look
-at only the folders you are subscribed to, or all folders with the
-<EM>toggle-subscribed</EM> command.  See also the 
-<A HREF="manual-6.html#imap_list_subscribed">$imap_list_subscribed</A> variable.</P>
-<P>Polling for new mail on an IMAP server can cause noticeable delays. So, you'll
-want to carefully tune the
-<A HREF="manual-6.html#mail_check">$mail_check</A>
-and
-<A HREF="manual-6.html#timeout">$timeout</A>
-variables. Personally I use
-<BLOCKQUOTE><CODE>
-<PRE>
-set mail_check=90
-set timeout=15
-</PRE>
-</CODE></BLOCKQUOTE>
-
-with relatively good results over my slow modem line.</P>
-<P>Note that if you are using mbox as the mail store on UW servers prior to
-v12.250, the server has been reported to disconnect a client if another client
-selects the same folder.</P>
-
-<H3>The Folder Browser</H3>
-
-
-<P>As of version 1.2, mutt supports browsing mailboxes on an IMAP
-server. This is mostly the same as the local file browser, with the
-following differences:
-<UL>
-<LI>In lieu of file permissions, mutt displays the string "IMAP",
-possibly followed by the symbol "+", indicating
-that the entry contains both messages and subfolders. On
-Cyrus-like servers folders will often contain both messages and
-subfolders. </LI>
-<LI>For the case where an entry can contain both messages and
-subfolders, the selection key (bound to <CODE>enter</CODE> by default)
-will choose to descend into the subfolder view. If you wish to view
-the messages in that folder, you must use <CODE>view-file</CODE> instead
-(bound to <CODE>space</CODE> by default).</LI>
-<LI>You can delete mailboxes with the <CODE>delete-mailbox</CODE>
-command (bound to <CODE>d</CODE> by default. You may also
-<CODE>subscribe</CODE> and <CODE>unsubscribe</CODE> to mailboxes (normally
-these are bound to <CODE>s</CODE> and <CODE>u</CODE>, respectively).</LI>
-</UL>
-</P>
-
-<H3>Authentication</H3>
-
-
-<P>Mutt supports four authentication methods with IMAP servers: SASL,
-GSSAPI, CRAM-MD5, and LOGIN (there is a patch by Grant Edwards to add
-NTLM authentication for you poor exchange users out there, but it has
-yet to be integrated into the main tree). There is also support for
-the pseudo-protocol ANONYMOUS, which allows you to log in to a public
-IMAP server without having an account. To use ANONYMOUS, simply make
-your username blank or "anonymous".</P>
-<P>SASL is a special super-authenticator, which selects among several protocols
-(including GSSAPI, CRAM-MD5, ANONYMOUS, and DIGEST-MD5) the most secure
-method available on your host and the server. Using some of these methods
-(including DIGEST-MD5 and possibly GSSAPI), your entire session will be
-encrypted and invisible to those teeming network snoops. It is the best
-option if you have it. To use it, you must have the Cyrus SASL library
-installed on your system and compile mutt with the <EM>--with-sasl</EM> flag.</P>
-<P>Mutt will try whichever methods are compiled in and available on the server,
-in the following order: SASL, ANONYMOUS, GSSAPI, CRAM-MD5, LOGIN.</P>
-<P>There are a few variables which control authentication: 
-<UL>
-<LI>
-<A HREF="manual-6.html#imap_user">$imap_user</A> - controls
-the username under which you request authentication on the IMAP server,
-for all authenticators. This is overridden by an explicit username in
-the mailbox path (ie by using a mailbox name of the form
-<CODE>{user@host}</CODE>).</LI>
-<LI>
-<A HREF="manual-6.html#imap_pass">$imap_pass</A> - a
-password which you may preset, used by all authentication methods where
-a password is needed.</LI>
-<LI>
-<A HREF="manual-6.html#imap_authenticators">$imap_authenticators</A> - a colon-delimited list of IMAP
-authentication methods to try, in the order you wish to try them. If
-specified, this overrides mutt's default (attempt everything, in the order
-listed above).</LI>
-</UL>
-</P>
-
-<H2><A NAME="account-hook"></A> <A NAME="ss4.12">4.12</A> <A HREF="manual.html#toc4.12">Managing multiple IMAP/POP accounts (OPTIONAL)</A>
-</H2>
-
-
-<P>If you happen to have accounts on multiple IMAP and/or POP servers,
-you may find managing all the authentication settings inconvenient and
-error-prone.  The account-hook command may help. This hook works like
-folder-hook but is invoked whenever you access a remote mailbox
-(including inside the folder browser), not just when you open the
-mailbox.</P>
-<P>Some examples:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-account-hook . 'unset imap_user; unset imap_pass; unset tunnel'
-account-hook imap://host1/ 'set imap_user=me1 imap_pass=foo'
-account-hook imap://host2/ 'set tunnel="ssh host2 /usr/libexec/imapd"'
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="urlview"></A> <A NAME="ss4.13">4.13</A> <A HREF="manual.html#toc4.13">Start a WWW Browser on URLs (EXTERNAL)</A>
-</H2>
-
-<P>If a message contains URLs (<EM>unified ressource locator</EM> = address in the
-WWW space like <EM>http://www.mutt.org/</EM>), it is efficient to get
-a menu with all the URLs and start a WWW browser on one of them.  This
-functionality is provided by the external urlview program which can be
-retrieved at 
-<A HREF="ftp://ftp.guug.de/pub/mutt/contrib/">ftp://ftp.guug.de/pub/mutt/contrib/</A> and the configuration commands:
-<BLOCKQUOTE><CODE>
-<PRE>
-macro index \cb |urlview\n
-macro pager \cb |urlview\n
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="ss4.14">4.14 Compressed folders Support (OPTIONAL)</A>
-</H2>
-
-
-<P>If Mutt was compiled with compressed folders support (by running the
-<EM>configure</EM> script with the <EM>--enable-compressed</EM> flag), Mutt
-can open folders stored in an arbitrary format, provided that the user
-has a script to convert from/to this format to one of the accepted.</P>
-<P>The most common use is to open compressed archived folders e.g. with
-gzip.</P>
-<P>In addition, the user can provide a script that gets a folder in an
-accepted format and appends its context to the folder in the
-user-defined format, which may be faster than converting the entire
-folder to the accepted format, appending to it and converting back to
-the user-defined format.</P>
-<P>There are three hooks defined (
-<A HREF="#open-hook">open-hook</A>,
-<A HREF="#close-hook">close-hook</A> and 
-<A HREF="#append-hook">append-hook</A>) which define commands to uncompress and compress
-a folder and to append messages to an existing compressed folder 
-respectively.</P>
-<P>For example:</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-open-hook \\.gz$ "gzip -cd %f &gt; %t" 
-close-hook \\.gz$ "gzip -c %t &gt; %f"
-append-hook \\.gz$ "gzip -c %t &gt;&gt; %f" 
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>You do not have to specify all of the commands. If you omit 
-<A HREF="#append-hook">append-hook</A>, the folder will be open and
-closed again each time you will add to it. If you omit 
-<A HREF="#close-hook">close-hook</A> (or give empty command) , the
-folder will be open in the  mode. If you specify 
-<A HREF="#append-hook">append-hook</A> though you'll be able to append
-to the folder.</P>
-<P>Note that Mutt will only try to use hooks if the file is not in one of
-the accepted formats. In particular, if the file is empty, mutt
-supposes it is not compressed. This is important because it allows the
-use of programs that do not have well defined extensions. Just use
-&quot;.&quot; as a regexp. But this may be surprising if your
-compressing script produces empty files. In this situation, unset 
-<A HREF="manual-6.html#save_empty">$save_empty</A>, so that the compressed file
-will be removed if you delete all of the messages.</P>
-
-<H3><A NAME="open-hook"></A> Open a compressed mailbox for reading</H3>
-
-<P>Usage: <CODE>open-hook</CODE> <EM>regexp</EM> &quot;<EM>command</EM>&quot;</P><HR>
-
-<A HREF="manual-5.html">Next</A>
-<A HREF="manual-3.html">Previous</A>
-<A HREF="manual.html#toc4">Contents</A>
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual-5.html mutt-1.4/doc/manual-5.html
--- mutt-1.4.orig/doc/manual-5.html	Wed May 29 11:29:56 2002
+++ mutt-1.4/doc/manual-5.html	Thu Jan  1 01:00:00 1970
@@ -1,545 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client: Mutt's MIME Support</TITLE>
- <LINK HREF="manual-6.html" REL=next>
- <LINK HREF="manual-4.html" REL=previous>
- <LINK HREF="manual.html#toc5" REL=contents>
-</HEAD>
-<BODY>
-<A HREF="manual-6.html">Next</A>
-<A HREF="manual-4.html">Previous</A>
-<A HREF="manual.html#toc5">Contents</A>
-<HR>
-<H2><A NAME="s5">5.</A> <A HREF="manual.html#toc5">Mutt's MIME Support</A></H2>
-
-<P>Quite a bit of effort has been made to make Mutt the premier text-mode
-MIME MUA.  Every effort has been made to provide the functionality that
-the discerning MIME user requires, and the conformance to the standards
-wherever possible.  When configuring Mutt for MIME, there are two extra
-types of configuration files which Mutt uses.  One is the
-<CODE>mime.types</CODE> file, which contains the mapping of file extensions to 
-IANA MIME types.  The other is the <CODE>mailcap</CODE> file, which specifies
-the external commands to use for handling specific MIME types.</P>
-
-<H2><A NAME="ss5.1">5.1</A> <A HREF="manual.html#toc5.1">Using MIME in Mutt</A>
-</H2>
-
-<P>There are three areas/menus in Mutt which deal with MIME, they are the
-pager (while viewing a message), the attachment menu and the compose
-menu.</P>
-
-<H3>Viewing MIME messages in the pager</H3>
-
-<P>When you select a message from the index and view it in the pager, Mutt
-decodes the message to a text representation.  Mutt internally supports
-a number of MIME types, including <CODE>text/plain, text/enriched,
-message/rfc822, and message/news</CODE>.  In addition, the export
-controlled version of Mutt recognizes a variety of PGP MIME types,
-including PGP/MIME and application/pgp.</P>
-<P>Mutt will denote attachments with a couple lines describing them.
-These lines are of the form:
-<BLOCKQUOTE><CODE>
-<PRE>
-[-- Attachment #1: Description --]
-[-- Type: text/plain, Encoding: 7bit, Size: 10000 --]
-</PRE>
-</CODE></BLOCKQUOTE>
-
-Where the <CODE>Description</CODE> is the description or filename given for the
-attachment, and the <CODE>Encoding</CODE> is one of
-<CODE>7bit/8bit/quoted-printable/base64/binary</CODE>.</P>
-<P>If Mutt cannot deal with a MIME type, it will display a message like:
-<BLOCKQUOTE><CODE>
-<PRE>
-[-- image/gif is unsupported (use 'v' to view this part) --]
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3><A NAME="attach_menu"></A> The Attachment Menu</H3>
-
-<P>The default binding for <CODE>view-attachments</CODE> is `v', which displays the
-attachment menu for a message.  The attachment menu displays a list of
-the attachments in a message.  From the attachment menu, you can save,
-print, pipe, delete, and view attachments.  You can apply these
-operations to a group of attachments at once, by tagging the attachments
-and by using the ``tag-prefix'' operator.  You can also reply to the
-current message from this menu, and only the current attachment (or the
-attachments tagged) will be quoted in your reply.  You can view
-attachments as text, or view them using the mailcap viewer definition.</P>
-<P>Finally, you can apply the usual message-related functions (like 
-<A HREF="manual-2.html#resend-message">resend-message</A>, and the reply
-and forward functions) to attachments of type <CODE>message/rfc822</CODE>.</P>
-<P>See the help on the attachment menu for more information.</P>
-
-<H3><A NAME="compose_menu"></A> The Compose Menu</H3>
-
-<P>The compose menu is the menu you see before you send a message.  It
-allows you to edit the recipient list, the subject, and other aspects
-of your message.  It also contains a list of the attachments of your
-message, including the main body.  From this menu, you can print, copy,
-filter, pipe, edit, compose, review, and rename an attachment or a
-list of tagged attachments.  You can also modifying the attachment
-information, notably the type, encoding and description.</P>
-<P>Attachments appear as follows:
-<PRE>
--   1 [text/plain, 7bit, 1K]             /tmp/mutt-euler-8082-0 &lt;no description>
-    2 [applica/x-gunzip, base64, 422K]   ~/src/mutt-0.85.tar.gz &lt;no description>
-</PRE>
-</P>
-<P>The '-' denotes that Mutt will delete the file after sending (or
-postponing, or cancelling) the message.  It can be toggled with the
-<CODE>toggle-unlink</CODE> command (default: u).  The next field is the MIME
-content-type, and can be changed with the <CODE>edit-type</CODE> command
-(default: ^T).  The next field is the encoding for the attachment,
-which allows a binary message to be encoded for transmission on 7bit
-links.  It can be changed with the <CODE>edit-encoding</CODE> command
-(default: ^E).  The next field is the size of the attachment,
-rounded to kilobytes or megabytes.  The next field is the filename,
-which can be changed with the <CODE>rename-file</CODE> command (default: R).
-The final field is the description of the attachment, and can be
-changed with the <CODE>edit-description</CODE> command (default: d).</P>
-
-<H2><A NAME="ss5.2">5.2</A> <A HREF="manual.html#toc5.2">MIME Type configuration with <CODE>mime.types</CODE></A>
-</H2>
-
-<P>When you add an attachment to your mail message, Mutt searches your
-personal mime.types file at <CODE>${HOME}/.mime.types</CODE>, and then
-the system mime.types file at <CODE>/usr/local/share/mutt/mime.types</CODE> or
-<CODE>/etc/mime.types</CODE></P>
-<P>The mime.types file consist of lines containing a MIME type and a space
-separated list of extensions.  For example:
-<BLOCKQUOTE><CODE>
-<PRE>
-application/postscript          ps eps
-application/pgp                 pgp
-audio/x-aiff                    aif aifc aiff
-</PRE>
-</CODE></BLOCKQUOTE>
-
-A sample <CODE>mime.types</CODE> file comes with the Mutt distribution, and
-should contain most of the MIME types you are likely to use.  </P>
-<P>If Mutt can not determine the mime type by the extension of the file you
-attach, it will look at the file.  If the file is free of binary
-information, Mutt will assume that the file is plain text, and mark it
-as <CODE>text/plain</CODE>.  If the file contains binary information, then Mutt will
-mark it as <CODE>application/octet-stream</CODE>.  You can change the MIME
-type that Mutt assigns to an attachment by using the <CODE>edit-type</CODE>
-command from the compose menu (default: ^T). The MIME type is actually a
-major mime type followed by the sub-type, separated by a '/'. 6 major
-types: application, text, image, video, audio, and model have been approved
-after various internet discussions. Mutt recognises all of these if the 
-appropriate entry is found in the mime.types file. It also recognises other
-major mime types, such as the chemical type that is widely used in the 
-molecular modelling community to pass molecular data in various forms to 
-various molecular viewers. Non-recognised mime types should only be used 
-if the recipient of the message is likely to be expecting such attachments.</P>
-
-<H2><A NAME="ss5.3">5.3</A> <A HREF="manual.html#toc5.3">MIME Viewer configuration with <CODE>mailcap</CODE></A>
-</H2>
-
-<P>Mutt supports RFC 1524 MIME Configuration, in particular the Unix
-specific format specified in Appendix A of RFC 1524.  This file format
-is commonly referred to as the mailcap format.  Many MIME compliant
-programs utilize the mailcap format, allowing you to specify handling
-for all MIME types in one place for all programs.  Programs known to
-use this format include Netscape, XMosaic, lynx and metamail.</P>
-<P>In order to handle various MIME types that Mutt can not handle
-internally, Mutt parses a series of external configuration files to
-find an external handler.  The default search string for these files
-is a colon delimited list set to
-<BLOCKQUOTE><CODE>
-<PRE>
-${HOME}/.mailcap:/usr/local/share/mutt/mailcap:/etc/mailcap:/etc/mailcap:/usr/etc/mailcap:/usr/local/etc/mailcap
-</PRE>
-</CODE></BLOCKQUOTE>
-
-where <CODE>$HOME</CODE> is your home directory.</P>
-<P>In particular, the metamail distribution will install a mailcap file,
-usually as <CODE>/usr/local/etc/mailcap</CODE>, which contains some baseline
-entries.</P>
-
-<H3>The Basics of the mailcap file</H3>
-
-<P>A mailcap file consists of a series of lines which are comments, blank,
-or definitions.</P>
-<P>A comment line consists of a # character followed by anything you want.</P>
-<P>A blank line is blank.</P>
-<P>A definition line consists of a content type, a view command, and any
-number of optional fields.  Each field of a definition line is divided
-by a semicolon ';' character.</P>
-<P>The content type is specified in the MIME standard type/subtype method.
-For example,
-<CODE>text/plain, text/html, image/gif, </CODE>
-etc.  In addition, the mailcap format includes two formats for
-wildcards, one using the special '*' subtype, the other is the implicit
-wild, where you only include the major type.  For example, <CODE>image/*</CODE>, or
-<CODE>video,</CODE> will match all image types and video types,
-respectively.</P>
-<P>The view command is a Unix command for viewing the type specified. There
-are two different types of commands supported. The default is to send
-the body of the MIME message to the command on stdin. You can change
-this behaviour by using %s as a parameter to your view command.
-This will cause Mutt to save the body of the MIME message to a temporary
-file, and then call the view command with the %s replaced by
-the name of the temporary file. In both cases, Mutt will turn over the
-terminal to the view program until the program quits, at which time Mutt
-will remove the temporary file if it exists.</P>
-<P>So, in the simplest form, you can send a text/plain message to the
-external pager more on stdin:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/plain; more
-</PRE>
-</CODE></BLOCKQUOTE>
-
-Or, you could send the message as a file:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/plain; more %s
-</PRE>
-</CODE></BLOCKQUOTE>
-
-Perhaps you would like to use lynx to interactively view a text/html 
-message:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html; lynx %s
-</PRE>
-</CODE></BLOCKQUOTE>
-
-In this case, lynx does not support viewing a file from stdin, so you
-must use the %s syntax.
-<B>Note:</B> <EM>Some older versions of lynx contain a bug where they
-will check the mailcap file for a viewer for text/html.  They will find
-the line which calls lynx, and run it.  This causes lynx to continuously
-spawn itself to view the object.</EM></P>
-<P>On the other hand, maybe you don't want to use lynx interactively, you
-just want to have it convert the text/html to text/plain, then you can
-use:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html; lynx -dump %s | more
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Perhaps you wish to use lynx to view text/html files, and a pager on
-all other text formats, then you would use the following:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html; lynx %s
-text/*; more
-</PRE>
-</CODE></BLOCKQUOTE>
-
-This is the simplest form of a mailcap file.</P>
-
-<H3>Secure use of mailcap</H3>
-
-<P>The interpretion of shell meta-characters embedded in MIME parameters
-can lead to security problems in general.  Mutt tries to quote parameters
-in expansion of %s syntaxes properly, and avoids risky characters by
-substituting them, see the 
-<A HREF="manual-6.html#mailcap_sanitize">mailcap_sanitize</A> variable.</P>
-<P>Although mutt's procedures to invoke programs with mailcap seem to be
-safe, there are other applications parsing mailcap, maybe taking less care
-of it.  Therefore you should pay attention to the following rules:</P>
-<P><EM>Keep the %-expandos away from shell quoting.</EM>
-Don't quote them with single or double quotes.  Mutt does this for
-you, the right way, as should any other program which interprets
-mailcap.  Don't put them into backtick expansions.  Be highly careful
-with eval statements, and avoid them if possible at all.  Trying to fix
-broken behaviour with quotes introduces new leaks - there is no
-alternative to correct quoting in the first place.</P>
-<P>If you have to use the %-expandos' values in context where you need
-quoting or backtick expansions, put that value into a shell variable
-and reference the shell variable where necessary, as in the following
-example (using <CODE>$charset</CODE> inside the backtick expansion is safe,
-since it is not itself subject to any further expansion):</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-text/test-mailcap-bug; cat %s; copiousoutput; test=charset=%{charset} \
-        &amp;&amp; test "`echo $charset | tr '[A-Z]' '[a-z]'`" != iso-8859-1
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3>Advanced mailcap Usage</H3>
-
-
-
-<H3>Optional Fields</H3>
-
-<P>In addition to the required content-type and view command fields, you
-can add semi-colon ';' separated fields to set flags and other options.
-Mutt recognizes the following optional fields:
-<DL>
-<DT><B>copiousoutput</B><DD><P>This flag tells Mutt that the command passes possibly large amounts of
-text on stdout.  This causes Mutt to invoke a pager (either the internal
-pager or the external pager defined by the pager variable) on the output
-of the view command.  Without this flag, Mutt assumes that the command
-is interactive.  One could use this to replace the pipe to <CODE>more</CODE>
-in the <CODE>lynx -dump</CODE> example in the Basic section:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html; lynx -dump %s ; copiousoutput
-</PRE>
-</CODE></BLOCKQUOTE>
-
-This will cause lynx to format the text/html output as text/plain
-and Mutt will use your standard pager to display the results.</P>
-<DT><B>needsterminal</B><DD><P>Mutt uses this flag when viewing attachments with 
-<A HREF="#auto_view">autoview</A>, in order to decide whether it should honor the setting
-of the 
-<A HREF="manual-6.html#wait_key">$wait_key</A> variable or
-not.  When an attachment is viewed using an interactive program, and the
-corresponding mailcap entry has a <EM>needsterminal</EM> flag, Mutt will use
-<A HREF="manual-6.html#wait_key">$wait_key</A> and the exit status
-of the program to decide if it will ask you to press a key after the
-external program has exited.  In all other situations it will not prompt
-you for a key.</P>
-<DT><B>compose=&lt;command&gt;</B><DD><P>This flag specifies the command to use to create a new attachment of a
-specific MIME type.  Mutt supports this from the compose menu.</P>
-<DT><B>composetyped=&lt;command&gt;</B><DD><P>This flag specifies the command to use to create a new attachment of a
-specific MIME type.  This command differs from the compose command in
-that mutt will expect standard MIME headers on the data.  This can be
-used to specify parameters, filename, description, etc. for a new
-attachment.   Mutt supports this from the compose menu.</P>
-<DT><B>print=&lt;command&gt;</B><DD><P>This flag specifies the command to use to print a specific MIME type.
-Mutt supports this from the attachment and compose menus.</P>
-<DT><B>edit=&lt;command&gt;</B><DD><P>This flag specifies the command to use to edit a specific MIME type.  
-Mutt supports this from the compose menu, and also uses it to compose
-new attachments.  Mutt will default to the defined editor for text
-attachments.</P>
-<DT><B>nametemplate=&lt;template&gt;</B><DD><P>This field specifies the format for the file denoted by %s in the
-command fields.  Certain programs will require a certain file extension,
-for instance, to correctly view a file.  For instance, lynx will only
-interpret a file as <CODE>text/html</CODE> if the file ends in <CODE>.html</CODE>.
-So, you would specify lynx as a <CODE>text/html</CODE> viewer with a line in
-the mailcap file like:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html; lynx %s; nametemplate=%s.html
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<DT><B>test=&lt;command&gt;</B><DD><P>This field specifies a command to run to test whether this mailcap
-entry should be used.  The command is defined with the command expansion
-rules defined in the next section.  If the command returns 0, then the
-test passed, and Mutt uses this entry.  If the command returns non-zero,
-then the test failed, and Mutt continues searching for the right entry.
-<B>Note:</B> <EM>the content-type must match before Mutt performs the test.</EM>
-For example:
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html; netscape -remote 'openURL(%s)' ; test=RunningX
-text/html; lynx %s
-</PRE>
-</CODE></BLOCKQUOTE>
-
-In this example, Mutt will run the program RunningX which will return 0
-if the X Window manager is running, and non-zero if it isn't.  If
-RunningX returns 0, then Mutt will call netscape to display the
-text/html object.  If RunningX doesn't return 0, then Mutt will go on
-to the next entry and use lynx to display the text/html object.</P>
-</DL>
-</P>
-
-<H3>Search Order</H3>
-
-<P>When searching for an entry in the mailcap file, Mutt will search for
-the most useful entry for its purpose.  For instance, if you are
-attempting to print an <CODE>image/gif</CODE>, and you have the following
-entries in your mailcap file, Mutt will search for an entry with the
-print command:
-<BLOCKQUOTE><CODE>
-<PRE>
-image/*;        xv %s
-image/gif;      ; print= anytopnm %s | pnmtops | lpr; \
-                nametemplate=%s.gif
-</PRE>
-</CODE></BLOCKQUOTE>
-
-Mutt will skip the <CODE>image/*</CODE> entry and use the <CODE>image/gif</CODE>
-entry with the print command.</P>
-<P>In addition, you can use this with 
-<A HREF="#auto_view">Autoview</A> 
-to denote two commands for viewing an attachment, one to be viewed
-automatically, the other to be viewed interactively from the attachment
-menu.  In addition, you can then use the test feature to determine which
-viewer to use interactively depending on your environment.
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html;      netscape -remote 'openURL(%s)' ; test=RunningX
-text/html;      lynx %s; nametemplate=%s.html
-text/html;      lynx -dump %s; nametemplate=%s.html; copiousoutput
-</PRE>
-</CODE></BLOCKQUOTE>
-
-For 
-<A HREF="#auto_view">Autoview</A>, Mutt will choose the third
-entry because of the copiousoutput tag.  For interactive viewing, Mutt
-will run the program RunningX to determine if it should use the first
-entry.  If the program returns non-zero, Mutt will use the second entry
-for interactive viewing.</P>
-
-<H3>Command Expansion</H3>
-
-<P>The various commands defined in the mailcap files are passed to the
-<CODE>/bin/sh</CODE> shell using the system() function.  Before the
-command is passed to <CODE>/bin/sh -c</CODE>, it is parsed to expand
-various special parameters with information from Mutt.  The keywords
-Mutt expands are:
-<DL>
-<DT><B>%s</B><DD><P>As seen in the basic mailcap section, this variable is expanded
-to a filename specified by the calling program.  This file contains
-the body of the message to view/print/edit or where the composing
-program should place the results of composition.  In addition, the
-use of this keyword causes Mutt to not pass the body of the message
-to the view/print/edit program on stdin.</P>
-<DT><B>%t</B><DD><P>Mutt will expand %t to the text representation of the content
-type of the message in the same form as the first parameter of the
-mailcap definition line, ie <CODE>text/html</CODE> or
-<CODE>image/gif</CODE>.</P>
-<DT><B>%{&lt;parameter&gt;}</B><DD><P>Mutt will expand this to the value of the specified parameter
-from the Content-Type: line of the mail message.  For instance, if
-Your mail message contains:
-<BLOCKQUOTE><CODE>
-<PRE>
-Content-Type: text/plain; charset=iso-8859-1
-</PRE>
-</CODE></BLOCKQUOTE>
-
-then Mutt will expand %{charset} to iso-8859-1.  The default metamail
-mailcap file uses this feature to test the charset to spawn an xterm
-using the right charset to view the message.</P>
-<DT><B>\%</B><DD><P>This will be replaced by a %</P>
-</DL>
-
-Mutt does not currently support the %F and %n keywords
-specified in RFC 1524.  The main purpose of these parameters is for
-multipart messages, which is handled internally by Mutt.</P>
-
-<H3>Example mailcap files</H3>
-
-<P>This mailcap file is fairly simple and standard:
-<HR>
-<PRE>
-# I'm always running X :)
-video/*;        xanim %s > /dev/null
-image/*;        xv %s > /dev/null
-
-# I'm always running netscape (if my computer had more memory, maybe)
-text/html;      netscape -remote 'openURL(%s)'
-</PRE>
-<HR>
-</P>
-<P>This mailcap file shows quite a number of examples:</P>
-<P>
-<HR>
-<PRE>
-# Use xanim to view all videos   Xanim produces a header on startup,
-# send that to /dev/null so I don't see it
-video/*;        xanim %s > /dev/null
-
-# Send html to a running netscape by remote
-text/html;      netscape -remote 'openURL(%s)'; test=RunningNetscape
-
-# If I'm not running netscape but I am running X, start netscape on the
-# object
-text/html;      netscape %s; test=RunningX
-
-# Else use lynx to view it as text
-text/html;      lynx %s
-
-# This version would convert the text/html to text/plain
-text/html;      lynx -dump %s; copiousoutput
-
-# enriched.sh converts text/enriched to text/html and then uses 
-# lynx -dump to convert it to text/plain
-text/enriched;  enriched.sh ; copiousoutput
-
-# I use enscript to print text in two columns to a page
-text/*;         more %s; print=enscript -2Gr %s
-
-# Netscape adds a flag to tell itself to view jpegs internally
-image/jpeg;xv %s; x-mozilla-flags=internal
-
-# Use xv to view images if I'm running X
-# In addition, this uses the \ to extend the line and set my editor
-# for images
-image/*;xv %s; test=RunningX; \
-        edit=xpaint %s
-
-# Convert images to text using the netpbm tools
-image/*;  (anytopnm %s | pnmscale -xysize 80 46 | ppmtopgm | pgmtopbm |
-pbmtoascii -1x2 ) 2>&amp;1 ; copiousoutput
-
-# Send excel spreadsheets to my NT box
-application/ms-excel; open.pl %s
-</PRE>
-<HR>
-</P>
-
-<H2><A NAME="auto_view"></A> <A NAME="ss5.4">5.4</A> <A HREF="manual.html#toc5.4">MIME Autoview</A>
-</H2>
-
-<P>In addition to explicitly telling Mutt to view an attachment with the
-MIME viewer defined in the mailcap file, Mutt has support for
-automatically viewing MIME attachments while in the pager.</P>
-<P>To work, you must define a viewer in the mailcap file which uses the 
-<CODE>copiousoutput</CODE> option to denote that it is non-interactive.
-Usually, you also use the entry to convert the attachment to a text
-representation which you can view in the pager.</P>
-<P>You then use the <CODE>auto_view</CODE> muttrc command to list the
-content-types that you wish to view automatically.</P>
-<P>For instance, if you set auto_view to:
-<BLOCKQUOTE><CODE>
-<PRE>
-auto_view text/html text/enriched application/x-gunzip application/postscript image/gif application/x-tar-gz
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Mutt could use the following mailcap entries to automatically view
-attachments of these types.
-<BLOCKQUOTE><CODE>
-<PRE>
-text/html;      lynx -dump %s; copiousoutput; nametemplate=%s.html
-text/enriched;  enriched.sh  ; copiousoutput
-image/*;        anytopnm %s | pnmscale -xsize 80 -ysize 50 | ppmtopgm | pgmtopbm | pbmtoascii ; copiousoutput
-application/x-gunzip;   gzcat; copiousoutput
-application/x-tar-gz; gunzip -c %s | tar -tf - ; copiousoutput
-application/postscript; ps2ascii %s; copiousoutput
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H2><A NAME="alternative_order"></A> <A NAME="ss5.5">5.5</A> <A HREF="manual.html#toc5.5">MIME Multipart/Alternative</A>
-</H2>
-
-<P>Mutt has some heuristics for determining which attachment of a
-multipart/alternative type to display.  First, mutt will check the 
-alternative_order list to determine if one of the available types
-is preferred.  The alternative_order list consists of a number of
-mimetypes in order, including support for implicit and explicit
-wildcards, for example:
-<BLOCKQUOTE><CODE>
-<PRE>
-alternative_order text/enriched text/plain text application/postscript image/*
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>Next, mutt will check if any of the types have a defined 
-<A HREF="#auto_view">auto_view</A>, and use that.  Failing
-that, Mutt will look for any text type.  As a last attempt, mutt will
-look for any type it knows how to handle.</P>
-
-<HR>
-<A HREF="manual-6.html">Next</A>
-<A HREF="manual-4.html">Previous</A>
-<A HREF="manual.html#toc5">Contents</A>
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual-6.html mutt-1.4/doc/manual-6.html
--- mutt-1.4.orig/doc/manual-6.html	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/doc/manual-6.html	Thu Jan  1 01:00:00 1970
@@ -1,3500 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client: Reference</TITLE>
- <LINK HREF="manual-7.html" REL=next>
- <LINK HREF="manual-5.html" REL=previous>
- <LINK HREF="manual.html#toc6" REL=contents>
-</HEAD>
-<BODY>
-<A HREF="manual-7.html">Next</A>
-<A HREF="manual-5.html">Previous</A>
-<A HREF="manual.html#toc6">Contents</A>
-<HR>
-<H2><A NAME="s6">6.</A> <A HREF="manual.html#toc6">Reference</A></H2>
-
-<H2><A NAME="commandline"></A> <A NAME="ss6.1">6.1</A> <A HREF="manual.html#toc6.1">Command line options</A>
-</H2>
-
-<P>Running <CODE>mutt</CODE> with no arguments will make Mutt attempt to read your spool
-mailbox.  However, it is possible to read other mailboxes and
-to send messages from the command line as well.</P>
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
--a      attach a file to a message
--b      specify a blind carbon-copy (BCC) address
--c      specify a carbon-copy (Cc) address
--e      specify a config command to be run after initilization files are read
--f      specify a mailbox to load
--F      specify an alternate file to read initialization commands
--h      print help on command line options
--H      specify a draft file from which to read a header and body
--i      specify a file to include in a message composition
--m      specify a default mailbox type
--n      do not read the system Muttrc
--p      recall a postponed message
--R      open mailbox in read-only mode
--s      specify a subject (enclose in quotes if it contains spaces)
--v      show version number and compile-time definitions
--x      simulate the mailx(1) compose mode
--y      show a menu containing the files specified by the mailboxes command
--z      exit immediately if there are no messages in the mailbox
--Z      open the first folder with new message,exit immediately if none
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>To read messages in a mailbox</P>
-<P><CODE>mutt</CODE> [ -nz ] [ -F <EM>muttrc</EM> ] [ -m <EM>type</EM> ] [ -f <EM>mailbox</EM> ] </P>
-<P>To compose a new message</P>
-<P><CODE>mutt</CODE> [ -n ] [ -F <EM>muttrc</EM> ] [ -a <EM>file</EM> ] [ -c <EM>address</EM> ] [ -i <EM>filename</EM> ] [ -s <EM>subject</EM> ] <EM>address</EM> [ <EM>address</EM> ... ] </P>
-<P>Mutt also supports a ``batch'' mode to send prepared messages.  Simply redirect
-input from the file you wish to send.  For example,</P>
-<P><CODE>mutt -s &quot;data set for run #2&quot; professor@bigschool.edu
-&lt; ~/run2.dat</CODE></P>
-<P>This command will send a message to ``professor@bigschool.edu'' with a subject
-of ``data set for run #2''.  In the body of the message will be the contents
-of the file ``~/run2.dat''.</P>
-
-<H2><A NAME="commands"></A> <A NAME="ss6.2">6.2</A> <A HREF="manual.html#toc6.2">Configuration Commands</A>
-</H2>
-
-<P>The following are the commands understood by mutt.</P>
-<P>
-<UL>
-<LI><CODE>
-<A HREF="manual-4.html#account-hook">account-hook</A></CODE> <EM>pattern</EM> <EM>command</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#alias">alias</A></CODE> <EM>key</EM> <EM>address</EM> [ , <EM>address</EM>, ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#alias">unalias</A></CODE> [ * | <EM>key</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-5.html#alternative_order">alternative_order</A></CODE> <EM>mimetype</EM> [ <EM>mimetype</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-4.html#append-hook">append-hook</A></CODE> <EM>regexp</EM> &quot;<EM>command</EM>&quot;</LI>
-<LI><CODE>
-<A HREF="manual-5.html#auto_view">auto_view</A></CODE> <EM>mimetype</EM> [ <EM>mimetype</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#bind">bind</A></CODE> <EM>map</EM> <EM>key</EM> <EM>function</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#charset-hook">charset-hook</A></CODE> <EM>alias</EM> <EM>charset</EM></LI>
-<LI><CODE>
-<A HREF="manual-4.html#close-hook">close-hook</A></CODE> <EM>regexp</EM> &quot;<EM>command</EM>&quot;</LI>
-<LI><CODE>
-<A HREF="manual-3.html#color">color</A></CODE> <EM>object</EM> <EM>foreground</EM> <EM>background</EM> [ <EM>regexp</EM> ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#color">uncolor</A></CODE> <EM>index</EM> <EM>pattern</EM> [ <EM>pattern</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#exec">exec</A></CODE> <EM>function</EM> [ <EM>function</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#fcc-hook">fcc-hook</A></CODE> <EM>pattern</EM> <EM>mailbox</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#fcc-save-hook">fcc-save-hook</A></CODE> <EM>pattern</EM> <EM>mailbox</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#folder-hook">folder-hook</A></CODE> <EM>pattern</EM> <EM>command</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#hdr_order">hdr_order</A></CODE> <EM>header</EM> [ <EM>header</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#hdr_order">unhdr_order</A></CODE> <EM>header</EM> [ <EM>header</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#charset-hook">iconv-hook</A></CODE> <EM>charset</EM> <EM>local-charset</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#ignore">ignore</A></CODE> <EM>pattern</EM> [ <EM>pattern</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#ignore">unignore</A></CODE> <EM>pattern</EM> [ <EM>pattern</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#lists">lists</A></CODE> <EM>address</EM> [ <EM>address</EM> ... ] </LI>
-<LI><CODE>
-<A HREF="manual-3.html#lists">unlists</A></CODE> <EM>address</EM> [ <EM>address</EM> ... ] </LI>
-<LI><CODE>
-<A HREF="manual-3.html#macro">macro</A></CODE> <EM>menu</EM> <EM>key</EM> <EM>sequence</EM> [ <EM>description</EM> ] </LI>
-<LI><CODE>
-<A HREF="manual-3.html#mailboxes">mailboxes</A></CODE> <EM>filename</EM> [ <EM>filename</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#mbox-hook">mbox-hook</A></CODE> <EM>pattern</EM> <EM>mailbox</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#message-hook">message-hook</A></CODE> <EM>pattern</EM> <EM>command</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#color">mono</A></CODE> <EM>object attribute</EM> [ <EM>regexp</EM> ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#color">unmono</A></CODE> <EM>index</EM> <EM>pattern</EM> [ <EM>pattern</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#my_hdr">my_hdr</A></CODE> <EM>string</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#my_hdr">unmy_hdr</A></CODE> <EM>field</EM> [ <EM>field</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-4.html#open-hook">open-hook</A></CODE> <EM>regexp</EM> &quot;<EM>command</EM>&quot;</LI>
-<LI><CODE>
-<A HREF="manual-3.html#pgp-hook">pgp-hook</A></CODE> <EM>pattern</EM> <EM>key-id</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#push">push</A></CODE> <EM>string</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#set">reset</A></CODE> <EM>variable</EM> [<EM>variable</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#save-hook">save-hook</A></CODE> <EM>regexp</EM> <EM>filename</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#score-command">score</A></CODE> <EM>pattern</EM> <EM>value</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#score-command">unscore</A></CODE> <EM>pattern</EM> [ <EM>pattern</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#send-hook">send-hook</A></CODE> <EM>regexp</EM> <EM>command</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#set">set</A></CODE> [no|inv]<EM>variable</EM>[=<EM>value</EM>] [ <EM>variable</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#set">unset</A></CODE> <EM>variable</EM> [<EM>variable</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#source">source</A></CODE> <EM>filename</EM></LI>
-<LI><CODE>
-<A HREF="manual-3.html#lists">subscribe</A></CODE> <EM>address</EM> [ <EM>address</EM> ... ] </LI>
-<LI><CODE>
-<A HREF="manual-3.html#lists">unsubscribe</A></CODE> <EM>address</EM> [ <EM>address</EM> ... ] </LI>
-<LI><CODE>
-<A HREF="manual-3.html#set">toggle</A></CODE> <EM>variable</EM> [<EM>variable</EM> ... ]</LI>
-<LI><CODE>
-<A HREF="manual-3.html#unhook">unhook</A></CODE> <EM>hook-type</EM></LI>
-</UL>
-</P>
-
-<H2><A NAME="variables"></A> <A NAME="ss6.3">6.3</A> <A HREF="manual.html#toc6.3">Configuration variables</A>
-</H2>
-
-
-
-
-<H3><A NAME="abort_nosubject"></A> abort_nosubject</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-yes</P>
-
-<P>If set to <EM>yes</EM>, when composing messages and no subject is given
-at the subject prompt, composition will be aborted.  If set to
-<EM>no</EM>, composing messages with no subject given at the subject
-prompt will never be aborted.</P>
-
-
-<H3><A NAME="abort_unmodified"></A> abort_unmodified</H3>
-
-<P>Type: quadoption<BR>
-Default: yes</P>
-
-<P>If set to <EM>yes</EM>, composition will automatically abort after
-editing the message body if no changes are made to the file (this
-check only happens after the <EM>first</EM> edit of the file).  When set
-to <EM>no</EM>, composition will never be aborted.</P>
-
-
-<H3><A NAME="alias_file"></A> alias_file</H3>
-
-<P>Type: path<BR>
-Default: &quot;~/.muttrc&quot;</P>
-
-<P>The default file in which to save aliases created by the 
-``
-<A HREF="manual-2.html#create-alias">create-alias</A>'' function.</P>
-<P><B>Note:</B> Mutt will not automatically source this file; you must
-explicitly use the ``
-<A HREF="manual-3.html#source">source</A>'' command for it to be executed.</P>
-
-
-<H3><A NAME="alias_format"></A> alias_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;%4n %2f %t %-10a   %r&quot;</P>
-
-<P>Specifies the format of the data displayed for the `alias' menu.  The
-following printf(3)-style sequences are available:</P>
-
-<P>
-<DL>
-<DT><B>%a </B><DD><P>alias name</P>
-<DT><B>%f </B><DD><P>flags - currently, a &quot;d&quot; for an alias marked for deletion</P>
-<DT><B>%n </B><DD><P>index number</P>
-<DT><B>%r </B><DD><P>address which alias expands to</P>
-<DT><B>%t </B><DD><P>character which indicates if the alias is tagged for inclusion</P>
-</DL>
-</P>
-
-
-<H3><A NAME="allow_8bit"></A> allow_8bit</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls whether 8-bit data is converted to 7-bit using either Quoted-
-Printable or Base64 encoding when sending mail.</P>
-
-
-<H3><A NAME="allow_ansi"></A> allow_ansi</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Controls whether ANSI color codes in messages (and color tags in 
-rich text messages) are to be interpreted.
-Messages containing these codes are rare, but if this option is set,
-their text will be colored accordingly. Note that this may override
-your color choices, and even present a security problem, since a
-message could include a line like &quot;[-- PGP output follows ...&quot; and
-give it the same color as your attachment color.</P>
-
-
-<H3><A NAME="alternates"></A> alternates</H3>
-
-<P>Type: regular expression<BR>
-Default: &quot;&quot;</P>
-
-<P>A regexp that allows you to specify <EM>alternate</EM> addresses where
-you receive mail.  This affects Mutt's idea about messages from you
-and addressed to you.</P>
-
-
-<H3><A NAME="arrow_cursor"></A> arrow_cursor</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, an arrow (``-&gt;'') will be used to indicate the current entry
-in menus instead of hiliting the whole line.  On slow network or modem
-links this will make response faster because there is less that has to
-be redrawn on the screen when moving to the next or previous entries
-in the menu.</P>
-
-
-<H3><A NAME="ascii_chars"></A> ascii_chars</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, Mutt will use plain ASCII characters when displaying thread
-and attachment trees, instead of the default <EM>ACS</EM> characters.</P>
-
-
-<H3><A NAME="askbcc"></A> askbcc</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, Mutt will prompt you for blind-carbon-copy (Bcc) recipients
-before editing an outgoing message.</P>
-
-
-<H3><A NAME="askcc"></A> askcc</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, Mutt will prompt you for carbon-copy (Cc) recipients before
-editing the body of an outgoing message.</P>
-
-
-<H3><A NAME="attach_format"></A> attach_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;%u%D%I %t%4n %T%.40d%&gt; [%.7m/%.10M, %.6e%?C?, %C?, %s] &quot;</P>
-
-<P>This variable describes the format of the `attachment' menu.  The
-following printf-style sequences are understood:</P>
-
-<P>
-<DL>
-<DT><B>%D  </B><DD><P>deleted flag</P>
-<DT><B>%d  </B><DD><P>description</P>
-<DT><B>%e  </B><DD><P>MIME content-transfer-encoding</P>
-<DT><B>%f  </B><DD><P>filename</P>
-<DT><B>%I  </B><DD><P>disposition (I=inline, A=attachment)</P>
-<DT><B>%m  </B><DD><P>major MIME type</P>
-<DT><B>%M  </B><DD><P>MIME subtype</P>
-<DT><B>%n  </B><DD><P>attachment number</P>
-<DT><B>%s  </B><DD><P>size</P>
-<DT><B>%t  </B><DD><P>tagged flag</P>
-<DT><B>%u  </B><DD><P>unlink (=to delete) flag</P>
-<DT><B>%&gt;X </B><DD><P>right justify the rest of the string and pad with character &quot;X&quot;</P>
-<DT><B>%|X </B><DD><P>pad to the end of the line with character &quot;X&quot;</P>
-</DL>
-</P>
-
-
-<H3><A NAME="attach_sep"></A> attach_sep</H3>
-
-<P>Type: string<BR>
-Default: &quot;\n&quot;</P>
-
-<P>The separator to add between attachments when operating (saving,
-printing, piping, etc) on a list of tagged attachments.</P>
-
-
-<H3><A NAME="attach_split"></A> attach_split</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If this variable is unset, when operating (saving, printing, piping,
-etc) on a list of tagged attachments, Mutt will concatenate the
-attachments and will operate on them as a single attachment. The
-``
-<A HREF="#attach_sep">$attach_sep</A>'' separator is added after each attachment. When set,
-Mutt will operate on the attachments one by one.</P>
-
-
-<H3><A NAME="attribution"></A> attribution</H3>
-
-<P>Type: string<BR>
-Default: &quot;On %d, %n wrote:&quot;</P>
-
-<P>This is the string that will precede a message which has been included
-in a reply.  For a full listing of defined printf()-like sequences see
-the section on ``
-<A HREF="#index_format">$index_format</A>''.</P>
-
-
-<H3><A NAME="autoedit"></A> autoedit</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set along with ``
-<A HREF="#edit_headers">$edit_headers</A>'', Mutt will skip the initial
-send-menu and allow you to immediately begin editing the body of your
-message.  The send-menu may still be accessed once you have finished
-editing the body of your message.</P>
-<P>Also see ``
-<A HREF="#fast_reply">$fast_reply</A>''.</P>
-
-
-<H3><A NAME="auto_tag"></A> auto_tag</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, functions in the <EM>index</EM> menu which affect a message
-will be applied to all tagged messages (if there are any).  When
-unset, you must first use the tag-prefix function (default: &quot;;&quot;) to
-make the next function apply to all tagged messages.</P>
-
-
-<H3><A NAME="beep"></A> beep</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When this variable is set, mutt will beep when an error occurs.</P>
-
-
-<H3><A NAME="beep_new"></A> beep_new</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When this variable is set, mutt will beep whenever it prints a message
-notifying you of new mail.  This is independent of the setting of the
-``
-<A HREF="#beep">$beep</A>'' variable.</P>
-
-
-<H3><A NAME="bounce_delivered"></A> bounce_delivered</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When this variable is set, mutt will include Delivered-To headers when
-bouncing messages.  Postfix users may wish to unset this variable.</P>
-
-
-<H3><A NAME="charset"></A> charset</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Character set your terminal uses to display and enter textual data.</P>
-
-
-<H3><A NAME="check_new"></A> check_new</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P><B>Note:</B> this option only affects <EM>maildir</EM> and <EM>MH</EM> style
-mailboxes.</P>
-<P>When <EM>set</EM>, Mutt will check for new mail delivered while the
-mailbox is open.  Especially with MH mailboxes, this operation can
-take quite some time since it involves scanning the directory and
-checking each file to see if it has already been looked at.  If
-<EM>check_new</EM> is <EM>unset</EM>, no check for new mail is performed
-while the mailbox is open.</P>
-
-
-<H3><A NAME="collapse_unread"></A> collapse_unread</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When <EM>unset</EM>, Mutt will not collapse a thread if it contains any
-unread messages.</P>
-
-
-<H3><A NAME="uncollapse_jump"></A> uncollapse_jump</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When <EM>set</EM>, Mutt will jump to the next unread message, if any,
-when the current thread is <EM>un</EM>collapsed.</P>
-
-
-<H3><A NAME="compose_format"></A> compose_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;-- Mutt: Compose  [Approx. msg size: %l   Atts: %a]%&gt;-&quot;</P>
-
-<P>Controls the format of the status line displayed in the \fCompose
-menu.  This string is similar to ``
-<A HREF="#status_format">$status_format</A>'', but has its own
-set of printf()-like sequences:</P>
-
-<P>
-<DL>
-<DT><B>%a </B><DD><P>total number of attachments </P>
-<DT><B>%h </B><DD><P>local hostname</P>
-<DT><B>%l </B><DD><P>approximate size (in bytes) of the current message</P>
-<DT><B>%v </B><DD><P>Mutt version string</P>
-</DL>
-</P>
-
-<P>See the text describing the ``
-<A HREF="#status_format">$status_format</A>'' option for more 
-information on how to set ``
-<A HREF="#compose_format">$compose_format</A>''.</P>
-
-
-<H3><A NAME="confirmappend"></A> confirmappend</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, Mutt will prompt for confirmation when appending messages to
-an existing mailbox.</P>
-
-
-<H3><A NAME="confirmcreate"></A> confirmcreate</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, Mutt will prompt for confirmation when saving messages to a
-mailbox which does not yet exist before creating it.</P>
-
-
-<H3><A NAME="connect_timeout"></A> connect_timeout</H3>
-
-<P>Type: number<BR>
-Default: 30</P>
-
-<P>Causes Mutt to timeout a network connection (for IMAP or POP) after this
-many seconds if the connection is not able to be established.  A negative
-value causes Mutt to wait indefinitely for the connection to succeed.</P>
-
-
-<H3><A NAME="copy"></A> copy</H3>
-
-<P>Type: quadoption<BR>
-Default: yes</P>
-
-<P>This variable controls whether or not copies of your outgoing messages
-will be saved for later references.  Also see ``
-<A HREF="#record">$record</A>'',
-``
-<A HREF="#save_name">$save_name</A>'', ``
-<A HREF="#force_name">$force_name</A>'' and ``
-<A HREF="manual-3.html#fcc-hook">fcc-hook</A>''.</P>
-
-
-<H3><A NAME="date_format"></A> date_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;!%a, %b %d, %Y at %I:%M:%S%p %Z&quot;</P>
-
-<P>This variable controls the format of the date printed by the ``%d''
-sequence in ``
-<A HREF="#index_format">$index_format</A>''.  This is passed to the <EM>strftime</EM>
-call to process the date. See the man page for <EM>strftime(3)</EM> for
-the proper syntax.</P>
-<P>Unless the first character in the string is a bang (``!''), the month
-and week day names are expanded according to the locale specified in
-the variable ``
-<A HREF="#locale">$locale</A>''. If the first character in the string is a
-bang, the bang is discarded, and the month and week day names in the
-rest of the string are expanded in the <EM>C</EM> locale (that is in US
-English).</P>
-
-
-<H3><A NAME="default_hook"></A> default_hook</H3>
-
-<P>Type: string<BR>
-Default: &quot;~f %s !~P | (~P ~C %s)&quot;</P>
-
-<P>This variable controls how send-hooks, message-hooks, save-hooks,
-and fcc-hooks will
-be interpreted if they are specified with only a simple regexp,
-instead of a matching pattern.  The hooks are expanded when they are
-declared, so a hook will be interpreted according to the value of this
-variable at the time the hook is declared.  The default value matches
-if the message is either from a user matching the regular expression
-given, or if it is from you (if the from address matches
-``
-<A HREF="#alternates">$alternates</A>'') and is to or cc'ed to a user matching the given
-regular expression.</P>
-
-
-<H3><A NAME="delete"></A> delete</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-yes</P>
-
-<P>Controls whether or not messages are really deleted when closing or
-synchronizing a mailbox.  If set to <EM>yes</EM>, messages marked for
-deleting will automatically be purged without prompting.  If set to
-<EM>no</EM>, messages marked for deletion will be kept in the mailbox.</P>
-
-
-<H3><A NAME="delete_untag"></A> delete_untag</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If this option is <EM>set</EM>, mutt will untag messages when marking them
-for deletion.  This applies when you either explicitly delete a message,
-or when you save it to another folder.</P>
-
-
-<H3><A NAME="digest_collapse"></A> digest_collapse</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If this option is <EM>set</EM>, mutt's revattach menu will not show the subparts of
-individual messages in a digest.  To see these subparts, press 'v' on that menu.</P>
-
-
-<H3><A NAME="display_filter"></A> display_filter</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>When set, specifies a command used to filter messages.  When a message
-is viewed it is passed as standard input to 
-<A HREF="#display_filter">$display_filter</A>, and the
-filtered message is read from the standard output.</P>
-
-
-<H3><A NAME="dotlock_program"></A> dotlock_program</H3>
-
-<P>Type: path<BR>
-Default: &quot;/usr/local/bin/mutt_dotlock&quot;</P>
-
-<P>Contains the path of the mutt_dotlock (8) binary to be used by
-mutt.</P>
-
-
-<H3><A NAME="dsn_notify"></A> dsn_notify</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P><B>Note:</B> you should not enable this unless you are using Sendmail
-8.8.x or greater.</P>
-<P>This variable sets the request for when notification is returned.  The
-string consists of a comma separated list (no spaces!) of one or more
-of the following: <EM>never</EM>, to never request notification,
-<EM>failure</EM>, to request notification on transmission failure,
-<EM>delay</EM>, to be notified of message delays, <EM>success</EM>, to be
-notified of successful transmission.</P>
-<P>Example: set dsn_notify=&quot;failure,delay&quot;</P>
-
-
-<H3><A NAME="dsn_return"></A> dsn_return</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P><B>Note:</B> you should not enable this unless you are using Sendmail
-8.8.x or greater.</P>
-<P>This variable controls how much of your message is returned in DSN
-messages.  It may be set to either <EM>hdrs</EM> to return just the
-message header, or <EM>full</EM> to return the full message.</P>
-<P>Example: set dsn_return=hdrs</P>
-
-
-<H3><A NAME="duplicate_threads"></A> duplicate_threads</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>This variable controls whether mutt, when sorting by threads, threads
-messages with the same message-id together.  If it is set, it will indicate
-that it thinks they are duplicates of each other with an equals sign
-in the thread diagram.</P>
-
-
-<H3><A NAME="edit_headers"></A> edit_headers</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>This option allows you to edit the header of your outgoing messages
-along with the body of your message.</P>
-
-
-<H3><A NAME="editor"></A> editor</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>This variable specifies which editor is used by mutt.
-It defaults to the value of the EDITOR or VISUAL environment
-variable, or to the string &quot;vi&quot;.</P>
-
-
-<H3><A NAME="encode_from"></A> encode_from</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When <EM>set</EM>, mutt will quoted-printable encode messages when
-they contain the string &quot;From &quot; in the beginning of a line.
-Useful to avoid the tampering certain mail delivery and transport
-agents tend to do with messages.</P>
-
-
-<H3><A NAME="envelope_from"></A> envelope_from</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When <EM>set</EM>, mutt will try to derive the message's <EM>envelope</EM>
-sender from the &quot;From:&quot; header.  Note that this information is passed 
-to sendmail command using the &quot;-f&quot; command line switch, so don't set this
-option if you are using that switch in 
-<A HREF="#sendmail">$sendmail</A> yourself,
-or if the sendmail on your machine doesn't support that command
-line switch.</P>
-
-
-<H3><A NAME="escape"></A> escape</H3>
-
-<P>Type: string<BR>
-Default: &quot;~&quot;</P>
-
-<P>Escape character to use for functions in the builtin editor.</P>
-
-
-<H3><A NAME="fast_reply"></A> fast_reply</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, the initial prompt for recipients and subject are skipped
-when replying to messages, and the initial prompt for subject is
-skipped when forwarding messages.</P>
-<P><B>Note:</B> this variable has no effect when the ``
-<A HREF="#autoedit">$autoedit</A>''
-variable is set.</P>
-
-
-<H3><A NAME="fcc_attach"></A> fcc_attach</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>This variable controls whether or not attachments on outgoing messages
-are saved along with the main body of your message.</P>
-
-
-<H3><A NAME="fcc_clear"></A> fcc_clear</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When this variable is <EM>set</EM>, FCCs will be stored unencrypted and
-unsigned, even when the actual message is encrypted and/or signed.</P>
-
-
-<H3><A NAME="folder"></A> folder</H3>
-
-<P>Type: path<BR>
-Default: &quot;~/Mail&quot;</P>
-
-<P>Specifies the default location of your mailboxes.  A `+' or `=' at the
-beginning of a pathname will be expanded to the value of this
-variable.  Note that if you change this variable from the default
-value you need to make sure that the assignment occurs <EM>before</EM>
-you use `+' or `=' for any other variables since expansion takes place
-during the `set' command.</P>
-
-
-<H3><A NAME="folder_format"></A> folder_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;%2C %t %N %F %2l %-8.8u %-8.8g %8s %d %f&quot;</P>
-
-<P>This variable allows you to customize the file browser display to your
-personal taste.  This string is similar to ``
-<A HREF="#index_format">$index_format</A>'', but has
-its own set of printf()-like sequences:</P>
-
-<P>
-<DL>
-<DT><B>%C  </B><DD><P>current file number</P>
-<DT><B>%d  </B><DD><P>date/time folder was last modified</P>
-<DT><B>%f  </B><DD><P>filename</P>
-<DT><B>%F  </B><DD><P>file permissions</P>
-<DT><B>%g  </B><DD><P>group name (or numeric gid, if missing)</P>
-<DT><B>%l  </B><DD><P>number of hard links</P>
-<DT><B>%N  </B><DD><P>N if folder has new mail, blank otherwise</P>
-<DT><B>%s  </B><DD><P>size in bytes</P>
-<DT><B>%t  </B><DD><P>* if the file is tagged, blank otherwise</P>
-<DT><B>%u  </B><DD><P>owner name (or numeric uid, if missing)</P>
-<DT><B>%&gt;X </B><DD><P>right justify the rest of the string and pad with character &quot;X&quot;</P>
-<DT><B>%|X </B><DD><P>pad to the end of the line with character &quot;X&quot;</P>
-</DL>
-</P>
-
-
-<H3><A NAME="followup_to"></A> followup_to</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls whether or not the <EM>Mail-Followup-To</EM> header field is
-generated when sending mail.  When <EM>set</EM>, Mutt will generate this
-field when you are replying to a known mailing list, specified with
-the ``subscribe'' or ``
-<A HREF="manual-3.html#lists">lists</A>'' commands.</P>
-<P>This field has two purposes.  First, preventing you from receiving
-duplicate copies of replies to messages which you send to mailing
-lists.  Second, ensuring that you do get a reply separately for any
-messages sent to known lists to which you are not subscribed.  The
-header will contain only the list's address for subscribed lists,
-and both the list address and your own email address for unsubscribed
-lists.  Without this header, a group reply to your message sent to a
-subscribed list will be sent to both the list and your address,
-resulting in two copies of the same email for you.</P>
-
-
-<H3><A NAME="force_name"></A> force_name</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>This variable is similar to ``
-<A HREF="#save_name">$save_name</A>'', except that Mutt will
-store a copy of your outgoing message by the username of the address
-you are sending to even if that mailbox does not exist.</P>
-<P>Also see the ``
-<A HREF="#record">$record</A>'' variable.</P>
-
-
-<H3><A NAME="forward_decode"></A> forward_decode</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls the decoding of complex MIME messages into text/plain when
-forwarding a message.  The message header is also RFC2047 decoded.
-This variable is only used, if ``
-<A HREF="#mime_forward">$mime_forward</A>'' is <EM>unset</EM>,
-otherwise ``
-<A HREF="#mime_forward_decode">$mime_forward_decode</A>'' is used instead.</P>
-
-
-<H3><A NAME="forward_format"></A> forward_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;[%a: %s]&quot;</P>
-
-<P>This variable controls the default subject when forwarding a message.
-It uses the same format sequences as the ``
-<A HREF="#index_format">$index_format</A>'' variable.</P>
-
-
-<H3><A NAME="forward_quote"></A> forward_quote</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When <EM>set</EM> forwarded messages included in the main body of the
-message (when ``
-<A HREF="#mime_forward">$mime_forward</A>'' is <EM>unset</EM>) will be quoted using
-``
-<A HREF="#indent_string">$indent_string</A>''.</P>
-
-
-<H3><A NAME="from"></A> from</H3>
-
-<P>Type: e-mail address<BR>
-Default: &quot;&quot;</P>
-
-<P>When set, this variable contains a default from address.  It
-can be overridden using my_hdr (including from send-hooks) and
-``
-<A HREF="#reverse_name">$reverse_name</A>''.</P>
-<P>Defaults to the EMAIL environment variable's content.</P>
-
-
-<H3><A NAME="gecos_mask"></A> gecos_mask</H3>
-
-<P>Type: regular expression<BR>
-Default: &quot;^[^,]*&quot;</P>
-
-<P>A regular expression used by mutt to parse the GECOS field of a password
-entry when expanding the alias.  By default the regular expression is set
-to &quot;^[^,]*&quot; which will return the string up to the first &quot;,&quot; encountered.
-If the GECOS field contains a string like &quot;lastname, firstname&quot; then you
-should set the gecos_mask=&quot;.*&quot;.</P>
-<P>This can be useful if you see the following behavior: you address a e-mail
-to user ID stevef whose full name is Steve Franklin.  If mutt expands 
-stevef to &quot;Franklin&quot; stevef@foo.bar then you should set the gecos_mask to
-a regular expression that will match the whole name so mutt will expand
-&quot;Franklin&quot; to &quot;Franklin, Steve&quot;.</P>
-
-
-<H3><A NAME="hdrs"></A> hdrs</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When unset, the header fields normally added by the ``
-<A HREF="manual-3.html#my_hdr">my_hdr</A>''
-command are not created.  This variable <EM>must</EM> be unset before
-composing a new message or replying in order to take effect.  If set,
-the user defined header fields are added to every new message.</P>
-
-
-<H3><A NAME="header"></A> header</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, this variable causes Mutt to include the header
-of the message you are replying to into the edit buffer.
-The ``
-<A HREF="#weed">$weed</A>'' setting applies.</P>
-
-
-<H3><A NAME="help"></A> help</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, help lines describing the bindings for the major functions
-provided by each menu are displayed on the first line of the screen.</P>
-<P><B>Note:</B> The binding will not be displayed correctly if the
-function is bound to a sequence rather than a single keystroke.  Also,
-the help line may not be updated if a binding is changed while Mutt is
-running.  Since this variable is primarily aimed at new users, neither
-of these should present a major problem.</P>
-
-
-<H3><A NAME="hidden_host"></A> hidden_host</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, mutt will skip the host name part of ``
-<A HREF="#hostname">$hostname</A>'' variable
-when adding the domain part to addresses.  This variable does not
-affect the generation of Message-IDs, and it will not lead to the 
-cut-off of first-level domains.</P>
-
-
-<H3><A NAME="hide_limited"></A> hide_limited</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, mutt will not show the presence of missing messages in the
-thread tree.</P>
-
-
-<H3><A NAME="hide_missing"></A> hide_missing</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, mutt will not show the presence of messages that are hidden
-by limiting, in the thread tree.</P>
-
-
-<H3><A NAME="hide_top_limited"></A> hide_top_limited</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, mutt will not show the presence of missing messages at the
-top of threads in the thread tree.  Note that when 
-<A HREF="#hide_limited">$hide_limited</A> is
-set, this option will have no effect.</P>
-
-
-<H3><A NAME="hide_top_missing"></A> hide_top_missing</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, mutt will not show the presence of messages that are hidden
-by limiting, at the top of threads in the thread tree.Note that when
-<A HREF="#hide_missing">$hide_missing</A> is set, this option will have no effect.</P>
-
-
-<H3><A NAME="history"></A> history</H3>
-
-<P>Type: number<BR>
-Default: 10</P>
-
-<P>This variable controls the size (in number of strings remembered) of
-the string history buffer. The buffer is cleared each time the
-variable is set.</P>
-
-
-<H3><A NAME="honor_followup_to"></A> honor_followup_to</H3>
-
-<P>Type: quadoption<BR>
-Default: yes</P>
-
-<P>This variable controls whether or not a Mail-Followup-To header is
-honored when group-replying to a message.</P>
-
-
-<H3><A NAME="hostname"></A> hostname</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Specifies the hostname to use after the ``@'' in local e-mail
-addresses.  This overrides the compile time definition obtained from
-/etc/resolv.conf.</P>
-
-
-<H3><A NAME="ignore_list_reply_to"></A> ignore_list_reply_to</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Affects the behaviour of the <EM>reply</EM> function when replying to
-messages from mailing lists.  When set, if the ``Reply-To:'' field is
-set to the same value as the ``To:'' field, Mutt assumes that the
-``Reply-To:'' field was set by the mailing list to automate responses
-to the list, and will ignore this field.  To direct a response to the
-mailing list when this option is set, use the <EM>list-reply</EM>
-function; <EM>group-reply</EM> will reply to both the sender and the
-list.</P>
-
-
-<H3><A NAME="imap_authenticators"></A> imap_authenticators</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This is a colon-delimited list of authentication methods mutt may
-attempt to use to log in to an IMAP server, in the order mutt should
-try them.  Authentication methods are either 'login' or the right
-side of an IMAP 'AUTH=xxx' capability string, eg 'digest-md5',
-'gssapi' or 'cram-md5'. This parameter is case-insensitive. If this
-parameter is unset (the default) mutt will try all available methods,
-in order from most-secure to least-secure.</P>
-<P>Example: set imap_authenticators=&quot;gssapi:cram-md5:login&quot;</P>
-<P><B>Note:</B> Mutt will only fall back to other authentication methods if
-the previous methods are unavailable. If a method is available but
-authentication fails, mutt will not connect to the IMAP server.</P>
-
-
-<H3><A NAME="imap_delim_chars"></A> imap_delim_chars</H3>
-
-<P>Type: string<BR>
-Default: &quot;/.&quot;</P>
-
-<P>This contains the list of characters which you would like to treat
-as folder separators for displaying IMAP paths. In particular it
-helps in using the '=' shortcut for your <EM>folder</EM> variable.</P>
-
-
-<H3><A NAME="imap_force_ssl"></A> imap_force_ssl</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If this variable is set, Mutt will always use SSL when
-connecting to IMAP servers.</P>
-
-
-<H3><A NAME="imap_home_namespace"></A> imap_home_namespace</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>You normally want to see your personal folders alongside
-your INBOX in the IMAP browser. If you see something else, you may set
-this variable to the IMAP path to your folders.</P>
-
-
-<H3><A NAME="imap_keepalive"></A> imap_keepalive</H3>
-
-<P>Type: number<BR>
-Default: 900</P>
-
-<P>This variable specifies the maximum amount of time in seconds that mutt
-will wait before polling open IMAP connections, to prevent the server
-from closing them before mutt has finished with them. The default is
-well within the RFC-specified minimum amount of time (30 minutes) before
-a server is allowed to do this, but in practice the RFC does get
-violated every now and then. Reduce this number if you find yourself
-getting disconnected from your IMAP server due to inactivity.</P>
-
-
-<H3><A NAME="imap_list_subscribed"></A> imap_list_subscribed</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>This variable configures whether IMAP folder browsing will look for
-only subscribed folders or all folders.  This can be toggled in the
-IMAP browser with the <EM>toggle-subscribed</EM> command.</P>
-
-
-<H3><A NAME="imap_pass"></A> imap_pass</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Specifies the password for your IMAP account.  If unset, Mutt will
-prompt you for your password when you invoke the fetch-mail function.
-<B>Warning</B>: you should only use this option when you are on a
-fairly secure machine, because the superuser can read your muttrc even
-if you are the only one who can read the file.</P>
-
-
-<H3><A NAME="imap_passive"></A> imap_passive</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, mutt will not open new IMAP connections to check for new
-mail.  Mutt will only check for new mail over existing IMAP
-connections.  This is useful if you don't want to be prompted to
-user/password pairs on mutt invocation, or if opening the connection
-is slow.</P>
-
-
-<H3><A NAME="imap_peek"></A> imap_peek</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set, mutt will avoid implicitly marking your mail as read whenever
-you fetch a message from the server. This is generally a good thing,
-but can make closing an IMAP folder somewhat slower. This option
-exists to appease spead freaks.</P>
-
-
-<H3><A NAME="imap_servernoise"></A> imap_servernoise</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, mutt will display warning messages from the IMAP
-server as error messages. Since these messages are often
-harmless, or generated due to configuration problems on the
-server which are out of the users' hands, you may wish to suppress
-them at some point.</P>
-
-
-<H3><A NAME="imap_user"></A> imap_user</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Your login name on the IMAP server.</P>
-<P>This variable defaults to your user name on the local machine.</P>
-
-
-<H3><A NAME="implicit_autoview"></A> implicit_autoview</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set to ``yes'', mutt will look for a mailcap entry with the
-copiousoutput flag set for <EM>every</EM> MIME attachment it doesn't have
-an internal viewer defined for.  If such an entry is found, mutt will
-use the viewer defined in that entry to convert the body part to text
-form.</P>
-
-
-<H3><A NAME="include"></A> include</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-yes</P>
-
-<P>Controls whether or not a copy of the message(s) you are replying to
-is included in your reply.</P>
-
-
-<H3><A NAME="indent_string"></A> indent_string</H3>
-
-<P>Type: string<BR>
-Default: &quot;&gt; &quot;</P>
-
-<P>Specifies the string to prepend to each line of text quoted in a
-message to which you are replying.  You are strongly encouraged not to
-change this value, as it tends to agitate the more fanatical netizens.</P>
-
-
-<H3><A NAME="index_format"></A> index_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;%4C %Z %{%b %d} %-15.15L (%4l) %s&quot;</P>
-
-<P>This variable allows you to customize the message index display to
-your personal taste.</P>
-<P>``Format strings'' are similar to the strings used in the ``C''
-function printf to format output (see the man page for more detail).
-The following sequences are defined in Mutt:</P>
-
-<P>
-<DL>
-<DT><B>%a </B><DD><P>address of the author</P>
-<DT><B>%b </B><DD><P>filename of the original message folder (think mailBox)</P>
-<DT><B>%B </B><DD><P>the list to which the letter was sent, or else the folder name (%b).</P>
-<DT><B>%c </B><DD><P>number of characters (bytes) in the message</P>
-<DT><B>%C </B><DD><P>current message number</P>
-<DT><B>%d </B><DD><P>date and time of the message in the format specified by
-``date_format'' converted to sender's time zone</P>
-<DT><B>%D </B><DD><P>date and time of the message in the format specified by
-``date_format'' converted to the local time zone</P>
-<DT><B>%e </B><DD><P>current message number in thread</P>
-<DT><B>%E </B><DD><P>number of messages in current thread</P>
-<DT><B>%f </B><DD><P>entire From: line (address + real name)</P>
-<DT><B>%F </B><DD><P>author name, or recipient name if the message is from you</P>
-<DT><B>%i </B><DD><P>message-id of the current message</P>
-<DT><B>%l </B><DD><P>number of lines in the message</P>
-<DT><B>%L </B><DD><P>If an address in the To or CC header field matches an address
-defined by the users ``lists'' command, this displays
-&quot;To &lt;list-name&gt;&quot;, otherwise the same as %F.</P>
-<DT><B>%m </B><DD><P>total number of message in the mailbox</P>
-<DT><B>%M </B><DD><P>number of hidden messages if the thread is collapsed.</P>
-<DT><B>%N </B><DD><P>message score</P>
-<DT><B>%n </B><DD><P>author's real name (or address if missing)</P>
-<DT><B>%O </B><DD><P>(_O_riginal save folder)  Where mutt would formerly have
-stashed the message: list name or recipient name if no list</P>
-<DT><B>%s </B><DD><P>subject of the message</P>
-<DT><B>%S </B><DD><P>status of the message (N/D/d/!/r/*)</P>
-<DT><B>%t </B><DD><P>`to:' field (recipients)</P>
-<DT><B>%T </B><DD><P>the appropriate character from the 
-<A HREF="#to_chars">$to_chars</A> string</P>
-<DT><B>%u </B><DD><P>user (login) name of the author</P>
-<DT><B>%v </B><DD><P>first name of the author, or the recipient if the message is from you</P>
-<DT><B>%y </B><DD><P>`x-label:' field, if present</P>
-<DT><B>%Y </B><DD><P>`x-label' field, if present, and (1) not at part of a thread tree,
-(2) at the top of a thread, or (3) `x-label' is different from
-preceding message's `x-label'.</P>
-<DT><B>%Z </B><DD><P>message status flags</P>
-<DT><B>%{fmt} </B><DD><P>the date and time of the message is converted to sender's
-time zone, and ``fmt'' is expanded by the library function
-``strftime''; a leading bang disables locales</P>
-<DT><B>%[fmt] </B><DD><P>the date and time of the message is converted to the local
-time zone, and ``fmt'' is expanded by the library function
-``strftime''; a leading bang disables locales</P>
-<DT><B>%(fmt) </B><DD><P>the local date and time when the message was received.
-``fmt'' is expanded by the library function ``strftime'';
-a leading bang disables locales</P>
-<DT><B>%&lt;fmt&gt; </B><DD><P>the current local time. ``fmt'' is expanded by the library
-function ``strftime''; a leading bang disables locales.</P>
-<DT><B>%&gt;X    </B><DD><P>right justify the rest of the string and pad with character &quot;X&quot;</P>
-<DT><B>%|X    </B><DD><P>pad to the end of the line with character &quot;X&quot;</P>
-</DL>
-</P>
-
-<P>See also: ``
-<A HREF="#to_chars">$to_chars</A>''.</P>
-
-
-<H3><A NAME="ispell"></A> ispell</H3>
-
-<P>Type: path<BR>
-Default: &quot;/usr/bin/ispell&quot;</P>
-
-<P>How to invoke ispell (GNU's spell-checking software).</P>
-
-
-<H3><A NAME="keep_flagged"></A> keep_flagged</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, read messages marked as flagged will not be moved
-from your spool mailbox to your ``
-<A HREF="#mbox">$mbox</A>'' mailbox, or as a result of
-a ``
-<A HREF="manual-3.html#mbox-hook">mbox-hook</A>'' command.</P>
-
-
-<H3><A NAME="locale"></A> locale</H3>
-
-<P>Type: string<BR>
-Default: &quot;C&quot;</P>
-
-<P>The locale used by <EM>strftime(3)</EM> to format dates. Legal values are
-the strings your system accepts for the locale variable <EM>LC_TIME</EM>.</P>
-
-
-<H3><A NAME="mail_check"></A> mail_check</H3>
-
-<P>Type: number<BR>
-Default: 5</P>
-
-<P>This variable configures how often (in seconds) mutt should look for
-new mail.</P>
-
-
-<H3><A NAME="mailcap_path"></A> mailcap_path</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This variable specifies which files to consult when attempting to
-display MIME bodies not directly supported by Mutt.</P>
-
-
-<H3><A NAME="mailcap_sanitize"></A> mailcap_sanitize</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set, mutt will restrict possible characters in mailcap % expandos
-to a well-defined set of safe characters.  This is the safe setting,
-but we are not sure it doesn't break some more advanced MIME stuff.</P>
-<P><B>DON'T CHANGE THIS SETTING UNLESS YOU ARE REALLY SURE WHAT YOU ARE
-DOING!</B></P>
-
-
-<H3><A NAME="maildir_trash"></A> maildir_trash</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, messages marked as deleted will be saved with the maildir
-(T)rashed flag instead of unlinked.  <B>NOTE:</B> this only applies
-to maildir-style mailboxes.  Setting it will have no effect on other
-mailbox types.</P>
-
-
-<H3><A NAME="mark_old"></A> mark_old</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls whether or not Mutt makes the distinction between <EM>new</EM>
-messages and <EM>old</EM> <B>unread</B> messages.  By default, Mutt will
-mark new messages as old if you exit a mailbox without reading them.
-The next time you start Mutt, the messages will show up with an &quot;O&quot;
-next to them in the index menu, indicating that they are old.  In
-order to make Mutt treat all unread messages as new only, you can
-unset this variable.</P>
-
-
-<H3><A NAME="markers"></A> markers</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls the display of wrapped lines in the internal pager. If set, a
-``+'' marker is displayed at the beginning of wrapped lines. Also see
-the ``
-<A HREF="#smart_wrap">$smart_wrap</A>'' variable.</P>
-
-
-<H3><A NAME="mask"></A> mask</H3>
-
-<P>Type: regular expression<BR>
-Default: &quot;!^\.[^.]&quot;</P>
-
-<P>A regular expression used in the file browser, optionally preceded by
-the <EM>not</EM> operator ``!''.  Only files whose names match this mask
-will be shown. The match is always case-sensitive.</P>
-
-
-<H3><A NAME="mbox"></A> mbox</H3>
-
-<P>Type: path<BR>
-Default: &quot;~/mbox&quot;</P>
-
-<P>This specifies the folder into which read mail in your ``
-<A HREF="#spoolfile">$spoolfile</A>''
-folder will be appended.</P>
-
-
-<H3><A NAME="mbox_type"></A> mbox_type</H3>
-
-<P>Type: folder magic<BR>
-Default: mbox</P>
-
-<P>The default mailbox type used when creating new folders. May be any of
-mbox, MMDF, MH and Maildir.</P>
-
-
-<H3><A NAME="metoo"></A> metoo</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If unset, Mutt will remove your address from the list of recipients
-when replying to a message.</P>
-
-
-<H3><A NAME="menu_scroll"></A> menu_scroll</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When <EM>set</EM>, menus will be scrolled up or down one line when you
-attempt to move across a screen boundary.  If <EM>unset</EM>, the screen
-is cleared and the next or previous page of the menu is displayed
-(useful for slow links to avoid many redraws).</P>
-
-
-<H3><A NAME="meta_key"></A> meta_key</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, forces Mutt to interpret keystrokes with the high bit (bit 8)
-set as if the user had pressed the ESC key and whatever key remains
-after having the high bit removed.  For example, if the key pressed
-has an ASCII value of 0xf4, then this is treated as if the user had
-pressed ESC then ``x''.  This is because the result of removing the
-high bit from ``0xf4'' is ``0x74'', which is the ASCII character
-``x''.</P>
-
-
-<H3><A NAME="mh_purge"></A> mh_purge</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When unset, mutt will mimic mh's behaviour and rename deleted messages
-to <EM>,&lt;old file name&gt;</EM> in mh folders instead of really deleting
-them.  If the variable is set, the message files will simply be
-deleted.</P>
-
-
-<H3><A NAME="mh_seq_flagged"></A> mh_seq_flagged</H3>
-
-<P>Type: string<BR>
-Default: &quot;flagged&quot;</P>
-
-<P>The name of the MH sequence used for flagged messages.</P>
-
-
-<H3><A NAME="mh_seq_replied"></A> mh_seq_replied</H3>
-
-<P>Type: string<BR>
-Default: &quot;replied&quot;</P>
-
-<P>The name of the MH sequence used to tag replied messages.</P>
-
-
-<H3><A NAME="mh_seq_unseen"></A> mh_seq_unseen</H3>
-
-<P>Type: string<BR>
-Default: &quot;unseen&quot;</P>
-
-<P>The name of the MH sequence used for unseen messages.</P>
-
-
-<H3><A NAME="mime_forward"></A> mime_forward</H3>
-
-<P>Type: quadoption<BR>
-Default: no</P>
-
-<P>When set, the message you are forwarding will be attached as a
-separate MIME part instead of included in the main body of the
-message.  This is useful for forwarding MIME messages so the receiver
-can properly view the message as it was delivered to you. If you like
-to switch between MIME and not MIME from mail to mail, set this
-variable to ask-no or ask-yes.</P>
-<P>Also see ``
-<A HREF="#forward_decode">$forward_decode</A>'' and ``
-<A HREF="#mime_forward_decode">$mime_forward_decode</A>''.</P>
-
-
-<H3><A NAME="mime_forward_decode"></A> mime_forward_decode</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Controls the decoding of complex MIME messages into text/plain when
-forwarding a message while ``
-<A HREF="#mime_forward">$mime_forward</A>'' is <EM>set</EM>. Otherwise
-``
-<A HREF="#forward_decode">$forward_decode</A>'' is used instead.</P>
-
-
-<H3><A NAME="mime_forward_rest"></A> mime_forward_rest</H3>
-
-<P>Type: quadoption<BR>
-Default: yes</P>
-
-<P>When forwarding multiple attachments of a MIME message from the recvattach
-menu, attachments which cannot be decoded in a reasonable manner will
-be attached to the newly composed message if this option is set.</P>
-
-
-<H3><A NAME="mix_entry_format"></A> mix_entry_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;%4n %c %-16s %a&quot;</P>
-
-<P>This variable describes the format of a remailer line on the mixmaster
-chain selection screen.  The following printf-like sequences are 
-supported:</P>
-
-<P>
-<DL>
-<DT><B>%n </B><DD><P>The running number on the menu.</P>
-<DT><B>%c </B><DD><P>Remailer capabilities.</P>
-<DT><B>%s </B><DD><P>The remailer's short name.</P>
-<DT><B>%a </B><DD><P>The remailer's e-mail address.</P>
-</DL>
-</P>
-
-
-<H3><A NAME="mixmaster"></A> mixmaster</H3>
-
-<P>Type: path<BR>
-Default: &quot;mixmaster&quot;</P>
-
-<P>This variable contains the path to the Mixmaster binary on your
-system.  It is used with various sets of parameters to gather the
-list of known remailers, and to finally send a message through the
-mixmaster chain.</P>
-
-
-<H3><A NAME="move"></A> move</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-no</P>
-
-<P>Controls whether you will be asked to confirm moving read messages
-from your spool mailbox to your ``
-<A HREF="#mbox">$mbox</A>'' mailbox, or as a result of
-a ``
-<A HREF="manual-3.html#mbox-hook">mbox-hook</A>'' command.</P>
-
-
-<H3><A NAME="message_format"></A> message_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;%s&quot;</P>
-
-<P>This is the string displayed in the ``attachment'' menu for
-attachments of type message/rfc822.  For a full listing of defined
-escape sequences see the section on ``
-<A HREF="#index_format">$index_format</A>''.</P>
-
-
-<H3><A NAME="pager"></A> pager</H3>
-
-<P>Type: path<BR>
-Default: &quot;builtin&quot;</P>
-
-<P>This variable specifies which pager you would like to use to view
-messages.  builtin means to use the builtin pager, otherwise this
-variable should specify the pathname of the external pager you would
-like to use.</P>
-<P>Using an external pager may have some disadvantages: Additional
-keystrokes are necessary because you can't call mutt functions
-directly from the pager, and screen resizes cause lines longer than
-the screen width to be badly formatted in the help menu.</P>
-
-
-<H3><A NAME="pager_context"></A> pager_context</H3>
-
-<P>Type: number<BR>
-Default: 0</P>
-
-<P>This variable controls the number of lines of context that are given
-when displaying the next or previous page in the internal pager.  By
-default, Mutt will display the line after the last one on the screen
-at the top of the next page (0 lines of context).</P>
-
-
-<H3><A NAME="pager_format"></A> pager_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;-%Z- %C/%m: %-20.20n   %s&quot;</P>
-
-<P>This variable controls the format of the one-line message ``status''
-displayed before each message in either the internal or an external
-pager.  The valid sequences are listed in the ``
-<A HREF="#index_format">$index_format</A>''
-section.</P>
-
-
-<H3><A NAME="pager_index_lines"></A> pager_index_lines</H3>
-
-<P>Type: number<BR>
-Default: 0</P>
-
-<P>Determines the number of lines of a mini-index which is shown when in
-the pager.  The current message, unless near the top or bottom of the
-folder, will be roughly one third of the way down this mini-index,
-giving the reader the context of a few messages before and after the
-message.  This is useful, for example, to determine how many messages
-remain to be read in the current thread.  One of the lines is reserved
-for the status bar from the index, so a <EM>pager_index_lines</EM> of 6
-will only show 5 lines of the actual index.  A value of 0 results in
-no index being shown.  If the number of messages in the current folder
-is less than <EM>pager_index_lines</EM>, then the index will only use as
-many lines as it needs.</P>
-
-
-<H3><A NAME="pager_stop"></A> pager_stop</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, the internal-pager will <B>not</B> move to the next message
-when you are at the end of a message and invoke the <EM>next-page</EM>
-function.</P>
-
-
-<H3><A NAME="pgp_autosign"></A> pgp_autosign</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Setting this variable will cause Mutt to always attempt to PGP/MIME
-sign outgoing messages.  This can be overridden by use of the <EM>pgp-
-menu</EM>, when signing is not required or encryption is requested as
-well.</P>
-
-
-<H3><A NAME="pgp_autoencrypt"></A> pgp_autoencrypt</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Setting this variable will cause Mutt to always attempt to PGP/MIME
-encrypt outgoing messages.  This is probably only useful in connection
-to the <EM>send-hook</EM> command.  It can be overridden by use of the
-<EM>pgp-menu</EM>, when encryption is not required or signing is
-requested as well.</P>
-
-
-<H3><A NAME="pgp_ignore_subkeys"></A> pgp_ignore_subkeys</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Setting this variable will cause Mutt to ignore OpenPGP subkeys. Instead,
-the principal key will inherit the subkeys' capabilities.  Unset this
-if you want to play interesting key selection games.</P>
-
-
-<H3><A NAME="pgp_entry_format"></A> pgp_entry_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;%4n %t%f %4l/0x%k %-4a %2c %u&quot;</P>
-
-<P>This variable allows you to customize the PGP key selection menu to
-your personal taste. This string is similar to ``
-<A HREF="#index_format">$index_format</A>'', but
-has its own set of printf()-like sequences:</P>
-
-<P>
-<DL>
-<DT><B>%n     </B><DD><P>number</P>
-<DT><B>%k     </B><DD><P>key id</P>
-<DT><B>%u     </B><DD><P>user id</P>
-<DT><B>%a     </B><DD><P>algorithm</P>
-<DT><B>%l     </B><DD><P>key length</P>
-<DT><B>%f     </B><DD><P>flags</P>
-<DT><B>%c     </B><DD><P>capabilities</P>
-<DT><B>%t     </B><DD><P>trust/validity of the key-uid association</P>
-<DT><B>%[&lt;s&gt;] </B><DD><P>date of the key where &lt;s&gt; is an strftime(3) expression</P>
-</DL>
-</P>
-
-
-<H3><A NAME="pgp_good_sign"></A> pgp_good_sign</H3>
-
-<P>Type: regular expression<BR>
-Default: &quot;&quot;</P>
-
-<P>If you assign a text to this variable, then a PGP signature is only
-considered verified if the output from 
-<A HREF="#pgp_verify_command">$pgp_verify_command</A> contains
-the text. Use this variable if the exit code from the command is 0
-even for bad signatures.</P>
-
-
-<H3><A NAME="pgp_long_ids"></A> pgp_long_ids</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, use 64 bit PGP key IDs. Unset uses the normal 32 bit Key IDs.</P>
-
-
-<H3><A NAME="pgp_replyencrypt"></A> pgp_replyencrypt</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set, automatically PGP encrypt replies to messages which are
-encrypted.</P>
-
-
-<H3><A NAME="pgp_replysign"></A> pgp_replysign</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, automatically PGP sign replies to messages which are signed.</P>
-<P><B>Note:</B> this does not work on messages that are encrypted
-<B>and</B> signed!</P>
-
-
-<H3><A NAME="pgp_replysignencrypted"></A> pgp_replysignencrypted</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, automatically PGP sign replies to messages which are
-encrypted. This makes sense in combination with
-``
-<A HREF="#pgp_replyencrypt">$pgp_replyencrypt</A>'', because it allows you to sign all messages
-which are automatically encrypted.  This works around the problem
-noted in ``
-<A HREF="#pgp_replysign">$pgp_replysign</A>'', that mutt is not able to find out
-whether an encrypted message is also signed.</P>
-
-
-<H3><A NAME="pgp_retainable_sigs"></A> pgp_retainable_sigs</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, signed and encrypted messages will consist of nested
-multipart/signed and multipart/encrypted body parts.</P>
-<P>This is useful for applications like encrypted and signed mailing
-lists, where the outer layer (multipart/encrypted) can be easily
-removed, while the inner multipart/signed part is retained.</P>
-
-
-<H3><A NAME="pgp_show_unusable"></A> pgp_show_unusable</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set, mutt will display non-usable keys on the PGP key selection
-menu.  This includes keys which have been revoked, have expired, or
-have been marked as ``disabled'' by the user.</P>
-
-
-<H3><A NAME="pgp_sign_as"></A> pgp_sign_as</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>If you have more than one key pair, this option allows you to specify
-which of your private keys to use.  It is recommended that you use the
-keyid form to specify your key (e.g., ``0x00112233'').</P>
-
-
-<H3><A NAME="pgp_strict_enc"></A> pgp_strict_enc</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set, Mutt will automatically encode PGP/MIME signed messages as
-<EM>quoted-printable</EM>.  Please note that unsetting this variable may
-lead to problems with non-verifyable PGP signatures, so only change
-this if you know what you are doing.</P>
-
-
-<H3><A NAME="pgp_timeout"></A> pgp_timeout</H3>
-
-<P>Type: number<BR>
-Default: 300</P>
-
-<P>The number of seconds after which a cached passphrase will expire if
-not used.</P>
-
-
-<H3><A NAME="pgp_verify_sig"></A> pgp_verify_sig</H3>
-
-<P>Type: quadoption<BR>
-Default: yes</P>
-
-<P>If ``yes'', always attempt to verify PGP/MIME signatures.  If ``ask-yes''
-or ``ask-no'',
-ask whether or not to verify the signature.  If ``no'', never attempt
-to verify PGP/MIME signatures.</P>
-
-
-<H3><A NAME="pgp_sort_keys"></A> pgp_sort_keys</H3>
-
-<P>Type: sort order<BR>
-Default: address</P>
-
-<P>Specifies how the entries in the `pgp keys' menu are sorted. The
-following are legal values:</P>
-
-<P>
-<DL>
-<DT><B>address </B><DD><P>sort alphabetically by user id</P>
-<DT><B>keyid   </B><DD><P>sort alphabetically by key id</P>
-<DT><B>date    </B><DD><P>sort by key creation date</P>
-<DT><B>trust   </B><DD><P>sort by the trust of the key</P>
-</DL>
-</P>
-
-<P>If you prefer reverse order of the above values, prefix it with
-`reverse-'.</P>
-
-
-<H3><A NAME="pgp_create_traditional"></A> pgp_create_traditional</H3>
-
-<P>Type: quadoption<BR>
-Default: no</P>
-
-<P>This option controls whether Mutt generates old-style PGP encrypted
-or signed messages under certain circumstances.</P>
-<P>Note that PGP/MIME will be used automatically for messages which have
-a character set different from us-ascii, or which consist of more than
-a single MIME part.</P>
-<P>Also note that using the old-style PGP message format is <B>strongly</B>
-<B>deprecated</B>.</P>
-
-
-<H3><A NAME="pgp_decode_command"></A> pgp_decode_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This format strings specifies a command which is used to decode 
-application/pgp attachments.</P>
-<P>The PGP command formats have their own set of printf-like sequences:</P>
-
-<P>
-<DL>
-<DT><B>%p </B><DD><P>Expands to PGPPASSFD=0 when a pass phrase is needed, to an empty
-string otherwise. Note: This may be used with a %? construct.</P>
-<DT><B>%f </B><DD><P>Expands to the name of a file containing a message.</P>
-<DT><B>%s </B><DD><P>Expands to the name of a file containing the signature part
-of a multipart/signed attachment when verifying it.</P>
-<DT><B>%a </B><DD><P>The value of 
-<A HREF="#pgp_sign_as">$pgp_sign_as</A>.</P>
-<DT><B>%r </B><DD><P>One or more key IDs.</P>
-</DL>
-</P>
-
-<P>For examples on how to configure these formats for the various versions
-of PGP which are floating around, see the pgp*.rc and gpg.rc files in
-the samples/ subdirectory which has been installed on your system
-alongside the documentation.</P>
-
-
-<H3><A NAME="pgp_getkeys_command"></A> pgp_getkeys_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is invoked whenever mutt will need public key information.
-%r is the only printf-like sequence used with this format.</P>
-
-
-<H3><A NAME="pgp_verify_command"></A> pgp_verify_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to verify PGP/MIME signatures.</P>
-
-
-<H3><A NAME="pgp_decrypt_command"></A> pgp_decrypt_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to decrypt a PGP/MIME encrypted message.</P>
-
-
-<H3><A NAME="pgp_clearsign_command"></A> pgp_clearsign_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This format is used to create a &quot;clearsigned&quot; old-style PGP attachment.
-Note that the use of this format is <B>strongly</B> <B>deprecated</B>.</P>
-
-
-<H3><A NAME="pgp_sign_command"></A> pgp_sign_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to create the detached PGP signature for a 
-multipart/signed PGP/MIME body part.</P>
-
-
-<H3><A NAME="pgp_encrypt_sign_command"></A> pgp_encrypt_sign_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to combinedly sign/encrypt a body part.</P>
-
-
-<H3><A NAME="pgp_encrypt_only_command"></A> pgp_encrypt_only_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to encrypt a body part without signing it.</P>
-
-
-<H3><A NAME="pgp_import_command"></A> pgp_import_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to import a key from a message into 
-the user's public key ring.</P>
-
-
-<H3><A NAME="pgp_export_command"></A> pgp_export_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to export a public key from the user's
-key ring.</P>
-
-
-<H3><A NAME="pgp_verify_key_command"></A> pgp_verify_key_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to verify key information from the key selection
-menu.</P>
-
-
-<H3><A NAME="pgp_list_secring_command"></A> pgp_list_secring_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to list the secret key ring's contents.  The
-output format must be analogous to the one used by 
-gpg --list-keys --with-colons.</P>
-<P>This format is also generated by the pgpring utility which comes 
-with mutt.</P>
-
-
-<H3><A NAME="pgp_list_pubring_command"></A> pgp_list_pubring_command</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This command is used to list the public key ring's contents.  The
-output format must be analogous to the one used by 
-gpg --list-keys --with-colons.</P>
-<P>This format is also generated by the pgpring utility which comes 
-with mutt.</P>
-
-
-<H3><A NAME="forward_decrypt"></A> forward_decrypt</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls the handling of encrypted messages when forwarding a message.
-When set, the outer layer of encryption is stripped off.  This
-variable is only used if ``
-<A HREF="#mime_forward">$mime_forward</A>'' is <EM>set</EM> and
-``
-<A HREF="#mime_forward_decode">$mime_forward_decode</A>'' is <EM>unset</EM>.</P>
-
-
-<H3><A NAME="ssl_starttls"></A> ssl_starttls</H3>
-
-<P>Type: quadoption<BR>
-Default: yes</P>
-
-<P>If set (the default), mutt will attempt to use STARTTLS on servers
-advertising the capability. When unset, mutt will not attempt to
-use STARTTLS regardless of the server's capabilities.</P>
-
-
-<H3><A NAME="certificate_file"></A> certificate_file</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>This variable specifies the file where the certificates you trust
-are saved. When an unknown certificate is encountered, you are asked
-if you accept it or not. If you accept it, the certificate can also 
-be saved in this file and further connections are automatically 
-accepted.</P>
-<P>You can also manually add CA certificates in this file. Any server
-certificate that is signed with one of these CA certificates are 
-also automatically accepted.</P>
-<P>Example: set certificate_file=~/.mutt/certificates</P>
-
-
-<H3><A NAME="ssl_usesystemcerts"></A> ssl_usesystemcerts</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set to <EM>yes</EM>, mutt will use CA certificates in the
-system-wide certificate store when checking if server certificate 
-is signed by a trusted CA.</P>
-
-
-<H3><A NAME="entropy_file"></A> entropy_file</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>The file which includes random data that is used to initalize SSL
-library functions.</P>
-
-
-<H3><A NAME="ssl_use_sslv2"></A> ssl_use_sslv2</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>This variables specifies whether to attempt to use SSLv2 in the
-SSL authentication process.</P>
-
-
-<H3><A NAME="ssl_use_sslv3"></A> ssl_use_sslv3</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>This variables specifies whether to attempt to use SSLv3 in the
-SSL authentication process.</P>
-
-
-<H3><A NAME="ssl_use_tlsv1"></A> ssl_use_tlsv1</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>This variables specifies whether to attempt to use TLSv1 in the
-SSL authentication process.</P>
-
-
-<H3><A NAME="pipe_split"></A> pipe_split</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Used in connection with the <EM>pipe-message</EM> command and the ``tag-
-prefix'' operator.  If this variable is unset, when piping a list of
-tagged messages Mutt will concatenate the messages and will pipe them
-as a single folder.  When set, Mutt will pipe the messages one by one.
-In both cases the messages are piped in the current sorted order,
-and the ``
-<A HREF="#pipe_sep">$pipe_sep</A>'' separator is added after each message.</P>
-
-
-<H3><A NAME="pipe_decode"></A> pipe_decode</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Used in connection with the <EM>pipe-message</EM> command.  When unset,
-Mutt will pipe the messages without any preprocessing. When set, Mutt
-will weed headers and will attempt to PGP/MIME decode the messages
-first.</P>
-
-
-<H3><A NAME="pipe_sep"></A> pipe_sep</H3>
-
-<P>Type: string<BR>
-Default: &quot;\n&quot;</P>
-
-<P>The separator to add between messages when piping a list of tagged
-messages to an external Unix command.</P>
-
-
-<H3><A NAME="pop_authenticators"></A> pop_authenticators</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This is a colon-delimited list of authentication methods mutt may
-attempt to use to log in to an POP server, in the order mutt should
-try them.  Authentication methods are either 'user', 'apop' or any
-SASL mechanism, eg 'digest-md5', 'gssapi' or 'cram-md5'.
-This parameter is case-insensitive. If this parameter is unset
-(the default) mutt will try all available methods, in order from
-most-secure to least-secure.</P>
-<P>Example: set pop_authenticators=&quot;digest-md5:apop:user&quot;</P>
-
-
-<H3><A NAME="pop_auth_try_all"></A> pop_auth_try_all</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set, Mutt will try all available methods. When unset, Mutt will
-only fall back to other authentication methods if the previous
-methods are unavailable. If a method is available but authentication
-fails, Mutt will not connect to the POP server.</P>
-
-
-<H3><A NAME="pop_checkinterval"></A> pop_checkinterval</H3>
-
-<P>Type: number<BR>
-Default: 60</P>
-
-<P>This variable configures how often (in seconds) POP should look for
-new mail.</P>
-
-
-<H3><A NAME="pop_delete"></A> pop_delete</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-no</P>
-
-<P>If set, Mutt will delete successfully downloaded messages from the POP
-server when using the fetch-mail function.  When unset, Mutt will
-download messages but also leave them on the POP server.</P>
-
-
-<H3><A NAME="pop_host"></A> pop_host</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>The name of your POP server for the fetch-mail function.  You
-can also specify an alternative port, username and password, ie:</P>
-<P>[pop[s]://][username[:password]@]popserver[:port]</P>
-
-
-<H3><A NAME="pop_last"></A> pop_last</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If this variable is set, mutt will try to use the &quot;LAST&quot; POP command
-for retrieving only unread messages from the POP server when using
-the fetch-mail function.</P>
-
-
-<H3><A NAME="pop_reconnect"></A> pop_reconnect</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-yes</P>
-
-<P>Controls whether or not Mutt will try to reconnect to POP server when
-connection lost.</P>
-
-
-<H3><A NAME="pop_user"></A> pop_user</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Your login name on the POP server.</P>
-<P>This variable defaults to your user name on the local machine.</P>
-
-
-<H3><A NAME="pop_pass"></A> pop_pass</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Specifies the password for your POP account.  If unset, Mutt will
-prompt you for your password when you open POP mailbox.
-<B>Warning</B>: you should only use this option when you are on a
-fairly secure machine, because the superuser can read your muttrc
-even if you are the only one who can read the file.</P>
-
-
-<H3><A NAME="post_indent_string"></A> post_indent_string</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Similar to the ``
-<A HREF="#attribution">$attribution</A>'' variable, Mutt will append this
-string after the inclusion of a message which is being replied to.</P>
-
-
-<H3><A NAME="postpone"></A> postpone</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-yes</P>
-
-<P>Controls whether or not messages are saved in the ``
-<A HREF="#postponed">$postponed</A>''
-mailbox when you elect not to send immediately.</P>
-
-
-<H3><A NAME="postponed"></A> postponed</H3>
-
-<P>Type: path<BR>
-Default: &quot;~/postponed&quot;</P>
-
-<P>Mutt allows you to indefinitely ``
-<A HREF="#postpone">postpone</A> sending a message'' which
-you are editing.  When you choose to postpone a message, Mutt saves it
-in the mailbox specified by this variable.  Also see the ``
-<A HREF="#postpone">$postpone</A>''
-variable.</P>
-
-
-<H3><A NAME="preconnect"></A> preconnect</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>If set, a shell command to be executed if mutt fails to establish
-a connection to the server. This is useful for setting up secure
-connections, e.g. with ssh(1). If the command returns a  nonzero
-status, mutt gives up opening the server. Example:</P>
-<P>preconnect=&quot;ssh -f -q -L 1234:mailhost.net:143 mailhost.net
-sleep 20 &lt; /dev/null &gt; /dev/null&quot;</P>
-<P>Mailbox 'foo' on mailhost.net can now be reached
-as '{localhost:1234}foo'.</P>
-<P>NOTE: For this example to work, you must be able to log in to the
-remote machine without having to enter a password.</P>
-
-
-<H3><A NAME="print"></A> print</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-no</P>
-
-<P>Controls whether or not Mutt asks for confirmation before printing.
-This is useful for people (like me) who accidentally hit ``p'' often.</P>
-
-
-<H3><A NAME="print_command"></A> print_command</H3>
-
-<P>Type: path<BR>
-Default: &quot;lpr&quot;</P>
-
-<P>This specifies the command pipe that should be used to print messages.</P>
-
-
-<H3><A NAME="print_decode"></A> print_decode</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Used in connection with the print-message command.  If this
-option is set, the message is decoded before it is passed to the
-external command specified by 
-<A HREF="#print_command">$print_command</A>.  If this option
-is unset, no processing will be applied to the message when
-printing it.  The latter setting may be useful if you are using
-some advanced printer filter which is able to properly format
-e-mail messages for printing.</P>
-
-
-<H3><A NAME="print_split"></A> print_split</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Used in connection with the print-message command.  If this option
-is set, the command sepcified by 
-<A HREF="#print_command">$print_command</A> is executed once for
-each message which is to be printed.  If this option is unset, 
-the command specified by 
-<A HREF="#print_command">$print_command</A> is executed only once, and
-all the messages are concatenated, with a form feed as the message
-separator.</P>
-<P>Those who use the <B>enscript</B>(1) program's mail-printing mode will
-most likely want to set this option.</P>
-
-
-<H3><A NAME="prompt_after"></A> prompt_after</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If you use an <EM>external</EM> ``
-<A HREF="#pager">$pager</A>'', setting this variable will
-cause Mutt to prompt you for a command when the pager exits rather
-than returning to the index menu.  If unset, Mutt will return to the
-index menu when the external pager exits.</P>
-
-
-<H3><A NAME="query_command"></A> query_command</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>This specifies the command that mutt will use to make external address
-queries.  The string should contain a %s, which will be substituted
-with the query string the user types.  See ``
-<A HREF="manual-4.html#query">query</A>'' for more
-information.</P>
-
-
-<H3><A NAME="quit"></A> quit</H3>
-
-<P>Type: quadoption<BR>
-Default: yes</P>
-
-<P>This variable controls whether ``quit'' and ``exit'' actually quit
-from mutt.  If it set to yes, they do quit, if it is set to no, they
-have no effect, and if it is set to ask-yes or ask-no, you are
-prompted for confirmation when you try to quit.</P>
-
-
-<H3><A NAME="quote_regexp"></A> quote_regexp</H3>
-
-<P>Type: regular expression<BR>
-Default: &quot;^([ \t]*[|&gt;:}#])+&quot;</P>
-
-<P>A regular expression used in the internal-pager to determine quoted
-sections of text in the body of a message.</P>
-<P><B>Note:</B> In order to use the <EM>quoted</EM><B>x</B> patterns in the
-internal pager, you need to set this to a regular expression that
-matches <EM>exactly</EM> the quote characters at the beginning of quoted
-lines.</P>
-
-
-<H3><A NAME="read_inc"></A> read_inc</H3>
-
-<P>Type: number<BR>
-Default: 10</P>
-
-<P>If set to a value greater than 0, Mutt will display which message it
-is currently on when reading a mailbox.  The message is printed after
-<EM>read_inc</EM> messages have been read (e.g., if set to 25, Mutt will
-print a message when it reads message 25, and then again when it gets
-to message 50).  This variable is meant to indicate progress when
-reading large mailboxes which may take some time.
-When set to 0, only a single message will appear before the reading
-the mailbox.</P>
-<P>Also see the ``
-<A HREF="#write_inc">$write_inc</A>'' variable.</P>
-
-
-<H3><A NAME="read_only"></A> read_only</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, all folders are opened in read-only mode.</P>
-
-
-<H3><A NAME="realname"></A> realname</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>This variable specifies what &quot;real&quot; or &quot;personal&quot; name should be used
-when sending messages.</P>
-<P>By default, this is the GCOS field from /etc/passwd.  Note that this
-variable will <EM>not</EM> be used when the user has set a real name
-in the 
-<A HREF="#from">$from</A> variable.</P>
-
-
-<H3><A NAME="recall"></A> recall</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-yes</P>
-
-<P>Controls whether or not you are prompted to recall postponed messages
-when composing a new message.  Also see ``
-<A HREF="#postponed">$postponed</A>''.</P>
-<P>Setting this variable to ``yes'' is not generally useful, and thus not
-recommended.</P>
-
-
-<H3><A NAME="record"></A> record</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>This specifies the file into which your outgoing messages should be
-appended.  (This is meant as the primary method for saving a copy of
-your messages, but another way to do this is using the ``
-<A HREF="manual-3.html#my_hdr">my_hdr</A>''
-command to create a <EM>Bcc:</EM> field with your email address in it.)</P>
-<P>The value of <EM>
-<A HREF="#record">$record</A></EM> is overridden by the ``
-<A HREF="#force_name">$force_name</A>'' and
-``
-<A HREF="#save_name">$save_name</A>'' variables, and the ``
-<A HREF="manual-3.html#fcc-hook">fcc-hook</A>'' command.</P>
-
-
-<H3><A NAME="reply_regexp"></A> reply_regexp</H3>
-
-<P>Type: regular expression<BR>
-Default: &quot;^(re([\[0-9\]+])*|aw):[ \t]*&quot;</P>
-
-<P>A regular expression used to recognize reply messages when threading
-and replying. The default value corresponds to the English &quot;Re:&quot; and
-the German &quot;Aw:&quot;.</P>
-
-
-<H3><A NAME="reply_self"></A> reply_self</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If unset and you are replying to a message sent by you, Mutt will
-assume that you want to reply to the recipients of that message rather
-than to yourself.</P>
-
-
-<H3><A NAME="reply_to"></A> reply_to</H3>
-
-<P>Type: quadoption<BR>
-Default: ask-yes</P>
-
-<P>If set, Mutt will ask you if you want to use the address listed in the
-Reply-To: header field when replying to a message.  If you answer no,
-it will use the address in the From: header field instead.  This
-option is useful for reading a mailing list that sets the Reply-To:
-header field to the list address and you want to send a private
-message to the author of a message.</P>
-
-
-<H3><A NAME="resolve"></A> resolve</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, the cursor will be automatically advanced to the next
-(possibly undeleted) message whenever a command that modifies the
-current message is executed.</P>
-
-
-<H3><A NAME="reverse_alias"></A> reverse_alias</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>This variable controls whether or not Mutt will display the &quot;personal&quot;
-name from your aliases in the index menu if it finds an alias that
-matches the message's sender.  For example, if you have the following
-alias:</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-alias juser abd30425@somewhere.net (Joe User)
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>and then you receive mail which contains the following header:</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-From: abd30425@somewhere.net
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>It would be displayed in the index menu as ``Joe User'' instead of
-``abd30425@somewhere.net.''  This is useful when the person's e-mail
-address is not human friendly (like CompuServe addresses).</P>
-
-
-<H3><A NAME="reverse_name"></A> reverse_name</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>It may sometimes arrive that you receive mail to a certain machine,
-move the messages to another machine, and reply to some the messages
-from there.  If this variable is set, the default <EM>From:</EM> line of
-the reply messages is built using the address where you received the
-messages you are replying to.  If the variable is unset, the
-<EM>From:</EM> line will use your address on the current machine.</P>
-
-
-<H3><A NAME="reverse_realname"></A> reverse_realname</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>This variable fine-tunes the behaviour of the 
-<A HREF="#reverse_name">reverse_name</A> feature.
-When it is set, mutt will use the address from incoming messages as-is,
-possibly including eventual real names.  When it is unset, mutt will
-override any such realnames with the setting of the 
-<A HREF="#realname">realname</A> variable.</P>
-
-
-<H3><A NAME="rfc2047_parameters"></A> rfc2047_parameters</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When this variable is set, Mutt will decode RFC-2047-encoded MIME 
-parameters. You want to set this variable when mutt suggests you
-to save attachments to files named like this: 
-=?iso-8859-1?Q?file=5F=E4=5F991116=2Ezip?=</P>
-<P>When this variable is set interactively, the change doesn't have
-the desired effect before you have changed folders.</P>
-<P>Note that this use of RFC 2047's encoding is explicitly,
-prohibited by the standard, but nevertheless encountered in the
-wild.
-Also note that setting this parameter will <EM>not</EM> have the effect 
-that mutt <EM>generates</EM> this kind of encoding.  Instead, mutt will
-unconditionally use the encoding specified in RFC 2231.</P>
-
-
-<H3><A NAME="save_address"></A> save_address</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, mutt will take the sender's full address when choosing a
-default folder for saving a mail. If ``
-<A HREF="#save_name">$save_name</A>'' or ``
-<A HREF="#force_name">$force_name</A>''
-is set too, the selection of the fcc folder will be changed as well.</P>
-
-
-<H3><A NAME="save_empty"></A> save_empty</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When unset, mailboxes which contain no saved messages will be removed
-when closed (the exception is ``
-<A HREF="#spoolfile">$spoolfile</A>'' which is never removed).
-If set, mailboxes are never removed.</P>
-<P><B>Note:</B> This only applies to mbox and MMDF folders, Mutt does not
-delete MH and Maildir directories.</P>
-
-
-<H3><A NAME="save_name"></A> save_name</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>This variable controls how copies of outgoing messages are saved.
-When set, a check is made to see if a mailbox specified by the
-recipient address exists (this is done by searching for a mailbox in
-the ``
-<A HREF="#folder">$folder</A>'' directory with the <EM>username</EM> part of the
-recipient address).  If the mailbox exists, the outgoing message will
-be saved to that mailbox, otherwise the message is saved to the
-``
-<A HREF="#record">$record</A>'' mailbox.</P>
-<P>Also see the ``
-<A HREF="#force_name">$force_name</A>'' variable.</P>
-
-
-<H3><A NAME="score"></A> score</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When this variable is <EM>unset</EM>, scoring is turned off.  This can
-be useful to selectively disable scoring for certain folders when the
-``
-<A HREF="#score_threshold_delete">$score_threshold_delete</A>'' variable and friends are used.</P>
-
-
-<H3><A NAME="score_threshold_delete"></A> score_threshold_delete</H3>
-
-<P>Type: number<BR>
-Default: -1</P>
-
-<P>Messages which have been assigned a score equal to or lower than the value
-of this variable are automatically marked for deletion by mutt.  Since
-mutt scores are always greater than or equal to zero, the default setting
-of this variable will never mark a message for deletion.</P>
-
-
-<H3><A NAME="score_threshold_flag"></A> score_threshold_flag</H3>
-
-<P>Type: number<BR>
-Default: 9999</P>
-
-<P>Messages wich have been assigned a score greater than or equal to this 
-variable's value are automatically marked &quot;flagged&quot;.</P>
-
-
-<H3><A NAME="score_threshold_read"></A> score_threshold_read</H3>
-
-<P>Type: number<BR>
-Default: -1</P>
-
-<P>Messages which have been assigned a score equal to or lower than the value
-of this variable are automatically marked as read by mutt.  Since
-mutt scores are always greater than or equal to zero, the default setting
-of this variable will never mark a message read.</P>
-
-
-<H3><A NAME="send_charset"></A> send_charset</H3>
-
-<P>Type: string<BR>
-Default: &quot;us-ascii:iso-8859-1:utf-8&quot;</P>
-
-<P>A list of character sets for outgoing messages. Mutt will use the
-first character set into which the text can be converted exactly.
-If your ``
-<A HREF="#charset">$charset</A>'' is not iso-8859-1 and recipients may not
-understand UTF-8, it is advisable to include in the list an
-appropriate widely used standard character set (such as
-iso-8859-2, koi8-r or iso-2022-jp) either instead of or after
-&quot;iso-8859-1&quot;.</P>
-
-
-<H3><A NAME="sendmail"></A> sendmail</H3>
-
-<P>Type: path<BR>
-Default: &quot;/usr/sbin/sendmail -oem -oi&quot;</P>
-
-<P>Specifies the program and arguments used to deliver mail sent by Mutt.
-Mutt expects that the specified program interprets additional
-arguments as recipient addresses.</P>
-
-
-<H3><A NAME="sendmail_wait"></A> sendmail_wait</H3>
-
-<P>Type: number<BR>
-Default: 0</P>
-
-<P>Specifies the number of seconds to wait for the ``
-<A HREF="#sendmail">$sendmail</A>'' process
-to finish before giving up and putting delivery in the background.</P>
-<P>Mutt interprets the value of this variable as follows:</P>
-<P>
-<DL>
-<DT><B>&gt;0 </B><DD><P>number of seconds to wait for sendmail to finish before continuing</P>
-<DT><B>0  </B><DD><P>wait forever for sendmail to finish</P>
-<DT><B>&lt;0 </B><DD><P>always put sendmail in the background without waiting</P>
-</DL>
-</P>
-
-<P>Note that if you specify a value other than 0, the output of the child
-process will be put in a temporary file.  If there is some error, you
-will be informed as to where to find the output.</P>
-
-
-<H3><A NAME="shell"></A> shell</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>Command to use when spawning a subshell.  By default, the user's login
-shell from /etc/passwd is used.</P>
-
-
-<H3><A NAME="sig_dashes"></A> sig_dashes</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>If set, a line containing ``-- '' will be inserted before your
-``
-<A HREF="#signature">$signature</A>''.  It is <B>strongly</B> recommended that you not unset
-this variable unless your ``signature'' contains just your name.  The
-reason for this is because many software packages use ``-- \n'' to
-detect your signature.  For example, Mutt has the ability to highlight
-the signature in a different color in the builtin pager.</P>
-
-
-<H3><A NAME="sig_on_top"></A> sig_on_top</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, the signature will be included before any quoted or forwarded
-text.  It is <B>strongly</B> recommended that you do not set this variable
-unless you really know what you are doing, and are prepared to take
-some heat from netiquette guardians.</P>
-
-
-<H3><A NAME="signature"></A> signature</H3>
-
-<P>Type: path<BR>
-Default: &quot;~/.signature&quot;</P>
-
-<P>Specifies the filename of your signature, which is appended to all
-outgoing messages.   If the filename ends with a pipe (``|''), it is
-assumed that filename is a shell command and input should be read from
-its stdout.</P>
-
-
-<H3><A NAME="simple_search"></A> simple_search</H3>
-
-<P>Type: string<BR>
-Default: &quot;~f %s | ~s %s&quot;</P>
-
-<P>Specifies how Mutt should expand a simple search into a real search
-pattern.  A simple search is one that does not contain any of the ~
-operators.  See ``
-<A HREF="manual-4.html#patterns">patterns</A>'' for more information on search patterns.</P>
-<P>For example, if you simply type joe at a search or limit prompt, Mutt
-will automatically expand it to the value specified by this variable.
-For the default value it would be:</P>
-<P>~f joe | ~s joe</P>
-
-
-<H3><A NAME="smart_wrap"></A> smart_wrap</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls the display of lines longer then the screen width in the
-internal pager. If set, long lines are wrapped at a word boundary.  If
-unset, lines are simply wrapped at the screen edge. Also see the
-``
-<A HREF="#markers">$markers</A>'' variable.</P>
-
-
-<H3><A NAME="smileys"></A> smileys</H3>
-
-<P>Type: regular expression<BR>
-Default: &quot;(&gt;From )|(:[-^]?[][)(&gt;&lt;}{|/DP])&quot;</P>
-
-<P>The <EM>pager</EM> uses this variable to catch some common false
-positives of ``
-<A HREF="#quote_regexp">$quote_regexp</A>'', most notably smileys in the beginning
-of a line</P>
-
-
-<H3><A NAME="sleep_time"></A> sleep_time</H3>
-
-<P>Type: number<BR>
-Default: 1</P>
-
-<P>Specifies time, in seconds, to pause while displaying certain informational
-messages, while moving from folder to folder and after expunging
-messages from the current folder.  The default is to pause one second, so 
-a value of zero for this option suppresses the pause.</P>
-
-
-<H3><A NAME="sort"></A> sort</H3>
-
-<P>Type: sort order<BR>
-Default: date</P>
-
-<P>Specifies how to sort messages in the <EM>index</EM> menu.  Valid values
-are:</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-   date or date-sent
-   date-received
-   from
-   mailbox-order (unsorted)
-   score
-   size
-   subject
-   threads
-   to
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>You may optionally use the reverse- prefix to specify reverse sorting
-order (example: set sort=reverse-date-sent).</P>
-
-
-<H3><A NAME="sort_alias"></A> sort_alias</H3>
-
-<P>Type: sort order<BR>
-Default: alias</P>
-
-<P>Specifies how the entries in the `alias' menu are sorted.  The
-following are legal values:</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-   address (sort alphabetically by email address)
-   alias (sort alphabetically by alias name)
-   unsorted (leave in order specified in .muttrc)
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-
-<H3><A NAME="sort_aux"></A> sort_aux</H3>
-
-<P>Type: sort order<BR>
-Default: date</P>
-
-<P>When sorting by threads, this variable controls how threads are sorted
-in relation to other threads, and how the branches of the thread trees
-are sorted.  This can be set to any value that ``
-<A HREF="#sort">$sort</A>'' can, except
-threads (in that case, mutt will just use date-sent).  You can also
-specify the last- prefix in addition to the reverse- prefix, but last-
-must come after reverse-.  The last- prefix causes messages to be
-sorted against its siblings by which has the last descendant, using
-the rest of sort_aux as an ordering.  For instance, set sort_aux=last-
-date-received would mean that if a new message is received in a
-thread, that thread becomes the last one displayed (or the first, if
-you have set sort=reverse-threads.) Note: For reversed ``
-<A HREF="#sort">$sort</A>''
-order 
-<A HREF="#sort_aux">$sort_aux</A> is reversed again (which is not the right thing to do,
-but kept to not break any existing configuration setting).</P>
-
-
-<H3><A NAME="sort_browser"></A> sort_browser</H3>
-
-<P>Type: sort order<BR>
-Default: subject</P>
-
-<P>Specifies how to sort entries in the file browser.  By default, the
-entries are sorted alphabetically.  Valid values:</P>
-
-<P>
-<BLOCKQUOTE><CODE>
-<PRE>
-   alpha (alphabetically)
-   date
-   size
-   unsorted
-</PRE>
-</CODE></BLOCKQUOTE>
-</P>
-<P>You may optionally use the reverse- prefix to specify reverse sorting
-order (example: set sort_browser=reverse-date).</P>
-
-
-<H3><A NAME="sort_re"></A> sort_re</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>This variable is only useful when sorting by threads with
-``
-<A HREF="#strict_threads">$strict_threads</A>'' unset.  In that case, it changes the heuristic
-mutt uses to thread messages by subject.  With sort_re set, mutt will
-only attach a message as the child of another message by subject if
-the subject of the child message starts with a substring matching the
-setting of ``
-<A HREF="#reply_regexp">$reply_regexp</A>''.  With sort_re unset, mutt will attach
-the message whether or not this is the case, as long as the
-non-``
-<A HREF="#reply_regexp">$reply_regexp</A>'' parts of both messages are identical.</P>
-
-
-<H3><A NAME="spoolfile"></A> spoolfile</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>If your spool mailbox is in a non-default place where Mutt cannot find
-it, you can specify its location with this variable.  Mutt will
-automatically set this variable to the value of the environment
-variable $MAIL if it is not set.</P>
-
-
-<H3><A NAME="status_chars"></A> status_chars</H3>
-
-<P>Type: string<BR>
-Default: &quot;-*%A&quot;</P>
-
-<P>Controls the characters used by the &quot;%r&quot; indicator in
-``
-<A HREF="#status_format">$status_format</A>''. The first character is used when the mailbox is
-unchanged. The second is used when the mailbox has been changed, and
-it needs to be resynchronized. The third is used if the mailbox is in
-read-only mode, or if the mailbox will not be written when exiting
-that mailbox (You can toggle whether to write changes to a mailbox
-with the toggle-write operation, bound by default to &quot;%&quot;). The fourth
-is used to indicate that the current folder has been opened in attach-
-message mode (Certain operations like composing a new mail, replying,
-forwarding, etc. are not permitted in this mode).</P>
-
-
-<H3><A NAME="status_format"></A> status_format</H3>
-
-<P>Type: string<BR>
-Default: &quot;-%r-Mutt: %f [Msgs:%?M?%M/?%m%?n? New:%n?%?o? Old:%o?%?d? Del:%d?%?F? Flag:%F?%?t? Tag:%t?%?p? Post:%p?%?b? Inc:%b?%?l? %l?]---(%s/%S)-%&gt;-(%P)---&quot;</P>
-
-<P>Controls the format of the status line displayed in the <EM>index</EM>
-menu.  This string is similar to ``
-<A HREF="#index_format">$index_format</A>'', but has its own
-set of printf()-like sequences:</P>
-
-<P>
-<DL>
-<DT><B>%b  </B><DD><P>number of mailboxes with new mail *</P>
-<DT><B>%d  </B><DD><P>number of deleted messages *</P>
-<DT><B>%h  </B><DD><P>local hostname</P>
-<DT><B>%f  </B><DD><P>the full pathname of the current mailbox</P>
-<DT><B>%F  </B><DD><P>number of flagged messages *</P>
-<DT><B>%l  </B><DD><P>size (in bytes) of the current mailbox *</P>
-<DT><B>%L  </B><DD><P>size (in bytes) of the messages shown 
-(i.e., which match the current limit) *</P>
-<DT><B>%m  </B><DD><P>the number of messages in the mailbox *</P>
-<DT><B>%M  </B><DD><P>the number of messages shown (i.e., which match the current limit) *</P>
-<DT><B>%n  </B><DD><P>number of new messages in the mailbox *</P>
-<DT><B>%o  </B><DD><P>number of old unread messages</P>
-<DT><B>%p  </B><DD><P>number of postponed messages *</P>
-<DT><B>%P  </B><DD><P>percentage of the way through the index</P>
-<DT><B>%r  </B><DD><P>modified/read-only/won't-write/attach-message indicator,
-according to 
-<A HREF="#status_chars">$status_chars</A></P>
-<DT><B>%s  </B><DD><P>current sorting mode (
-<A HREF="#sort">$sort</A>)</P>
-<DT><B>%S  </B><DD><P>current aux sorting method (
-<A HREF="#sort_aux">$sort_aux</A>)</P>
-<DT><B>%t  </B><DD><P>number of tagged messages *</P>
-<DT><B>%u  </B><DD><P>number of unread messages *</P>
-<DT><B>%v  </B><DD><P>Mutt version string</P>
-<DT><B>%V  </B><DD><P>currently active limit pattern, if any *</P>
-<DT><B>%&gt;X </B><DD><P>right justify the rest of the string and pad with &quot;X&quot;</P>
-<DT><B>%|X </B><DD><P>pad to the end of the line with &quot;X&quot;</P>
-</DL>
-</P>
-
-<P>* = can be optionally printed if nonzero</P>
-<P>Some of the above sequences can be used to optionally print a string
-if their value is nonzero.  For example, you may only want to see the
-number of flagged messages if such messages exist, since zero is not
-particularly meaningful.  To optionally print a string based upon one
-of the above sequences, the following construct is used</P>
-<P>%?&lt;sequence_char&gt;?&lt;optional_string&gt;?</P>
-<P>where <EM>sequence_char</EM> is a character from the table above, and
-<EM>optional_string</EM> is the string you would like printed if
-<EM>status_char</EM> is nonzero.  <EM>optional_string</EM> <B>may</B> contain
-other sequence as well as normal text, but you may <B>not</B> nest
-optional strings.</P>
-<P>Here is an example illustrating how to optionally print the number of
-new messages in a mailbox:
-%?n?%n new messages.?</P>
-<P>Additionally you can switch between two strings, the first one, if a
-value is zero, the second one, if the value is nonzero, by using the
-following construct:
-%?&lt;sequence_char&gt;?&lt;if_string&gt;&amp;&lt;else_string&gt;?</P>
-<P>You can additionally force the result of any printf-like sequence to
-be lowercase by prefixing the sequence character with an underscore
-(_) sign.  For example, if you want to display the local hostname in
-lowercase, you would use:
-%_h</P>
-
-
-<H3><A NAME="status_on_top"></A> status_on_top</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Setting this variable causes the ``status bar'' to be displayed on
-the first line of the screen rather than near the bottom.</P>
-
-
-<H3><A NAME="strict_threads"></A> strict_threads</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>If set, threading will only make use of the ``In-Reply-To'' and
-``References'' fields when you ``
-<A HREF="#sort">$sort</A>'' by message threads.  By
-default, messages with the same subject are grouped together in
-``pseudo threads.''  This may not always be desirable, such as in a
-personal mailbox where you might have several unrelated messages with
-the subject ``hi'' which will get grouped together.</P>
-
-
-<H3><A NAME="suspend"></A> suspend</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When <EM>unset</EM>, mutt won't stop when the user presses the terminal's
-<EM>susp</EM> key, usually ``control-Z''. This is useful if you run mutt
-inside an xterm using a command like xterm -e mutt.</P>
-
-
-<H3><A NAME="text_flowed"></A> text_flowed</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, mutt will generate text/plain; format=flowed attachments.
-This format is easier to handle for some mailing software, and generally
-just looks like ordinary text.  To actually make use of this format's 
-features, you'll need support in your editor.</P>
-<P>Note that 
-<A HREF="#indent_string">$indent_string</A> is ignored when this option is set.</P>
-
-
-<H3><A NAME="thread_received"></A> thread_received</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, mutt uses the date received rather than the date sent
-to thread messages by subject.</P>
-
-
-<H3><A NAME="thorough_search"></A> thorough_search</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>Affects the <EM>~b</EM> and <EM>~h</EM> search operations described in
-section ``
-<A HREF="manual-4.html#patterns">patterns</A>'' above.  If set, the headers and attachments of
-messages to be searched are decoded before searching.  If unset,
-messages are searched as they appear in the folder.</P>
-
-
-<H3><A NAME="tilde"></A> tilde</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P>When set, the internal-pager will pad blank lines to the bottom of the
-screen with a tilde (~).</P>
-
-
-<H3><A NAME="timeout"></A> timeout</H3>
-
-<P>Type: number<BR>
-Default: 600</P>
-
-<P>This variable controls the <EM>number of seconds</EM> Mutt will wait for
-a key to be pressed in the main menu before timing out and checking
-for new mail.  A value of zero or less will cause Mutt not to ever
-time out.</P>
-
-
-<H3><A NAME="tmpdir"></A> tmpdir</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>This variable allows you to specify where Mutt will place its
-temporary files needed for displaying and composing messages.</P>
-
-
-<H3><A NAME="to_chars"></A> to_chars</H3>
-
-<P>Type: string<BR>
-Default: &quot; +TCFL&quot;</P>
-
-<P>Controls the character used to indicate mail addressed to you.  The
-first character is the one used when the mail is NOT addressed to your
-address (default: space).  The second is used when you are the only
-recipient of the message (default: +).  The third is when your address
-appears in the TO header field, but you are not the only recipient of
-the message (default: T).  The fourth character is used when your
-address is specified in the CC header field, but you are not the only
-recipient.  The fifth character is used to indicate mail that was sent
-by <EM>you</EM>.  The sixth character is used to indicate when a mail
-was sent to a mailing-list you subscribe to (default: L).</P>
-
-
-<H3><A NAME="tunnel"></A> tunnel</H3>
-
-<P>Type: string<BR>
-Default: &quot;&quot;</P>
-
-<P>Setting this variable will cause mutt to open a pipe to a command
-instead of a raw socket. You may be able to use this to set up
-preauthenticated connections to your IMAP/POP3 server. Example:</P>
-<P>tunnel=&quot;ssh -q mailhost.net /usr/local/libexec/imapd&quot;</P>
-<P>NOTE: For this example to work you must be able to log in to the remote
-machine without having to enter a password.</P>
-
-
-<H3><A NAME="use_8bitmime"></A> use_8bitmime</H3>
-
-<P>Type: boolean<BR>
-Default: no</P>
-
-<P><B>Warning:</B> do not set this variable unless you are using a version
-of sendmail which supports the -B8BITMIME flag (such as sendmail
-8.8.x) or you may not be able to send mail.</P>
-<P>When <EM>set</EM>, Mutt will invoke ``
-<A HREF="#sendmail">$sendmail</A>'' with the -B8BITMIME
-flag when sending 8-bit messages to enable ESMTP negotiation.</P>
-
-
-<H3><A NAME="use_domain"></A> use_domain</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, Mutt will qualify all local addresses (ones without the
-@host portion) with the value of ``
-<A HREF="#hostname">$hostname</A>''.  If <EM>unset</EM>, no
-addresses will be qualified.</P>
-
-
-<H3><A NAME="use_from"></A> use_from</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When <EM>set</EM>, Mutt will generate the `From:' header field when
-sending messages.  If <EM>unset</EM>, no `From:' header field will be
-generated unless the user explicitly sets one using the ``
-<A HREF="manual-3.html#my_hdr">my_hdr</A>''
-command.</P>
-
-
-<H3><A NAME="user_agent"></A> user_agent</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When <EM>set</EM>, mutt will add a &quot;User-Agent&quot; header to outgoing
-messages, indicating which version of mutt was used for composing
-them.</P>
-
-
-<H3><A NAME="visual"></A> visual</H3>
-
-<P>Type: path<BR>
-Default: &quot;&quot;</P>
-
-<P>Specifies the visual editor to invoke when the <EM>~v</EM> command is
-given in the builtin editor.</P>
-
-
-<H3><A NAME="wait_key"></A> wait_key</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls whether Mutt will ask you to press a key after <EM>shell-
-escape</EM>, <EM>pipe-message</EM>, <EM>pipe-entry</EM>, <EM>print-message</EM>,
-and <EM>print-entry</EM> commands.</P>
-<P>It is also used when viewing attachments with ``
-<A HREF="manual-5.html#auto_view">auto_view</A>'', provided
-that the corresponding mailcap entry has a <EM>needsterminal</EM> flag,
-and the external program is interactive.</P>
-<P>When set, Mutt will always ask for a key. When unset, Mutt will wait
-for a key only if the external command returned a non-zero status.</P>
-
-
-<H3><A NAME="weed"></A> weed</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>When set, mutt will weed headers when when displaying, forwarding,
-printing, or replying to messages.</P>
-
-
-<H3><A NAME="wrap_search"></A> wrap_search</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls whether searches wrap around the end of the mailbox.</P>
-<P>When set, searches will wrap around the first (or last) message. When
-unset, searches will not wrap.</P>
-
-
-<H3><A NAME="wrapmargin"></A> wrapmargin</H3>
-
-<P>Type: number<BR>
-Default: 0</P>
-
-<P>Controls the margin left at the right side of the terminal when mutt's
-pager does smart wrapping.</P>
-
-
-<H3><A NAME="write_inc"></A> write_inc</H3>
-
-<P>Type: number<BR>
-Default: 10</P>
-
-<P>When writing a mailbox, a message will be printed every
-<EM>write_inc</EM> messages to indicate progress.  If set to 0, only a
-single message will be displayed before writing a mailbox.</P>
-<P>Also see the ``
-<A HREF="#read_inc">$read_inc</A>'' variable.</P>
-
-
-<H3><A NAME="write_bcc"></A> write_bcc</H3>
-
-<P>Type: boolean<BR>
-Default: yes</P>
-
-<P>Controls whether mutt writes out the Bcc header when preparing
-messages to be sent.  Exim users may wish to use this.</P>
-
-
-<H2><A NAME="functions"></A> <A NAME="ss6.4">6.4</A> <A HREF="manual.html#toc6.4">Functions</A>
-</H2>
-
-<P>The following is the list of available functions listed by the mapping
-in which they are available.  The default key setting is given, and an
-explanation of what the function does.  The key bindings of these
-functions can be changed with the 
-<A HREF="manual-3.html#bind">bind</A>
-command.</P>
-
-<H3>generic</H3>
-
-
-<P>The <EM>generic</EM> menu is not a real menu, but specifies common functions
-(such as movement) available in all menus except for <EM>pager</EM> and
-<EM>editor</EM>.  Changing settings for this menu will affect the default
-bindings for all menus (except as noted).</P>
-<P>
-<PRE>
-bottom-page                L   move to the bottom of the page
-current-bottom     not bound   move current entry to bottom of page
-current-middle     not bound   move current entry to middle of page
-current-top        not bound   move current entry to top of page
-enter-command              :   enter a muttrc command
-exit                       q   exit this menu
-first-entry                =   move to the first entry
-half-down                  ]   scroll down 1/2 page
-half-up                    [   scroll up 1/2 page
-help                       ?   this screen
-jump                  number   jump to an index number
-last-entry                 *   move to the last entry
-middle-page                M   move to the middle of the page
-next-entry                 j   move to the next entry
-next-line                  >   scroll down one line
-next-page                  z   move to the next page
-previous-entry             k   move to the previous entry
-previous-line              &lt;   scroll up one line
-previous-page              Z   move to the previous page
-refresh                   ^L   clear and redraw the screen
-search                     /   search for a regular expression
-search-next                n   search for next match
-search-opposite    not bound   search for next match in opposite direction
-search-reverse         ESC /   search backwards for a regular expression
-select-entry             RET   select the current entry
-shell-escape               !   run a program in a subshell
-tag-entry                  t   toggle the tag on the current entry
-tag-prefix                 ;   apply next command to tagged entries
-top-page                   H   move to the top of the page
-</PRE>
-</P>
-<H3>index</H3>
-
-<P>
-<PRE>
-bounce-message             b   remail a message to another user
-change-folder              c   open a different folder
-change-folder-readonly ESC c   open a different folder in read only mode
-check-traditional-pgp  ESC P   check for classic pgp
-clear-flag                 W   clear a status flag from a message
-copy-message               C   copy a message to a file/mailbox
-create-alias               a   create an alias from a message sender
-decode-copy            ESC C   decode a message and copy it to a file/mailbox
-decode-save            ESC s   decode a message and save it to a file/mailbox
-delete-message             d   delete the current entry
-delete-pattern             D   delete messages matching a pattern
-delete-subthread       ESC d   delete all messages in subthread
-delete-thread             ^D   delete all messages in thread
-display-address            @   display full address of sender
-display-toggle-weed        h   display message and toggle header weeding
-display-message          RET   display a message
-edit                       e   edit the current message
-edit-type                 ^E   edit the current message's Content-Type
-exit                       x   exit without saving changes
-extract-keys              ^K   extract PGP public keys
-fetch-mail                 G   retrieve mail from POP server
-flag-message               F   toggle a message's 'important' flag
-forget-passphrase         ^F   wipe PGP passphrase from memory
-forward-message            f   forward a message with comments
-group-reply                g   reply to all recipients
-limit                      l   show only messages matching a pattern
-list-reply                 L   reply to specified mailing list
-mail                       m   compose a new mail message
-mail-key               ESC k   mail a PGP public key
-next-new                 TAB   jump to the next new message
-next-subthread         ESC n   jump to the next subthread
-next-thread               ^N   jump to the next thread
-next-undeleted             j   move to the next undeleted message
-next-unread        not bound   jump to the next unread message
-parent-message             P   jump to parent message in thread
-pipe-message               |   pipe message/attachment to a shell command
-previous-new         ESC TAB   jump to the previous new message
-previous-page              Z   move to the previous page
-previous-subthread     ESC p   jump to previous subthread
-previous-thread           ^P   jump to previous thread
-previous-undeleted         k   move to the last undelete message
-previous-unread    not bound   jump to the previous unread message
-print-message              p   print the current entry
-query                      Q   query external program for addresses
-quit                       q   save changes to mailbox and quit
-read-subthread         ESC r   mark the current subthread as read
-read-thread               ^R   mark the current thread as read
-recall-message             R   recall a postponed message
-reply                      r   reply to a message
-resend-message         ESC e   resend message and preserve MIME structure
-save-message               s   save message/attachment to a file
-set-flag                   w   set a status flag on a message
-show-version               V   show the Mutt version number and date
-show-limit             ESC l   show currently active limit pattern, if any
-sort-mailbox               o   sort messages
-sort-reverse               O   sort messages in reverse order
-sync-mailbox               $   save changes to mailbox
-tag-pattern                T   tag messages matching a pattern
-tag-thread             ESC t   tag/untag all messages in the current thread
-toggle-new                 N   toggle a message's 'new' flag
-toggle-write               %   toggle whether the mailbox will be rewritten
-undelete-message           u   undelete the current entry
-undelete-pattern           U   undelete messages matching a pattern
-undelete-subthread     ESC u   undelete all messages in subthread
-undelete-thread           ^U   undelete all messages in thread
-untag-pattern             ^T   untag messages matching a pattern
-view-attachments           v   show MIME attachments
-</PRE>
-</P>
-<H3>pager</H3>
-
-<P>
-<PRE>
-bottom             not bound   jump to the bottom of the message
-bounce-message             b   remail a message to another user
-change-folder              c   open a different folder
-change-folder-readonly ESC c   open a different folder in read only mode
-check-traditional-pgp  ESC P   check for classic pgp
-copy-message               C   copy a message to a file/mailbox
-create-alias               a   create an alias from a message sender
-decode-copy            ESC C   decode a message and copy it to a file/mailbox
-decode-save            ESC s   decode a message and save it to a file/mailbox
-delete-message             d   delete the current entry
-delete-subthread       ESC d   delete all messages in subthread
-delete-thread             ^D   delete all messages in thread
-display-address            @   display full address of sender
-display-toggle-weed        h   display message and toggle header weeding
-edit                       e   edit the current message
-edit-type                 ^E   edit the current message's Content-Type
-enter-command              :   enter a muttrc command
-exit                       i   return to the main-menu
-extract-keys              ^K   extract PGP public keys
-flag-message               F   toggle a message's 'important' flag
-forget-passphrase         ^F   wipe PGP passphrase from memory
-forward-message            f   forward a message with comments
-group-reply                g   reply to all recipients
-half-up            not bound   move up one-half page
-half-down          not bound   move down one-half page
-help                       ?   this screen
-list-reply                 L   reply to specified mailing list
-mail                       m   compose a new mail message
-mail-key               ESC k   mail a PGP public key
-mark-as-new                N   toggle a message's 'new' flag
-next-line                RET   scroll down one line
-next-entry                 J   move to the next entry
-next-new                 TAB   jump to the next new message
-next-page                      move to the next page
-next-subthread         ESC n   jump to the next subthread
-next-thread               ^N   jump to the next thread
-next-undeleted             j   move to the next undeleted message
-next-unread        not bound   jump to the next unread message
-parent-message             P   jump to parent message in thread
-pipe-message               |   pipe message/attachment to a shell command
-previous-line      BackSpace   scroll up one line
-previous-entry             K   move to the previous entry
-previous-new       not bound   jump to the previous new message
-previous-page              -   move to the previous page
-previous-subthread     ESC p   jump to previous subthread
-previous-thread           ^P   jump to previous thread
-previous-undeleted         k   move to the last undelete message
-previous-unread    not bound   jump to the previous unread message
-print-message              p   print the current entry
-quit                       Q   save changes to mailbox and quit
-read-subthread         ESC r   mark the current subthread as read
-read-thread               ^R   mark the current thread as read
-recall-message             R   recall a postponed message
-redraw-screen             ^L   clear and redraw the screen
-reply                      r   reply to a message
-save-message               s   save message/attachment to a file
-search                     /   search for a regular expression
-search-next                n   search for next match
-search-opposite    not bound   search for next match in opposite direction
-search-reverse         ESC /   search backwards for a regular expression
-search-toggle              \   toggle search pattern coloring
-shell-escape               !   invoke a command in a subshell
-show-version               V   show the Mutt version number and date
-skip-quoted                S   skip beyond quoted text
-sync-mailbox               $   save changes to mailbox
-tag-message                t   tag a message
-toggle-quoted              T   toggle display of quoted text
-top                        ^   jump to the top of the message
-undelete-message           u   undelete the current entry
-undelete-subthread     ESC u   undelete all messages in subthread
-undelete-thread           ^U   undelete all messages in thread
-view-attachments           v   show MIME attachments
-</PRE>
-</P>
-<H3>alias</H3>
-
-<P>
-<PRE>
-search                     /   search for a regular expression
-search-next                n   search for next match
-search-reverse         ESC /   search backwards for a regular expression
-</PRE>
-</P>
-<H3>query</H3>
-
-<P>
-<PRE>
-create-alias               a   create an alias from a message sender
-mail                       m   compose a new mail message
-query                      Q   query external program for addresses
-query-append               A   append new query results to current results
-search                     /   search for a regular expression
-search-next                n   search for next match
-search-opposite    not bound   search for next match in opposite direction
-search-reverse         ESC /   search backwards for a regular expression
-</PRE>
-</P>
-<H3>attach</H3>
-
-<P>
-<PRE>
-bounce-message             b   remail a message to another user
-collapse-parts             v   toggle display of subparts
-delete-entry               d   delete the current entry
-display-toggle-weed        h   display message and toggle header weeding
-edit-type                 ^E   edit the current entry's Content-Type
-extract-keys              ^K   extract PGP public keys
-forward-message            f   forward a message with comments
-group-reply                g   reply to all recipients
-list-reply                 L   reply to specified mailing list
-pipe-entry                 |   pipe message/attachment to a shell command
-print-entry                p   print the current entry
-reply                      r   reply to a message
-resend-message         ESC e   resend message and preserve MIME structure
-save-entry                 s   save message/attachment to a file
-undelete-entry             u   undelete the current entry
-view-attach              RET   view attachment using mailcap entry if necessary
-view-mailcap               m   force viewing of attachment using mailcap
-view-text                  T   view attachment as text
-</PRE>
-</P>
-<H3>compose</H3>
-
-<P>
-<PRE>
-attach-file                a   attach a file(s) to this message
-attach-message             A   attach message(s) to this message
-attach-key             ESC k   attach a PGP public key
-copy-file                  C   save message/attachment to a file
-detach-file                D   delete the current entry
-display-toggle-weed        h   display message and toggle header weeding
-edit-bcc                   b   edit the BCC list
-edit-cc                    c   edit the CC list
-edit-description           d   edit attachment description
-edit-encoding             ^E   edit attachment transfer-encoding
-edit-fcc                   f   enter a file to save a copy of this message in
-edit-from              ESC f   edit the from: field
-edit-file               ^X e   edit the file to be attached
-edit-headers               E   edit the message with headers
-edit                       e   edit the message
-edit-mime                  m   edit attachment using mailcap entry
-edit-reply-to              r   edit the Reply-To field
-edit-subject               s   edit the subject of this message
-edit-to                    t   edit the TO list
-edit-type                 ^T   edit attachment type
-filter-entry               F   filter attachment through a shell command
-forget-passphrase         ^F   wipe PGP passphrase from memory
-ispell                     i   run ispell on the message
-new-mime                   n   compose new attachment using mailcap entry
-pgp-menu                   p   show PGP options
-pipe-entry                 |   pipe message/attachment to a shell command
-postpone-message           P   save this message to send later
-print-entry                l   print the current entry
-rename-file                R   rename/move an attached file
-send-message               y   send the message
-toggle-unlink              u   toggle whether to delete file after sending it
-view-attach              RET   view attachment using mailcap entry if necessary
-write-fcc                  w   write the message to a folder
-</PRE>
-</P>
-<H3>postpone</H3>
-
-<P>
-<PRE>
-delete-entry               d   delete the current entry
-undelete-entry             u   undelete the current entry
-</PRE>
-</P>
-<H3>browser</H3>
-
-<P>
-<PRE>
-change-dir                 c   change directories
-check-new                TAB   check mailboxes for new mail
-enter-mask                 m   enter a file mask
-search                     /   search for a regular expression
-search-next                n   search for next match
-search-reverse         ESC /   search backwards for a regular expression
-select-new                 N   select a new file in this directory
-sort                       o   sort messages
-sort-reverse               O   sort messages in reverse order
-toggle-mailboxes         TAB   toggle whether to browse mailboxes or all files
-view-file              SPACE   view file
-subscribe                  s   subscribe to current mailbox (IMAP Only)
-unsubscribe                u   unsubscribe to current mailbox (IMAP Only)
-toggle-subscribed          T   toggle view all/subscribed mailboxes (IMAP Only)
-</PRE>
-</P>
-<H3>pgp</H3>
-
-<P>
-<PRE>
-view-name                  %   view the key's user id
-verify-key                 c   verify a PGP public key
-</PRE>
-</P>
-<H3>editor</H3>
-
-<P>
-<PRE>
-backspace          BackSpace   delete the char in front of the cursor
-backward-char             ^B   move the cursor one character to the left
-backward-word          ESC b   move the cursor to the previous word
-bol                       ^A   jump to the beginning of the line
-buffy-cycle            Space   cycle among incoming mailboxes
-capitalize-word        ESC c   uppercase the first character in the word
-complete                 TAB   complete filename or alias
-complete-query            ^T   complete address with query
-delete-char               ^D   delete the char under the cursor
-downcase-word          ESC l   lowercase all characters in current word
-eol                       ^E   jump to the end of the line
-forward-char              ^F   move the cursor one character to the right
-forward-word           ESC f   move the cursor to the next word
-history-down       not bound   scroll down through the history list
-history-up         not bound   scroll up through the history list
-kill-eol                  ^K   delete chars from cursor to end of line
-kill-eow               ESC d   delete chars from cursor to end of word
-kill-line                 ^U   delete all chars on the line
-kill-word                 ^W   delete the word in front of the cursor
-quote-char                ^V   quote the next typed key
-transpose-chars    not bound   transpose character under cursor with previous
-upcase-word            ESC u   uppercase all characters in current word
-</PRE>
-</P>
-
-<HR>
-<A HREF="manual-7.html">Next</A>
-<A HREF="manual-5.html">Previous</A>
-<A HREF="manual.html#toc6">Contents</A>
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual-7.html mutt-1.4/doc/manual-7.html
--- mutt-1.4.orig/doc/manual-7.html	Wed May 29 11:29:58 2002
+++ mutt-1.4/doc/manual-7.html	Thu Jan  1 01:00:00 1970
@@ -1,119 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client: Miscellany</TITLE>
- <LINK HREF="manual-6.html" REL=previous>
- <LINK HREF="manual.html#toc7" REL=contents>
-</HEAD>
-<BODY>
-Next
-<A HREF="manual-6.html">Previous</A>
-<A HREF="manual.html#toc7">Contents</A>
-<HR>
-<H2><A NAME="s7">7.</A> <A HREF="manual.html#toc7">Miscellany</A></H2>
-
-
-
-<H2><A NAME="ss7.1">7.1</A> <A HREF="manual.html#toc7.1">Acknowledgements</A>
-</H2>
-
-<P>Kari Hurtta
-<A HREF="mailto:kari.hurtta@fmi.fi">&lt;kari.hurtta@fmi.fi&gt;</A>
-co-developed the original MIME parsing code back in the ELM-ME days.</P>
-<P>The following people have been very helpful to the development of Mutt:</P>
-<P>Vikas Agnihotri 
-<A HREF="mailto:vikasa@writeme.com">&lt;vikasa@writeme.com&gt;</A>,<BR>
-Francois Berjon 
-<A HREF="mailto:Francois.Berjon@aar.alcatel-alsthom.fr">&lt;Francois.Berjon@aar.alcatel-alsthom.fr&gt;</A>,<BR>
-Aric Blumer 
-<A HREF="mailto:aric@fore.com">&lt;aric@fore.com&gt;</A>,<BR>
-John Capo 
-<A HREF="mailto:jc@irbs.com">&lt;jc@irbs.com&gt;</A>,<BR>
-David Champion 
-<A HREF="mailto:dgc@uchicago.edu">&lt;dgc@uchicago.edu</A>,<BR>
-Brendan Cully 
-<A HREF="mailto:brendan@kublai.com">&lt;brendan@kublai.com&gt;</A>,<BR>
-Liviu Daia 
-<A HREF="mailto:daia@stoilow.imar.ro">&lt;daia@stoilow.imar.ro&gt;</A>,<BR>
-Thomas E. Dickey 
-<A HREF="mailto:dickey@herndon4.his.com">&lt;dickey@herndon4.his.com&gt;</A>,<BR>
-David DeSimone 
-<A HREF="mailto:fox@convex.hp.com">&lt;fox@convex.hp.com&gt;</A>,<BR>
-Nickolay N. Dudorov 
-<A HREF="mailto:nnd@wint.itfs.nsk.su">&lt;nnd@wint.itfs.nsk.su&gt;</A>,<BR>
-Ruslan Ermilov 
-<A HREF="mailto:ru@freebsd.org">&lt;ru@freebsd.org&gt;</A>,<BR>
-Edmund Grimley Evans 
-<A HREF="mailto:edmundo@rano.org">&lt;edmundo@rano.org</A>,<BR>
-Michael Finken 
-<A HREF="mailto:finken@conware.de">&lt;finken@conware.de&gt;</A>,<BR>
-Sven Guckes 
-<A HREF="mailto:guckes@math.fu-berlin.de">&lt;guckes@math.fu-berlin.de&gt;</A>,<BR>
-Lars Hecking 
-<A HREF="mailto:lhecking@nmrc.ie">&lt;lhecking@nmrc.ie&gt;</A>,<BR>
-Mark Holloman 
-<A HREF="mailto:holloman@nando.net">&lt;holloman@nando.net&gt;</A>,<BR>
-Andreas Holzmann 
-<A HREF="mailto:holzmann@fmi.uni-passau.de">&lt;holzmann@fmi.uni-passau.de&gt;</A>,<BR>
-Marco d'Itri 
-<A HREF="mailto:md@linux.it">&lt;md@linux.it&gt;</A>,<BR>
-Bjrn Jacke 
-<A HREF="mailto:bjacke@suse.com">&lt;bjacke@suse.com&gt;</A>,<BR>
-Byrial Jensen 
-<A HREF="mailto:byrial@image.dk">&lt;byrial@image.dk&gt;</A>,<BR>
-David Jeske 
-<A HREF="mailto:jeske@igcom.net">&lt;jeske@igcom.net&gt;</A>,<BR>
-Christophe Kalt 
-<A HREF="mailto:kalt@hugo.int-evry.fr">&lt;kalt@hugo.int-evry.fr&gt;</A>,<BR>
-Tommi Komulainen 
-<A HREF="mailto:Tommi.Komulainen@iki.fi">&lt;Tommi.Komulainen@iki.fi&gt;</A>,<BR>
-Felix von Leitner (a.k.a ``Fefe'') 
-<A HREF="mailto:leitner@math.fu-berlin.de">&lt;leitner@math.fu-berlin.de&gt;</A>,<BR>
-Brandon Long 
-<A HREF="mailto:blong@fiction.net">&lt;blong@fiction.net&gt;</A>,<BR>
-Jimmy Mkel 
-<A HREF="mailto:jmy@flashback.net">&lt;jmy@flashback.net&gt;</A>,<BR>
-Lars Marowsky-Bree 
-<A HREF="mailto:lmb@pointer.in-minden.de">&lt;lmb@pointer.in-minden.de&gt;</A>,<BR>
-Thomas ``Mike'' Michlmayr 
-<A HREF="mailto:mike@cosy.sbg.ac.at">&lt;mike@cosy.sbg.ac.at&gt;</A>,<BR>
-Andrew W. Nosenko 
-<A HREF="mailto:awn@bcs.zp.ua">&lt;awn@bcs.zp.ua&gt;</A>,<BR>
-David O'Brien 
-<A HREF="mailto:obrien@Nuxi.cs.ucdavis.edu">&lt;obrien@Nuxi.cs.ucdavis.edu&gt;</A>,<BR>
-Clint Olsen 
-<A HREF="mailto:olsenc@ichips.intel.com">&lt;olsenc@ichips.intel.com&gt;</A>,<BR>
-Park Myeong Seok 
-<A HREF="mailto:pms@romance.kaist.ac.kr">&lt;pms@romance.kaist.ac.kr&gt;</A>,<BR>
-Thomas Parmelan 
-<A HREF="mailto:tom@ankh.fr.eu.org">&lt;tom@ankh.fr.eu.org&gt;</A>,<BR>
-Ollivier Robert 
-<A HREF="mailto:roberto@keltia.freenix.fr">&lt;roberto@keltia.freenix.fr&gt;</A>,<BR>
-Thomas Roessler 
-<A HREF="mailto:roessler@does-not-exist.org">&lt;roessler@does-not-exist.org&gt;</A>,<BR>
-Roland Rosenfeld 
-<A HREF="roland@spinnaker.de">&lt;roland@spinnaker.de&gt;</A>,<BR>
-TAKIZAWA Takashi 
-<A HREF="taki@luna.email.ne.jp">&lt;taki@luna.email.ne.jp&gt;</A>,<BR>
-Allain Thivillon 
-<A HREF="mailto:Allain.Thivillon@alma.fr">&lt;Allain.Thivillon@alma.fr&gt;</A>,<BR>
-Gero Treuner 
-<A HREF="mailto:gero@faveve.uni-stuttgart.de">&lt;gero@faveve.uni-stuttgart.de&gt;</A>,<BR>
-Vsevolod Volkov 
-<A HREF="mailto:vvv@lucky.net">&lt;vvv@lucky.net&gt;</A>,<BR>
-Ken Weinert 
-<A HREF="mailto:kenw@ihs.com">&lt;kenw@ihs.com&gt;</A></P>
-
-<H2><A NAME="ss7.2">7.2</A> <A HREF="manual.html#toc7.2">About this document</A>
-</H2>
-
-<P>This document was written in SGML, and then rendered using the
-<A HREF="http://www.sgmltools.org/">sgml-tools</A> package.</P>
-
-<HR>
-Next
-<A HREF="manual-6.html">Previous</A>
-<A HREF="manual.html#toc7">Contents</A>
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual.html mutt-1.4/doc/manual.html
--- mutt-1.4.orig/doc/manual.html	Wed May 29 11:29:58 2002
+++ mutt-1.4/doc/manual.html	Thu Jan  1 01:00:00 1970
@@ -1,123 +0,0 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
-<HTML>
-<HEAD>
- <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
- <TITLE>The Mutt E-Mail Client</TITLE>
- <LINK HREF="manual-1.html" REL=next>
-
-
-</HEAD>
-<BODY>
-<A HREF="manual-1.html">Next</A>
-Previous
-Contents
-<HR>
-<H1>The Mutt E-Mail Client</H1>
-
-<H2>by Michael Elkins 
-<A HREF="mailto:me@cs.hmc.edu">&lt;me@cs.hmc.edu&gt;</A></H2>version 1.4
-<HR>
-<EM>``All mail clients suck.  This one just sucks less.'' -me, circa 1995</EM>
-<HR>
-<P>
-<H2><A NAME="toc1">1.</A> <A HREF="manual-1.html">Introduction</A></H2>
-
-<UL>
-<LI><A NAME="toc1.1">1.1</A> <A HREF="manual-1.html#ss1.1">Mutt Home Page</A>
-<LI><A NAME="toc1.2">1.2</A> <A HREF="manual-1.html#ss1.2">Mailing Lists</A>
-<LI><A NAME="toc1.3">1.3</A> <A HREF="manual-1.html#ss1.3">Software Distribution Sites</A>
-<LI><A NAME="toc1.4">1.4</A> <A HREF="manual-1.html#ss1.4">IRC</A>
-<LI><A NAME="toc1.5">1.5</A> <A HREF="manual-1.html#ss1.5">USENET</A>
-<LI><A NAME="toc1.6">1.6</A> <A HREF="manual-1.html#ss1.6">Copyright</A>
-</UL>
-<P>
-<H2><A NAME="toc2">2.</A> <A HREF="manual-2.html">Getting Started</A></H2>
-
-<UL>
-<LI><A NAME="toc2.1">2.1</A> <A HREF="manual-2.html#ss2.1">Moving Around in Menus</A>
-<LI><A NAME="toc2.2">2.2</A> <A HREF="manual-2.html#ss2.2">Editing Input Fields</A>
-<LI><A NAME="toc2.3">2.3</A> <A HREF="manual-2.html#ss2.3">Reading Mail - The Index and Pager</A>
-<LI><A NAME="toc2.4">2.4</A> <A HREF="manual-2.html#ss2.4">Sending Mail</A>
-<LI><A NAME="toc2.5">2.5</A> <A HREF="manual-2.html#ss2.5">Forwarding and Bouncing Mail</A>
-<LI><A NAME="toc2.6">2.6</A> <A HREF="manual-2.html#ss2.6">Postponing Mail</A>
-</UL>
-<P>
-<H2><A NAME="toc3">3.</A> <A HREF="manual-3.html">Configuration</A></H2>
-
-<UL>
-<LI><A NAME="toc3.1">3.1</A> <A HREF="manual-3.html#ss3.1">Syntax of Initialization Files</A>
-<LI><A NAME="toc3.2">3.2</A> <A HREF="manual-3.html#ss3.2">Defining/Using aliases</A>
-<LI><A NAME="toc3.3">3.3</A> <A HREF="manual-3.html#ss3.3">Changing the default key bindings</A>
-<LI><A NAME="toc3.4">3.4</A> <A HREF="manual-3.html#ss3.4">Defining aliases for character sets </A>
-<LI><A NAME="toc3.5">3.5</A> <A HREF="manual-3.html#ss3.5">Setting variables based upon mailbox</A>
-<LI><A NAME="toc3.6">3.6</A> <A HREF="manual-3.html#ss3.6">Keyboard macros</A>
-<LI><A NAME="toc3.7">3.7</A> <A HREF="manual-3.html#ss3.7">Using color and mono video attributes</A>
-<LI><A NAME="toc3.8">3.8</A> <A HREF="manual-3.html#ss3.8">Ignoring (weeding) unwanted message headers</A>
-<LI><A NAME="toc3.9">3.9</A> <A HREF="manual-3.html#ss3.9">Mailing lists</A>
-<LI><A NAME="toc3.10">3.10</A> <A HREF="manual-3.html#ss3.10">Using Multiple spool mailboxes</A>
-<LI><A NAME="toc3.11">3.11</A> <A HREF="manual-3.html#ss3.11">Defining mailboxes which receive mail</A>
-<LI><A NAME="toc3.12">3.12</A> <A HREF="manual-3.html#ss3.12">User defined headers</A>
-<LI><A NAME="toc3.13">3.13</A> <A HREF="manual-3.html#ss3.13">Defining the order of headers when viewing messages</A>
-<LI><A NAME="toc3.14">3.14</A> <A HREF="manual-3.html#ss3.14">Specify default save filename</A>
-<LI><A NAME="toc3.15">3.15</A> <A HREF="manual-3.html#ss3.15">Specify default Fcc: mailbox when composing</A>
-<LI><A NAME="toc3.16">3.16</A> <A HREF="manual-3.html#ss3.16">Specify default save filename and default Fcc: mailbox at once</A>
-<LI><A NAME="toc3.17">3.17</A> <A HREF="manual-3.html#ss3.17">Change settings based upon message recipients</A>
-<LI><A NAME="toc3.18">3.18</A> <A HREF="manual-3.html#ss3.18">Change settings before formatting a message</A>
-<LI><A NAME="toc3.19">3.19</A> <A HREF="manual-3.html#ss3.19">Choosing the PGP key of the recipient</A>
-<LI><A NAME="toc3.20">3.20</A> <A HREF="manual-3.html#ss3.20">Adding key sequences to the keyboard buffer</A>
-<LI><A NAME="toc3.21">3.21</A> <A HREF="manual-3.html#ss3.21">Executing functions</A>
-<LI><A NAME="toc3.22">3.22</A> <A HREF="manual-3.html#ss3.22">Message Scoring</A>
-<LI><A NAME="toc3.23">3.23</A> <A HREF="manual-3.html#ss3.23">Setting variables</A>
-<LI><A NAME="toc3.24">3.24</A> <A HREF="manual-3.html#ss3.24">Reading initialization commands from another file</A>
-<LI><A NAME="toc3.25">3.25</A> <A HREF="manual-3.html#ss3.25">Removing hooks</A>
-</UL>
-<P>
-<H2><A NAME="toc4">4.</A> <A HREF="manual-4.html">Advanced Usage</A></H2>
-
-<UL>
-<LI><A NAME="toc4.1">4.1</A> <A HREF="manual-4.html#ss4.1">Regular Expressions</A>
-<LI><A NAME="toc4.2">4.2</A> <A HREF="manual-4.html#ss4.2">Patterns</A>
-<LI><A NAME="toc4.3">4.3</A> <A HREF="manual-4.html#ss4.3">Using Tags</A>
-<LI><A NAME="toc4.4">4.4</A> <A HREF="manual-4.html#ss4.4">Using Hooks</A>
-<LI><A NAME="toc4.5">4.5</A> <A HREF="manual-4.html#ss4.5">External Address Queries</A>
-<LI><A NAME="toc4.6">4.6</A> <A HREF="manual-4.html#ss4.6">Mailbox Formats</A>
-<LI><A NAME="toc4.7">4.7</A> <A HREF="manual-4.html#ss4.7">Mailbox Shortcuts</A>
-<LI><A NAME="toc4.8">4.8</A> <A HREF="manual-4.html#ss4.8">Handling Mailing Lists</A>
-<LI><A NAME="toc4.9">4.9</A> <A HREF="manual-4.html#ss4.9">Delivery Status Notification (DSN) Support</A>
-<LI><A NAME="toc4.10">4.10</A> <A HREF="manual-4.html#ss4.10">POP3 Support (OPTIONAL)</A>
-<LI><A NAME="toc4.11">4.11</A> <A HREF="manual-4.html#ss4.11">IMAP Support (OPTIONAL)</A>
-<LI><A NAME="toc4.12">4.12</A> <A HREF="manual-4.html#ss4.12">Managing multiple IMAP/POP accounts (OPTIONAL)</A>
-<LI><A NAME="toc4.13">4.13</A> <A HREF="manual-4.html#ss4.13">Start a WWW Browser on URLs (EXTERNAL)</A>
-</UL>
-<P>
-<H2><A NAME="toc5">5.</A> <A HREF="manual-5.html">Mutt's MIME Support</A></H2>
-
-<UL>
-<LI><A NAME="toc5.1">5.1</A> <A HREF="manual-5.html#ss5.1">Using MIME in Mutt</A>
-<LI><A NAME="toc5.2">5.2</A> <A HREF="manual-5.html#ss5.2">MIME Type configuration with <CODE>mime.types</CODE></A>
-<LI><A NAME="toc5.3">5.3</A> <A HREF="manual-5.html#ss5.3">MIME Viewer configuration with <CODE>mailcap</CODE></A>
-<LI><A NAME="toc5.4">5.4</A> <A HREF="manual-5.html#ss5.4">MIME Autoview</A>
-<LI><A NAME="toc5.5">5.5</A> <A HREF="manual-5.html#ss5.5">MIME Multipart/Alternative</A>
-</UL>
-<P>
-<H2><A NAME="toc6">6.</A> <A HREF="manual-6.html">Reference</A></H2>
-
-<UL>
-<LI><A NAME="toc6.1">6.1</A> <A HREF="manual-6.html#ss6.1">Command line options</A>
-<LI><A NAME="toc6.2">6.2</A> <A HREF="manual-6.html#ss6.2">Configuration Commands</A>
-<LI><A NAME="toc6.3">6.3</A> <A HREF="manual-6.html#ss6.3">Configuration variables</A>
-<LI><A NAME="toc6.4">6.4</A> <A HREF="manual-6.html#ss6.4">Functions</A>
-</UL>
-<P>
-<H2><A NAME="toc7">7.</A> <A HREF="manual-7.html">Miscellany</A></H2>
-
-<UL>
-<LI><A NAME="toc7.1">7.1</A> <A HREF="manual-7.html#ss7.1">Acknowledgements</A>
-<LI><A NAME="toc7.2">7.2</A> <A HREF="manual-7.html#ss7.2">About this document</A>
-</UL>
-<HR>
-<A HREF="manual-1.html">Next</A>
-Previous
-Contents
-</BODY>
-</HTML>
diff -uNr mutt-1.4.orig/doc/manual.sgml mutt-1.4/doc/manual.sgml
--- mutt-1.4.orig/doc/manual.sgml	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/doc/manual.sgml	Sun Nov  3 21:57:20 2002
@@ -723,6 +723,17 @@
 
 See also the <ref id="postpone" name="&dollar;postpone"> quad-option.
 
+<sect1>Reading news via NNTP<label id="reading_news">
+<p>
+
+If compiled with ``--enable-nntp'' option, Mutt can read news from newsserver
+via NNTP.  You can open a newsgroup with function ``change-newsgroup''
+(default: i).  Default newsserver can be obtained from <em/NNTPSERVER/
+environment variable.  Like other news readers, info about subscribed
+newsgroups is saved in file by <ref id="newsrc" name="&dollar;newsrc">
+variable.  Article headers are cached and can be loaded from file when
+newsgroup entered instead loading from newsserver.
+
 <sect>Configuration
 <p>
 
@@ -3262,6 +3273,26 @@
 editing the body of an outgoing message.
 
 
+<sect2>ask&lowbar;follow&lowbar;up<label id="ask_follow_up">
+<p>
+Type: boolean<newline>
+Default: no
+
+<p>
+If set, Mutt will prompt you for follow-up groups before editing
+the body of an outgoing message.
+
+
+<sect2>ask&lowbar;x&lowbar;comment&lowbar;to<label id="ask_x_comment_to">
+<p>
+Type: boolean<newline>
+Default: no
+
+<p>
+If set, Mutt will prompt you for x-comment-to field before editing
+the body of an outgoing message.
+
+
 <sect2>attach&lowbar;format<label id="attach_format">
 <p>
 Type: string<newline>
@@ -3379,6 +3410,16 @@
 bouncing messages.  Postfix users may wish to unset this variable.
 
 
+<sect2>catchup&lowbar;newsgroup<label id="catchup_newsgroup">
+<p>
+Type: quadoption<newline>
+Default: ask-yes
+
+<p>
+If this variable is <em>set</em>, Mutt will mark all articles in newsgroup
+as read when you quit the newsgroup (catchup newsgroup).
+
+
 <sect2>charset<label id="charset">
 <p>
 Type: string<newline>
@@ -3781,6 +3822,18 @@
 resulting in two copies of the same email for you.
 
 
+<sect2>followup&lowbar;to&lowbar;poster<label id="followup_to_poster">
+<p>
+Type: quadoption<newline>
+Default: ask-yes
+
+<p>
+If this variable is <em>set</em> and the keyword &dquot;poster&dquot; is present in
+<em>Followup-To</em> header, follow-up to newsgroup function is not
+permitted.  The message will be mailed to the submitter of the
+message via mail.
+
+
 <sect2>force&lowbar;name<label id="force_name">
 <p>
 Type: boolean<newline>
@@ -3859,6 +3912,30 @@
 &dquot;Franklin&dquot; to &dquot;Franklin, Steve&dquot;.
 
 
+<sect2>group&lowbar;index&lowbar;format<label id="group_index_format">
+<p>
+Type: string<newline>
+Default: &dquot;&percnt;4C &percnt;M&percnt;N &percnt;5s  &percnt;-45.45f &percnt;d&dquot;
+
+<p>
+This variable allows you to customize the newsgroup browser display to
+your personal taste.  This string is similar to ``<ref id="index_format" name="index&lowbar;format">'', but
+has its own set of printf()-like sequences:
+<p>
+
+<tscreen><verb>
+%C      current newsgroup number
+%d      description of newsgroup (becomes from server)
+%f      newsgroup name
+%M      - if newsgroup not allowed for direct post (moderated for example)
+%N      N if newsgroup is new, u if unsubscribed, blank otherwise
+%n      number of new articles in newsgroup
+%s      number of unread articles in newsgroup
+%>X     right justify the rest of the string and pad with character "X"
+%|X     pad to the end of the line with character "X"
+
+</verb></tscreen>
+
 <sect2>hdrs<label id="hdrs">
 <p>
 Type: boolean<newline>
@@ -4203,6 +4280,7 @@
 <tag>&percnt;E </tag>number of messages in current thread
 <tag>&percnt;f </tag>entire From: line (address + real name)
 <tag>&percnt;F </tag>author name, or recipient name if the message is from you
+<tag>&percnt;g </tag>newsgroup name (if compiled with nntp support)
 <tag>&percnt;i </tag>message-id of the current message
 <tag>&percnt;l </tag>number of lines in the message
 <tag>&percnt;L </tag>If an address in the To or CC header field matches an address
@@ -4220,6 +4298,7 @@
 <tag>&percnt;T </tag>the appropriate character from the <ref id="to_chars" name="&dollar;to&lowbar;chars"> string
 <tag>&percnt;u </tag>user (login) name of the author
 <tag>&percnt;v </tag>first name of the author, or the recipient if the message is from you
+<tag>&percnt;W </tag>name of organization of author (`organization:' field)
 <tag>&percnt;y </tag>`x-label:' field, if present
 <tag>&percnt;Y </tag>`x-label' field, if present, and (1) not at part of a thread tree,
 (2) at the top of a thread, or (3) `x-label' is different from
@@ -4244,6 +4323,24 @@
 See also: ``<ref id="to_chars" name="&dollar;to&lowbar;chars">''.
 
 
+<sect2>inews<label id="inews">
+<p>
+Type: path<newline>
+Default: &dquot;&dquot;
+
+<p>
+If set, specifies the program and arguments used to deliver news posted
+by Mutt.  Otherwise, mutt posts article using current connection to
+news server.  The following printf-style sequence is understood:
+<p>
+
+<tscreen><verb>
+%s      newsserver name
+
+</verb></tscreen><p>
+Example: set inews=&dquot;/usr/local/bin/inews -hS&dquot;
+
+
 <sect2>ispell<label id="ispell">
 <p>
 Type: path<newline>
@@ -4491,6 +4588,17 @@
 be attached to the newly composed message if this option is set.
 
 
+<sect2>mime&lowbar;subject<label id="mime_subject">
+<p>
+Type: boolean<newline>
+Default: yes
+
+<p>
+If <em>unset</em>, 8-bit ``subject:'' line in article header will not be
+encoded according to RFC2047 to base64.  This is useful when message
+is Usenet article, because MIME for news is nonstandard feature.
+
+
 <sect2>mix&lowbar;entry&lowbar;format<label id="mix_entry_format">
 <p>
 Type: string<newline>
@@ -4544,6 +4652,112 @@
 escape sequences see the section on ``<ref id="index_format" name="&dollar;index&lowbar;format">''.
 
 
+<sect2>news&lowbar;cache&lowbar;dir<label id="news_cache_dir">
+<p>
+Type: path<newline>
+Default: &dquot;&tilde;/.mutt&dquot;
+
+<p>
+This variable pointing to directory where Mutt will save cached news
+articles headers in. If <em>unset</em>, headers will not be saved at all
+and will be reloaded each time when you enter to newsgroup.
+
+
+<sect2>news&lowbar;server<label id="news_server">
+<p>
+Type: string<newline>
+Default: &dquot;&dquot;
+
+<p>
+This variable specifies domain name or address of NNTP server. It
+defaults to the newsserver specified in the environment variable
+&dollar;NNTPSERVER or contained in the file /etc/nntpserver.  You can also
+specify username and an alternative port for each newsserver, ie:
+<p>
+&lsqb;nntp&lsqb;s&rsqb;://&rsqb;&lsqb;username&lsqb;:password&rsqb;@&rsqb;newsserver&lsqb;:port&rsqb;
+
+
+<sect2>newsrc<label id="newsrc">
+<p>
+Type: path<newline>
+Default: &dquot;&tilde;/.newsrc&dquot;
+
+<p>
+The file, containing info about subscribed newsgroups - names and
+indexes of read articles.  The following printf-style sequence
+is understood:
+<p>
+
+<tscreen><verb>
+%s      newsserver name
+
+</verb></tscreen>
+
+<sect2>nntp&lowbar;context<label id="nntp_context">
+<p>
+Type: number<newline>
+Default: 1000
+
+<p>
+This variable defines number of articles which will be in index when
+newsgroup entered.  If active newsgroup have more articles than this
+number, oldest articles will be ignored.  Also controls how many
+articles headers will be saved in cache when you quit newsgroup.
+
+
+<sect2>nntp&lowbar;load&lowbar;description<label id="nntp_load_description">
+<p>
+Type: boolean<newline>
+Default: yes
+
+<p>
+This variable controls whether or not descriptions for each newsgroup
+must be loaded when newsgroup is added to list (first time list
+loading or new newsgroup adding).
+
+
+<sect2>nntp&lowbar;user<label id="nntp_user">
+<p>
+Type: string<newline>
+Default: &dquot;&dquot;
+
+<p>
+Your login name on the NNTP server.  If <em>unset</em> and NNTP server requires
+authentification, Mutt will prompt you for your account name when you
+connect to newsserver.
+
+
+<sect2>nntp&lowbar;pass<label id="nntp_pass">
+<p>
+Type: string<newline>
+Default: &dquot;&dquot;
+
+<p>
+Your password for NNTP account.
+
+
+<sect2>nntp&lowbar;poll<label id="nntp_poll">
+<p>
+Type: number<newline>
+Default: 60
+
+<p>
+The time in seconds until any operations on newsgroup except post new
+article will cause recheck for new news.  If set to 0, Mutt will
+recheck newsgroup on each operation in index (stepping, read article,
+etc.).
+
+
+<sect2>nntp&lowbar;reconnect<label id="nntp_reconnect">
+<p>
+Type: quadoption<newline>
+Default: ask-yes
+
+<p>
+Controls whether or not Mutt will try to reconnect to newsserver when
+connection lost.
+
+
 <sect2>pager<label id="pager">
 <p>
 Type: path<newline>
@@ -5240,6 +5454,18 @@
 string after the inclusion of a message which is being replied to.
 
 
+<sect2>post&lowbar;moderated<label id="post_moderated">
+<p>
+Type: quadoption<newline>
+Default: ask-yes
+
+<p>
+If set to <em>yes</em>, Mutt will post article to newsgroup that have
+not permissions to posting (e.g. moderated).  <bf>Note:</bf> if newsserver
+does not support posting to that newsgroup or totally read-only, that
+posting will not have an effect.
+
+
 <sect2>postpone<label id="postpone">
 <p>
 Type: quadoption<newline>
@@ -5723,6 +5949,38 @@
 shell from /etc/passwd is used.
 
 
+<sect2>save&lowbar;unsubscribed<label id="save_unsubscribed">
+<p>
+Type: boolean<newline>
+Default: no
+
+<p>
+When <em>set</em>, info about unsubscribed newsgroups will be saved into
+``newsrc'' file and into cache.
+
+
+<sect2>show&lowbar;new&lowbar;news<label id="show_new_news">
+<p>
+Type: boolean<newline>
+Default: yes
+
+<p>
+If <em>set</em>, newsserver will be asked for new newsgroups on entering
+the browser.  Otherwise, it will be done only once for a newsserver.
+Also controls whether or not number of new articles of subscribed
+newsgroups will be then checked.
+
+
+<sect2>show&lowbar;only&lowbar;unread<label id="show_only_unread">
+<p>
+Type: boolean<newline>
+Default: no
+
+<p>
+If <em>set</em>, only subscribed newsgroups that contain unread articles
+will be displayed in browser.
+
+
 <sect2>sig&lowbar;dashes<label id="sig_dashes">
 <p>
 Type: boolean<newline>
@@ -6189,6 +6447,17 @@
 command.
 
 
+<sect2>use&lowbar;ipv6<label id="use_ipv6">
+<p>
+Type: boolean<newline>
+Default: yes
+
+<p>
+When <em>set</em>, Mutt will look for IPv6 addresses of hosts it tries to
+contact.  If this option is unset, Mutt will restrict itself to IPv4 addresses.
+Normally, the default should work.
+
+
 <sect2>user&lowbar;agent<label id="user_agent">
 <p>
 Type: boolean<newline>
@@ -6283,6 +6552,16 @@
 messages to be sent.  Exim users may wish to use this.
 
 
+<sect2>x&lowbar;comment&lowbar;to<label id="x_comment_to">
+<p>
+Type: boolean<newline>
+Default: no
+
+<p>
+If <em>set</em>, Mutt will add ``X-Comment-To:'' field (that contains full
+name of original article author) to article that followuped to newsgroup.
+
+
 <sect1>Functions<label id="functions">
 <p>
 The following is the list of available functions listed by the mapping
diff -uNr mutt-1.4.orig/doc/manual.sgml.head mutt-1.4/doc/manual.sgml.head
--- mutt-1.4.orig/doc/manual.sgml.head	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/doc/manual.sgml.head	Sun Nov  3 21:57:20 2002
@@ -724,6 +724,17 @@
 
 See also the <ref id="postpone" name="&dollar;postpone"> quad-option.
 
+<sect1>Reading news via NNTP<label id="reading_news">
+<p>
+
+If compiled with ``--enable-nntp'' option, Mutt can read news from newsserver
+via NNTP.  You can open a newsgroup with function ``change-newsgroup''
+(default: i).  Default newsserver can be obtained from <em/NNTPSERVER/
+environment variable.  Like other news readers, info about subscribed
+newsgroups is saved in file by <ref id="newsrc" name="&dollar;newsrc">
+variable.  Article headers are cached and can be loaded from file when
+newsgroup entered instead loading from newsserver.
+
 <sect>Configuration
 <p>
 
diff -uNr mutt-1.4.orig/doc/manual.txt mutt-1.4/doc/manual.txt
--- mutt-1.4.orig/doc/manual.txt	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/doc/manual.txt	Sun Nov  3 21:57:20 2002
@@ -8,6 +8,7 @@
   Table of Contents
 
   1. Introduction
+
      1.1 Mutt Home Page
      1.2 Mailing Lists
      1.3 Software Distribution Sites
@@ -16,6 +17,7 @@
      1.6 Copyright
 
   2. Getting Started
+
      2.1 Moving Around in Menus
      2.2 Editing Input Fields
      2.3 Reading Mail - The Index and Pager
@@ -30,8 +32,10 @@
         2.4.3 Sending anonymous messages via mixmaster.
      2.5 Forwarding and Bouncing Mail
      2.6 Postponing Mail
+     2.7 Reading news via NNTP
 
   3. Configuration
+
      3.1 Syntax of Initialization Files
      3.2 Defining/Using aliases
      3.3 Changing the default key bindings
@@ -59,6 +63,7 @@
      3.25 Removing hooks
 
   4. Advanced Usage
+
      4.1 Regular Expressions
      4.2 Patterns
         4.2.1 Pattern Modifier
@@ -85,12 +90,13 @@
         4.14.4 Encrypted folders
 
   5. Mutt's MIME Support
+
      5.1 Using MIME in Mutt
         5.1.1 Viewing MIME messages in the pager
         5.1.2 The Attachment Menu
         5.1.3 The Compose Menu
-     5.2 MIME Type configuration with mime.types
-     5.3 MIME Viewer configuration with mailcap
+     5.2 MIME Type configuration with
+     5.3 MIME Viewer configuration with
         5.3.1 The Basics of the mailcap file
         5.3.2 Secure use of mailcap
         5.3.3 Advanced mailcap Usage
@@ -102,6 +108,7 @@
      5.5 MIME Multipart/Alternative
 
   6. Reference
+
      6.1 Command line options
      6.2 Configuration Commands
      6.3 Configuration variables
@@ -116,232 +123,254 @@
         6.3.9 ascii_chars
         6.3.10 askbcc
         6.3.11 askcc
-        6.3.12 attach_format
-        6.3.13 attach_sep
-        6.3.14 attach_split
-        6.3.15 attribution
-        6.3.16 autoedit
-        6.3.17 auto_tag
-        6.3.18 beep
-        6.3.19 beep_new
-        6.3.20 bounce_delivered
-        6.3.21 charset
-        6.3.22 check_new
-        6.3.23 collapse_unread
-        6.3.24 uncollapse_jump
-        6.3.25 compose_format
-        6.3.26 confirmappend
-        6.3.27 confirmcreate
-        6.3.28 connect_timeout
-        6.3.29 copy
-        6.3.30 date_format
-        6.3.31 default_hook
-        6.3.32 delete
-        6.3.33 delete_untag
-        6.3.34 digest_collapse
-        6.3.35 display_filter
-        6.3.36 dotlock_program
-        6.3.37 dsn_notify
-        6.3.38 dsn_return
-        6.3.39 duplicate_threads
-        6.3.40 edit_headers
-        6.3.41 editor
-        6.3.42 encode_from
-        6.3.43 envelope_from
-        6.3.44 escape
-        6.3.45 fast_reply
-        6.3.46 fcc_attach
-        6.3.47 fcc_clear
-        6.3.48 folder
-        6.3.49 folder_format
-        6.3.50 followup_to
-        6.3.51 force_name
-        6.3.52 forward_decode
-        6.3.53 forward_format
-        6.3.54 forward_quote
-        6.3.55 from
-        6.3.56 gecos_mask
-        6.3.57 hdrs
-        6.3.58 header
-        6.3.59 help
-        6.3.60 hidden_host
-        6.3.61 hide_limited
-        6.3.62 hide_missing
-        6.3.63 hide_top_limited
-        6.3.64 hide_top_missing
-        6.3.65 history
-        6.3.66 honor_followup_to
-        6.3.67 hostname
-        6.3.68 ignore_list_reply_to
-        6.3.69 imap_authenticators
-        6.3.70 imap_delim_chars
-        6.3.71 imap_force_ssl
-        6.3.72 imap_home_namespace
-        6.3.73 imap_keepalive
-        6.3.74 imap_list_subscribed
-        6.3.75 imap_pass
-        6.3.76 imap_passive
-        6.3.77 imap_peek
-        6.3.78 imap_servernoise
-        6.3.79 imap_user
-        6.3.80 implicit_autoview
-        6.3.81 include
-        6.3.82 indent_string
-        6.3.83 index_format
-        6.3.84 ispell
-        6.3.85 keep_flagged
-        6.3.86 locale
-        6.3.87 mail_check
-        6.3.88 mailcap_path
-        6.3.89 mailcap_sanitize
-        6.3.90 maildir_trash
-        6.3.91 mark_old
-        6.3.92 markers
-        6.3.93 mask
-        6.3.94 mbox
-        6.3.95 mbox_type
-        6.3.96 metoo
-        6.3.97 menu_scroll
-        6.3.98 meta_key
-        6.3.99 mh_purge
-        6.3.100 mh_seq_flagged
-        6.3.101 mh_seq_replied
-        6.3.102 mh_seq_unseen
-        6.3.103 mime_forward
-        6.3.104 mime_forward_decode
-        6.3.105 mime_forward_rest
-        6.3.106 mix_entry_format
-        6.3.107 mixmaster
-        6.3.108 move
-        6.3.109 message_format
-        6.3.110 pager
-        6.3.111 pager_context
-        6.3.112 pager_format
-        6.3.113 pager_index_lines
-        6.3.114 pager_stop
-        6.3.115 pgp_autosign
-        6.3.116 pgp_autoencrypt
-        6.3.117 pgp_ignore_subkeys
-        6.3.118 pgp_entry_format
-        6.3.119 pgp_good_sign
-        6.3.120 pgp_long_ids
-        6.3.121 pgp_replyencrypt
-        6.3.122 pgp_replysign
-        6.3.123 pgp_replysignencrypted
-        6.3.124 pgp_retainable_sigs
-        6.3.125 pgp_show_unusable
-        6.3.126 pgp_sign_as
-        6.3.127 pgp_strict_enc
-        6.3.128 pgp_timeout
-        6.3.129 pgp_verify_sig
-        6.3.130 pgp_sort_keys
-        6.3.131 pgp_create_traditional
-        6.3.132 pgp_decode_command
-        6.3.133 pgp_getkeys_command
-        6.3.134 pgp_verify_command
-        6.3.135 pgp_decrypt_command
-        6.3.136 pgp_clearsign_command
-        6.3.137 pgp_sign_command
-        6.3.138 pgp_encrypt_sign_command
-        6.3.139 pgp_encrypt_only_command
-        6.3.140 pgp_import_command
-        6.3.141 pgp_export_command
-        6.3.142 pgp_verify_key_command
-        6.3.143 pgp_list_secring_command
-        6.3.144 pgp_list_pubring_command
-        6.3.145 forward_decrypt
-        6.3.146 ssl_starttls
-        6.3.147 certificate_file
-        6.3.148 ssl_usesystemcerts
-        6.3.149 entropy_file
-        6.3.150 ssl_use_sslv2
-        6.3.151 ssl_use_sslv3
-        6.3.152 ssl_use_tlsv1
-        6.3.153 pipe_split
-        6.3.154 pipe_decode
-        6.3.155 pipe_sep
-        6.3.156 pop_authenticators
-        6.3.157 pop_auth_try_all
-        6.3.158 pop_checkinterval
-        6.3.159 pop_delete
-        6.3.160 pop_host
-        6.3.161 pop_last
-        6.3.162 pop_reconnect
-        6.3.163 pop_user
-        6.3.164 pop_pass
-        6.3.165 post_indent_string
-        6.3.166 postpone
-        6.3.167 postponed
-        6.3.168 preconnect
-        6.3.169 print
-        6.3.170 print_command
-        6.3.171 print_decode
-        6.3.172 print_split
-        6.3.173 prompt_after
-        6.3.174 query_command
-        6.3.175 quit
-        6.3.176 quote_regexp
-        6.3.177 read_inc
-        6.3.178 read_only
-        6.3.179 realname
-        6.3.180 recall
-        6.3.181 record
-        6.3.182 reply_regexp
-        6.3.183 reply_self
-        6.3.184 reply_to
-        6.3.185 resolve
-        6.3.186 reverse_alias
-        6.3.187 reverse_name
-        6.3.188 reverse_realname
-        6.3.189 rfc2047_parameters
-        6.3.190 save_address
-        6.3.191 save_empty
-        6.3.192 save_name
-        6.3.193 score
-        6.3.194 score_threshold_delete
-        6.3.195 score_threshold_flag
-        6.3.196 score_threshold_read
-        6.3.197 send_charset
-        6.3.198 sendmail
-        6.3.199 sendmail_wait
-        6.3.200 shell
-        6.3.201 sig_dashes
-        6.3.202 sig_on_top
-        6.3.203 signature
-        6.3.204 simple_search
-        6.3.205 smart_wrap
-        6.3.206 smileys
-        6.3.207 sleep_time
-        6.3.208 sort
-        6.3.209 sort_alias
-        6.3.210 sort_aux
-        6.3.211 sort_browser
-        6.3.212 sort_re
-        6.3.213 spoolfile
-        6.3.214 status_chars
-        6.3.215 status_format
-        6.3.216 status_on_top
-        6.3.217 strict_threads
-        6.3.218 suspend
-        6.3.219 text_flowed
-        6.3.220 thread_received
-        6.3.221 thorough_search
-        6.3.222 tilde
-        6.3.223 timeout
-        6.3.224 tmpdir
-        6.3.225 to_chars
-        6.3.226 tunnel
-        6.3.227 use_8bitmime
-        6.3.228 use_domain
-        6.3.229 use_from
-        6.3.230 user_agent
-        6.3.231 visual
-        6.3.232 wait_key
-        6.3.233 weed
-        6.3.234 wrap_search
-        6.3.235 wrapmargin
-        6.3.236 write_inc
-        6.3.237 write_bcc
+        6.3.12 ask_follow_up
+        6.3.13 ask_x_comment_to
+        6.3.14 attach_format
+        6.3.15 attach_sep
+        6.3.16 attach_split
+        6.3.17 attribution
+        6.3.18 autoedit
+        6.3.19 auto_tag
+        6.3.20 beep
+        6.3.21 beep_new
+        6.3.22 bounce_delivered
+        6.3.23 catchup_newsgroup
+        6.3.24 charset
+        6.3.25 check_new
+        6.3.26 collapse_unread
+        6.3.27 uncollapse_jump
+        6.3.28 compose_format
+        6.3.29 confirmappend
+        6.3.30 confirmcreate
+        6.3.31 connect_timeout
+        6.3.32 copy
+        6.3.33 date_format
+        6.3.34 default_hook
+        6.3.35 delete
+        6.3.36 delete_untag
+        6.3.37 digest_collapse
+        6.3.38 display_filter
+        6.3.39 dotlock_program
+        6.3.40 dsn_notify
+        6.3.41 dsn_return
+        6.3.42 duplicate_threads
+        6.3.43 edit_headers
+        6.3.44 editor
+        6.3.45 encode_from
+        6.3.46 envelope_from
+        6.3.47 escape
+        6.3.48 fast_reply
+        6.3.49 fcc_attach
+        6.3.50 fcc_clear
+        6.3.51 folder
+        6.3.52 folder_format
+        6.3.53 followup_to
+        6.3.54 followup_to_poster
+        6.3.55 force_name
+        6.3.56 forward_decode
+        6.3.57 forward_format
+        6.3.58 forward_quote
+        6.3.59 from
+        6.3.60 gecos_mask
+        6.3.61 group_index_format
+        6.3.62 hdrs
+        6.3.63 header
+        6.3.64 help
+        6.3.65 hidden_host
+        6.3.66 hide_limited
+        6.3.67 hide_missing
+        6.3.68 hide_top_limited
+        6.3.69 hide_top_missing
+        6.3.70 history
+        6.3.71 honor_followup_to
+        6.3.72 hostname
+        6.3.73 ignore_list_reply_to
+        6.3.74 imap_authenticators
+        6.3.75 imap_delim_chars
+        6.3.76 imap_force_ssl
+        6.3.77 imap_home_namespace
+        6.3.78 imap_keepalive
+        6.3.79 imap_list_subscribed
+        6.3.80 imap_pass
+        6.3.81 imap_passive
+        6.3.82 imap_peek
+        6.3.83 imap_servernoise
+        6.3.84 imap_user
+        6.3.85 implicit_autoview
+        6.3.86 include
+        6.3.87 indent_string
+        6.3.88 index_format
+        6.3.89 inews
+        6.3.90 ispell
+        6.3.91 keep_flagged
+        6.3.92 locale
+        6.3.93 mail_check
+        6.3.94 mailcap_path
+        6.3.95 mailcap_sanitize
+        6.3.96 maildir_trash
+        6.3.97 mark_old
+        6.3.98 markers
+        6.3.99 mask
+        6.3.100 mbox
+        6.3.101 mbox_type
+        6.3.102 metoo
+        6.3.103 menu_scroll
+        6.3.104 meta_key
+        6.3.105 mh_purge
+        6.3.106 mh_seq_flagged
+        6.3.107 mh_seq_replied
+        6.3.108 mh_seq_unseen
+        6.3.109 mime_forward
+        6.3.110 mime_forward_decode
+        6.3.111 mime_forward_rest
+        6.3.112 mime_subject
+        6.3.113 mix_entry_format
+        6.3.114 mixmaster
+        6.3.115 move
+        6.3.116 message_format
+        6.3.117 news_cache_dir
+        6.3.118 news_server
+        6.3.119 newsrc
+        6.3.120 nntp_context
+        6.3.121 nntp_load_description
+        6.3.122 nntp_user
+        6.3.123 nntp_pass
+        6.3.124 nntp_poll
+        6.3.125 nntp_reconnect
+        6.3.126 pager
+        6.3.127 pager_context
+        6.3.128 pager_format
+        6.3.129 pager_index_lines
+        6.3.130 pager_stop
+        6.3.131 pgp_autosign
+        6.3.132 pgp_autoencrypt
+        6.3.133 pgp_ignore_subkeys
+        6.3.134 pgp_entry_format
+        6.3.135 pgp_good_sign
+        6.3.136 pgp_long_ids
+        6.3.137 pgp_replyencrypt
+        6.3.138 pgp_replysign
+        6.3.139 pgp_replysignencrypted
+        6.3.140 pgp_retainable_sigs
+        6.3.141 pgp_show_unusable
+        6.3.142 pgp_sign_as
+        6.3.143 pgp_strict_enc
+        6.3.144 pgp_timeout
+        6.3.145 pgp_verify_sig
+        6.3.146 pgp_sort_keys
+        6.3.147 pgp_create_traditional
+        6.3.148 pgp_decode_command
+        6.3.149 pgp_getkeys_command
+        6.3.150 pgp_verify_command
+        6.3.151 pgp_decrypt_command
+        6.3.152 pgp_clearsign_command
+        6.3.153 pgp_sign_command
+        6.3.154 pgp_encrypt_sign_command
+        6.3.155 pgp_encrypt_only_command
+        6.3.156 pgp_import_command
+        6.3.157 pgp_export_command
+        6.3.158 pgp_verify_key_command
+        6.3.159 pgp_list_secring_command
+        6.3.160 pgp_list_pubring_command
+        6.3.161 forward_decrypt
+        6.3.162 ssl_starttls
+        6.3.163 certificate_file
+        6.3.164 ssl_usesystemcerts
+        6.3.165 entropy_file
+        6.3.166 ssl_use_sslv2
+        6.3.167 ssl_use_sslv3
+        6.3.168 ssl_use_tlsv1
+        6.3.169 pipe_split
+        6.3.170 pipe_decode
+        6.3.171 pipe_sep
+        6.3.172 pop_authenticators
+        6.3.173 pop_auth_try_all
+        6.3.174 pop_checkinterval
+        6.3.175 pop_delete
+        6.3.176 pop_host
+        6.3.177 pop_last
+        6.3.178 pop_reconnect
+        6.3.179 pop_user
+        6.3.180 pop_pass
+        6.3.181 post_indent_string
+        6.3.182 post_moderated
+        6.3.183 postpone
+        6.3.184 postponed
+        6.3.185 preconnect
+        6.3.186 print
+        6.3.187 print_command
+        6.3.188 print_decode
+        6.3.189 print_split
+        6.3.190 prompt_after
+        6.3.191 query_command
+        6.3.192 quit
+        6.3.193 quote_regexp
+        6.3.194 read_inc
+        6.3.195 read_only
+        6.3.196 realname
+        6.3.197 recall
+        6.3.198 record
+        6.3.199 reply_regexp
+        6.3.200 reply_self
+        6.3.201 reply_to
+        6.3.202 resolve
+        6.3.203 reverse_alias
+        6.3.204 reverse_name
+        6.3.205 reverse_realname
+        6.3.206 rfc2047_parameters
+        6.3.207 save_address
+        6.3.208 save_empty
+        6.3.209 save_name
+        6.3.210 score
+        6.3.211 score_threshold_delete
+        6.3.212 score_threshold_flag
+        6.3.213 score_threshold_read
+        6.3.214 send_charset
+        6.3.215 sendmail
+        6.3.216 sendmail_wait
+        6.3.217 shell
+        6.3.218 save_unsubscribed
+        6.3.219 show_new_news
+        6.3.220 show_only_unread
+        6.3.221 sig_dashes
+        6.3.222 sig_on_top
+        6.3.223 signature
+        6.3.224 simple_search
+        6.3.225 smart_wrap
+        6.3.226 smileys
+        6.3.227 sleep_time
+        6.3.228 sort
+        6.3.229 sort_alias
+        6.3.230 sort_aux
+        6.3.231 sort_browser
+        6.3.232 sort_re
+        6.3.233 spoolfile
+        6.3.234 status_chars
+        6.3.235 status_format
+        6.3.236 status_on_top
+        6.3.237 strict_threads
+        6.3.238 suspend
+        6.3.239 text_flowed
+        6.3.240 thread_received
+        6.3.241 thorough_search
+        6.3.242 tilde
+        6.3.243 timeout
+        6.3.244 tmpdir
+        6.3.245 to_chars
+        6.3.246 tunnel
+        6.3.247 use_8bitmime
+        6.3.248 use_domain
+        6.3.249 use_from
+        6.3.250 use_ipv6
+        6.3.251 user_agent
+        6.3.252 visual
+        6.3.253 wait_key
+        6.3.254 weed
+        6.3.255 wrap_search
+        6.3.256 wrapmargin
+        6.3.257 write_inc
+        6.3.258 write_bcc
+        6.3.259 x_comment_to
      6.4 Functions
         6.4.1 generic
         6.4.2 index
@@ -356,6 +385,7 @@
         6.4.11 editor
 
   7. Miscellany
+
      7.1 Acknowledgements
      7.2 About this document
 
@@ -501,35 +531,35 @@
 
   22..33..11..  TThhee MMeessssaaggee IInnddeexx
 
-  c               change to a different mailbox
-  ESC c           change to a folder in read-only mode
-  C               copy the current message to another mailbox
-  ESC C           decode a message and copy it to a folder
-  ESC s           decode a message and save it to a folder
-  D               delete messages matching a pattern
-  d               delete the current message
-  F               mark as important
-  l               show messages matching a pattern
-  N               mark message as new
-  o               change the current sort method
-  O               reverse sort the mailbox
-  q               save changes and exit
-  s               save-message
-  T               tag messages matching a pattern
-  t               toggle the tag on a message
-  ESC t           toggle tag on entire message thread
-  U               undelete messages matching a pattern
-  u               undelete-message
-  v               view-attachments
-  x               abort changes and exit
-  <Return>        display-message
-  <Tab>           jump to the next new message
-  @               show the author's full e-mail address
-  $               save changes to mailbox
-  /               search
-  ESC /           search-reverse
-  ^L              clear and redraw the screen
-  ^T              untag messages matching a pattern
+       c               change to a different mailbox
+       ESC c           change to a folder in read-only mode
+       C               copy the current message to another mailbox
+       ESC C           decode a message and copy it to a folder
+       ESC s           decode a message and save it to a folder
+       D               delete messages matching a pattern
+       d               delete the current message
+       F               mark as important
+       l               show messages matching a pattern
+       N               mark message as new
+       o               change the current sort method
+       O               reverse sort the mailbox
+       q               save changes and exit
+       s               save-message
+       T               tag messages matching a pattern
+       t               toggle the tag on a message
+       ESC t           toggle tag on entire message thread
+       U               undelete messages matching a pattern
+       u               undelete-message
+       v               view-attachments
+       x               abort changes and exit
+       <Return>        display-message
+       <Tab>           jump to the next new message
+       @               show the author's full e-mail address
+       $               save changes to mailbox
+       /               search
+       ESC /           search-reverse
+       ^L              clear and redraw the screen
+       ^T              untag messages matching a pattern
 
   22..33..11..11..  SSttaattuuss FFllaaggss
 
@@ -581,18 +611,18 @@
   messages.  The pager is very similar to the Unix program _l_e_s_s though
   not nearly as featureful.
 
-       <Return>        go down one line
-       <Space>         display the next page (or next message if at the end of a message)
-       -               go back to the previous page
-       n               search for next match
-       S               skip beyond quoted text
-       T               toggle display of quoted text
-       ?               show keybindings
-       /               search for a regular expression (pattern)
-       ESC /           search backwards for a regular expression
-       \               toggle search pattern coloring
-       ^               jump to the top of the message
-       $               jump to the bottom of the message
+  <Return>        go down one line
+  <Space>         display the next page (or next message if at the end of a message)
+  -               go back to the previous page
+  n               search for next match
+  S               skip beyond quoted text
+  T               toggle display of quoted text
+  ?               show keybindings
+  /               search for a regular expression (pattern)
+  ESC /           search backwards for a regular expression
+  \               toggle search pattern coloring
+  ^               jump to the top of the message
+  $               jump to the bottom of the message
 
   In addition, many of the functions from the _i_n_d_e_x are available in the
   pager, such as _d_e_l_e_t_e_-_m_e_s_s_a_g_e or _c_o_p_y_-_m_e_s_s_a_g_e (this is one advantage
@@ -783,13 +813,13 @@
   The following bindings are available in the _i_n_d_e_x for sending
   messages.
 
-  m       compose         compose a new message
-  r       reply           reply to sender
-  g       group-reply     reply to all recipients
-  L       list-reply      reply to mailing list address
-  f       forward         forward message
-  b       bounce          bounce (remail) message
-  ESC k   mail-key        mail a PGP public key to someone
+       m       compose         compose a new message
+       r       reply           reply to sender
+       g       group-reply     reply to all recipients
+       L       list-reply      reply to mailing list address
+       f       forward         forward message
+       b       bounce          bounce (remail) message
+       ESC k   mail-key        mail a PGP public key to someone
 
   Bouncing a message sends the message as is to the recipient you
   specify.  Forwarding a message allows you to add comments or modify
@@ -966,6 +996,7 @@
   original recipients.  Forwarding a message, on the other hand, allows
   you to modify the message before it is resent (for example, by adding
   your own comments).
+
   The following keys are bound by default:
 
        f       forward         forward message
@@ -1009,6 +1040,16 @@
 
   See also the ``$postpone'' quad-option.
 
+  22..77..  RReeaaddiinngg nneewwss vviiaa NNNNTTPP
+
+  If compiled with ``--enable-nntp'' option, Mutt can read news from
+  newsserver via NNTP.  You can open a newsgroup with function ``change-
+  newsgroup'' (default: i).  Default newsserver can be obtained from
+  _N_N_T_P_S_E_R_V_E_R environment variable.  Like other news readers, info about
+  subscribed newsgroups is saved in file by ``$newsrc'' variable.
+  Article headers are cached and can be loaded from file when newsgroup
+  entered instead loading from newsserver.
+
   33..  CCoonnffiigguurraattiioonn
 
   While the default configuration (or ``preferences'') make Mutt usable
@@ -1023,6 +1064,7 @@
 
   .muttrc is the file where you will usually place your ``commands'' to
   configure Mutt.
+
   In addition, mutt supports version specific configuration files that
   are parsed instead of the default files as explained above.  For
   instance, if your system has a Muttrc-0.88 file in the system
@@ -1125,6 +1167,7 @@
   that Mutt will happily append aliases to any file, but in order for
   the new aliases to take effect you need to explicitly ``source'' this
   file too.
+
   For example:
 
        source /usr/local/share/Mutt.aliases
@@ -1184,30 +1227,31 @@
   _\_c_A and _\_c_a are all equivalent.  An alternative form is to specify the
   key as a three digit octal number prefixed with a ``\'' (for example
   _\_1_7_7 is equivalent to _\_c_?).
+
   In addition, _k_e_y may consist of:
 
-       \t              tab
-       <tab>           tab
-       \r              carriage return
-       \n              newline
-       \e              escape
-       <esc>           escape
-       <up>            up arrow
-       <down>          down arrow
-       <left>          left arrow
-       <right>         right arrow
-       <pageup>        Page Up
-       <pagedown>      Page Down
-       <backspace>     Backspace
-       <delete>        Delete
-       <insert>        Insert
-       <enter>         Enter
-       <return>        Return
-       <home>          Home
-       <end>           End
-       <space>         Space bar
-       <f1>            function key 1
-       <f10>           function key 10
+  \t              tab
+  <tab>           tab
+  \r              carriage return
+  \n              newline
+  \e              escape
+  <esc>           escape
+  <up>            up arrow
+  <down>          down arrow
+  <left>          left arrow
+  <right>         right arrow
+  <pageup>        Page Up
+  <pagedown>      Page Down
+  <backspace>     Backspace
+  <delete>        Delete
+  <insert>        Insert
+  <enter>         Enter
+  <return>        Return
+  <home>          Home
+  <end>           End
+  <space>         Space bar
+  <f1>            function key 1
+  <f10>           function key 10
 
   _k_e_y does not need to be enclosed in quotes unless it contains a space
   (`` '').
@@ -1476,6 +1520,7 @@
   The ``unlists'' command is used to remove a token from the list of
   known and subscribed mailing-lists. Use ``unlists *'' to remove all
   tokens.
+
   To remove a mailing list from the list of subscribed mailing lists,
   but keep it on the list of known mailing lists, use ``unsubscribe''.
 
@@ -1540,7 +1585,6 @@
   NNoottee::  space characters are _n_o_t allowed between the keyword and the
   colon (``:'').  The standard for electronic mail (RFC822) says that
   space is illegal there, so Mutt enforces the rule.
-
   If you would like to add a header field to a single message, you
   should either set the ``edit_headers'' variable, or use the _e_d_i_t_-
   _h_e_a_d_e_r_s function (default: ``E'') in the send-menu so that you can
@@ -1653,8 +1697,8 @@
 
   Example:
 
-       message-hook ~A 'set pager=builtin'
-       message-hook '~f freshmeat-news' 'set pager="less \"+/^  subject: .*\""'
+  message-hook ~A 'set pager=builtin'
+  message-hook '~f freshmeat-news' 'set pager="less \"+/^  subject: .*\""'
 
   33..1199..  CChhoooossiinngg tthhee PPGGPP kkeeyy ooff tthhee rreecciippiieenntt
 
@@ -2059,7 +2103,7 @@
   match the ``^Junk +From +Me$'' and it must be from either ``Jim
   +Somebody'' or ``Ed +SomeoneElse'':
 
-   '~s "^Junk +From +Me$" ~f ("Jim +Somebody"|"Ed +SomeoneElse")'
+        '~s "^Junk +From +Me$" ~f ("Jim +Somebody"|"Ed +SomeoneElse")'
 
   44..22..33..  SSeeaarrcchhiinngg bbyy DDaattee
 
@@ -2113,7 +2157,7 @@
 
   Example: to select messages less than 1 month old, you would use
 
-       Limit to messages matching: ~d <1m
+  Limit to messages matching: ~d <1m
 
   NNoottee:: all dates used when searching are relative to the llooccaall time
   zone, so unless you change the setting of your ``$index_format'' to
@@ -2222,10 +2266,10 @@
 
   An example multiple response output:
 
-       Searching database ... 20 entries ... 3 matching:
-       me@cs.hmc.edu           Michael Elkins  mutt dude
-       blong@fiction.net       Brandon Long    mutt and more
-       roessler@guug.de        Thomas Roessler mutt pgp
+  Searching database ... 20 entries ... 3 matching:
+  me@cs.hmc.edu           Michael Elkins  mutt dude
+  blong@fiction.net       Brandon Long    mutt and more
+  roessler@guug.de        Thomas Roessler mutt pgp
 
   There are two mechanisms for accessing the query function of mutt.
   One is to do a query from the index menu using the query function
@@ -2279,7 +2323,6 @@
   messages are chosen in such a way they are unique, even when two
   programs are writing the mailbox over NFS, which means that no file
   locking is needed.
-
   44..77..  MMaaiillbbooxx SShhoorrttccuuttss
 
   There are a number of built in shortcuts which refer to specific
@@ -2405,7 +2448,6 @@
 
   You can select an alternative port by specifying it with the server,
   ie: pop://popserver:port/.
-
   You can also specify different username for each folder, ie:
   pop://username@popserver[:port]/.
 
@@ -2456,6 +2498,7 @@
 
   Pine-compatible notation is also supported, ie
   {[username@]imapserver[:port][/ssl]}path/to/folder
+
   Note that not all servers use / as the hierarchy separator.  Mutt
   should correctly notice which separator is being used by the server
   and convert paths accordingly.
@@ -2469,8 +2512,8 @@
   So, you'll want to carefully tune the ``$mail_check'' and ``$timeout''
   variables. Personally I use
 
-       set mail_check=90
-       set timeout=15
+  set mail_check=90
+  set timeout=15
 
   with relatively good results over my slow modem line.
 
@@ -2528,7 +2571,6 @@
      authentication on the IMAP server, for all authenticators. This is
      overridden by an explicit username in the mailbox path (ie by using
      a mailbox name of the form {user@host}).
-
     ``$imap_pass'' - a password which you may preset, used by all
      authentication methods where a password is needed.
 
@@ -3043,6 +3085,7 @@
   attempting to print an image/gif, and you have the following entries
   in your mailcap file, Mutt will search for an entry with the print
   command:
+
        image/*;        xv %s
        image/gif;      ; print= anytopnm %s | pnmtops | lpr; \
                        nametemplate=%s.gif
@@ -3056,9 +3099,9 @@
   can then use the test feature to determine which viewer to use
   interactively depending on your environment.
 
-       text/html;      netscape -remote 'openURL(%s)' ; test=RunningX
-       text/html;      lynx %s; nametemplate=%s.html
-       text/html;      lynx -dump %s; nametemplate=%s.html; copiousoutput
+  text/html;      netscape -remote 'openURL(%s)' ; test=RunningX
+  text/html;      lynx %s; nametemplate=%s.html
+  text/html;      lynx -dump %s; nametemplate=%s.html; copiousoutput
 
   For ``Autoview'', Mutt will choose the third entry because of the
   copiousoutput tag.  For interactive viewing, Mutt will run the program
@@ -3210,25 +3253,25 @@
   spool mailbox.  However, it is possible to read other mailboxes and to
   send messages from the command line as well.
 
-       -a      attach a file to a message
-       -b      specify a blind carbon-copy (BCC) address
-       -c      specify a carbon-copy (Cc) address
-       -e      specify a config command to be run after initilization files are read
-       -f      specify a mailbox to load
-       -F      specify an alternate file to read initialization commands
-       -h      print help on command line options
-       -H      specify a draft file from which to read a header and body
-       -i      specify a file to include in a message composition
-       -m      specify a default mailbox type
-       -n      do not read the system Muttrc
-       -p      recall a postponed message
-       -R      open mailbox in read-only mode
-       -s      specify a subject (enclose in quotes if it contains spaces)
-       -v      show version number and compile-time definitions
-       -x      simulate the mailx(1) compose mode
-       -y      show a menu containing the files specified by the mailboxes command
-       -z      exit immediately if there are no messages in the mailbox
-       -Z      open the first folder with new message,exit immediately if none
+  -a      attach a file to a message
+  -b      specify a blind carbon-copy (BCC) address
+  -c      specify a carbon-copy (Cc) address
+  -e      specify a config command to be run after initilization files are read
+  -f      specify a mailbox to load
+  -F      specify an alternate file to read initialization commands
+  -h      print help on command line options
+  -H      specify a draft file from which to read a header and body
+  -i      specify a file to include in a message composition
+  -m      specify a default mailbox type
+  -n      do not read the system Muttrc
+  -p      recall a postponed message
+  -R      open mailbox in read-only mode
+  -s      specify a subject (enclose in quotes if it contains spaces)
+  -v      show version number and compile-time definitions
+  -x      simulate the mailx(1) compose mode
+  -y      show a menu containing the files specified by the mailboxes command
+  -z      exit immediately if there are no messages in the mailbox
+  -Z      open the first folder with new message,exit immediately if none
 
   To read messages in a mailbox
 
@@ -3454,7 +3497,23 @@
   If set, Mutt will prompt you for carbon-copy (Cc) recipients before
   editing the body of an outgoing message.
 
-  66..33..1122..  aattttaacchh__ffoorrmmaatt
+  66..33..1122..  aasskk__ffoollllooww__uupp
+
+  Type: boolean
+  Default: no
+
+  If set, Mutt will prompt you for follow-up groups before editing the
+  body of an outgoing message.
+
+  66..33..1133..  aasskk__xx__ccoommmmeenntt__ttoo
+
+  Type: boolean
+  Default: no
+
+  If set, Mutt will prompt you for x-comment-to field before editing the
+  body of an outgoing message.
+
+  66..33..1144..  aattttaacchh__ffoorrmmaatt
 
   Type: string
   Default: "%u%D%I %t%4n %T%.40d%> [%.7m/%.10M, %.6e%?C?, %C?, %s] "
@@ -3490,7 +3549,7 @@
      %%||XX
         pad to the end of the line with character "X"
 
-  66..33..1133..  aattttaacchh__sseepp
+  66..33..1155..  aattttaacchh__sseepp
 
   Type: string
   Default: "\n"
@@ -3498,7 +3557,7 @@
   The separator to add between attachments when operating (saving,
   printing, piping, etc) on a list of tagged attachments.
 
-  66..33..1144..  aattttaacchh__sspplliitt
+  66..33..1166..  aattttaacchh__sspplliitt
 
   Type: boolean
   Default: yes
@@ -3509,7 +3568,7 @@
   ````$attach_sep'''' separator is added after each attachment. When
   set, Mutt will operate on the attachments one by one.
 
-  66..33..1155..  aattttrriibbuuttiioonn
+  66..33..1177..  aattttrriibbuuttiioonn
 
   Type: string
   Default: "On %d, %n wrote:"
@@ -3518,7 +3577,7 @@
   in a reply.  For a full listing of defined printf()-like sequences see
   the section on ````$index_format''''.
 
-  66..33..1166..  aauuttooeeddiitt
+  66..33..1188..  aauuttooeeddiitt
 
   Type: boolean
   Default: no
@@ -3530,7 +3589,7 @@
 
   Also see ````$fast_reply''''.
 
-  66..33..1177..  aauuttoo__ttaagg
+  66..33..1199..  aauuttoo__ttaagg
 
   Type: boolean
   Default: no
@@ -3540,14 +3599,14 @@
   must first use the tag-prefix function (default: ";") to make the next
   function apply to all tagged messages.
 
-  66..33..1188..  bbeeeepp
+  66..33..2200..  bbeeeepp
 
   Type: boolean
   Default: yes
 
   When this variable is set, mutt will beep when an error occurs.
 
-  66..33..1199..  bbeeeepp__nneeww
+  66..33..2211..  bbeeeepp__nneeww
 
   Type: boolean
   Default: no
@@ -3556,7 +3615,7 @@
   notifying you of new mail.  This is independent of the setting of the
   ````$beep'''' variable.
 
-  66..33..2200..  bboouunnccee__ddeelliivveerreedd
+  66..33..2222..  bboouunnccee__ddeelliivveerreedd
 
   Type: boolean
   Default: yes
@@ -3564,14 +3623,22 @@
   When this variable is set, mutt will include Delivered-To headers when
   bouncing messages.  Postfix users may wish to unset this variable.
 
-  66..33..2211..  cchhaarrsseett
+  66..33..2233..  ccaattcchhuupp__nneewwssggrroouupp
+
+  Type: quadoption
+  Default: ask-yes
+
+  If this variable is _s_e_t, Mutt will mark all articles in newsgroup as
+  read when you quit the newsgroup (catchup newsgroup).
+
+  66..33..2244..  cchhaarrsseett
 
   Type: string
   Default: ""
 
   Character set your terminal uses to display and enter textual data.
 
-  66..33..2222..  cchheecckk__nneeww
+  66..33..2255..  cchheecckk__nneeww
 
   Type: boolean
   Default: yes
@@ -3584,7 +3651,7 @@
   file to see if it has already been looked at.  If _c_h_e_c_k___n_e_w is _u_n_s_e_t,
   no check for new mail is performed while the mailbox is open.
 
-  66..33..2233..  ccoollllaappssee__uunnrreeaadd
+  66..33..2266..  ccoollllaappssee__uunnrreeaadd
 
   Type: boolean
   Default: yes
@@ -3592,7 +3659,7 @@
   When _u_n_s_e_t, Mutt will not collapse a thread if it contains any unread
   messages.
 
-  66..33..2244..  uunnccoollllaappssee__jjuummpp
+  66..33..2277..  uunnccoollllaappssee__jjuummpp
 
   Type: boolean
   Default: no
@@ -3600,7 +3667,7 @@
   When _s_e_t, Mutt will jump to the next unread message, if any, when the
   current thread is _u_ncollapsed.
 
-  66..33..2255..  ccoommppoossee__ffoorrmmaatt
+  66..33..2288..  ccoommppoossee__ffoorrmmaatt
 
   Type: string
   Default: "-- Mutt: Compose  [Approx. msg size: %l   Atts: %a]%>-"
@@ -3620,7 +3687,7 @@
   See the text describing the ````$status_format'''' option for more
   information on how to set ````$compose_format''''.
 
-  66..33..2266..  ccoonnffiirrmmaappppeenndd
+  66..33..2299..  ccoonnffiirrmmaappppeenndd
 
   Type: boolean
   Default: yes
@@ -3628,7 +3695,7 @@
   When set, Mutt will prompt for confirmation when appending messages to
   an existing mailbox.
 
-  66..33..2277..  ccoonnffiirrmmccrreeaattee
+  66..33..3300..  ccoonnffiirrmmccrreeaattee
 
   Type: boolean
   Default: yes
@@ -3636,7 +3703,7 @@
   When set, Mutt will prompt for confirmation when saving messages to a
   mailbox which does not yet exist before creating it.
 
-  66..33..2288..  ccoonnnneecctt__ttiimmeeoouutt
+  66..33..3311..  ccoonnnneecctt__ttiimmeeoouutt
 
   Type: number
   Default: 30
@@ -3646,7 +3713,7 @@
   negative value causes Mutt to wait indefinitely for the connection to
   succeed.
 
-  66..33..2299..  ccooppyy
+  66..33..3322..  ccooppyy
 
   Type: quadoption
   Default: yes
@@ -3655,7 +3722,7 @@
   will be saved for later references.  Also see ````$record'''',
   ````$save_name'''', ````$force_name'''' and ````fcc-hook''''.
 
-  66..33..3300..  ddaattee__ffoorrmmaatt
+  66..33..3333..  ddaattee__ffoorrmmaatt
 
   Type: string
   Default: "!%a, %b %d, %Y at %I:%M:%S%p %Z"
@@ -3672,7 +3739,7 @@
   rest of the string are expanded in the _C locale (that is in US
   English).
 
-  66..33..3311..  ddeeffaauulltt__hhooookk
+  66..33..3344..  ddeeffaauulltt__hhooookk
 
   Type: string
   Default: "~f %s !~P | (~P ~C %s)"
@@ -3687,7 +3754,7 @@
   matches ````$alternates'''') and is to or cc'ed to a user matching the
   given regular expression.
 
-  66..33..3322..  ddeelleettee
+  66..33..3355..  ddeelleettee
 
   Type: quadoption
   Default: ask-yes
@@ -3697,7 +3764,7 @@
   will automatically be purged without prompting.  If set to _n_o,
   messages marked for deletion will be kept in the mailbox.
 
-  66..33..3333..  ddeelleettee__uunnttaagg
+  66..33..3366..  ddeelleettee__uunnttaagg
 
   Type: boolean
   Default: yes
@@ -3706,7 +3773,7 @@
   deletion.  This applies when you either explicitly delete a message,
   or when you save it to another folder.
 
-  66..33..3344..  ddiiggeesstt__ccoollllaappssee
+  66..33..3377..  ddiiggeesstt__ccoollllaappssee
 
   Type: boolean
   Default: yes
@@ -3715,7 +3782,7 @@
   subparts of individual messages in a digest.  To see these subparts,
   press 'v' on that menu.
 
-  66..33..3355..  ddiissppllaayy__ffiilltteerr
+  66..33..3388..  ddiissppllaayy__ffiilltteerr
 
   Type: path
   Default: ""
@@ -3724,14 +3791,14 @@
   is viewed it is passed as standard input to ``$display_filter'', and
   the filtered message is read from the standard output.
 
-  66..33..3366..  ddoottlloocckk__pprrooggrraamm
+  66..33..3399..  ddoottlloocckk__pprrooggrraamm
 
   Type: path
   Default: "/usr/local/bin/mutt_dotlock"
 
   Contains the path of the mutt_dotlock (8) binary to be used by mutt.
 
-  66..33..3377..  ddssnn__nnoottiiffyy
+  66..33..4400..  ddssnn__nnoottiiffyy
 
   Type: string
   Default: ""
@@ -3747,7 +3814,7 @@
 
   Example: set dsn_notify="failure,delay"
 
-  66..33..3388..  ddssnn__rreettuurrnn
+  66..33..4411..  ddssnn__rreettuurrnn
 
   Type: string
   Default: ""
@@ -3761,7 +3828,7 @@
 
   Example: set dsn_return=hdrs
 
-  66..33..3399..  dduupplliiccaattee__tthhrreeaaddss
+  66..33..4422..  dduupplliiccaattee__tthhrreeaaddss
 
   Type: boolean
   Default: yes
@@ -3771,7 +3838,7 @@
   indicate that it thinks they are duplicates of each other with an
   equals sign in the thread diagram.
 
-  66..33..4400..  eeddiitt__hheeaaddeerrss
+  66..33..4433..  eeddiitt__hheeaaddeerrss
 
   Type: boolean
   Default: no
@@ -3779,7 +3846,7 @@
   This option allows you to edit the header of your outgoing messages
   along with the body of your message.
 
-  66..33..4411..  eeddiittoorr
+  66..33..4444..  eeddiittoorr
 
   Type: path
   Default: ""
@@ -3788,7 +3855,7 @@
   the value of the EDITOR or VISUAL environment variable, or to the
   string "vi".
 
-  66..33..4422..  eennccooddee__ffrroomm
+  66..33..4455..  eennccooddee__ffrroomm
 
   Type: boolean
   Default: no
@@ -3798,7 +3865,7 @@
   tampering certain mail delivery and transport agents tend to do with
   messages.
 
-  66..33..4433..  eennvveellooppee__ffrroomm
+  66..33..4466..  eennvveellooppee__ffrroomm
 
   Type: boolean
   Default: no
@@ -3809,14 +3876,14 @@
   if you are using that switch in ``$sendmail'' yourself, or if the
   sendmail on your machine doesn't support that command line switch.
 
-  66..33..4444..  eessccaappee
+  66..33..4477..  eessccaappee
 
   Type: string
   Default: "~"
 
   Escape character to use for functions in the builtin editor.
 
-  66..33..4455..  ffaasstt__rreeppllyy
+  66..33..4488..  ffaasstt__rreeppllyy
 
   Type: boolean
   Default: no
@@ -3828,7 +3895,7 @@
   NNoottee:: this variable has no effect when the ````$autoedit'''' variable
   is set.
 
-  66..33..4466..  ffcccc__aattttaacchh
+  66..33..4499..  ffcccc__aattttaacchh
 
   Type: boolean
   Default: yes
@@ -3836,7 +3903,7 @@
   This variable controls whether or not attachments on outgoing messages
   are saved along with the main body of your message.
 
-  66..33..4477..  ffcccc__cclleeaarr
+  66..33..5500..  ffcccc__cclleeaarr
 
   Type: boolean
   Default: no
@@ -3844,7 +3911,7 @@
   When this variable is _s_e_t, FCCs will be stored unencrypted and
   unsigned, even when the actual message is encrypted and/or signed.
 
-  66..33..4488..  ffoollddeerr
+  66..33..5511..  ffoollddeerr
 
   Type: path
   Default: "~/Mail"
@@ -3856,7 +3923,7 @@
   `+' or `=' for any other variables since expansion takes place during
   the `set' command.
 
-  66..33..4499..  ffoollddeerr__ffoorrmmaatt
+  66..33..5522..  ffoollddeerr__ffoorrmmaatt
 
   Type: string
   Default: "%2C %t %N %F %2l %-8.8u %-8.8g %8s %d %f"
@@ -3891,7 +3958,7 @@
      %%||XX
         pad to the end of the line with character "X"
 
-  66..33..5500..  ffoolllloowwuupp__ttoo
+  66..33..5533..  ffoolllloowwuupp__ttoo
 
   Type: boolean
   Default: yes
@@ -3911,7 +3978,16 @@
   subscribed list will be sent to both the list and your address,
   resulting in two copies of the same email for you.
 
-  66..33..5511..  ffoorrccee__nnaammee
+  66..33..5544..  ffoolllloowwuupp__ttoo__ppoosstteerr
+
+  Type: quadoption
+  Default: ask-yes
+
+  If this variable is _s_e_t and the keyword "poster" is present in
+  _F_o_l_l_o_w_u_p_-_T_o header, follow-up to newsgroup function is not permitted.
+  The message will be mailed to the submitter of the message via mail.
+
+  66..33..5555..  ffoorrccee__nnaammee
 
   Type: boolean
   Default: no
@@ -3922,7 +3998,7 @@
 
   Also see the ````$record'''' variable.
 
-  66..33..5522..  ffoorrwwaarrdd__ddeeccooddee
+  66..33..5566..  ffoorrwwaarrdd__ddeeccooddee
 
   Type: boolean
   Default: yes
@@ -3932,7 +4008,7 @@
   This variable is only used, if ````$mime_forward'''' is _u_n_s_e_t,
   otherwise ````$mime_forward_decode'''' is used instead.
 
-  66..33..5533..  ffoorrwwaarrdd__ffoorrmmaatt
+  66..33..5577..  ffoorrwwaarrdd__ffoorrmmaatt
 
   Type: string
   Default: "[%a: %s]"
@@ -3941,15 +4017,16 @@
   It uses the same format sequences as the ````$index_format''''
   variable.
 
-  66..33..5544..  ffoorrwwaarrdd__qquuoottee
+  66..33..5588..  ffoorrwwaarrdd__qquuoottee
 
   Type: boolean
   Default: no
+
   When _s_e_t forwarded messages included in the main body of the message
   (when ````$mime_forward'''' is _u_n_s_e_t) will be quoted using
   ````$indent_string''''.
 
-  66..33..5555..  ffrroomm
+  66..33..5599..  ffrroomm
 
   Type: e-mail address
   Default: ""
@@ -3960,7 +4037,7 @@
 
   Defaults to the EMAIL environment variable's content.
 
-  66..33..5566..  ggeeccooss__mmaasskk
+  66..33..6600..  ggeeccooss__mmaasskk
 
   Type: regular expression
   Default: "^[^,]*"
@@ -3977,7 +4054,26 @@
   gecos_mask to a regular expression that will match the whole name so
   mutt will expand "Franklin" to "Franklin, Steve".
 
-  66..33..5577..  hhddrrss
+  66..33..6611..  ggrroouupp__iinnddeexx__ffoorrmmaatt
+
+  Type: string
+  Default: "%4C %M%N %5s  %-45.45f %d"
+
+  This variable allows you to customize the newsgroup browser display to
+  your personal taste.  This string is similar to ````index_format'''',
+  but has its own set of printf()-like sequences:
+
+       %C      current newsgroup number
+       %d      description of newsgroup (becomes from server)
+       %f      newsgroup name
+       %M      - if newsgroup not allowed for direct post (moderated for example)
+       %N      N if newsgroup is new, u if unsubscribed, blank otherwise
+       %n      number of new articles in newsgroup
+       %s      number of unread articles in newsgroup
+       %>X     right justify the rest of the string and pad with character "X"
+       %|X     pad to the end of the line with character "X"
+
+  66..33..6622..  hhddrrss
 
   Type: boolean
   Default: yes
@@ -3987,7 +4083,7 @@
   a new message or replying in order to take effect.  If set, the user
   defined header fields are added to every new message.
 
-  66..33..5588..  hheeaaddeerr
+  66..33..6633..  hheeaaddeerr
 
   Type: boolean
   Default: no
@@ -3996,7 +4092,7 @@
   message you are replying to into the edit buffer.  The ````$weed''''
   setting applies.
 
-  66..33..5599..  hheellpp
+  66..33..6644..  hheellpp
 
   Type: boolean
   Default: yes
@@ -4010,7 +4106,7 @@
   Since this variable is primarily aimed at new users, neither of these
   should present a major problem.
 
-  66..33..6600..  hhiiddddeenn__hhoosstt
+  66..33..6655..  hhiiddddeenn__hhoosstt
 
   Type: boolean
   Default: no
@@ -4020,7 +4116,7 @@
   not affect the generation of Message-IDs, and it will not lead to the
   cut-off of first-level domains.
 
-  66..33..6611..  hhiiddee__lliimmiitteedd
+  66..33..6666..  hhiiddee__lliimmiitteedd
 
   Type: boolean
   Default: no
@@ -4028,7 +4124,7 @@
   When set, mutt will not show the presence of missing messages in the
   thread tree.
 
-  66..33..6622..  hhiiddee__mmiissssiinngg
+  66..33..6677..  hhiiddee__mmiissssiinngg
 
   Type: boolean
   Default: yes
@@ -4036,7 +4132,7 @@
   When set, mutt will not show the presence of messages that are hidden
   by limiting, in the thread tree.
 
-  66..33..6633..  hhiiddee__ttoopp__lliimmiitteedd
+  66..33..6688..  hhiiddee__ttoopp__lliimmiitteedd
 
   Type: boolean
   Default: no
@@ -4045,7 +4141,7 @@
   top of threads in the thread tree.  Note that when ``$hide_limited''
   is set, this option will have no effect.
 
-  66..33..6644..  hhiiddee__ttoopp__mmiissssiinngg
+  66..33..6699..  hhiiddee__ttoopp__mmiissssiinngg
 
   Type: boolean
   Default: yes
@@ -4054,7 +4150,7 @@
   by limiting, at the top of threads in the thread tree.Note that when
   ``$hide_missing'' is set, this option will have no effect.
 
-  66..33..6655..  hhiissttoorryy
+  66..33..7700..  hhiissttoorryy
 
   Type: number
   Default: 10
@@ -4063,7 +4159,7 @@
   the string history buffer. The buffer is cleared each time the
   variable is set.
 
-  66..33..6666..  hhoonnoorr__ffoolllloowwuupp__ttoo
+  66..33..7711..  hhoonnoorr__ffoolllloowwuupp__ttoo
 
   Type: quadoption
   Default: yes
@@ -4071,7 +4167,7 @@
   This variable controls whether or not a Mail-Followup-To header is
   honored when group-replying to a message.
 
-  66..33..6677..  hhoossttnnaammee
+  66..33..7722..  hhoossttnnaammee
 
   Type: string
   Default: ""
@@ -4080,7 +4176,7 @@
   addresses.  This overrides the compile time definition obtained from
   /etc/resolv.conf.
 
-  66..33..6688..  iiggnnoorree__lliisstt__rreeppllyy__ttoo
+  66..33..7733..  iiggnnoorree__lliisstt__rreeppllyy__ttoo
 
   Type: boolean
   Default: no
@@ -4093,7 +4189,7 @@
   list when this option is set, use the _l_i_s_t_-_r_e_p_l_y function; _g_r_o_u_p_-_r_e_p_l_y
   will reply to both the sender and the list.
 
-  66..33..6699..  iimmaapp__aauutthheennttiiccaattoorrss
+  66..33..7744..  iimmaapp__aauutthheennttiiccaattoorrss
 
   Type: string
   Default: ""
@@ -4111,7 +4207,7 @@
   previous methods are unavailable. If a method is available but
   authentication fails, mutt will not connect to the IMAP server.
 
-  66..33..7700..  iimmaapp__ddeelliimm__cchhaarrss
+  66..33..7755..  iimmaapp__ddeelliimm__cchhaarrss
 
   Type: string
   Default: "/."
@@ -4120,7 +4216,7 @@
   folder separators for displaying IMAP paths. In particular it helps in
   using the '=' shortcut for your _f_o_l_d_e_r variable.
 
-  66..33..7711..  iimmaapp__ffoorrccee__ssssll
+  66..33..7766..  iimmaapp__ffoorrccee__ssssll
 
   Type: boolean
   Default: no
@@ -4128,7 +4224,7 @@
   If this variable is set, Mutt will always use SSL when connecting to
   IMAP servers.
 
-  66..33..7722..  iimmaapp__hhoommee__nnaammeessppaaccee
+  66..33..7777..  iimmaapp__hhoommee__nnaammeessppaaccee
 
   Type: string
   Default: ""
@@ -4137,7 +4233,7 @@
   the IMAP browser. If you see something else, you may set this variable
   to the IMAP path to your folders.
 
-  66..33..7733..  iimmaapp__kkeeeeppaalliivvee
+  66..33..7788..  iimmaapp__kkeeeeppaalliivvee
 
   Type: number
   Default: 900
@@ -4151,7 +4247,7 @@
   find yourself getting disconnected from your IMAP server due to
   inactivity.
 
-  66..33..7744..  iimmaapp__lliisstt__ssuubbssccrriibbeedd
+  66..33..7799..  iimmaapp__lliisstt__ssuubbssccrriibbeedd
 
   Type: boolean
   Default: no
@@ -4160,7 +4256,7 @@
   only subscribed folders or all folders.  This can be toggled in the
   IMAP browser with the _t_o_g_g_l_e_-_s_u_b_s_c_r_i_b_e_d command.
 
-  66..33..7755..  iimmaapp__ppaassss
+  66..33..8800..  iimmaapp__ppaassss
 
   Type: string
   Default: ""
@@ -4171,7 +4267,7 @@
   secure machine, because the superuser can read your muttrc even if you
   are the only one who can read the file.
 
-  66..33..7766..  iimmaapp__ppaassssiivvee
+  66..33..8811..  iimmaapp__ppaassssiivvee
 
   Type: boolean
   Default: yes
@@ -4182,7 +4278,7 @@
   user/password pairs on mutt invocation, or if opening the connection
   is slow.
 
-  66..33..7777..  iimmaapp__ppeeeekk
+  66..33..8822..  iimmaapp__ppeeeekk
 
   Type: boolean
   Default: yes
@@ -4192,7 +4288,7 @@
   but can make closing an IMAP folder somewhat slower. This option
   exists to appease spead freaks.
 
-  66..33..7788..  iimmaapp__sseerrvveerrnnooiissee
+  66..33..8833..  iimmaapp__sseerrvveerrnnooiissee
 
   Type: boolean
   Default: yes
@@ -4202,7 +4298,7 @@
   due to configuration problems on the server which are out of the
   users' hands, you may wish to suppress them at some point.
 
-  66..33..7799..  iimmaapp__uusseerr
+  66..33..8844..  iimmaapp__uusseerr
 
   Type: string
   Default: ""
@@ -4211,7 +4307,7 @@
 
   This variable defaults to your user name on the local machine.
 
-  66..33..8800..  iimmpplliicciitt__aauuttoovviieeww
+  66..33..8855..  iimmpplliicciitt__aauuttoovviieeww
 
   Type: boolean
   Default: no
@@ -4222,7 +4318,7 @@
   the viewer defined in that entry to convert the body part to text
   form.
 
-  66..33..8811..  iinncclluuddee
+  66..33..8866..  iinncclluuddee
 
   Type: quadoption
   Default: ask-yes
@@ -4230,7 +4326,7 @@
   Controls whether or not a copy of the message(s) you are replying to
   is included in your reply.
 
-  66..33..8822..  iinnddeenntt__ssttrriinngg
+  66..33..8877..  iinnddeenntt__ssttrriinngg
 
   Type: string
   Default: "> "
@@ -4239,7 +4335,7 @@
   message to which you are replying.  You are strongly encouraged not to
   change this value, as it tends to agitate the more fanatical netizens.
 
-  66..33..8833..  iinnddeexx__ffoorrmmaatt
+  66..33..8888..  iinnddeexx__ffoorrmmaatt
 
   Type: string
   Default: "%4C %Z %{%b %d} %-15.15L (%4l) %s"
@@ -4276,6 +4372,8 @@
 
      %%FF author name, or recipient name if the message is from you
 
+     %%gg newsgroup name (if compiled with nntp support)
+
      %%ii message-id of the current message
 
      %%ll number of lines in the message
@@ -4308,6 +4406,8 @@
      %%vv first name of the author, or the recipient if the message is
         from you
 
+     %%WW name of organization of author (`organization:' field)
+
      %%yy `x-label:' field, if present
 
      %%YY `x-label' field, if present, and (1) not at part of a thread
@@ -4343,14 +4443,28 @@
 
   See also: ````$to_chars''''.
 
-  66..33..8844..  iissppeellll
+  66..33..8899..  iinneewwss
+
+  Type: path
+  Default: ""
+
+  If set, specifies the program and arguments used to deliver news
+  posted by Mutt.  Otherwise, mutt posts article using current
+  connection to news server.  The following printf-style sequence is
+  understood:
+
+       %s      newsserver name
+
+  Example: set inews="/usr/local/bin/inews -hS"
+
+  66..33..9900..  iissppeellll
 
   Type: path
   Default: "/usr/bin/ispell"
 
   How to invoke ispell (GNU's spell-checking software).
 
-  66..33..8855..  kkeeeepp__ffllaaggggeedd
+  66..33..9911..  kkeeeepp__ffllaaggggeedd
 
   Type: boolean
   Default: no
@@ -4359,14 +4473,15 @@
   spool mailbox to your ````$mbox'''' mailbox, or as a result of a
   ````mbox-hook'''' command.
 
-  66..33..8866..  llooccaallee
+  66..33..9922..  llooccaallee
 
   Type: string
   Default: "C"
 
   The locale used by _s_t_r_f_t_i_m_e_(_3_) to format dates. Legal values are the
   strings your system accepts for the locale variable _L_C___T_I_M_E.
-  66..33..8877..  mmaaiill__cchheecckk
+
+  66..33..9933..  mmaaiill__cchheecckk
 
   Type: number
   Default: 5
@@ -4374,7 +4489,7 @@
   This variable configures how often (in seconds) mutt should look for
   new mail.
 
-  66..33..8888..  mmaaiillccaapp__ppaatthh
+  66..33..9944..  mmaaiillccaapp__ppaatthh
 
   Type: string
   Default: ""
@@ -4382,7 +4497,7 @@
   This variable specifies which files to consult when attempting to
   display MIME bodies not directly supported by Mutt.
 
-  66..33..8899..  mmaaiillccaapp__ssaanniittiizzee
+  66..33..9955..  mmaaiillccaapp__ssaanniittiizzee
 
   Type: boolean
   Default: yes
@@ -4394,7 +4509,7 @@
   DDOONN''TT CCHHAANNGGEE TTHHIISS SSEETTTTIINNGG UUNNLLEESSSS YYOOUU AARREE RREEAALLLLYY SSUURREE WWHHAATT YYOOUU AARREE
   DDOOIINNGG!!
 
-  66..33..9900..  mmaaiillddiirr__ttrraasshh
+  66..33..9966..  mmaaiillddiirr__ttrraasshh
 
   Type: boolean
   Default: no
@@ -4404,7 +4519,7 @@
   maildir-style mailboxes.  Setting it will have no effect on other
   mailbox types.
 
-  66..33..9911..  mmaarrkk__oolldd
+  66..33..9977..  mmaarrkk__oolldd
 
   Type: boolean
   Default: yes
@@ -4417,7 +4532,7 @@
   make Mutt treat all unread messages as new only, you can unset this
   variable.
 
-  66..33..9922..  mmaarrkkeerrss
+  66..33..9988..  mmaarrkkeerrss
 
   Type: boolean
   Default: yes
@@ -4426,7 +4541,7 @@
   ``+'' marker is displayed at the beginning of wrapped lines. Also see
   the ````$smart_wrap'''' variable.
 
-  66..33..9933..  mmaasskk
+  66..33..9999..  mmaasskk
 
   Type: regular expression
   Default: "!^\.[^.]"
@@ -4435,15 +4550,14 @@
   the _n_o_t operator ``!''.  Only files whose names match this mask will
   be shown. The match is always case-sensitive.
 
-  66..33..9944..  mmbbooxx
+  66..33..110000..  mmbbooxx
 
   Type: path
   Default: "~/mbox"
 
   This specifies the folder into which read mail in your
   ````$spoolfile'''' folder will be appended.
-
-  66..33..9955..  mmbbooxx__ttyyppee
+  66..33..110011..  mmbbooxx__ttyyppee
 
   Type: folder magic
   Default: mbox
@@ -4451,7 +4565,7 @@
   The default mailbox type used when creating new folders. May be any of
   mbox, MMDF, MH and Maildir.
 
-  66..33..9966..  mmeettoooo
+  66..33..110022..  mmeettoooo
 
   Type: boolean
   Default: no
@@ -4459,7 +4573,7 @@
   If unset, Mutt will remove your address from the list of recipients
   when replying to a message.
 
-  66..33..9977..  mmeennuu__ssccrroollll
+  66..33..110033..  mmeennuu__ssccrroollll
 
   Type: boolean
   Default: no
@@ -4469,7 +4583,7 @@
   the next or previous page of the menu is displayed (useful for slow
   links to avoid many redraws).
 
-  66..33..9988..  mmeettaa__kkeeyy
+  66..33..110044..  mmeettaa__kkeeyy
 
   Type: boolean
   Default: no
@@ -4482,7 +4596,7 @@
   high bit from ``0xf4'' is ``0x74'', which is the ASCII character
   ``x''.
 
-  66..33..9999..  mmhh__ppuurrggee
+  66..33..110055..  mmhh__ppuurrggee
 
   Type: boolean
   Default: no
@@ -4491,31 +4605,32 @@
   to _,_<_o_l_d _f_i_l_e _n_a_m_e_> in mh folders instead of really deleting them.  If
   the variable is set, the message files will simply be deleted.
 
-  66..33..110000..  mmhh__sseeqq__ffllaaggggeedd
+  66..33..110066..  mmhh__sseeqq__ffllaaggggeedd
 
   Type: string
   Default: "flagged"
 
   The name of the MH sequence used for flagged messages.
 
-  66..33..110011..  mmhh__sseeqq__rreepplliieedd
+  66..33..110077..  mmhh__sseeqq__rreepplliieedd
 
   Type: string
   Default: "replied"
 
   The name of the MH sequence used to tag replied messages.
 
-  66..33..110022..  mmhh__sseeqq__uunnsseeeenn
+  66..33..110088..  mmhh__sseeqq__uunnsseeeenn
 
   Type: string
   Default: "unseen"
 
   The name of the MH sequence used for unseen messages.
 
-  66..33..110033..  mmiimmee__ffoorrwwaarrdd
+  66..33..110099..  mmiimmee__ffoorrwwaarrdd
 
   Type: quadoption
   Default: no
+
   When set, the message you are forwarding will be attached as a
   separate MIME part instead of included in the main body of the
   message.  This is useful for forwarding MIME messages so the receiver
@@ -4525,7 +4640,7 @@
 
   Also see ````$forward_decode'''' and ````$mime_forward_decode''''.
 
-  66..33..110044..  mmiimmee__ffoorrwwaarrdd__ddeeccooddee
+  66..33..111100..  mmiimmee__ffoorrwwaarrdd__ddeeccooddee
 
   Type: boolean
   Default: no
@@ -4534,7 +4649,7 @@
   forwarding a message while ````$mime_forward'''' is _s_e_t. Otherwise
   ````$forward_decode'''' is used instead.
 
-  66..33..110055..  mmiimmee__ffoorrwwaarrdd__rreesstt
+  66..33..111111..  mmiimmee__ffoorrwwaarrdd__rreesstt
 
   Type: quadoption
   Default: yes
@@ -4544,7 +4659,16 @@
   manner will be attached to the newly composed message if this option
   is set.
 
-  66..33..110066..  mmiixx__eennttrryy__ffoorrmmaatt
+  66..33..111122..  mmiimmee__ssuubbjjeecctt
+
+  Type: boolean
+  Default: yes
+
+  If _u_n_s_e_t, 8-bit ``subject:'' line in article header will not be
+  encoded according to RFC2047 to base64.  This is useful when message
+  is Usenet article, because MIME for news is nonstandard feature.
+
+  66..33..111133..  mmiixx__eennttrryy__ffoorrmmaatt
 
   Type: string
   Default: "%4n %c %-16s %a"
@@ -4561,7 +4685,7 @@
 
      %%aa The remailer's e-mail address.
 
-  66..33..110077..  mmiixxmmaasstteerr
+  66..33..111144..  mmiixxmmaasstteerr
 
   Type: path
   Default: "mixmaster"
@@ -4571,7 +4695,7 @@
   of known remailers, and to finally send a message through the
   mixmaster chain.
 
-  66..33..110088..  mmoovvee
+  66..33..111155..  mmoovvee
 
   Type: quadoption
   Default: ask-no
@@ -4580,7 +4704,7 @@
   from your spool mailbox to your ````$mbox'''' mailbox, or as a result
   of a ````mbox-hook'''' command.
 
-  66..33..110099..  mmeessssaaggee__ffoorrmmaatt
+  66..33..111166..  mmeessssaaggee__ffoorrmmaatt
 
   Type: string
   Default: "%s"
@@ -4589,7 +4713,92 @@
   attachments of type message/rfc822.  For a full listing of defined
   escape sequences see the section on ````$index_format''''.
 
-  66..33..111100..  ppaaggeerr
+  66..33..111177..  nneewwss__ccaacchhee__ddiirr
+
+  Type: path
+  Default: "~/.mutt"
+
+  This variable pointing to directory where Mutt will save cached news
+  articles headers in. If _u_n_s_e_t, headers will not be saved at all and
+  will be reloaded each time when you enter to newsgroup.
+
+  66..33..111188..  nneewwss__sseerrvveerr
+
+  Type: string
+  Default: ""
+
+  This variable specifies domain name or address of NNTP server. It
+  defaults to the newsserver specified in the environment variable
+  $NNTPSERVER or contained in the file /etc/nntpserver.  You can also
+  specify username and an alternative port for each newsserver, ie:
+
+  [nntp[s]://][username[:password]@]newsserver[:port]
+
+  66..33..111199..  nneewwssrrcc
+
+  Type: path
+  Default: "~/.newsrc"
+
+  The file, containing info about subscribed newsgroups - names and
+  indexes of read articles.  The following printf-style sequence is
+  understood:
+
+       %s      newsserver name
+
+  66..33..112200..  nnnnttpp__ccoonntteexxtt
+
+  Type: number
+  Default: 1000
+
+  This variable defines number of articles which will be in index when
+  newsgroup entered.  If active newsgroup have more articles than this
+  number, oldest articles will be ignored.  Also controls how many
+  articles headers will be saved in cache when you quit newsgroup.
+
+  66..33..112211..  nnnnttpp__llooaadd__ddeessccrriippttiioonn
+
+  Type: boolean
+  Default: yes
+
+  This variable controls whether or not descriptions for each newsgroup
+  must be loaded when newsgroup is added to list (first time list
+  loading or new newsgroup adding).
+
+  66..33..112222..  nnnnttpp__uusseerr
+
+  Type: string
+  Default: ""
+
+  Your login name on the NNTP server.  If _u_n_s_e_t and NNTP server requires
+  authentification, Mutt will prompt you for your account name when you
+  connect to newsserver.
+
+  66..33..112233..  nnnnttpp__ppaassss
+
+  Type: string
+  Default: ""
+
+  Your password for NNTP account.
+
+  66..33..112244..  nnnnttpp__ppoollll
+
+  Type: number
+  Default: 60
+
+  The time in seconds until any operations on newsgroup except post new
+  article will cause recheck for new news.  If set to 0, Mutt will
+  recheck newsgroup on each operation in index (stepping, read article,
+  etc.).
+
+  66..33..112255..  nnnnttpp__rreeccoonnnneecctt
+
+  Type: quadoption
+  Default: ask-yes
+
+  Controls whether or not Mutt will try to reconnect to newsserver when
+  connection lost.
+
+  66..33..112266..  ppaaggeerr
 
   Type: path
   Default: "builtin"
@@ -4604,7 +4813,7 @@
   directly from the pager, and screen resizes cause lines longer than
   the screen width to be badly formatted in the help menu.
 
-  66..33..111111..  ppaaggeerr__ccoonntteexxtt
+  66..33..112277..  ppaaggeerr__ccoonntteexxtt
 
   Type: number
   Default: 0
@@ -4614,7 +4823,7 @@
   default, Mutt will display the line after the last one on the screen
   at the top of the next page (0 lines of context).
 
-  66..33..111122..  ppaaggeerr__ffoorrmmaatt
+  66..33..112288..  ppaaggeerr__ffoorrmmaatt
 
   Type: string
   Default: "-%Z- %C/%m: %-20.20n   %s"
@@ -4624,7 +4833,7 @@
   pager.  The valid sequences are listed in the ````$index_format''''
   section.
 
-  66..33..111133..  ppaaggeerr__iinnddeexx__lliinneess
+  66..33..112299..  ppaaggeerr__iinnddeexx__lliinneess
 
   Type: number
   Default: 0
@@ -4641,7 +4850,7 @@
   less than _p_a_g_e_r___i_n_d_e_x___l_i_n_e_s, then the index will only use as many
   lines as it needs.
 
-  66..33..111144..  ppaaggeerr__ssttoopp
+  66..33..113300..  ppaaggeerr__ssttoopp
 
   Type: boolean
   Default: no
@@ -4649,7 +4858,7 @@
   When set, the internal-pager will nnoott move to the next message when
   you are at the end of a message and invoke the _n_e_x_t_-_p_a_g_e function.
 
-  66..33..111155..  ppggpp__aauuttoossiiggnn
+  66..33..113311..  ppggpp__aauuttoossiiggnn
 
   Type: boolean
   Default: no
@@ -4658,7 +4867,7 @@
   sign outgoing messages.  This can be overridden by use of the _p_g_p_-
   _m_e_n_u, when signing is not required or encryption is requested as well.
 
-  66..33..111166..  ppggpp__aauuttooeennccrryypptt
+  66..33..113322..  ppggpp__aauuttooeennccrryypptt
 
   Type: boolean
   Default: no
@@ -4668,7 +4877,7 @@
   to the _s_e_n_d_-_h_o_o_k command.  It can be overridden by use of the _p_g_p_-
   _m_e_n_u, when encryption is not required or signing is requested as well.
 
-  66..33..111177..  ppggpp__iiggnnoorree__ssuubbkkeeyyss
+  66..33..113333..  ppggpp__iiggnnoorree__ssuubbkkeeyyss
 
   Type: boolean
   Default: yes
@@ -4677,7 +4886,7 @@
   Instead, the principal key will inherit the subkeys' capabilities.
   Unset this if you want to play interesting key selection games.
 
-  66..33..111188..  ppggpp__eennttrryy__ffoorrmmaatt
+  66..33..113344..  ppggpp__eennttrryy__ffoorrmmaatt
 
   Type: string
   Default: "%4n %t%f %4l/0x%k %-4a %2c %u"
@@ -4705,7 +4914,7 @@
      %%[[<<ss>>]]
         date of the key where <s> is an strftime(3) expression
 
-  66..33..111199..  ppggpp__ggoooodd__ssiiggnn
+  66..33..113355..  ppggpp__ggoooodd__ssiiggnn
 
   Type: regular expression
   Default: ""
@@ -4715,14 +4924,14 @@
   contains the text. Use this variable if the exit code from the command
   is 0 even for bad signatures.
 
-  66..33..112200..  ppggpp__lloonngg__iiddss
+  66..33..113366..  ppggpp__lloonngg__iiddss
 
   Type: boolean
   Default: no
 
   If set, use 64 bit PGP key IDs. Unset uses the normal 32 bit Key IDs.
 
-  66..33..112211..  ppggpp__rreeppllyyeennccrryypptt
+  66..33..113377..  ppggpp__rreeppllyyeennccrryypptt
 
   Type: boolean
   Default: yes
@@ -4730,7 +4939,7 @@
   If set, automatically PGP encrypt replies to messages which are
   encrypted.
 
-  66..33..112222..  ppggpp__rreeppllyyssiiggnn
+  66..33..113388..  ppggpp__rreeppllyyssiiggnn
 
   Type: boolean
   Default: no
@@ -4739,7 +4948,7 @@
 
   NNoottee:: this does not work on messages that are encrypted aanndd signed!
 
-  66..33..112233..  ppggpp__rreeppllyyssiiggnneennccrryypptteedd
+  66..33..113399..  ppggpp__rreeppllyyssiiggnneennccrryypptteedd
 
   Type: boolean
   Default: no
@@ -4751,7 +4960,7 @@
   noted in ````$pgp_replysign'''', that mutt is not able to find out
   whether an encrypted message is also signed.
 
-  66..33..112244..  ppggpp__rreettaaiinnaabbllee__ssiiggss
+  66..33..114400..  ppggpp__rreettaaiinnaabbllee__ssiiggss
 
   Type: boolean
   Default: no
@@ -4763,7 +4972,7 @@
   lists, where the outer layer (multipart/encrypted) can be easily
   removed, while the inner multipart/signed part is retained.
 
-  66..33..112255..  ppggpp__sshhooww__uunnuussaabbllee
+  66..33..114411..  ppggpp__sshhooww__uunnuussaabbllee
 
   Type: boolean
   Default: yes
@@ -4772,7 +4981,7 @@
   menu.  This includes keys which have been revoked, have expired, or
   have been marked as ``disabled'' by the user.
 
-  66..33..112266..  ppggpp__ssiiggnn__aass
+  66..33..114422..  ppggpp__ssiiggnn__aass
 
   Type: string
   Default: ""
@@ -4781,7 +4990,7 @@
   which of your private keys to use.  It is recommended that you use the
   keyid form to specify your key (e.g., ``0x00112233'').
 
-  66..33..112277..  ppggpp__ssttrriicctt__eenncc
+  66..33..114433..  ppggpp__ssttrriicctt__eenncc
 
   Type: boolean
   Default: yes
@@ -4791,7 +5000,7 @@
   to problems with non-verifyable PGP signatures, so only change this if
   you know what you are doing.
 
-  66..33..112288..  ppggpp__ttiimmeeoouutt
+  66..33..114444..  ppggpp__ttiimmeeoouutt
 
   Type: number
   Default: 300
@@ -4799,7 +5008,7 @@
   The number of seconds after which a cached passphrase will expire if
   not used.
 
-  66..33..112299..  ppggpp__vveerriiffyy__ssiigg
+  66..33..114455..  ppggpp__vveerriiffyy__ssiigg
 
   Type: quadoption
   Default: yes
@@ -4808,7 +5017,7 @@
   yes'' or ``ask-no'', ask whether or not to verify the signature.  If
   ``no'', never attempt to verify PGP/MIME signatures.
 
-  66..33..113300..  ppggpp__ssoorrtt__kkeeyyss
+  66..33..114466..  ppggpp__ssoorrtt__kkeeyyss
 
   Type: sort order
   Default: address
@@ -4831,7 +5040,7 @@
   If you prefer reverse order of the above values, prefix it with
   `reverse-'.
 
-  66..33..113311..  ppggpp__ccrreeaattee__ttrraaddiittiioonnaall
+  66..33..114477..  ppggpp__ccrreeaattee__ttrraaddiittiioonnaall
 
   Type: quadoption
   Default: no
@@ -4846,7 +5055,7 @@
   Also note that using the old-style PGP message format is ssttrroonnggllyy
   ddeepprreeccaatteedd.
 
-  66..33..113322..  ppggpp__ddeeccooddee__ccoommmmaanndd
+  66..33..114488..  ppggpp__ddeeccooddee__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4873,7 +5082,7 @@
   files in the samples/ subdirectory which has been installed on your
   system alongside the documentation.
 
-  66..33..113333..  ppggpp__ggeettkkeeyyss__ccoommmmaanndd
+  66..33..114499..  ppggpp__ggeettkkeeyyss__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4882,21 +5091,21 @@
   information.  %r is the only printf-like sequence used with this
   format.
 
-  66..33..113344..  ppggpp__vveerriiffyy__ccoommmmaanndd
+  66..33..115500..  ppggpp__vveerriiffyy__ccoommmmaanndd
 
   Type: string
   Default: ""
 
   This command is used to verify PGP/MIME signatures.
 
-  66..33..113355..  ppggpp__ddeeccrryypptt__ccoommmmaanndd
+  66..33..115511..  ppggpp__ddeeccrryypptt__ccoommmmaanndd
 
   Type: string
   Default: ""
 
   This command is used to decrypt a PGP/MIME encrypted message.
 
-  66..33..113366..  ppggpp__cclleeaarrssiiggnn__ccoommmmaanndd
+  66..33..115522..  ppggpp__cclleeaarrssiiggnn__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4904,7 +5113,7 @@
   This format is used to create a "clearsigned" old-style PGP
   attachment.  Note that the use of this format is ssttrroonnggllyy ddeepprreeccaatteedd.
 
-  66..33..113377..  ppggpp__ssiiggnn__ccoommmmaanndd
+  66..33..115533..  ppggpp__ssiiggnn__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4912,21 +5121,21 @@
   This command is used to create the detached PGP signature for a
   multipart/signed PGP/MIME body part.
 
-  66..33..113388..  ppggpp__eennccrryypptt__ssiiggnn__ccoommmmaanndd
+  66..33..115544..  ppggpp__eennccrryypptt__ssiiggnn__ccoommmmaanndd
 
   Type: string
   Default: ""
 
   This command is used to combinedly sign/encrypt a body part.
 
-  66..33..113399..  ppggpp__eennccrryypptt__oonnllyy__ccoommmmaanndd
+  66..33..115555..  ppggpp__eennccrryypptt__oonnllyy__ccoommmmaanndd
 
   Type: string
   Default: ""
 
   This command is used to encrypt a body part without signing it.
 
-  66..33..114400..  ppggpp__iimmppoorrtt__ccoommmmaanndd
+  66..33..115566..  ppggpp__iimmppoorrtt__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4934,14 +5143,14 @@
   This command is used to import a key from a message into the user's
   public key ring.
 
-  66..33..114411..  ppggpp__eexxppoorrtt__ccoommmmaanndd
+  66..33..115577..  ppggpp__eexxppoorrtt__ccoommmmaanndd
 
   Type: string
   Default: ""
 
   This command is used to export a public key from the user's key ring.
 
-  66..33..114422..  ppggpp__vveerriiffyy__kkeeyy__ccoommmmaanndd
+  66..33..115588..  ppggpp__vveerriiffyy__kkeeyy__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4949,7 +5158,7 @@
   This command is used to verify key information from the key selection
   menu.
 
-  66..33..114433..  ppggpp__lliisstt__sseeccrriinngg__ccoommmmaanndd
+  66..33..115599..  ppggpp__lliisstt__sseeccrriinngg__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4961,7 +5170,7 @@
   This format is also generated by the pgpring utility which comes with
   mutt.
 
-  66..33..114444..  ppggpp__lliisstt__ppuubbrriinngg__ccoommmmaanndd
+  66..33..116600..  ppggpp__lliisstt__ppuubbrriinngg__ccoommmmaanndd
 
   Type: string
   Default: ""
@@ -4969,10 +5178,11 @@
   This command is used to list the public key ring's contents.  The
   output format must be analogous to the one used by gpg --list-keys
   --with-colons.
+
   This format is also generated by the pgpring utility which comes with
   mutt.
 
-  66..33..114455..  ffoorrwwaarrdd__ddeeccrryypptt
+  66..33..116611..  ffoorrwwaarrdd__ddeeccrryypptt
 
   Type: boolean
   Default: yes
@@ -4982,7 +5192,7 @@
   variable is only used if ````$mime_forward'''' is _s_e_t and
   ````$mime_forward_decode'''' is _u_n_s_e_t.
 
-  66..33..114466..  ssssll__ssttaarrttttllss
+  66..33..116622..  ssssll__ssttaarrttttllss
 
   Type: quadoption
   Default: yes
@@ -4991,7 +5201,7 @@
   advertising the capability. When unset, mutt will not attempt to use
   STARTTLS regardless of the server's capabilities.
 
-  66..33..114477..  cceerrttiiffiiccaattee__ffiillee
+  66..33..116633..  cceerrttiiffiiccaattee__ffiillee
 
   Type: path
   Default: ""
@@ -5007,7 +5217,7 @@
 
   Example: set certificate_file=~/.mutt/certificates
 
-  66..33..114488..  ssssll__uusseessyysstteemmcceerrttss
+  66..33..116644..  ssssll__uusseessyysstteemmcceerrttss
 
   Type: boolean
   Default: yes
@@ -5016,7 +5226,7 @@
   certificate store when checking if server certificate is signed by a
   trusted CA.
 
-  66..33..114499..  eennttrrooppyy__ffiillee
+  66..33..116655..  eennttrrooppyy__ffiillee
 
   Type: path
   Default: ""
@@ -5024,7 +5234,7 @@
   The file which includes random data that is used to initalize SSL
   library functions.
 
-  66..33..115500..  ssssll__uussee__ssssllvv22
+  66..33..116666..  ssssll__uussee__ssssllvv22
 
   Type: boolean
   Default: yes
@@ -5032,7 +5242,7 @@
   This variables specifies whether to attempt to use SSLv2 in the SSL
   authentication process.
 
-  66..33..115511..  ssssll__uussee__ssssllvv33
+  66..33..116677..  ssssll__uussee__ssssllvv33
 
   Type: boolean
   Default: yes
@@ -5040,7 +5250,7 @@
   This variables specifies whether to attempt to use SSLv3 in the SSL
   authentication process.
 
-  66..33..115522..  ssssll__uussee__ttllssvv11
+  66..33..116688..  ssssll__uussee__ttllssvv11
 
   Type: boolean
   Default: yes
@@ -5048,7 +5258,7 @@
   This variables specifies whether to attempt to use TLSv1 in the SSL
   authentication process.
 
-  66..33..115533..  ppiippee__sspplliitt
+  66..33..116699..  ppiippee__sspplliitt
 
   Type: boolean
   Default: no
@@ -5060,7 +5270,7 @@
   In both cases the messages are piped in the current sorted order, and
   the ````$pipe_sep'''' separator is added after each message.
 
-  66..33..115544..  ppiippee__ddeeccooddee
+  66..33..117700..  ppiippee__ddeeccooddee
 
   Type: boolean
   Default: no
@@ -5069,7 +5279,7 @@
   will pipe the messages without any preprocessing. When set, Mutt will
   weed headers and will attempt to PGP/MIME decode the messages first.
 
-  66..33..115555..  ppiippee__sseepp
+  66..33..117711..  ppiippee__sseepp
 
   Type: string
   Default: "\n"
@@ -5077,7 +5287,7 @@
   The separator to add between messages when piping a list of tagged
   messages to an external Unix command.
 
-  66..33..115566..  ppoopp__aauutthheennttiiccaattoorrss
+  66..33..117722..  ppoopp__aauutthheennttiiccaattoorrss
 
   Type: string
   Default: ""
@@ -5092,7 +5302,7 @@
 
   Example: set pop_authenticators="digest-md5:apop:user"
 
-  66..33..115577..  ppoopp__aauutthh__ttrryy__aallll
+  66..33..117733..  ppoopp__aauutthh__ttrryy__aallll
 
   Type: boolean
   Default: yes
@@ -5102,7 +5312,7 @@
   are unavailable. If a method is available but authentication fails,
   Mutt will not connect to the POP server.
 
-  66..33..115588..  ppoopp__cchheecckkiinntteerrvvaall
+  66..33..117744..  ppoopp__cchheecckkiinntteerrvvaall
 
   Type: number
   Default: 60
@@ -5110,7 +5320,7 @@
   This variable configures how often (in seconds) POP should look for
   new mail.
 
-  66..33..115599..  ppoopp__ddeelleettee
+  66..33..117755..  ppoopp__ddeelleettee
 
   Type: quadoption
   Default: ask-no
@@ -5119,7 +5329,7 @@
   server when using the fetch-mail function.  When unset, Mutt will
   download messages but also leave them on the POP server.
 
-  66..33..116600..  ppoopp__hhoosstt
+  66..33..117766..  ppoopp__hhoosstt
 
   Type: string
   Default: ""
@@ -5129,7 +5339,7 @@
 
   [pop[s]://][username[:password]@]popserver[:port]
 
-  66..33..116611..  ppoopp__llaasstt
+  66..33..117777..  ppoopp__llaasstt
 
   Type: boolean
   Default: no
@@ -5138,7 +5348,7 @@
   for retrieving only unread messages from the POP server when using the
   fetch-mail function.
 
-  66..33..116622..  ppoopp__rreeccoonnnneecctt
+  66..33..117788..  ppoopp__rreeccoonnnneecctt
 
   Type: quadoption
   Default: ask-yes
@@ -5146,7 +5356,7 @@
   Controls whether or not Mutt will try to reconnect to POP server when
   connection lost.
 
-  66..33..116633..  ppoopp__uusseerr
+  66..33..117799..  ppoopp__uusseerr
 
   Type: string
   Default: ""
@@ -5155,7 +5365,7 @@
 
   This variable defaults to your user name on the local machine.
 
-  66..33..116644..  ppoopp__ppaassss
+  66..33..118800..  ppoopp__ppaassss
 
   Type: string
   Default: ""
@@ -5166,14 +5376,25 @@
   because the superuser can read your muttrc even if you are the only
   one who can read the file.
 
-  66..33..116655..  ppoosstt__iinnddeenntt__ssttrriinngg
+  66..33..118811..  ppoosstt__iinnddeenntt__ssttrriinngg
 
   Type: string
   Default: ""
+
   Similar to the ````$attribution'''' variable, Mutt will append this
   string after the inclusion of a message which is being replied to.
 
-  66..33..116666..  ppoossttppoonnee
+  66..33..118822..  ppoosstt__mmooddeerraatteedd
+
+  Type: quadoption
+  Default: ask-yes
+
+  If set to _y_e_s, Mutt will post article to newsgroup that have not
+  permissions to posting (e.g. moderated).  NNoottee:: if newsserver does not
+  support posting to that newsgroup or totally read-only, that posting
+  will not have an effect.
+
+  66..33..118833..  ppoossttppoonnee
 
   Type: quadoption
   Default: ask-yes
@@ -5181,7 +5402,7 @@
   Controls whether or not messages are saved in the ````$postponed''''
   mailbox when you elect not to send immediately.
 
-  66..33..116677..  ppoossttppoonneedd
+  66..33..118844..  ppoossttppoonneedd
 
   Type: path
   Default: "~/postponed"
@@ -5191,7 +5412,7 @@
   saves it in the mailbox specified by this variable.  Also see the
   ````$postpone'''' variable.
 
-  66..33..116688..  pprreeccoonnnneecctt
+  66..33..118855..  pprreeccoonnnneecctt
 
   Type: string
   Default: ""
@@ -5210,7 +5431,7 @@
   NOTE: For this example to work, you must be able to log in to the
   remote machine without having to enter a password.
 
-  66..33..116699..  pprriinntt
+  66..33..118866..  pprriinntt
 
   Type: quadoption
   Default: ask-no
@@ -5218,13 +5439,14 @@
   Controls whether or not Mutt asks for confirmation before printing.
   This is useful for people (like me) who accidentally hit ``p'' often.
 
-  66..33..117700..  pprriinntt__ccoommmmaanndd
+  66..33..118877..  pprriinntt__ccoommmmaanndd
 
   Type: path
   Default: "lpr"
+
   This specifies the command pipe that should be used to print messages.
 
-  66..33..117711..  pprriinntt__ddeeccooddee
+  66..33..118888..  pprriinntt__ddeeccooddee
 
   Type: boolean
   Default: yes
@@ -5236,7 +5458,7 @@
   latter setting may be useful if you are using some advanced printer
   filter which is able to properly format e-mail messages for printing.
 
-  66..33..117722..  pprriinntt__sspplliitt
+  66..33..118899..  pprriinntt__sspplliitt
 
   Type: boolean
   Default: no
@@ -5251,7 +5473,7 @@
   Those who use the eennssccrriipptt(1) program's mail-printing mode will most
   likely want to set this option.
 
-  66..33..117733..  pprroommpptt__aafftteerr
+  66..33..119900..  pprroommpptt__aafftteerr
 
   Type: boolean
   Default: yes
@@ -5261,7 +5483,7 @@
   than returning to the index menu.  If unset, Mutt will return to the
   index menu when the external pager exits.
 
-  66..33..117744..  qquueerryy__ccoommmmaanndd
+  66..33..119911..  qquueerryy__ccoommmmaanndd
 
   Type: path
   Default: ""
@@ -5271,7 +5493,7 @@
   with the query string the user types.  See ````query'''' for more
   information.
 
-  66..33..117755..  qquuiitt
+  66..33..119922..  qquuiitt
 
   Type: quadoption
   Default: yes
@@ -5281,11 +5503,10 @@
   have no effect, and if it is set to ask-yes or ask-no, you are
   prompted for confirmation when you try to quit.
 
-  66..33..117766..  qquuoottee__rreeggeexxpp
+  66..33..119933..  qquuoottee__rreeggeexxpp
 
   Type: regular expression
   Default: "^([ \t]*[|>:}#])+"
-
   A regular expression used in the internal-pager to determine quoted
   sections of text in the body of a message.
 
@@ -5293,7 +5514,7 @@
   need to set this to a regular expression that matches _e_x_a_c_t_l_y the
   quote characters at the beginning of quoted lines.
 
-  66..33..117777..  rreeaadd__iinncc
+  66..33..119944..  rreeaadd__iinncc
 
   Type: number
   Default: 10
@@ -5308,14 +5529,14 @@
 
   Also see the ````$write_inc'''' variable.
 
-  66..33..117788..  rreeaadd__oonnllyy
+  66..33..119955..  rreeaadd__oonnllyy
 
   Type: boolean
   Default: no
 
   If set, all folders are opened in read-only mode.
 
-  66..33..117799..  rreeaallnnaammee
+  66..33..119966..  rreeaallnnaammee
 
   Type: string
   Default: ""
@@ -5327,7 +5548,7 @@
   variable will _n_o_t be used when the user has set a real name in the
   ``$from'' variable.
 
-  66..33..118800..  rreeccaallll
+  66..33..119977..  rreeccaallll
 
   Type: quadoption
   Default: ask-yes
@@ -5338,7 +5559,7 @@
   Setting this variable to ``yes'' is not generally useful, and thus not
   recommended.
 
-  66..33..118811..  rreeccoorrdd
+  66..33..119988..  rreeccoorrdd
 
   Type: path
   Default: ""
@@ -5351,7 +5572,7 @@
   The value of _`_`_$_r_e_c_o_r_d_'_' is overridden by the ````$force_name'''' and
   ````$save_name'''' variables, and the ````fcc-hook'''' command.
 
-  66..33..118822..  rreeppllyy__rreeggeexxpp
+  66..33..119999..  rreeppllyy__rreeggeexxpp
 
   Type: regular expression
   Default: "^(re([\[0-9\]+])*|aw):[ \t]*"
@@ -5360,7 +5581,7 @@
   and replying. The default value corresponds to the English "Re:" and
   the German "Aw:".
 
-  66..33..118833..  rreeppllyy__sseellff
+  66..33..220000..  rreeppllyy__sseellff
 
   Type: boolean
   Default: no
@@ -5369,7 +5590,7 @@
   assume that you want to reply to the recipients of that message rather
   than to yourself.
 
-  66..33..118844..  rreeppllyy__ttoo
+  66..33..220011..  rreeppllyy__ttoo
 
   Type: quadoption
   Default: ask-yes
@@ -5381,7 +5602,7 @@
   header field to the list address and you want to send a private
   message to the author of a message.
 
-  66..33..118855..  rreessoollvvee
+  66..33..220022..  rreessoollvvee
 
   Type: boolean
   Default: yes
@@ -5390,7 +5611,7 @@
   (possibly undeleted) message whenever a command that modifies the
   current message is executed.
 
-  66..33..118866..  rreevveerrssee__aalliiaass
+  66..33..220033..  rreevveerrssee__aalliiaass
 
   Type: boolean
   Default: no
@@ -5410,7 +5631,7 @@
   ``abd30425@somewhere.net.''  This is useful when the person's e-mail
   address is not human friendly (like CompuServe addresses).
 
-  66..33..118877..  rreevveerrssee__nnaammee
+  66..33..220044..  rreevveerrssee__nnaammee
 
   Type: boolean
   Default: no
@@ -5422,7 +5643,7 @@
   messages you are replying to.  If the variable is unset, the _F_r_o_m_:
   line will use your address on the current machine.
 
-  66..33..118888..  rreevveerrssee__rreeaallnnaammee
+  66..33..220055..  rreevveerrssee__rreeaallnnaammee
 
   Type: boolean
   Default: yes
@@ -5433,7 +5654,7 @@
   unset, mutt will override any such realnames with the setting of the
   ``realname'' variable.
 
-  66..33..118899..  rrffcc22004477__ppaarraammeetteerrss
+  66..33..220066..  rrffcc22004477__ppaarraammeetteerrss
 
   Type: boolean
   Default: no
@@ -5452,7 +5673,7 @@
   _g_e_n_e_r_a_t_e_s this kind of encoding.  Instead, mutt will unconditionally
   use the encoding specified in RFC 2231.
 
-  66..33..119900..  ssaavvee__aaddddrreessss
+  66..33..220077..  ssaavvee__aaddddrreessss
 
   Type: boolean
   Default: no
@@ -5462,7 +5683,7 @@
   ````$force_name'''' is set too, the selection of the fcc folder will
   be changed as well.
 
-  66..33..119911..  ssaavvee__eemmppttyy
+  66..33..220088..  ssaavvee__eemmppttyy
 
   Type: boolean
   Default: yes
@@ -5473,7 +5694,8 @@
 
   NNoottee:: This only applies to mbox and MMDF folders, Mutt does not delete
   MH and Maildir directories.
-  66..33..119922..  ssaavvee__nnaammee
+
+  66..33..220099..  ssaavvee__nnaammee
 
   Type: boolean
   Default: no
@@ -5488,7 +5710,7 @@
 
   Also see the ````$force_name'''' variable.
 
-  66..33..119933..  ssccoorree
+  66..33..221100..  ssccoorree
 
   Type: boolean
   Default: yes
@@ -5497,7 +5719,7 @@
   useful to selectively disable scoring for certain folders when the
   ````$score_threshold_delete'''' variable and friends are used.
 
-  66..33..119944..  ssccoorree__tthhrreesshhoolldd__ddeelleettee
+  66..33..221111..  ssccoorree__tthhrreesshhoolldd__ddeelleettee
 
   Type: number
   Default: -1
@@ -5508,7 +5730,7 @@
   default setting of this variable will never mark a message for
   deletion.
 
-  66..33..119955..  ssccoorree__tthhrreesshhoolldd__ffllaagg
+  66..33..221122..  ssccoorree__tthhrreesshhoolldd__ffllaagg
 
   Type: number
   Default: 9999
@@ -5516,7 +5738,7 @@
   Messages wich have been assigned a score greater than or equal to this
   variable's value are automatically marked "flagged".
 
-  66..33..119966..  ssccoorree__tthhrreesshhoolldd__rreeaadd
+  66..33..221133..  ssccoorree__tthhrreesshhoolldd__rreeaadd
 
   Type: number
   Default: -1
@@ -5526,7 +5748,7 @@
   Since mutt scores are always greater than or equal to zero, the
   default setting of this variable will never mark a message read.
 
-  66..33..119977..  sseenndd__cchhaarrsseett
+  66..33..221144..  sseenndd__cchhaarrsseett
 
   Type: string
   Default: "us-ascii:iso-8859-1:utf-8"
@@ -5538,7 +5760,7 @@
   appropriate widely used standard character set (such as iso-8859-2,
   koi8-r or iso-2022-jp) either instead of or after "iso-8859-1".
 
-  66..33..119988..  sseennddmmaaiill
+  66..33..221155..  sseennddmmaaiill
 
   Type: path
   Default: "/usr/sbin/sendmail -oem -oi"
@@ -5547,7 +5769,7 @@
   Mutt expects that the specified program interprets additional
   arguments as recipient addresses.
 
-  66..33..119999..  sseennddmmaaiill__wwaaiitt
+  66..33..221166..  sseennddmmaaiill__wwaaiitt
 
   Type: number
   Default: 0
@@ -5569,7 +5791,7 @@
   process will be put in a temporary file.  If there is some error, you
   will be informed as to where to find the output.
 
-  66..33..220000..  sshheellll
+  66..33..221177..  sshheellll
 
   Type: path
   Default: ""
@@ -5577,7 +5799,33 @@
   Command to use when spawning a subshell.  By default, the user's login
   shell from /etc/passwd is used.
 
-  66..33..220011..  ssiigg__ddaasshheess
+  66..33..221188..  ssaavvee__uunnssuubbssccrriibbeedd
+
+  Type: boolean
+  Default: no
+
+  When _s_e_t, info about unsubscribed newsgroups will be saved into
+  ``newsrc'' file and into cache.
+
+  66..33..221199..  sshhooww__nneeww__nneewwss
+
+  Type: boolean
+  Default: yes
+
+  If _s_e_t, newsserver will be asked for new newsgroups on entering the
+  browser.  Otherwise, it will be done only once for a newsserver.  Also
+  controls whether or not number of new articles of subscribed
+  newsgroups will be then checked.
+
+  66..33..222200..  sshhooww__oonnllyy__uunnrreeaadd
+
+  Type: boolean
+  Default: no
+
+  If _s_e_t, only subscribed newsgroups that contain unread articles will
+  be displayed in browser.
+
+  66..33..222211..  ssiigg__ddaasshheess
 
   Type: boolean
   Default: yes
@@ -5589,7 +5837,7 @@
   detect your signature.  For example, Mutt has the ability to highlight
   the signature in a different color in the builtin pager.
 
-  66..33..220022..  ssiigg__oonn__ttoopp
+  66..33..222222..  ssiigg__oonn__ttoopp
 
   Type: boolean
   Default: no
@@ -5599,7 +5847,7 @@
   unless you really know what you are doing, and are prepared to take
   some heat from netiquette guardians.
 
-  66..33..220033..  ssiiggnnaattuurree
+  66..33..222233..  ssiiggnnaattuurree
 
   Type: path
   Default: "~/.signature"
@@ -5609,7 +5857,7 @@
   assumed that filename is a shell command and input should be read from
   its stdout.
 
-  66..33..220044..  ssiimmppllee__sseeaarrcchh
+  66..33..222244..  ssiimmppllee__sseeaarrcchh
 
   Type: string
   Default: "~f %s | ~s %s"
@@ -5625,7 +5873,7 @@
 
   ~f joe | ~s joe
 
-  66..33..220055..  ssmmaarrtt__wwrraapp
+  66..33..222255..  ssmmaarrtt__wwrraapp
 
   Type: boolean
   Default: yes
@@ -5635,7 +5883,7 @@
   unset, lines are simply wrapped at the screen edge. Also see the
   ````$markers'''' variable.
 
-  66..33..220066..  ssmmiilleeyyss
+  66..33..222266..  ssmmiilleeyyss
 
   Type: regular expression
   Default: "(>From )|(:[-^]?[][)(><}{|/DP])"
@@ -5643,7 +5891,7 @@
   The _p_a_g_e_r uses this variable to catch some common false positives of
   ````$quote_regexp'''', most notably smileys in the beginning of a line
 
-  66..33..220077..  sslleeeepp__ttiimmee
+  66..33..222277..  sslleeeepp__ttiimmee
 
   Type: number
   Default: 1
@@ -5653,27 +5901,27 @@
   expunging messages from the current folder.  The default is to pause
   one second, so a value of zero for this option suppresses the pause.
 
-  66..33..220088..  ssoorrtt
+  66..33..222288..  ssoorrtt
 
   Type: sort order
   Default: date
 
   Specifies how to sort messages in the _i_n_d_e_x menu.  Valid values are:
 
-          date or date-sent
-          date-received
-          from
-          mailbox-order (unsorted)
-          score
-          size
-          subject
-          threads
-          to
+     date or date-sent
+     date-received
+     from
+     mailbox-order (unsorted)
+     score
+     size
+     subject
+     threads
+     to
 
   You may optionally use the reverse- prefix to specify reverse sorting
   order (example: set sort=reverse-date-sent).
 
-  66..33..220099..  ssoorrtt__aalliiaass
+  66..33..222299..  ssoorrtt__aalliiaass
 
   Type: sort order
   Default: alias
@@ -5685,7 +5933,7 @@
           alias (sort alphabetically by alias name)
           unsorted (leave in order specified in .muttrc)
 
-  66..33..221100..  ssoorrtt__aauuxx
+  66..33..223300..  ssoorrtt__aauuxx
 
   Type: sort order
   Default: date
@@ -5704,7 +5952,7 @@
   order ``$sort_aux'' is reversed again (which is not the right thing to
   do, but kept to not break any existing configuration setting).
 
-  66..33..221111..  ssoorrtt__bbrroowwsseerr
+  66..33..223311..  ssoorrtt__bbrroowwsseerr
 
   Type: sort order
   Default: subject
@@ -5720,7 +5968,7 @@
   You may optionally use the reverse- prefix to specify reverse sorting
   order (example: set sort_browser=reverse-date).
 
-  66..33..221122..  ssoorrtt__rree
+  66..33..223322..  ssoorrtt__rree
 
   Type: boolean
   Default: yes
@@ -5734,7 +5982,7 @@
   attach the message whether or not this is the case, as long as the
   non-````$reply_regexp'''' parts of both messages are identical.
 
-  66..33..221133..  ssppoooollffiillee
+  66..33..223333..  ssppoooollffiillee
 
   Type: path
   Default: ""
@@ -5744,7 +5992,7 @@
   automatically set this variable to the value of the environment
   variable $MAIL if it is not set.
 
-  66..33..221144..  ssttaattuuss__cchhaarrss
+  66..33..223344..  ssttaattuuss__cchhaarrss
 
   Type: string
   Default: "-*%A"
@@ -5760,7 +6008,7 @@
   message mode (Certain operations like composing a new mail, replying,
   forwarding, etc. are not permitted in this mode).
 
-  66..33..221155..  ssttaattuuss__ffoorrmmaatt
+  66..33..223355..  ssttaattuuss__ffoorrmmaatt
 
   Type: string
   Default: "-%r-Mutt: %f [Msgs:%?M?%M/?%m%?n? New:%n?%?o? Old:%o?%?d?
@@ -5847,7 +6095,7 @@
   (_) sign.  For example, if you want to display the local hostname in
   lowercase, you would use: %_h
 
-  66..33..221166..  ssttaattuuss__oonn__ttoopp
+  66..33..223366..  ssttaattuuss__oonn__ttoopp
 
   Type: boolean
   Default: no
@@ -5855,7 +6103,7 @@
   Setting this variable causes the ``status bar'' to be displayed on the
   first line of the screen rather than near the bottom.
 
-  66..33..221177..  ssttrriicctt__tthhrreeaaddss
+  66..33..223377..  ssttrriicctt__tthhrreeaaddss
 
   Type: boolean
   Default: no
@@ -5867,7 +6115,7 @@
   personal mailbox where you might have several unrelated messages with
   the subject ``hi'' which will get grouped together.
 
-  66..33..221188..  ssuussppeenndd
+  66..33..223388..  ssuussppeenndd
 
   Type: boolean
   Default: yes
@@ -5876,7 +6124,7 @@
   key, usually ``control-Z''. This is useful if you run mutt inside an
   xterm using a command like xterm -e mutt.
 
-  66..33..221199..  tteexxtt__fflloowweedd
+  66..33..223399..  tteexxtt__fflloowweedd
 
   Type: boolean
   Default: no
@@ -5888,14 +6136,15 @@
 
   Note that ``$indent_string'' is ignored when this option is set.
 
-  66..33..222200..  tthhrreeaadd__rreecceeiivveedd
+  66..33..224400..  tthhrreeaadd__rreecceeiivveedd
 
   Type: boolean
   Default: no
 
   When set, mutt uses the date received rather than the date sent to
   thread messages by subject.
-  66..33..222211..  tthhoorroouugghh__sseeaarrcchh
+
+  66..33..224411..  tthhoorroouugghh__sseeaarrcchh
 
   Type: boolean
   Default: no
@@ -5905,7 +6154,7 @@
   messages to be searched are decoded before searching.  If unset,
   messages are searched as they appear in the folder.
 
-  66..33..222222..  ttiillddee
+  66..33..224422..  ttiillddee
 
   Type: boolean
   Default: no
@@ -5913,7 +6162,7 @@
   When set, the internal-pager will pad blank lines to the bottom of the
   screen with a tilde (~).
 
-  66..33..222233..  ttiimmeeoouutt
+  66..33..224433..  ttiimmeeoouutt
 
   Type: number
   Default: 600
@@ -5922,15 +6171,14 @@
   to be pressed in the main menu before timing out and checking for new
   mail.  A value of zero or less will cause Mutt not to ever time out.
 
-  66..33..222244..  ttmmppddiirr
+  66..33..224444..  ttmmppddiirr
 
   Type: path
   Default: ""
-
   This variable allows you to specify where Mutt will place its
   temporary files needed for displaying and composing messages.
 
-  66..33..222255..  ttoo__cchhaarrss
+  66..33..224455..  ttoo__cchhaarrss
 
   Type: string
   Default: " +TCFL"
@@ -5946,7 +6194,7 @@
   by _y_o_u.  The sixth character is used to indicate when a mail was sent
   to a mailing-list you subscribe to (default: L).
 
-  66..33..222266..  ttuunnnneell
+  66..33..224466..  ttuunnnneell
 
   Type: string
   Default: ""
@@ -5960,7 +6208,7 @@
   NOTE: For this example to work you must be able to log in to the
   remote machine without having to enter a password.
 
-  66..33..222277..  uussee__88bbiittmmiimmee
+  66..33..224477..  uussee__88bbiittmmiimmee
 
   Type: boolean
   Default: no
@@ -5972,7 +6220,7 @@
   When _s_e_t, Mutt will invoke ````$sendmail'''' with the -B8BITMIME flag
   when sending 8-bit messages to enable ESMTP negotiation.
 
-  66..33..222288..  uussee__ddoommaaiinn
+  66..33..224488..  uussee__ddoommaaiinn
 
   Type: boolean
   Default: yes
@@ -5981,7 +6229,7 @@
   @host portion) with the value of ````$hostname''''.  If _u_n_s_e_t, no
   addresses will be qualified.
 
-  66..33..222299..  uussee__ffrroomm
+  66..33..224499..  uussee__ffrroomm
 
   Type: boolean
   Default: yes
@@ -5990,7 +6238,16 @@
   messages.  If _u_n_s_e_t, no `From:' header field will be generated unless
   the user explicitly sets one using the ````my_hdr'''' command.
 
-  66..33..223300..  uusseerr__aaggeenntt
+  66..33..225500..  uussee__iippvv66
+
+  Type: boolean
+  Default: yes
+
+  When _s_e_t, Mutt will look for IPv6 addresses of hosts it tries to
+  contact.  If this option is unset, Mutt will restrict itself to IPv4
+  addresses.  Normally, the default should work.
+
+  66..33..225511..  uusseerr__aaggeenntt
 
   Type: boolean
   Default: yes
@@ -5998,7 +6255,7 @@
   When _s_e_t, mutt will add a "User-Agent" header to outgoing messages,
   indicating which version of mutt was used for composing them.
 
-  66..33..223311..  vviissuuaall
+  66..33..225522..  vviissuuaall
 
   Type: path
   Default: ""
@@ -6006,7 +6263,7 @@
   Specifies the visual editor to invoke when the _~_v command is given in
   the builtin editor.
 
-  66..33..223322..  wwaaiitt__kkeeyy
+  66..33..225533..  wwaaiitt__kkeeyy
 
   Type: boolean
   Default: yes
@@ -6021,7 +6278,7 @@
   When set, Mutt will always ask for a key. When unset, Mutt will wait
   for a key only if the external command returned a non-zero status.
 
-  66..33..223333..  wweeeedd
+  66..33..225544..  wweeeedd
 
   Type: boolean
   Default: yes
@@ -6029,7 +6286,7 @@
   When set, mutt will weed headers when when displaying, forwarding,
   printing, or replying to messages.
 
-  66..33..223344..  wwrraapp__sseeaarrcchh
+  66..33..225555..  wwrraapp__sseeaarrcchh
 
   Type: boolean
   Default: yes
@@ -6039,7 +6296,7 @@
   When set, searches will wrap around the first (or last) message. When
   unset, searches will not wrap.
 
-  66..33..223355..  wwrraappmmaarrggiinn
+  66..33..225566..  wwrraappmmaarrggiinn
 
   Type: number
   Default: 0
@@ -6047,7 +6304,7 @@
   Controls the margin left at the right side of the terminal when mutt's
   pager does smart wrapping.
 
-  66..33..223366..  wwrriittee__iinncc
+  66..33..225577..  wwrriittee__iinncc
 
   Type: number
   Default: 10
@@ -6058,7 +6315,7 @@
 
   Also see the ````$read_inc'''' variable.
 
-  66..33..223377..  wwrriittee__bbcccc
+  66..33..225588..  wwrriittee__bbcccc
 
   Type: boolean
   Default: yes
@@ -6066,6 +6323,14 @@
   Controls whether mutt writes out the Bcc header when preparing
   messages to be sent.  Exim users may wish to use this.
 
+  66..33..225599..  xx__ccoommmmeenntt__ttoo
+
+  Type: boolean
+  Default: no
+
+  If _s_e_t, Mutt will add ``X-Comment-To:'' field (that contains full name
+  of original article author) to article that followuped to newsgroup.
+
   66..44..  FFuunnccttiioonnss
 
   The following is the list of available functions listed by the mapping
diff -uNr mutt-1.4.orig/doc/mutt.man mutt-1.4/doc/mutt.man
--- mutt-1.4.orig/doc/mutt.man	Thu Aug 30 14:55:37 2001
+++ mutt-1.4/doc/mutt.man	Sun Nov  3 21:57:20 2002
@@ -24,8 +24,8 @@
 .SH SYNOPSIS
 .PP
 .B mutt
-[-nRyzZ] 
-[-e \fIcmd\fP] [-F \fIfile\fP] [-m \fItype\fP] [-f \fIfile\fP]
+[-GnRyzZ] 
+[-e \fIcmd\fP] [-F \fIfile\fP] [-g \fIserver\fP] [-m \fItype\fP] [-f \fIfile\fP]
 .PP
 .B mutt 
 [-nx] 
@@ -63,6 +63,10 @@
 Specify which mailbox to load.
 .IP "-F \fImuttrc\fP"
 Specify an initialization file to read instead of ~/.muttrc
+.IP "-g \fIserver\fP"
+Start Mutt with a listing of subscribed newsgroups at specified newsserver.
+.IP "-G"
+Start Mutt with a listing of subscribed newsgroups.
 .IP "-h"
 Display help.
 .IP "-H \fIdraft\fP"
diff -uNr mutt-1.4.orig/doc/muttrc.man mutt-1.4/doc/muttrc.man
--- mutt-1.4.orig/doc/muttrc.man	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/doc/muttrc.man	Sun Nov  3 21:57:47 2002
@@ -257,7 +257,9 @@
 \fBpgp-hook\fP \fIpattern\fP \fIkey-id\fP
 The pgp-hook command provides a method by which you can
 specify the ID of the public key to be used when encrypting messages
-to a certain recipient.
+to a certain recipient.  You may use multiple \fBpgp-hook\fPs with the
+same \fIpattern\fP; multiple matching \fBpgp-hook\fPs result in the use
+of multiple \fIkey-id\fPs for recipient.
 .PP
 .nf
 \fBopen-hook\fP \fIregexp\fP "\fIcommand\fP"
@@ -622,6 +624,28 @@
 
 
 .TP
+.B ask_follow_up
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+If set, Mutt will prompt you for follow-up groups before editing
+the body of an outgoing message.
+
+
+.TP
+.B ask_x_comment_to
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+If set, Mutt will prompt you for x-comment-to field before editing
+the body of an outgoing message.
+
+
+.TP
 .B attach_format
 .nf
 Type: string
@@ -773,6 +797,17 @@
 
 
 .TP
+.B catchup_newsgroup
+.nf
+Type: quadoption
+Default: ask-yes
+.fi
+.IP
+If this variable is \fIset\fP, Mutt will mark all articles in newsgroup
+as read when you quit the newsgroup (catchup newsgroup).
+
+
+.TP
 .B charset
 .nf
 Type: string
@@ -990,7 +1025,7 @@
 .B dotlock_program
 .nf
 Type: path
-Default: \(lq/usr/local/bin/mutt_dotlock\(rq
+Default: \(lq/usr/bin/mutt_dotlock\(rq
 .fi
 .IP
 Contains the path of the mutt_dotlock (8) binary to be used by
@@ -1161,6 +1196,16 @@
 
 
 .TP
+.B folder_columns
+.nf
+Type: number
+Default: 1
+.fi
+.IP
+Specifies the number of folder columns in folder browser.
+
+
+.TP
 .B folder_format
 .nf
 Type: string
@@ -1235,6 +1280,19 @@
 
 
 .TP
+.B followup_to_poster
+.nf
+Type: quadoption
+Default: ask-yes
+.fi
+.IP
+If this variable is \fIset\fP and the keyword \(rqposter\(rq is present in
+\fIFollowup-To\fP header, follow-up to newsgroup function is not
+permitted.  The message will be mailed to the submitter of the
+message via mail.
+
+
+.TP
 .B force_name
 .nf
 Type: boolean
@@ -1319,6 +1377,39 @@
 
 
 .TP
+.B group_index_format
+.nf
+Type: string
+Default: \(lq%4C %M%N %5s  %-45.45f %d\(rq
+.fi
+.IP
+This variable allows you to customize the newsgroup browser display to
+your personal taste.  This string is similar to \(lqindex_format\(rq, but
+has its own set of printf()-like sequences:
+.IP
+
+.IP
+.DS
+.sp
+.ft CR
+.nf
+%C      current newsgroup number
+%d      description of newsgroup (becomes from server)
+%f      newsgroup name
+%M      - if newsgroup not allowed for direct post (moderated for example)
+%N      N if newsgroup is new, u if unsubscribed, blank otherwise
+%n      number of new articles in newsgroup
+%s      number of unread articles in newsgroup
+%>X     right justify the rest of the string and pad with character \(rqX\(rq
+%|X     pad to the end of the line with character \(rqX\(rq
+
+.fi
+.ec
+.ft P
+.sp
+
+
+.TP
 .B hdrs
 .nf
 Type: boolean
@@ -1711,6 +1802,9 @@
 .IP %F 
 author name, or recipient name if the message is from you
 
+.IP %g 
+newsgroup name (if compiled with nntp support)
+
 .IP %i 
 message-id of the current message
 
@@ -1756,6 +1850,9 @@
 .IP %v 
 first name of the author, or the recipient if the message is from you
 
+.IP %W 
+name of organization of author (`organization:' field)
+
 .IP %y 
 `x-label:' field, if present
 
@@ -1798,10 +1895,37 @@
 
 
 .TP
+.B inews
+.nf
+Type: path
+Default: \(lq\(rq
+.fi
+.IP
+If set, specifies the program and arguments used to deliver news posted
+by Mutt.  Otherwise, mutt posts article using current connection to
+news server.  The following printf-style sequence is understood:
+.IP
+
+.IP
+.DS
+.sp
+.ft CR
+.nf
+%s      newsserver name
+
+.fi
+.ec
+.ft P
+.sp
+.IP
+Example: set inews=\(rq/usr/local/bin/inews -hS\(rq
+
+
+.TP
 .B ispell
 .nf
 Type: path
-Default: \(lq/usr/bin/ispell\(rq
+Default: \(lqispell\(rq
 .fi
 .IP
 How to invoke ispell (GNU's spell-checking software).
@@ -2067,6 +2191,18 @@
 
 
 .TP
+.B mime_subject
+.nf
+Type: boolean
+Default: yes
+.fi
+.IP
+If \fIunset\fP, 8-bit \(lqsubject:\(rq line in article header will not be
+encoded according to RFC2047 to base64.  This is useful when message
+is Usenet article, because MIME for news is nonstandard feature.
+
+
+.TP
 .B mix_entry_format
 .nf
 Type: string
@@ -2131,6 +2267,142 @@
 
 
 .TP
+.B narrow_tree
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+This variable controls the width of the thread tree when sorting by
+threads.  When set, it makes the tree approximately twice as narrow,
+to allow more room the tree and message subjects.  This is useful on
+narrow screens.
+
+
+.TP
+.B news_cache_dir
+.nf
+Type: path
+Default: \(lq~/.mutt\(rq
+.fi
+.IP
+This variable pointing to directory where Mutt will save cached news
+articles headers in. If \fIunset\fP, headers will not be saved at all
+and will be reloaded each time when you enter to newsgroup.
+
+
+.TP
+.B news_server
+.nf
+Type: string
+Default: \(lq\(rq
+.fi
+.IP
+This variable specifies domain name or address of NNTP server. It
+defaults to the newsserver specified in the environment variable
+$NNTPSERVER or contained in the file /etc/nntpserver.  You can also
+specify username and an alternative port for each newsserver, ie:
+.IP
+[nntp[s]://][username[:password]@]newsserver[:port]
+
+
+.TP
+.B newsrc
+.nf
+Type: path
+Default: \(lq~/.newsrc\(rq
+.fi
+.IP
+The file, containing info about subscribed newsgroups - names and
+indexes of read articles.  The following printf-style sequence
+is understood:
+.IP
+
+.IP
+.DS
+.sp
+.ft CR
+.nf
+%s      newsserver name
+
+.fi
+.ec
+.ft P
+.sp
+
+
+.TP
+.B nntp_context
+.nf
+Type: number
+Default: 1000
+.fi
+.IP
+This variable defines number of articles which will be in index when
+newsgroup entered.  If active newsgroup have more articles than this
+number, oldest articles will be ignored.  Also controls how many
+articles headers will be saved in cache when you quit newsgroup.
+
+
+.TP
+.B nntp_load_description
+.nf
+Type: boolean
+Default: yes
+.fi
+.IP
+This variable controls whether or not descriptions for each newsgroup
+must be loaded when newsgroup is added to list (first time list
+loading or new newsgroup adding).
+
+
+.TP
+.B nntp_user
+.nf
+Type: string
+Default: \(lq\(rq
+.fi
+.IP
+Your login name on the NNTP server.  If \fIunset\fP and NNTP server requires
+authentification, Mutt will prompt you for your account name when you
+connect to newsserver.
+
+
+.TP
+.B nntp_pass
+.nf
+Type: string
+Default: \(lq\(rq
+.fi
+.IP
+Your password for NNTP account.
+
+
+.TP
+.B nntp_poll
+.nf
+Type: number
+Default: 60
+.fi
+.IP
+The time in seconds until any operations on newsgroup except post new
+article will cause recheck for new news.  If set to 0, Mutt will
+recheck newsgroup on each operation in index (stepping, read article,
+etc.).
+
+
+.TP
+.B nntp_reconnect
+.nf
+Type: quadoption
+Default: ask-yes
+.fi
+.IP
+Controls whether or not Mutt will try to reconnect to newsserver when
+connection lost.
+
+
+.TP
 .B pager
 .nf
 Type: path
@@ -2207,6 +2479,19 @@
 
 
 .TP
+.B pgp_autoselectkey
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+If set, then a list of keys is not presented for selection when only
+one matching key is available.  This may be useful in conjunction with
+the \fIpgp-hook\fP command (with \(lq$pgp_confirmhook\(rq set) and the
+\(lq$pgp_ignore_subkeys\(rq variable.
+
+
+.TP
 .B pgp_autosign
 .nf
 Type: boolean
@@ -2234,6 +2519,19 @@
 
 
 .TP
+.B pgp_confirmhook
+.nf
+Type: boolean
+Default: yes
+.fi
+.IP
+If set, then you will be prompted for confirmation of keys when using
+the \fIpgp-hook\fP command.  If unset, no such confirmation prompt will
+be presented.  This is generally considered unsafe, especially where
+typos are concerned.
+
+
+.TP
 .B pgp_ignore_subkeys
 .nf
 Type: boolean
@@ -2916,6 +3214,19 @@
 
 
 .TP
+.B post_moderated
+.nf
+Type: quadoption
+Default: ask-yes
+.fi
+.IP
+If set to \fIyes\fP, Mutt will post article to newsgroup that have
+not permissions to posting (e.g. moderated).  \fBNote:\fP if newsserver
+does not support posting to that newsgroup or totally read-only, that
+posting will not have an effect.
+
+
+.TP
 .B postpone
 .nf
 Type: quadoption
@@ -3056,6 +3367,29 @@
 
 
 .TP
+.B quote_empty
+.nf
+Type: boolean
+Default: yes
+.fi
+.IP
+Controls whether or not empty lines will be quoted using
+\(lqindent_string\(rq.
+
+
+.TP
+.B quote_quoted
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+Controls how quoted lines will be quoted. If set, one quote
+character will be added to the end of existing prefix.  Otherwise,
+quoted lines will be prepended by \(lqindent_string\(rq.
+
+
+.TP
 .B quote_regexp
 .nf
 Type: regular expression
@@ -3455,6 +3789,41 @@
 
 
 .TP
+.B save_unsubscribed
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+When \fIset\fP, info about unsubscribed newsgroups will be saved into
+\(lqnewsrc\(rq file and into cache.
+
+
+.TP
+.B show_new_news
+.nf
+Type: boolean
+Default: yes
+.fi
+.IP
+If \fIset\fP, newsserver will be asked for new newsgroups on entering
+the browser.  Otherwise, it will be done only once for a newsserver.
+Also controls whether or not number of new articles of subscribed
+newsgroups will be then checked.
+
+
+.TP
+.B show_only_unread
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+If \fIset\fP, only subscribed newsgroups that contain unread articles
+will be displayed in browser.
+
+
+.TP
 .B sig_dashes
 .nf
 Type: boolean
@@ -3496,6 +3865,19 @@
 
 
 .TP
+.B signatures_directory
+.nf
+Type: path
+Default: \(lq\(rq
+.fi
+.IP
+Specifies the path where your signatures are located. In the files of
+this directory, the signatures are separated by blank lines and/or
+sig_dashes (\(lq-- \(rq).
+You can choose between these signatures from the compose menu.
+
+
+.TP
 .B simple_search
 .nf
 Type: string
@@ -3788,6 +4170,11 @@
 .IP %V  
 currently active limit pattern, if any *
 
+.IP %[fmt] 
+the current date and time. \(lqfmt\(rq is
+expanded by the system call \(lqstrftime\(rq;
+a leading bang disables locales 
+
 .IP %>X 
 right justify the rest of the string and pad with \(rqX\(rq
 
@@ -3840,6 +4227,21 @@
 
 
 .TP
+.B status_update
+.nf
+Type: number
+Default: -1
+.fi
+.IP
+This variable controls, if positive, the maximum interval in seconds
+before the time in the status line is updated. It is checked at
+every key press and after a keyboard $timeout.
+If the value is zero, the status line will be updated at every check.
+If it is negative, the status time will only be updated
+if it necessary to update to the status line for some other reason.
+
+
+.TP
 .B strict_threads
 .nf
 Type: boolean
@@ -3960,6 +4362,18 @@
 
 
 .TP
+.B trash
+.nf
+Type: path
+Default: \(lq\(rq
+.fi
+.IP
+If set, this variable specifies the path of the trash folder where the
+mails marked for deletion will be moved, instead of being irremediably
+purged.
+
+
+.TP
 .B tunnel
 .nf
 Type: string
@@ -4017,6 +4431,18 @@
 
 
 .TP
+.B use_ipv6
+.nf
+Type: boolean
+Default: yes
+.fi
+.IP
+When \fIset\fP, Mutt will look for IPv6 addresses of hosts it tries to
+contact.  If this option is unset, Mutt will restrict itself to IPv4 addresses.
+Normally, the default should work.
+
+
+.TP
 .B user_agent
 .nf
 Type: boolean
@@ -4118,6 +4544,17 @@
 messages to be sent.  Exim users may wish to use this.
 
 
+.TP
+.B x_comment_to
+.nf
+Type: boolean
+Default: no
+.fi
+.IP
+If \fIset\fP, Mutt will add \(lqX-Comment-To:\(rq field (that contains full
+name of original article author) to article that followuped to newsgroup.
+
+
 .\" -*-nroff-*-
 .SH SEE ALSO
 .PP
diff -uNr mutt-1.4.orig/functions.h mutt-1.4/functions.h
--- mutt-1.4.orig/functions.h	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/functions.h	Sun Nov  3 21:57:20 2002
@@ -69,6 +69,10 @@
   { "break-thread",		OP_MAIN_BREAK_THREAD,		"#" },
   { "change-folder",		OP_MAIN_CHANGE_FOLDER,		"c" },
   { "change-folder-readonly",	OP_MAIN_CHANGE_FOLDER_READONLY,	"\033c" },
+#ifdef USE_NNTP
+  { "change-newsgroup",		OP_MAIN_CHANGE_GROUP,		"i" },
+  { "change-newsgroup-readonly",OP_MAIN_CHANGE_GROUP_READONLY,	"\033i" },
+#endif
   { "collapse-thread",		OP_MAIN_COLLAPSE_THREAD,	"\033v" },
   { "collapse-all",		OP_MAIN_COLLAPSE_ALL,		"\033V" },
   { "copy-message",		OP_COPY_MESSAGE,		"C" },
@@ -81,7 +85,15 @@
   { "edit",			OP_EDIT_MESSAGE,		"e" },
   { "edit-type",		OP_EDIT_TYPE,			"\005" },
   { "forward-message",		OP_FORWARD_MESSAGE,		"f" },
-  { "flag-message",		OP_FLAG_MESSAGE,		"F" },
+#ifdef USE_NNTP
+  { "forward-to-group",		OP_FORWARD_TO_GROUP,		"\033F" },
+  { "followup-message",		OP_FOLLOWUP,			"F" },
+  { "get-children",		OP_GET_CHILDREN,		NULL },
+  { "get-message",		OP_GET_MESSAGE,			"\007" },
+  { "get-parent",		OP_GET_PARENT,			"\033G" },
+  { "reconstruct-thread",	OP_RECONSTRUCT_THREAD,		NULL },
+#endif
+  { "flag-message",		OP_FLAG_MESSAGE,		"\033f" },
   { "group-reply",		OP_GROUP_REPLY,			"g" },
 #ifdef USE_POP
   { "fetch-mail",		OP_MAIN_FETCH_MAIL,		"G" },
@@ -108,6 +120,9 @@
   { "sort-mailbox",		OP_SORT,			"o" },
   { "sort-reverse",		OP_SORT_REVERSE,		"O" },
   { "print-message",		OP_PRINT,			"p" },
+#ifdef USE_NNTP
+  { "post-message",		OP_POST,			"P" },
+#endif
   { "previous-thread",		OP_MAIN_PREV_THREAD,		"\020" },
   { "previous-subthread",	OP_MAIN_PREV_SUBTHREAD,		"\033p" },
   { "recall-message",		OP_RECALL_MESSAGE,		"R" },
@@ -127,6 +142,10 @@
   { "show-version",		OP_VERSION,			"V" },
   { "set-flag",			OP_MAIN_SET_FLAG,		"w" },
   { "clear-flag",		OP_MAIN_CLEAR_FLAG,		"W" },
+  { "toggle-read",		OP_TOGGLE_READ,			"X" },
+#ifdef USE_NNTP
+  { "catchup",			OP_CATCHUP,			"y" },
+#endif
   { "display-message",		OP_DISPLAY_MESSAGE,		M_ENTER_S },
   { "sync-mailbox",		OP_MAIN_SYNC_FOLDER,		"$" },
   { "display-address",		OP_DISPLAY_ADDRESS,		"@" },
@@ -135,7 +154,7 @@
   { "previous-new",		OP_MAIN_PREV_NEW,		"\033\t" },
   { "next-unread",		OP_MAIN_NEXT_UNREAD,		NULL },
   { "previous-unread",		OP_MAIN_PREV_UNREAD,		NULL },
-  { "parent-message",		OP_MAIN_PARENT_MESSAGE,		"P" },
+  { "parent-message",		OP_MAIN_PARENT_MESSAGE,		NULL },
 
 
 #ifdef HAVE_PGP
@@ -158,6 +177,10 @@
   { "bounce-message",	OP_BOUNCE_MESSAGE,		"b" },
   { "change-folder",	OP_MAIN_CHANGE_FOLDER,		"c" },
   { "change-folder-readonly",	OP_MAIN_CHANGE_FOLDER_READONLY,	"\033c" },
+#ifdef USE_NNTP
+  { "change-newsgroup",		OP_MAIN_CHANGE_GROUP,		"i" },
+  { "change-newsgroup-readonly",OP_MAIN_CHANGE_GROUP_READONLY,	"\033i" },
+#endif
   { "copy-message",	OP_COPY_MESSAGE,		"C" },
   { "decode-copy",	OP_DECODE_COPY,			"\033C" },
   { "delete-message",	OP_DELETE,			"d" },
@@ -165,8 +188,12 @@
   { "delete-subthread",	OP_DELETE_SUBTHREAD,		"\033d" },
   { "edit",		OP_EDIT_MESSAGE,		"e" },
   { "edit-type",	OP_EDIT_TYPE,			"\005" },
+#ifdef USE_NNTP
+  { "followup-message",	OP_FOLLOWUP,			"F" },
+  { "forward-to-group",	OP_FORWARD_TO_GROUP,		"\033F" },
+#endif
   { "forward-message",	OP_FORWARD_MESSAGE,		"f" },
-  { "flag-message",	OP_FLAG_MESSAGE,		"F" },
+  { "flag-message",	OP_FLAG_MESSAGE,		"\033f" },
   { "group-reply",	OP_GROUP_REPLY,			"g" },
 #ifdef USE_IMAP
   { "imap-fetch-mail",  OP_MAIN_IMAP_FETCH,		NULL },
@@ -185,6 +212,9 @@
   { "next-thread",	OP_MAIN_NEXT_THREAD,		"\016" },
   { "next-subthread",	OP_MAIN_NEXT_SUBTHREAD,		"\033n" },
   { "print-message",	OP_PRINT,			"p" },
+#ifdef USE_NNTP
+  { "post-message",	OP_POST,			"P" },
+#endif
   { "previous-thread",	OP_MAIN_PREV_THREAD,		"\020" },
   { "previous-subthread",OP_MAIN_PREV_SUBTHREAD,	"\033p" },
   { "purge-message",	OP_PURGE_MESSAGE,		NULL },
@@ -228,7 +258,7 @@
   { "half-down",	OP_HALF_DOWN,			NULL },
   { "previous-line",	OP_PREV_LINE,			NULL },
   { "bottom",		OP_PAGER_BOTTOM,		NULL },
-  { "parent-message",	OP_MAIN_PARENT_MESSAGE,		"P" },
+  { "parent-message",	OP_MAIN_PARENT_MESSAGE,		NULL },
 
 
 
@@ -252,6 +282,10 @@
   { "bounce-message",	OP_BOUNCE_MESSAGE,		"b" },
   { "display-toggle-weed",	OP_DISPLAY_HEADERS,	"h" },
   { "edit-type",	OP_EDIT_TYPE,			"\005" },
+#ifdef USE_NNTP
+  { "followup-message",	OP_FOLLOWUP,			"F" },
+  { "forward-to-group",	OP_FORWARD_TO_GROUP,		"\033F" },
+#endif
   { "print-entry",	OP_PRINT,			"p" },
   { "save-entry",	OP_SAVE,			"s" },
   { "pipe-entry",	OP_PIPE,			"|" },
@@ -282,6 +316,7 @@
 struct binding_t OpCompose[] = {
   { "attach-file",	OP_COMPOSE_ATTACH_FILE,		"a" },
   { "attach-message",	OP_COMPOSE_ATTACH_MESSAGE,	"A" },
+  { "attach-news-message",OP_COMPOSE_ATTACH_NEWS_MESSAGE,"\033a" },
   { "edit-bcc",		OP_COMPOSE_EDIT_BCC,		"b" },
   { "edit-cc",		OP_COMPOSE_EDIT_CC,		"c" },
   { "copy-file",	OP_SAVE,			"C" },
@@ -301,6 +336,11 @@
   { "print-entry",	OP_PRINT,			"l" },
   { "edit-mime",	OP_COMPOSE_EDIT_MIME,		"m" },
   { "new-mime",		OP_COMPOSE_NEW_MIME,		"n" },
+#ifdef USE_NNTP
+  { "edit-newsgroups",	OP_COMPOSE_EDIT_NEWSGROUPS,	"N" },
+  { "edit-followup-to",	OP_COMPOSE_EDIT_FOLLOWUP_TO,	"o" },
+  { "edit-x-comment-to",OP_COMPOSE_EDIT_X_COMMENT_TO,	"x" },
+#endif
   { "postpone-message",	OP_COMPOSE_POSTPONE_MESSAGE,	"P" },
   { "edit-reply-to",	OP_COMPOSE_EDIT_REPLY_TO,	"r" },
   { "rename-file",	OP_COMPOSE_RENAME_FILE,		"R" },
@@ -352,12 +392,23 @@
   { "select-new",	OP_BROWSER_NEW_FILE,	"N" },
   { "check-new",	OP_CHECK_NEW,		NULL },
   { "toggle-mailboxes", OP_TOGGLE_MAILBOXES, 	"\t" },
+#ifdef USE_NNTP
+  { "reload-active",	OP_LOAD_ACTIVE,		"g"},
+  { "subscribe-pattern", OP_SUBSCRIBE_PATTERN,	"S" },
+  { "unsubscribe-pattern", OP_UNSUBSCRIBE_PATTERN, "U" },
+  { "catchup",		OP_CATCHUP,		"y" },
+  { "uncatchup",	OP_UNCATCHUP,		"Y" },
+#endif
   { "view-file",	OP_BROWSER_VIEW_FILE,	" " },
 #ifdef USE_IMAP
   { "create-mailbox",   OP_CREATE_MAILBOX,      "C" },
   { "delete-mailbox",   OP_DELETE_MAILBOX,      "d" },
+#endif
+#if defined USE_IMAP || defined USE_NNTP
   { "subscribe",	OP_BROWSER_SUBSCRIBE,	"s" },
   { "unsubscribe",	OP_BROWSER_UNSUBSCRIBE,	"u" },
+#endif
+#ifdef USE_IMAP
   { "toggle-subscribed", OP_BROWSER_TOGGLE_LSUB, "T" },
 #endif
   { NULL,		0,			NULL }
diff -uNr mutt-1.4.orig/globals.h mutt-1.4/globals.h
--- mutt-1.4.orig/globals.h	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/globals.h	Sun Nov  3 21:57:20 2002
@@ -80,6 +80,15 @@
 #endif
 
 WHERE char *Muttrc INITVAL (NULL);
+#ifdef USE_NNTP
+WHERE char *NewsCacheDir;
+WHERE char *GroupFormat;
+WHERE char *Inews;
+WHERE char *NewsServer;
+WHERE char *NntpUser;
+WHERE char *NntpPass;
+WHERE char *NewsRc;
+#endif
 WHERE char *Outbox;
 WHERE char *Pager;
 WHERE char *PagerFmt;
@@ -146,6 +155,11 @@
 
 WHERE unsigned short Counter INITVAL (0);
 
+#ifdef USE_NNTP
+WHERE short NewsPollTimeout;
+WHERE short NntpContext;
+#endif
+
 WHERE short ConnectTimeout;
 WHERE short FolderColumns;
 WHERE short HistSize;
diff -uNr mutt-1.4.orig/hash.c mutt-1.4/hash.c
--- mutt-1.4.orig/hash.c	Mon Nov 19 11:41:32 2001
+++ mutt-1.4/hash.c	Sun Nov  3 21:57:20 2002
@@ -47,10 +47,35 @@
   if (nelem == 0)
     nelem = 2;
   table->nelem = nelem;
+  table->curnelem = 0;
   table->table = safe_calloc (nelem, sizeof (struct hash_elem *));
   return table;
 }
 
+HASH *hash_resize (HASH *ptr, int nelem)
+{
+  HASH *table;
+  struct hash_elem *elem, *tmp;
+  int i;
+
+  table = hash_create (nelem);
+
+  for (i = 0; i < ptr->nelem; i++)
+  {
+    for (elem = ptr->table[i]; elem; )
+    {
+      tmp = elem;
+      elem = elem->next;
+      hash_insert (table, tmp->key, tmp->data, 1);
+      safe_free ((void **) &tmp);
+    }
+  }
+  safe_free ((void **) &ptr->table);
+  safe_free ((void **) &ptr);
+
+  return table;
+}
+
 /* table        hash table to update
  * key          key to hash on
  * data         data to associate with `key'
@@ -70,6 +95,7 @@
   {
     ptr->next = table->table[h];
     table->table[h] = ptr;
+    table->curnelem++;
   }
   else
   {
@@ -92,6 +118,7 @@
     else
       table->table[h] = ptr;
     ptr->next = tmp;
+    table->curnelem++;
   }
   return h;
 }
@@ -124,6 +151,7 @@
       *last = ptr->next;
       if (destroy) destroy (ptr->data);
       FREE (&ptr);
+      table->curnelem--;
       return;
     }
   }
diff -uNr mutt-1.4.orig/hash.h mutt-1.4/hash.h
--- mutt-1.4.orig/hash.h	Fri Mar  3 11:10:08 2000
+++ mutt-1.4/hash.h	Sun Nov  3 21:57:20 2002
@@ -28,7 +28,7 @@
 
 typedef struct
 {
-  int nelem;
+  int nelem, curnelem;
   struct hash_elem **table;
 }
 HASH;
@@ -40,6 +40,7 @@
 HASH *hash_create (int nelem);
 int hash_string (const unsigned char *s, int n);
 int hash_insert (HASH * table, const char *key, void *data, int allow_dup);
+HASH *hash_resize (HASH * table, int nelem);
 void *hash_find_hash (const HASH * table, int hash, const char *key);
 void hash_delete_hash (HASH * table, int hash, const char *key, const void *data,
 		       void (*destroy) (void *));
diff -uNr mutt-1.4.orig/hdrline.c mutt-1.4/hdrline.c
--- mutt-1.4.orig/hdrline.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/hdrline.c	Sun Nov  3 21:57:20 2002
@@ -255,6 +255,7 @@
  * %E = number of messages in current thread
  * %f = entire from line
  * %F = like %n, unless from self
+ * %g = newsgroup name (if compiled with nntp support)
  * %i = message-id
  * %l = number of lines in the message
  * %L = like %F, except `lists' are displayed first
@@ -268,6 +269,7 @@
  * %T = $to_chars
  * %u = user (login) name of author
  * %v = first name of author, unless from self
+ * %W = where user is (organization)
  * %y = `x-label:' field (if present)
  * %Y = `x-label:' field (if present, tree unfolded, and != parent's x-label)
  * %Z = status flags	*/
@@ -484,6 +486,12 @@
         optional = 0;
       break;
 
+#ifdef USE_NNTP
+    case 'g':
+      mutt_format_s (dest, destlen, prefix, hdr->env->newsgroups ? hdr->env->newsgroups : "");
+      break;
+#endif
+
     case 'i':
       mutt_format_s (dest, destlen, prefix, hdr->env->message_id ? hdr->env->message_id : "<no.id>");
       break;
@@ -655,6 +663,13 @@
       mutt_format_s (dest, destlen, prefix, buf2);
       break;
 
+    case 'W':
+      if (!optional)
+	mutt_format_s (dest, destlen, prefix, hdr->env->organization ? hdr->env->organization : "");
+      else if (!hdr->env->organization)
+	optional = 0;
+      break;
+
     case 'Z':
     
       ch = ' ';
diff -uNr mutt-1.4.orig/headers.c mutt-1.4/headers.c
--- mutt-1.4.orig/headers.c	Mon Nov  5 22:19:33 2001
+++ mutt-1.4/headers.c	Sun Nov  3 21:57:20 2002
@@ -115,6 +115,9 @@
   msg->env = n; n = NULL;
 
   if (!msg->env->in_reply_to)
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+#endif
     mutt_free_list (&msg->env->references);
 
   mutt_expand_aliases_env (msg->env);
diff -uNr mutt-1.4.orig/imap/Makefile.in mutt-1.4/imap/Makefile.in
--- mutt-1.4.orig/imap/Makefile.in	Wed May 29 11:31:24 2002
+++ mutt-1.4/imap/Makefile.in	Sun Nov  3 21:57:30 2002
@@ -1,6 +1,8 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated by automake 1.6.3 from Makefile.am.
+# @configure_input@
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
+# Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -10,7 +12,7 @@
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
-
+@SET_MAKE@
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -31,13 +33,9 @@
 mandir = @mandir@
 includedir = @includedir@
 oldincludedir = /usr/include
-
-DESTDIR =
-
 pkgdatadir = $(datadir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
-
 top_builddir = ..
 
 ACLOCAL = @ACLOCAL@
@@ -45,12 +43,16 @@
 AUTOMAKE = @AUTOMAKE@
 AUTOHEADER = @AUTOHEADER@
 
+am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
 INSTALL = @INSTALL@
-INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)
+INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_DATA = @INSTALL_DATA@
+install_sh_DATA = $(install_sh) -c -m 644
+install_sh_PROGRAM = $(install_sh) -c
+install_sh_SCRIPT = $(install_sh) -c
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
+INSTALL_HEADER = $(INSTALL_DATA)
 transform = @program_transform_name@
-
 NORMAL_INSTALL = :
 PRE_INSTALL = :
 POST_INSTALL = :
@@ -59,6 +61,14 @@
 POST_UNINSTALL = :
 host_alias = @host_alias@
 host_triplet = @host@
+
+EXEEXT = @EXEEXT@
+OBJEXT = @OBJEXT@
+PATH_SEPARATOR = @PATH_SEPARATOR@
+AMTAR = @AMTAR@
+
+AR = @AR@
+AWK = @AWK@
 BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
 CATALOGS = @CATALOGS@
 CATOBJEXT = @CATOBJEXT@
@@ -67,6 +77,7 @@
 DATADIRNAME = @DATADIRNAME@
 DBX = @DBX@
 DEBUGGER = @DEBUGGER@
+DEPDIR = @DEPDIR@
 DOTLOCK_GROUP = @DOTLOCK_GROUP@
 DOTLOCK_PERMISSION = @DOTLOCK_PERMISSION@
 DOTLOCK_TARGET = @DOTLOCK_TARGET@
@@ -75,6 +86,7 @@
 GLIBC21 = @GLIBC21@
 GMOFILES = @GMOFILES@
 GMSGFMT = @GMSGFMT@
+INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
 INSTOBJEXT = @INSTOBJEXT@
 INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
@@ -85,7 +97,6 @@
 LIBICONV = @LIBICONV@
 LIBIMAP = @LIBIMAP@
 LIBIMAPDEPS = @LIBIMAPDEPS@
-MAKEINFO = @MAKEINFO@
 MKINSTALLDIRS = @MKINSTALLDIRS@
 MSGFMT = @MSGFMT@
 MUTTLIBS = @MUTTLIBS@
@@ -98,18 +109,21 @@
 RANLIB = @RANLIB@
 SDB = @SDB@
 SENDMAIL = @SENDMAIL@
+STRIP = @STRIP@
 SUBVERSION = @SUBVERSION@
 U = @U@
 USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+am__include = @am__include@
+am__quote = @am__quote@
 docdir = @docdir@
-
-AR = @AR@
+install_sh = @install_sh@
 
 AUTOMAKE_OPTIONS = foreign
 
 @USE_GSS_TRUE@GSSSOURCES = auth_gss.c
+
 @USE_SASL_TRUE@AUTHENTICATORS = auth_sasl.c
 @USE_SASL_FALSE@AUTHENTICATORS = auth_anon.c auth_cram.c
 
@@ -120,206 +134,241 @@
 noinst_LIBRARIES = libimap.a
 noinst_HEADERS = auth.h imap_private.h message.h
 
-libimap_a_SOURCES = auth.c auth_login.c browse.c command.c imap.c imap.h 	message.c utf7.c util.c $(AUTHENTICATORS) $(GSSSOURCES)
+libimap_a_SOURCES = auth.c auth_login.c browse.c command.c imap.c imap.h \
+	message.c utf7.c util.c $(AUTHENTICATORS) $(GSSSOURCES)
 
+subdir = imap
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
-CONFIG_HEADER = ../config.h
-CONFIG_CLEAN_FILES = 
-LIBRARIES =  $(noinst_LIBRARIES)
+CONFIG_HEADER = $(top_builddir)/config.h
+CONFIG_CLEAN_FILES =
+LIBRARIES = $(noinst_LIBRARIES)
+
+libimap_a_AR = $(AR) cru
+libimap_a_LIBADD =
+@USE_SASL_TRUE@am__objects_1 = auth_sasl.$(OBJEXT)
+@USE_SASL_FALSE@am__objects_1 = auth_anon.$(OBJEXT) auth_cram.$(OBJEXT)
+@USE_GSS_TRUE@am__objects_2 = auth_gss.$(OBJEXT)
+am_libimap_a_OBJECTS = auth.$(OBJEXT) auth_login.$(OBJEXT) \
+	browse.$(OBJEXT) command.$(OBJEXT) imap.$(OBJEXT) \
+	message.$(OBJEXT) utf7.$(OBJEXT) util.$(OBJEXT) \
+	$(am__objects_1) $(am__objects_2)
+libimap_a_OBJECTS = $(am_libimap_a_OBJECTS)
 
-
-DEFS = @DEFS@ -I. -I$(srcdir) -I..
+DEFS = @DEFS@
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
-libimap_a_LIBADD = 
-@USE_SASL_TRUE@@USE_GSS_TRUE@libimap_a_OBJECTS =  auth.o auth_login.o \
-@USE_SASL_TRUE@@USE_GSS_TRUE@browse.o command.o imap.o message.o utf7.o \
-@USE_SASL_TRUE@@USE_GSS_TRUE@util.o auth_sasl.o auth_gss.o
-@USE_SASL_FALSE@@USE_GSS_TRUE@libimap_a_OBJECTS =  auth.o auth_login.o \
-@USE_SASL_FALSE@@USE_GSS_TRUE@browse.o command.o imap.o message.o \
-@USE_SASL_FALSE@@USE_GSS_TRUE@utf7.o util.o auth_anon.o auth_cram.o \
-@USE_SASL_FALSE@@USE_GSS_TRUE@auth_gss.o
-@USE_SASL_FALSE@@USE_GSS_FALSE@libimap_a_OBJECTS =  auth.o auth_login.o \
-@USE_SASL_FALSE@@USE_GSS_FALSE@browse.o command.o imap.o message.o \
-@USE_SASL_FALSE@@USE_GSS_FALSE@utf7.o util.o auth_anon.o auth_cram.o
-@USE_SASL_TRUE@@USE_GSS_FALSE@libimap_a_OBJECTS =  auth.o auth_login.o \
-@USE_SASL_TRUE@@USE_GSS_FALSE@browse.o command.o imap.o message.o \
-@USE_SASL_TRUE@@USE_GSS_FALSE@utf7.o util.o auth_sasl.o
-CFLAGS = @CFLAGS@
-COMPILE = $(CC) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
+depcomp = $(SHELL) $(top_srcdir)/depcomp
+am__depfiles_maybe = depfiles
+@AMDEP_TRUE@DEP_FILES = ./$(DEPDIR)/auth.Po ./$(DEPDIR)/auth_anon.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/auth_cram.Po ./$(DEPDIR)/auth_gss.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/auth_login.Po ./$(DEPDIR)/auth_sasl.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/browse.Po ./$(DEPDIR)/command.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/imap.Po ./$(DEPDIR)/message.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/utf7.Po ./$(DEPDIR)/util.Po
+COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
+	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
-LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@
-HEADERS =  $(noinst_HEADERS)
-
-DIST_COMMON =  README Makefile.am Makefile.in TODO
-
-
-DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
+LINK = $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
+CFLAGS = @CFLAGS@
+DIST_SOURCES = $(libimap_a_SOURCES)
+HEADERS = $(noinst_HEADERS)
 
-TAR = tar
-GZIP_ENV = --best
+DIST_COMMON = README $(noinst_HEADERS) Makefile.am Makefile.in TODO
 SOURCES = $(libimap_a_SOURCES)
-OBJECTS = $(libimap_a_OBJECTS)
-
-all: all-redirect
-.SUFFIXES:
-.SUFFIXES: .S .c .o .s
-$(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --foreign --include-deps imap/Makefile
-
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
-	cd $(top_builddir) \
-	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
+all: all-am
 
-mostlyclean-noinstLIBRARIES:
+.SUFFIXES:
+.SUFFIXES: .c .o .obj
+$(srcdir)/Makefile.in:  Makefile.am  $(top_srcdir)/configure.in $(ACLOCAL_M4)
+	cd $(top_srcdir) && \
+	  $(AUTOMAKE) --foreign  imap/Makefile
+Makefile:  $(srcdir)/Makefile.in  $(top_builddir)/config.status
+	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)
 
 clean-noinstLIBRARIES:
 	-test -z "$(noinst_LIBRARIES)" || rm -f $(noinst_LIBRARIES)
-
-distclean-noinstLIBRARIES:
-
-maintainer-clean-noinstLIBRARIES:
-
-.c.o:
-	$(COMPILE) -c $<
-
-.s.o:
-	$(COMPILE) -c $<
-
-.S.o:
-	$(COMPILE) -c $<
+libimap.a: $(libimap_a_OBJECTS) $(libimap_a_DEPENDENCIES) 
+	-rm -f libimap.a
+	$(libimap_a_AR) libimap.a $(libimap_a_OBJECTS) $(libimap_a_LIBADD)
+	$(RANLIB) libimap.a
 
 mostlyclean-compile:
-	-rm -f *.o core *.core
-
-clean-compile:
+	-rm -f *.$(OBJEXT) core *.core
 
 distclean-compile:
 	-rm -f *.tab.c
 
-maintainer-clean-compile:
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/auth.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/auth_anon.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/auth_cram.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/auth_gss.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/auth_login.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/auth_sasl.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/browse.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/command.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/imap.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/message.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utf7.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/util.Po@am__quote@
 
-libimap.a: $(libimap_a_OBJECTS) $(libimap_a_DEPENDENCIES)
-	-rm -f libimap.a
-	$(AR) cru libimap.a $(libimap_a_OBJECTS) $(libimap_a_LIBADD)
-	$(RANLIB) libimap.a
+distclean-depend:
+	-rm -rf ./$(DEPDIR)
+
+.c.o:
+@AMDEP_TRUE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
+@AMDEP_TRUE@	$(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+	$(COMPILE) -c `test -f '$<' || echo '$(srcdir)/'`$<
+
+.c.obj:
+@AMDEP_TRUE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@	depfile='$(DEPDIR)/$*.Po' tmpdepfile='$(DEPDIR)/$*.TPo' @AMDEPBACKSLASH@
+@AMDEP_TRUE@	$(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+	$(COMPILE) -c `cygpath -w $<`
+CCDEPMODE = @CCDEPMODE@
+uninstall-info-am:
+
+ETAGS = etags
+ETAGSFLAGS =
 
 tags: TAGS
 
-ID: $(HEADERS) $(SOURCES) $(LISP)
-	list='$(SOURCES) $(HEADERS)'; \
-	unique=`for i in $$list; do echo $$i; done | \
-	  awk '    { files[$$0] = 1; } \
+ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
+	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
-	here=`pwd` && cd $(srcdir) \
-	  && mkid -f$$here/ID $$unique $(LISP)
+	mkid -fID $$unique
 
-TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) $(LISP)
+TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
+		$(TAGS_FILES) $(LISP)
 	tags=; \
 	here=`pwd`; \
-	list='$(SOURCES) $(HEADERS)'; \
-	unique=`for i in $$list; do echo $$i; done | \
-	  awk '    { files[$$0] = 1; } \
+	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
+	unique=`for i in $$list; do \
+	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
+	  done | \
+	  $(AWK) '    { files[$$0] = 1; } \
 	       END { for (i in files) print i; }'`; \
-	test -z "$(ETAGS_ARGS)$$unique$(LISP)$$tags" \
-	  || (cd $(srcdir) && etags $(ETAGS_ARGS) $$tags  $$unique $(LISP) -o $$here/TAGS)
-
-mostlyclean-tags:
-
-clean-tags:
+	test -z "$(ETAGS_ARGS)$$tags$$unique" \
+	  || $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
+	     $$tags $$unique
+
+GTAGS:
+	here=`$(am__cd) $(top_builddir) && pwd` \
+	  && cd $(top_srcdir) \
+	  && gtags -i $(GTAGS_ARGS) $$here
 
 distclean-tags:
-	-rm -f TAGS ID
+	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 
-maintainer-clean-tags:
-
-distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
-
-subdir = imap
+top_distdir = ..
+distdir = $(top_distdir)/$(PACKAGE)-$(VERSION)
 
 distdir: $(DISTFILES)
-	@for file in $(DISTFILES); do \
-	  d=$(srcdir); \
+	@list='$(DISTFILES)'; for file in $$list; do \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
+	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
+	    dir="/$$dir"; \
+	    $(mkinstalldirs) "$(distdir)$$dir"; \
+	  else \
+	    dir=''; \
+	  fi; \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$d/$$file $(distdir)/$$file; \
+	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
 	  else \
 	    test -f $(distdir)/$$file \
-	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
-	    || cp -p $$d/$$file $(distdir)/$$file || :; \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
 	  fi; \
 	done
-
-info-am:
-info: info-am
-dvi-am:
-dvi: dvi-am
 check-am: all-am
 check: check-am
-installcheck-am:
-installcheck: installcheck-am
-install-exec-am:
-install-exec: install-exec-am
+all-am: Makefile $(LIBRARIES) $(HEADERS)
 
-install-data-am:
-install-data: install-data-am
+installdirs:
 
-install-am: all-am
-	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
 install: install-am
-uninstall-am:
+install-exec: install-exec-am
+install-data: install-data-am
 uninstall: uninstall-am
-all-am: Makefile $(LIBRARIES) $(HEADERS)
-all-redirect: all-am
-install-strip:
-	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
-installdirs:
 
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
 
+installcheck: installcheck-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
+	  INSTALL_STRIP_FLAG=-s \
+	  `test -z '$(STRIP)' || \
+	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
 mostlyclean-generic:
 
 clean-generic:
 
 distclean-generic:
 	-rm -f Makefile $(CONFIG_CLEAN_FILES)
-	-rm -f config.cache config.log stamp-h stamp-h[0-9]*
 
 maintainer-clean-generic:
-mostlyclean-am:  mostlyclean-noinstLIBRARIES mostlyclean-compile \
-		mostlyclean-tags mostlyclean-generic
+	@echo "This command is intended for maintainers to use"
+	@echo "it deletes files that may require special tools to rebuild."
+clean: clean-am
 
-mostlyclean: mostlyclean-am
+clean-am: clean-generic clean-noinstLIBRARIES mostlyclean-am
 
-clean-am:  clean-noinstLIBRARIES clean-compile clean-tags clean-generic \
-		mostlyclean-am
+distclean: distclean-am
 
-clean: clean-am
+distclean-am: clean-am distclean-compile distclean-depend \
+	distclean-generic distclean-tags
 
-distclean-am:  distclean-noinstLIBRARIES distclean-compile \
-		distclean-tags distclean-generic clean-am
+dvi: dvi-am
 
-distclean: distclean-am
+dvi-am:
 
-maintainer-clean-am:  maintainer-clean-noinstLIBRARIES \
-		maintainer-clean-compile maintainer-clean-tags \
-		maintainer-clean-generic distclean-am
-	@echo "This command is intended for maintainers to use;"
-	@echo "it deletes files that may require special tools to rebuild."
+info: info-am
+
+info-am:
+
+install-data-am:
+
+install-exec-am:
+
+install-info: install-info-am
+
+install-man:
+
+installcheck-am:
 
 maintainer-clean: maintainer-clean-am
 
-.PHONY: mostlyclean-noinstLIBRARIES distclean-noinstLIBRARIES \
-clean-noinstLIBRARIES maintainer-clean-noinstLIBRARIES \
-mostlyclean-compile distclean-compile clean-compile \
-maintainer-clean-compile tags mostlyclean-tags distclean-tags \
-clean-tags maintainer-clean-tags distdir info-am info dvi-am dvi check \
-check-am installcheck-am installcheck install-exec-am install-exec \
-install-data-am install-data install-am install uninstall-am uninstall \
-all-redirect all-am all installdirs mostlyclean-generic \
-distclean-generic clean-generic maintainer-clean-generic clean \
-mostlyclean distclean maintainer-clean
+maintainer-clean-am: distclean-am maintainer-clean-generic
+
+mostlyclean: mostlyclean-am
+
+mostlyclean-am: mostlyclean-compile mostlyclean-generic
+
+uninstall-am: uninstall-info-am
 
+.PHONY: GTAGS all all-am check check-am clean clean-generic \
+	clean-noinstLIBRARIES distclean distclean-compile \
+	distclean-depend distclean-generic distclean-tags distdir dvi \
+	dvi-am info info-am install install-am install-data \
+	install-data-am install-exec install-exec-am install-info \
+	install-info-am install-man install-strip installcheck \
+	installcheck-am installdirs maintainer-clean \
+	maintainer-clean-generic mostlyclean mostlyclean-compile \
+	mostlyclean-generic tags uninstall uninstall-am \
+	uninstall-info-am
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
diff -uNr mutt-1.4.orig/init.c mutt-1.4/init.c
--- mutt-1.4.orig/init.c	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/init.c	Sun Nov  3 21:57:20 2002
@@ -1789,6 +1789,28 @@
   else
     Fqdn = safe_strdup(NONULL(Hostname));
 
+#ifdef USE_NNTP
+  {
+    FILE *f;
+    char *i;
+
+    if ((f = safe_fopen (SYSCONFDIR "/nntpserver", "r")))
+    {
+      buffer[0] = '\0';
+      fgets (buffer, sizeof (buffer), f);
+      p = &buffer;
+      SKIPWS (p);
+      i = p;
+      while (*i && (*i != ' ') && (*i != '\t') && (*i != '\r') && (*i != '\n')) i++;
+      *i = '\0';
+      NewsServer = safe_strdup (p);
+      fclose (f);
+    }
+  }
+  if ((p = getenv ("NNTPSERVER")))
+    NewsServer = safe_strdup (p);
+#endif
+
   if ((p = getenv ("MAIL")))
     Spoolfile = safe_strdup (p);
   else if ((p = getenv ("MAILDIR")))
diff -uNr mutt-1.4.orig/init.h mutt-1.4/init.h
--- mutt-1.4.orig/init.h	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/init.h	Sun Nov  3 21:57:20 2002
@@ -193,6 +193,20 @@
   ** If set, Mutt will prompt you for carbon-copy (Cc) recipients before
   ** editing the body of an outgoing message.
   */  
+#ifdef USE_NNTP
+  { "ask_follow_up",	DT_BOOL, R_NONE, OPTASKFOLLOWUP, 0 },
+  /*
+  ** .pp
+  ** If set, Mutt will prompt you for follow-up groups before editing
+  ** the body of an outgoing message.
+  */  
+  { "ask_x_comment_to",	DT_BOOL, R_NONE, OPTASKXCOMMENTTO, 0 },
+  /*
+  ** .pp
+  ** If set, Mutt will prompt you for x-comment-to field before editing
+  ** the body of an outgoing message.
+  */  
+#endif
   { "attach_format",	DT_STR,  R_NONE, UL &AttachFormat, UL "%u%D%I %t%4n %T%.40d%> [%.7m/%.10M, %.6e%?C?, %C?, %s] " },
   /*
   ** .pp
@@ -273,6 +287,14 @@
   ** When this variable is set, mutt will include Delivered-To headers when
   ** bouncing messages.  Postfix users may wish to unset this variable.
   */
+#ifdef USE_NNTP
+  { "catchup_newsgroup", DT_QUAD, R_NONE, OPT_CATCHUP, M_ASKYES },
+  /*
+  ** .pp
+  ** If this variable is \fIset\fP, Mutt will mark all articles in newsgroup
+  ** as read when you quit the newsgroup (catchup newsgroup).
+  */
+#endif
   { "charset",		DT_STR,	 R_NONE, UL &Charset, UL 0 },
   /*
   ** .pp
@@ -565,6 +587,16 @@
   ** subscribed list will be sent to both the list and your address,
   ** resulting in two copies of the same email for you.
   */
+#ifdef USE_NNTP
+  { "followup_to_poster", DT_QUAD, R_NONE, OPT_FOLLOWUPTOPOSTER, M_ASKYES },
+  /*
+  ** .pp
+  ** If this variable is \fIset\fP and the keyword "poster" is present in
+  ** \fIFollowup-To\fP header, follow-up to newsgroup function is not
+  ** permitted.  The message will be mailed to the submitter of the
+  ** message via mail.
+  */
+#endif
   { "force_name",	DT_BOOL, R_NONE, OPTFORCENAME, 0 },
   /*
   ** .pp
@@ -628,6 +660,27 @@
   ** a regular expression that will match the whole name so mutt will expand
   ** "Franklin" to "Franklin, Steve".
   */
+#ifdef USE_NNTP
+  { "group_index_format", DT_STR, R_BOTH, UL &GroupFormat, UL "%4C %M%N %5s  %-45.45f %d" },
+  /*
+  ** .pp
+  ** This variable allows you to customize the newsgroup browser display to
+  ** your personal taste.  This string is similar to ``$index_format'', but
+  ** has its own set of printf()-like sequences:
+  ** .pp
+  ** .ts
+  ** %C      current newsgroup number
+  ** %d      description of newsgroup (becomes from server)
+  ** %f      newsgroup name
+  ** %M      - if newsgroup not allowed for direct post (moderated for example)
+  ** %N      N if newsgroup is new, u if unsubscribed, blank otherwise
+  ** %n      number of new articles in newsgroup
+  ** %s      number of unread articles in newsgroup
+  ** %>X     right justify the rest of the string and pad with character "X"
+  ** %|X     pad to the end of the line with character "X"
+  ** .te
+  */
+#endif
   { "hdr_format",	DT_SYN,  R_NONE, UL "index_format", 0 },
   /*
   */
@@ -874,6 +927,7 @@
   ** .dt %E .dd number of messages in current thread
   ** .dt %f .dd entire From: line (address + real name)
   ** .dt %F .dd author name, or recipient name if the message is from you
+  ** .dt %g .dd newsgroup name (if compiled with nntp support)
   ** .dt %i .dd message-id of the current message
   ** .dt %l .dd number of lines in the message
   ** .dt %L .dd If an address in the To or CC header field matches an address
@@ -891,6 +945,7 @@
   ** .dt %T .dd the appropriate character from the $$to_chars string
   ** .dt %u .dd user (login) name of the author
   ** .dt %v .dd first name of the author, or the recipient if the message is from you
+  ** .dt %W .dd name of organization of author (`organization:' field)
   ** .dt %y .dd `x-label:' field, if present
   ** .dt %Y .dd `x-label' field, if present, and (1) not at part of a thread tree,
   **            (2) at the top of a thread, or (3) `x-label' is different from
@@ -913,6 +968,21 @@
   ** .pp
   ** See also: ``$$to_chars''.
   */
+#ifdef USE_NNTP
+  { "inews",          DT_PATH, R_NONE, UL &Inews, UL "" },
+  /*
+  ** .pp
+  ** If set, specifies the program and arguments used to deliver news posted
+  ** by Mutt.  Otherwise, mutt posts article using current connection to
+  ** news server.  The following printf-style sequence is understood:
+  ** .pp
+  ** .ts
+  ** %s      newsserver name
+  ** .te
+  ** .pp
+  ** Example: set inews="/usr/local/bin/inews -hS"
+  */
+#endif
   { "ispell",		DT_PATH, R_NONE, UL &Ispell, UL ISPELL },
   /*
   ** .pp
@@ -1077,6 +1147,16 @@
   ** be attached to the newly composed message if this option is set.
   */
 
+#ifdef USE_NNTP
+  { "mime_subject",   DT_BOOL, R_NONE, OPTMIMESUBJECT, 1 },
+  /*
+  ** .pp
+  ** If \fIunset\fP, 8-bit ``subject:'' line in article header will not be
+  ** encoded according to RFC2047 to base64.  This is useful when message
+  ** is Usenet article, because MIME for news is nonstandard feature.
+  */
+#endif
+
 #ifdef MIXMASTER
   { "mix_entry_format", DT_STR,  R_NONE, UL &MixEntryFormat, UL "%4n %c %-16s %a" },
   /*
@@ -1128,6 +1208,77 @@
   ** to allow more room the tree and message subjects.  This is useful on
   ** narrow screens.
   */
+#ifdef USE_NNTP
+  { "news_cache_dir", DT_PATH, R_NONE, UL &NewsCacheDir, UL "~/.mutt" },
+  /*
+  ** .pp
+  ** This variable pointing to directory where Mutt will save cached news
+  ** articles headers in. If \fIunset\fP, headers will not be saved at all
+  ** and will be reloaded each time when you enter to newsgroup.
+  */
+  { "news_server",    DT_STR,  R_NONE, UL &NewsServer, 0 },
+  /*
+  ** .pp
+  ** This variable specifies domain name or address of NNTP server. It
+  ** defaults to the newsserver specified in the environment variable
+  ** $$$NNTPSERVER or contained in the file /etc/nntpserver.  You can also
+  ** specify username and an alternative port for each newsserver, ie:
+  ** .pp
+  ** [nntp[s]://][username[:password]@]newsserver[:port]
+  */
+  { "newsrc",         DT_PATH, R_NONE, UL &NewsRc, UL "~/.newsrc" },
+  /*
+  ** .pp
+  ** The file, containing info about subscribed newsgroups - names and
+  ** indexes of read articles.  The following printf-style sequence
+  ** is understood:
+  ** .pp
+  ** .ts
+  ** %s      newsserver name
+  ** .te
+  */
+  { "nntp_context",   DT_NUM,  R_NONE, UL &NntpContext, 1000 },
+  /*
+  ** .pp
+  ** This variable defines number of articles which will be in index when
+  ** newsgroup entered.  If active newsgroup have more articles than this
+  ** number, oldest articles will be ignored.  Also controls how many
+  ** articles headers will be saved in cache when you quit newsgroup.
+  */
+  { "nntp_load_description", DT_BOOL, R_NONE, OPTLOADDESC, 1 },
+  /*
+  ** .pp
+  ** This variable controls whether or not descriptions for each newsgroup
+  ** must be loaded when newsgroup is added to list (first time list
+  ** loading or new newsgroup adding).
+  */
+  { "nntp_user",      DT_STR,  R_NONE, UL &NntpUser, UL "" },
+  /*
+  ** .pp
+  ** Your login name on the NNTP server.  If \fIunset\fP and NNTP server requires
+  ** authentification, Mutt will prompt you for your account name when you
+  ** connect to newsserver.
+  */
+  { "nntp_pass",      DT_STR,  R_NONE, UL &NntpPass, UL "" },
+  /*
+  ** .pp
+  ** Your password for NNTP account.
+  */
+  { "nntp_poll",      DT_NUM,  R_NONE, UL &NewsPollTimeout, 60 },
+  /*
+  ** .pp
+  ** The time in seconds until any operations on newsgroup except post new
+  ** article will cause recheck for new news.  If set to 0, Mutt will
+  ** recheck newsgroup on each operation in index (stepping, read article,
+  ** etc.).
+  */
+  { "nntp_reconnect", DT_QUAD, R_NONE, OPT_NNTPRECONNECT, M_ASKYES },
+  /*
+  ** .pp
+  ** Controls whether or not Mutt will try to reconnect to newsserver when
+  ** connection lost.
+  */
+#endif
   { "pager",		DT_PATH, R_NONE, UL &Pager, UL "builtin" },
   /*
   ** .pp
@@ -1633,6 +1784,16 @@
   { "post_indent_str",  DT_SYN,  R_NONE, UL "post_indent_string", 0 },
   /*
   */
+#ifdef USE_NNTP
+  { "post_moderated", DT_QUAD, R_NONE, OPT_TOMODERATED, M_ASKYES },
+  /*
+  ** .pp
+  ** If set to \fIyes\fP, Mutt will post article to newsgroup that have
+  ** not permissions to posting (e.g. moderated).  \fBNote:\fP if newsserver
+  ** does not support posting to that newsgroup or totally read-only, that
+  ** posting will not have an effect.
+  */
+#endif
   { "postpone",		DT_QUAD, R_NONE, OPT_POSTPONE, M_ASKYES },
   /*
   ** .pp
@@ -1991,6 +2152,28 @@
   ** Command to use when spawning a subshell.  By default, the user's login
   ** shell from /etc/passwd is used.
   */
+#ifdef USE_NNTP
+  { "save_unsubscribed",DT_BOOL, R_NONE, OPTSAVEUNSUB, 0 },
+  /*
+  ** .pp
+  ** When \fIset\fP, info about unsubscribed newsgroups will be saved into
+  ** ``newsrc'' file and into cache.
+  */
+  { "show_new_news",  DT_BOOL, R_NONE, OPTSHOWNEWNEWS, 1 },
+  /*
+  ** .pp
+  ** If \fIset\fP, newsserver will be asked for new newsgroups on entering
+  ** the browser.  Otherwise, it will be done only once for a newsserver.
+  ** Also controls whether or not number of new articles of subscribed
+  ** newsgroups will be then checked.
+  */
+  { "show_only_unread",  DT_BOOL, R_NONE, OPTSHOWONLYUNREAD, 0 },
+  /*
+  ** .pp
+  ** If \fIset\fP, only subscribed newsgroups that contain unread articles
+  ** will be displayed in browser.
+  */
+#endif
   { "sig_dashes",	DT_BOOL, R_NONE, OPTSIGDASHES, 1 },
   /*
   ** .pp
@@ -2437,6 +2620,14 @@
   ** Controls whether mutt writes out the Bcc header when preparing
   ** messages to be sent.  Exim users may wish to use this.
   */
+#ifdef USE_NNTP
+  { "x_comment_to",   DT_BOOL, R_NONE, OPTXCOMMENTTO, 0 },
+  /*
+  ** .pp
+  ** If \fIset\fP, Mutt will add ``X-Comment-To:'' field (that contains full
+  ** name of original article author) to article that followuped to newsgroup.
+  */
+#endif
   /*--*/
   { NULL }
 };
diff -uNr mutt-1.4.orig/install-sh mutt-1.4/install-sh
--- mutt-1.4.orig/install-sh	Tue Feb 26 11:37:41 2002
+++ mutt-1.4/install-sh	Sun Nov  3 21:57:29 2002
@@ -1,15 +1,27 @@
-#! /bin/sh
+#!/bin/sh
 #
 # install - install a program, script, or datafile
-# This comes from X11R5.
+# This comes from X11R5 (mit/util/scripts/install.sh).
+#
+# Copyright 1991 by the Massachusetts Institute of Technology
+#
+# Permission to use, copy, modify, distribute, and sell this software and its
+# documentation for any purpose is hereby granted without fee, provided that
+# the above copyright notice appear in all copies and that both that
+# copyright notice and this permission notice appear in supporting
+# documentation, and that the name of M.I.T. not be used in advertising or
+# publicity pertaining to distribution of the software without specific,
+# written prior permission.  M.I.T. makes no representations about the
+# suitability of this software for any purpose.  It is provided "as is"
+# without express or implied warranty.
 #
 # Calling this script install-sh is preferred over install.sh, to prevent
 # `make' implicit rules from creating a file called install from it
 # when there is no Makefile.
 #
 # This script is compatible with the BSD install script, but was written
-# from scratch.
-#
+# from scratch.  It can only install one file at a time, a restriction
+# shared with many OS's install programs.
 
 
 # set DOITPROG to echo to test this script
@@ -97,7 +109,7 @@
 	echo "install:	no input file specified"
 	exit 1
 else
-	true
+	:
 fi
 
 if [ x"$dir_arg" != x ]; then
@@ -106,8 +118,9 @@
 	
 	if [ -d $dst ]; then
 		instcmd=:
+		chmodcmd=""
 	else
-		instcmd=mkdir
+		instcmd=$mkdirprog
 	fi
 else
 
@@ -115,9 +128,9 @@
 # might cause directories to be created, which would be especially bad 
 # if $src (and thus $dsttmp) contains '*'.
 
-	if [ -f $src -o -d $src ]
+	if [ -f "$src" ] || [ -d "$src" ]
 	then
-		true
+		:
 	else
 		echo "install:  $src does not exist"
 		exit 1
@@ -128,7 +141,7 @@
 		echo "install:	no destination specified"
 		exit 1
 	else
-		true
+		:
 	fi
 
 # If destination is a directory, append the input filename; if your system
@@ -138,7 +151,7 @@
 	then
 		dst="$dst"/`basename $src`
 	else
-		true
+		:
 	fi
 fi
 
@@ -150,8 +163,8 @@
 
 # Skip lots of stat calls in the usual case.
 if [ ! -d "$dstdir" ]; then
-defaultIFS='	
-'
+defaultIFS='
+	'
 IFS="${IFS-${defaultIFS}}"
 
 oIFS="${IFS}"
@@ -170,7 +183,7 @@
         then
 		$mkdirprog "${pathcomp}"
 	else
-		true
+		:
 	fi
 
 	pathcomp="${pathcomp}/"
@@ -181,10 +194,10 @@
 then
 	$doit $instcmd $dst &&
 
-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dst; else true ; fi &&
-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dst; else true ; fi &&
-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dst; else true ; fi &&
-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dst; else true ; fi
+	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dst; else : ; fi &&
+	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dst; else : ; fi &&
+	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dst; else : ; fi &&
+	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dst; else : ; fi
 else
 
 # If we're going to rename the final executable, determine the name now.
@@ -203,7 +216,7 @@
 	then
 		dstfile=`basename $dst`
 	else
-		true
+		:
 	fi
 
 # Make a temp file name in the proper directory.
@@ -222,10 +235,10 @@
 # ignore errors from any of these, just make sure not to ignore
 # errors from the above "$doit $instcmd $src $dsttmp" command.
 
-	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dsttmp; else true;fi &&
-	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dsttmp; else true;fi &&
-	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dsttmp; else true;fi &&
-	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dsttmp; else true;fi &&
+	if [ x"$chowncmd" != x ]; then $doit $chowncmd $dsttmp; else :;fi &&
+	if [ x"$chgrpcmd" != x ]; then $doit $chgrpcmd $dsttmp; else :;fi &&
+	if [ x"$stripcmd" != x ]; then $doit $stripcmd $dsttmp; else :;fi &&
+	if [ x"$chmodcmd" != x ]; then $doit $chmodcmd $dsttmp; else :;fi &&
 
 # Now rename the file to the real destination.
 
diff -uNr mutt-1.4.orig/keymap.c mutt-1.4/keymap.c
--- mutt-1.4.orig/keymap.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/keymap.c	Sun Nov  3 21:57:20 2002
@@ -593,7 +593,6 @@
   km_bindkey ("<enter>", MENU_MAIN, OP_DISPLAY_MESSAGE);
 
   km_bindkey ("x", MENU_PAGER, OP_EXIT);
-  km_bindkey ("i", MENU_PAGER, OP_EXIT);
   km_bindkey ("<backspace>", MENU_PAGER, OP_PREV_LINE);
   km_bindkey ("<pagedown>", MENU_PAGER, OP_NEXT_PAGE);
   km_bindkey ("<pageup>", MENU_PAGER, OP_PREV_PAGE);
diff -uNr mutt-1.4.orig/m4/Makefile.in mutt-1.4/m4/Makefile.in
--- mutt-1.4.orig/m4/Makefile.in	Wed May 29 11:31:05 2002
+++ mutt-1.4/m4/Makefile.in	Sun Nov  3 21:57:30 2002
@@ -1,6 +1,8 @@
-# Makefile.in generated automatically by automake 1.4-p4 from Makefile.am
+# Makefile.in generated by automake 1.6.3 from Makefile.am.
+# @configure_input@
 
-# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
+# Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002
+# Free Software Foundation, Inc.
 # This Makefile.in is free software; the Free Software Foundation
 # gives unlimited permission to copy and/or distribute it,
 # with or without modifications, as long as this notice is preserved.
@@ -10,7 +12,7 @@
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
-
+@SET_MAKE@
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -31,13 +33,9 @@
 mandir = @mandir@
 includedir = @includedir@
 oldincludedir = /usr/include
-
-DESTDIR =
-
 pkgdatadir = $(datadir)/@PACKAGE@
 pkglibdir = $(libdir)/@PACKAGE@
 pkgincludedir = $(includedir)/@PACKAGE@
-
 top_builddir = ..
 
 ACLOCAL = @ACLOCAL@
@@ -45,12 +43,16 @@
 AUTOMAKE = @AUTOMAKE@
 AUTOHEADER = @AUTOHEADER@
 
+am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
 INSTALL = @INSTALL@
-INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)
+INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_DATA = @INSTALL_DATA@
+install_sh_DATA = $(install_sh) -c -m 644
+install_sh_PROGRAM = $(install_sh) -c
+install_sh_SCRIPT = $(install_sh) -c
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
+INSTALL_HEADER = $(INSTALL_DATA)
 transform = @program_transform_name@
-
 NORMAL_INSTALL = :
 PRE_INSTALL = :
 POST_INSTALL = :
@@ -59,7 +61,13 @@
 POST_UNINSTALL = :
 host_alias = @host_alias@
 host_triplet = @host@
+
+EXEEXT = @EXEEXT@
+OBJEXT = @OBJEXT@
+PATH_SEPARATOR = @PATH_SEPARATOR@
+AMTAR = @AMTAR@
 AR = @AR@
+AWK = @AWK@
 BUILD_INCLUDED_LIBINTL = @BUILD_INCLUDED_LIBINTL@
 CATALOGS = @CATALOGS@
 CATOBJEXT = @CATOBJEXT@
@@ -68,6 +76,7 @@
 DATADIRNAME = @DATADIRNAME@
 DBX = @DBX@
 DEBUGGER = @DEBUGGER@
+DEPDIR = @DEPDIR@
 DOTLOCK_GROUP = @DOTLOCK_GROUP@
 DOTLOCK_PERMISSION = @DOTLOCK_PERMISSION@
 DOTLOCK_TARGET = @DOTLOCK_TARGET@
@@ -76,6 +85,7 @@
 GLIBC21 = @GLIBC21@
 GMOFILES = @GMOFILES@
 GMSGFMT = @GMSGFMT@
+INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
 INSTOBJEXT = @INSTOBJEXT@
 INTLBISON = @INTLBISON@
 INTLLIBS = @INTLLIBS@
@@ -86,7 +96,6 @@
 LIBICONV = @LIBICONV@
 LIBIMAP = @LIBIMAP@
 LIBIMAPDEPS = @LIBIMAPDEPS@
-MAKEINFO = @MAKEINFO@
 MKINSTALLDIRS = @MKINSTALLDIRS@
 MSGFMT = @MSGFMT@
 MUTTLIBS = @MUTTLIBS@
@@ -99,112 +108,145 @@
 RANLIB = @RANLIB@
 SDB = @SDB@
 SENDMAIL = @SENDMAIL@
+STRIP = @STRIP@
 SUBVERSION = @SUBVERSION@
 U = @U@
 USE_INCLUDED_LIBINTL = @USE_INCLUDED_LIBINTL@
 USE_NLS = @USE_NLS@
 VERSION = @VERSION@
+am__include = @am__include@
+am__quote = @am__quote@
 docdir = @docdir@
+install_sh = @install_sh@
 
-EXTRA_DIST = README Makefile.am.in codeset.m4 curslib.m4 funcdecl.m4 gettext.m4 glibc21.m4 gssapi.m4 iconv.m4 lcmessage.m4 progtest.m4
+EXTRA_DIST = README Makefile.am.in \
+codeset.m4 \
+curslib.m4 \
+funcdecl.m4 \
+gettext.m4 \
+glibc21.m4 \
+gssapi.m4 \
+iconv.m4 \
+lcmessage.m4 \
+progtest.m4
 
+subdir = m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
-CONFIG_HEADER = ../config.h
-CONFIG_CLEAN_FILES = 
-DIST_COMMON =  README Makefile.am Makefile.in
-
+CONFIG_HEADER = $(top_builddir)/config.h
+CONFIG_CLEAN_FILES =
+DIST_SOURCES =
+DIST_COMMON = README Makefile.am Makefile.in
+all: all-am
 
-DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
-
-TAR = tar
-GZIP_ENV = --best
-all: all-redirect
 .SUFFIXES:
-$(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --gnu --include-deps m4/Makefile
-
-Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
-	cd $(top_builddir) \
-	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
-
+$(srcdir)/Makefile.in:  Makefile.am  $(top_srcdir)/configure.in $(ACLOCAL_M4)
+	cd $(top_srcdir) && \
+	  $(AUTOMAKE) --foreign  m4/Makefile
+Makefile:  $(srcdir)/Makefile.in  $(top_builddir)/config.status
+	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)
+uninstall-info-am:
 tags: TAGS
 TAGS:
 
+DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 
-distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
-
-subdir = m4
+top_distdir = ..
+distdir = $(top_distdir)/$(PACKAGE)-$(VERSION)
 
 distdir: $(DISTFILES)
-	@for file in $(DISTFILES); do \
-	  d=$(srcdir); \
+	@list='$(DISTFILES)'; for file in $$list; do \
+	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
+	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
+	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
+	    dir="/$$dir"; \
+	    $(mkinstalldirs) "$(distdir)$$dir"; \
+	  else \
+	    dir=''; \
+	  fi; \
 	  if test -d $$d/$$file; then \
-	    cp -pr $$d/$$file $(distdir)/$$file; \
+	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
+	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
+	    fi; \
+	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
 	  else \
 	    test -f $(distdir)/$$file \
-	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
-	    || cp -p $$d/$$file $(distdir)/$$file || :; \
+	    || cp -p $$d/$$file $(distdir)/$$file \
+	    || exit 1; \
 	  fi; \
 	done
-info-am:
-info: info-am
-dvi-am:
-dvi: dvi-am
 check-am: all-am
 check: check-am
-installcheck-am:
-installcheck: installcheck-am
-install-exec-am:
-install-exec: install-exec-am
+all-am: Makefile
 
-install-data-am:
-install-data: install-data-am
+installdirs:
 
-install-am: all-am
-	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
 install: install-am
-uninstall-am:
+install-exec: install-exec-am
+install-data: install-data-am
 uninstall: uninstall-am
-all-am: Makefile
-all-redirect: all-am
-install-strip:
-	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
-installdirs:
 
+install-am: all-am
+	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
 
+installcheck: installcheck-am
+install-strip:
+	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
+	  INSTALL_STRIP_FLAG=-s \
+	  `test -z '$(STRIP)' || \
+	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
 mostlyclean-generic:
 
 clean-generic:
 
 distclean-generic:
 	-rm -f Makefile $(CONFIG_CLEAN_FILES)
-	-rm -f config.cache config.log stamp-h stamp-h[0-9]*
 
 maintainer-clean-generic:
-mostlyclean-am:  mostlyclean-generic
+	@echo "This command is intended for maintainers to use"
+	@echo "it deletes files that may require special tools to rebuild."
+clean: clean-am
 
-mostlyclean: mostlyclean-am
+clean-am: clean-generic mostlyclean-am
 
-clean-am:  clean-generic mostlyclean-am
+distclean: distclean-am
 
-clean: clean-am
+distclean-am: clean-am distclean-generic
 
-distclean-am:  distclean-generic clean-am
+dvi: dvi-am
 
-distclean: distclean-am
+dvi-am:
 
-maintainer-clean-am:  maintainer-clean-generic distclean-am
-	@echo "This command is intended for maintainers to use;"
-	@echo "it deletes files that may require special tools to rebuild."
+info: info-am
+
+info-am:
+
+install-data-am:
+
+install-exec-am:
+
+install-info: install-info-am
+
+install-man:
+
+installcheck-am:
 
 maintainer-clean: maintainer-clean-am
 
-.PHONY: tags distdir info-am info dvi-am dvi check check-am \
-installcheck-am installcheck install-exec-am install-exec \
-install-data-am install-data install-am install uninstall-am uninstall \
-all-redirect all-am all installdirs mostlyclean-generic \
-distclean-generic clean-generic maintainer-clean-generic clean \
-mostlyclean distclean maintainer-clean
+maintainer-clean-am: distclean-am maintainer-clean-generic
+
+mostlyclean: mostlyclean-am
+
+mostlyclean-am: mostlyclean-generic
+
+uninstall-am: uninstall-info-am
+
+.PHONY: all all-am check check-am clean clean-generic distclean \
+	distclean-generic distdir dvi dvi-am info info-am install \
+	install-am install-data install-data-am install-exec \
+	install-exec-am install-info install-info-am install-man \
+	install-strip installcheck installcheck-am installdirs \
+	maintainer-clean maintainer-clean-generic mostlyclean \
+	mostlyclean-generic uninstall uninstall-am uninstall-info-am
 
 
 Makefile.am: Makefile.am.in
@@ -217,7 +259,6 @@
 	sed -n '/^##m4-files-end/,$$p' Makefile.am.in >> $@t
 	chmod a-w $@t
 	mv $@t $@
-
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
diff -uNr mutt-1.4.orig/mailbox.h mutt-1.4/mailbox.h
--- mutt-1.4.orig/mailbox.h	Wed Mar 20 10:53:34 2002
+++ mutt-1.4/mailbox.h	Sun Nov  3 21:57:20 2002
@@ -73,6 +73,9 @@
 #ifdef USE_POP
 int mx_is_pop (const char *);
 #endif
+#ifdef USE_NNTP
+int mx_is_nntp (const char *);
+#endif
 
 int mx_access (const char*, int);
 
diff -uNr mutt-1.4.orig/main.c mutt-1.4/main.c
--- mutt-1.4.orig/main.c	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/main.c	Sun Nov  3 21:57:20 2002
@@ -37,6 +37,10 @@
 #include <getopt.h>
 #endif
 
+#ifdef USE_NNTP
+#include <nntp.h>
+#endif
+
 static const char *ReachingUs = N_("\
 To contact the developers, please mail to <mutt-dev@mutt.org>.\n\
 To report a bug, please use the flea(1) utility.\n");
@@ -97,6 +101,8 @@
   -e <command>\tspecify a command to be executed after initialization\n\
   -f <file>\tspecify which mailbox to read\n\
   -F <file>\tspecify an alternate muttrc file\n\
+  -g <server>\tspecify a newsserver (if compiled with NNTP)\n\
+  -G\t\tselect a newsgroup (if compiled with NNTP)\n\
   -H <file>\tspecify a draft file to read header from\n\
   -i <file>\tspecify a file which Mutt should include in the reply\n\
   -m <type>\tspecify a default mailbox type\n\
@@ -202,6 +208,12 @@
 	"-USE_POP  "
 #endif
 
+#ifdef USE_NNTP
+	"+USE_NNTP  "
+#else
+	"-USE_NNTP  "
+#endif
+
 #ifdef USE_IMAP
         "+USE_IMAP  "
 #else
@@ -444,6 +456,9 @@
 #define M_NOSYSRC (1<<2)	/* -n */
 #define M_RO      (1<<3)	/* -R */
 #define M_SELECT  (1<<4)	/* -y */
+#ifdef USE_NNTP
+#define M_NEWS    (1<<5)	/* -g and -G */
+#endif
 
 int main (int argc, char **argv)
 {
@@ -489,7 +504,11 @@
   memset (Options, 0, sizeof (Options));
   memset (QuadOptions, 0, sizeof (QuadOptions));
   
+#ifdef USE_NNTP
+  while ((i = getopt (argc, argv, "a:b:F:f:c:d:e:H:s:i:hm:npRvxyg:GzZ")) != EOF)
+#else
   while ((i = getopt (argc, argv, "a:b:F:f:c:d:e:H:s:i:hm:npRvxyzZ")) != EOF)
+#endif
     switch (i)
     {
       case 'a':
@@ -571,6 +590,20 @@
 	flags |= M_SELECT;
 	break;
 
+#ifdef USE_NNTP
+      case 'g': /* Specify a newsserver */
+	{
+	  char buf[LONG_STRING];
+
+	  snprintf (buf, sizeof (buf), "set news_server=%s", optarg);
+	  commands = mutt_add_list (commands, buf);
+	}
+
+      case 'G': /* List of newsgroups */
+	flags |= M_SELECT | M_NEWS;
+	break;
+#endif
+
       case 'z':
 	flags |= M_IGNORE;
 	break;
@@ -802,6 +835,18 @@
     }
     else if (flags & M_SELECT)
     {
+#ifdef USE_NNTP
+      if (flags & M_NEWS)
+      {
+	set_option (OPTNEWS);
+	if(!(CurrentNewsSrv = mutt_select_newsserver (NewsServer)))
+	{
+	  mutt_endwin (Errorbuf);
+	  exit (1);
+	}
+      }
+      else
+#endif
       if (!Incoming) {
 	mutt_endwin _("No incoming mailboxes defined.");
 	exit (1);
@@ -817,6 +862,15 @@
 
     if (!folder[0])
       strfcpy (folder, NONULL(Spoolfile), sizeof (folder));
+
+#ifdef USE_NNTP
+    if (option (OPTNEWS))
+    {
+      unset_option (OPTNEWS);
+      nntp_expand_path (folder, sizeof (folder), &CurrentNewsSrv->conn->account);
+    }
+    else
+#endif
     mutt_expand_path (folder, sizeof (folder));
 
     mutt_str_replace (&LastFolder, folder);
diff -uNr mutt-1.4.orig/missing mutt-1.4/missing
--- mutt-1.4.orig/missing	Wed Jan 16 21:44:49 2002
+++ mutt-1.4/missing	Sun Nov  3 21:57:29 2002
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Common stub for a few missing GNU programs while installing.
-# Copyright 1996, 1997, 1999, 2000 Free Software Foundation, Inc.
+# Copyright (C) 1996, 1997, 1999, 2000, 2002 Free Software Foundation, Inc.
 # Originally by Fran,cois Pinard <pinard@iro.umontreal.ca>, 1996.
 
 # This program is free software; you can redistribute it and/or modify
@@ -87,7 +87,7 @@
     exit 1
     ;;
 
-  aclocal)
+  aclocal*)
     if test -z "$run" && ($1 --version) > /dev/null 2>&1; then
        # We have it, but it failed.
        exit 1
@@ -293,23 +293,23 @@
     # Look for gnutar/gtar before invocation to avoid ugly error
     # messages.
     if (gnutar --version > /dev/null 2>&1); then
-       gnutar ${1+"$@"} && exit 0
+       gnutar "$@" && exit 0
     fi
     if (gtar --version > /dev/null 2>&1); then
-       gtar ${1+"$@"} && exit 0
+       gtar "$@" && exit 0
     fi
     firstarg="$1"
     if shift; then
 	case "$firstarg" in
 	*o*)
 	    firstarg=`echo "$firstarg" | sed s/o//`
-	    tar "$firstarg" ${1+"$@"} && exit 0
+	    tar "$firstarg" "$@" && exit 0
 	    ;;
 	esac
 	case "$firstarg" in
 	*h*)
 	    firstarg=`echo "$firstarg" | sed s/h//`
-	    tar "$firstarg" ${1+"$@"} && exit 0
+	    tar "$firstarg" "$@" && exit 0
 	    ;;
 	esac
     fi
diff -uNr mutt-1.4.orig/mkinstalldirs mutt-1.4/mkinstalldirs
--- mutt-1.4.orig/mkinstalldirs	Wed Jan 16 21:44:49 2002
+++ mutt-1.4/mkinstalldirs	Sun Nov  3 21:57:29 2002
@@ -4,8 +4,6 @@
 # Created: 1993-05-16
 # Public domain
 
-# $Id$
-
 errstatus=0
 dirmode=""
 
diff -uNr mutt-1.4.orig/mutt.h mutt-1.4/mutt.h
--- mutt-1.4.orig/mutt.h	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/mutt.h	Sun Nov  3 21:57:20 2002
@@ -231,6 +231,9 @@
   M_PGP_KEY,
 #endif
   M_XLABEL,
+#ifdef USE_NNTP
+  M_NEWSGROUPS,
+#endif
   
   /* Options for Mailcap lookup */
   M_EDIT,
@@ -266,6 +269,12 @@
   OPT_VERIFYSIG,      /* verify PGP signatures */
   OPT_PGPTRADITIONAL, /* create old-style PGP messages */
 #endif
+#ifdef USE_NNTP
+  OPT_TOMODERATED,
+  OPT_NNTPRECONNECT,
+  OPT_CATCHUP,
+  OPT_FOLLOWUPTOPOSTER,
+#endif /* USE_NNTP */
 
 #ifdef USE_SSL
   OPT_SSLSTARTTLS,
@@ -302,6 +311,7 @@
 #define SENDMAILX	(1<<6)
 #define SENDKEY		(1<<7)
 #define SENDRESEND	(1<<8)
+#define SENDNEWS	(1<<9)
 
 /* flags to _mutt_select_file() */
 #define M_SEL_BUFFY	(1<<0)
@@ -318,6 +328,8 @@
   OPTASCIICHARS,
   OPTASKBCC,
   OPTASKCC,
+  OPTASKFOLLOWUP,
+  OPTASKXCOMMENTTO,
   OPTATTACHSPLIT,
   OPTAUTOEDIT,
   OPTAUTOTAG,
@@ -376,6 +388,9 @@
   OPTMETOO,
   OPTMHPURGE,
   OPTMIMEFORWDECODE,
+#ifdef USE_NNTP
+  OPTMIMESUBJECT,	/* encode subject line with RFC2047 */
+#endif
   OPTNARROWTREE,
   OPTPAGERSTOP,
   OPTPIPEDECODE,
@@ -445,6 +460,16 @@
   OPTPGPSHOWUNUSABLE,
 #endif
 
+  /* news options */
+
+#ifdef USE_NNTP
+  OPTSHOWNEWNEWS,
+  OPTSHOWONLYUNREAD,
+  OPTSAVEUNSUB,
+  OPTLOADDESC,
+  OPTXCOMMENTTO,
+#endif /* USE_NNTP */
+
   /* pseudo options */
 
   OPTAUXSORT,		/* (pseudo) using auxillary sort function */
@@ -465,6 +490,7 @@
   OPTSORTSUBTHREADS,	/* (pseudo) used when $sort_aux changes */
   OPTNEEDRESCORE,	/* (pseudo) set when the `score' command is used */
   OPTATTACHMSG,		/* (pseudo) used by attach-message */
+  OPTHIDEREAD,		/* (pseudo) whether or not hide read messages */
   OPTKEEPQUIET,		/* (pseudo) shut up the message and refresh
 			 * 	    functions while we are executing an
 			 * 	    external program.
@@ -475,6 +501,12 @@
   OPTDONTHANDLEPGPKEYS,	/* (pseudo) used to extract PGP keys */
 #endif
 
+#ifdef USE_NNTP
+  OPTNEWS,		/* (pseudo) used to change reader mode */
+  OPTNEWSSEND,		/* (pseudo) used to change behavior when posting */
+  OPTNEWSCACHE,		/* (pseudo) used to indicate if news cache exist */
+#endif
+
 
 
 
@@ -538,6 +570,13 @@
   char *supersedes;
   char *date;
   char *x_label;
+  char *organization;
+#ifdef USE_NNTP
+  char *newsgroups;
+  char *xref;
+  char *followup_to;
+  char *x_comment_to;
+#endif
   LIST *references;		/* message references (in reverse order) */
   LIST *in_reply_to;		/* in-reply-to header content */
   LIST *userhdrs;		/* user defined headers */
@@ -685,6 +724,9 @@
   ENVELOPE *env;		/* envelope information */
   BODY *content;		/* list of MIME parts */
   char *path;
+#ifdef USE_NNTP
+  int article_num;
+#endif
   
   char *tree;           	/* character string to print thread tree */
   struct thread *thread;
@@ -697,7 +739,7 @@
   int refno;			/* message number on server */
 #endif
 
-#if defined USE_POP || defined USE_IMAP
+#if defined USE_POP || defined USE_IMAP || defined USE_NNTP
   void *data;            	/* driver-specific data */
 #endif
 } HEADER;
@@ -768,7 +810,7 @@
   int appended;                 /* how many saved messages? */
   int flagged;			/* how many flagged messages */
   int msgnotreadyet;		/* which msg "new" in pager, -1 if none */
-#if defined USE_POP || defined USE_IMAP
+#if defined USE_POP || defined USE_IMAP || defined USE_NNTP
   void *data;			/* driver specific data */
 #endif /* USE_IMAP */
 
diff -uNr mutt-1.4.orig/mutt_dotlock.c mutt-1.4/mutt_dotlock.c
--- mutt-1.4.orig/mutt_dotlock.c	Wed Mar 13 13:47:27 2002
+++ mutt-1.4/mutt_dotlock.c	Thu Jan  1 01:00:00 1970
@@ -1,755 +0,0 @@
-/*
- * Copyright (C) 1996-2000 Michael R. Elkins <me@cs.hmc.edu>
- * Copyright (C) 1998-2000 Thomas Roessler <roessler@guug.de>
- * 
- *     This program is free software; you can redistribute it and/or modify
- *     it under the terms of the GNU General Public License as published by
- *     the Free Software Foundation; either version 2 of the License, or
- *     (at your option) any later version.
- * 
- *     This program is distributed in the hope that it will be useful,
- *     but WITHOUT ANY WARRANTY; without even the implied warranty of
- *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *     GNU General Public License for more details.
- * 
- *     You should have received a copy of the GNU General Public License
- *     along with this program; if not, write to the Free Software
- *     Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111, USA.
- */ 
-
-/*
- * This module either be compiled into Mutt, or it can be
- * built as a separate program. For building it
- * separately, define the DL_STANDALONE preprocessor
- * macro.
- */
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include <unistd.h>
-#include <dirent.h>
-#include <sys/file.h>
-#include <sys/stat.h>
-#include <sys/utsname.h>
-#include <errno.h>
-#include <time.h>
-#include <fcntl.h>
-#include <limits.h>
-
-#ifndef _POSIX_PATH_MAX
-#include <posix1_lim.h>
-#endif
-
-#include "dotlock.h"
-#include "config.h"
-
-#ifdef HAVE_GETOPT_H
-#include <getopt.h>
-#endif
-
-#ifdef DL_STANDALONE
-# include "reldate.h"
-#endif
-
-#define MAXLINKS 1024 /* maximum link depth */
-
-#ifdef DL_STANDALONE
-
-# define LONG_STRING 1024
-# define MAXLOCKATTEMPT 5
-
-# define strfcpy(A,B,C) strncpy (A,B,C), *(A+(C)-1)=0
-
-# ifdef USE_SETGID
-
-#  ifdef HAVE_SETEGID
-#   define SETEGID setegid
-#  else
-#   define SETEGID setgid
-#  endif
-#  ifndef S_ISLNK
-#   define S_ISLNK(x) (((x) & S_IFMT) == S_IFLNK ? 1 : 0)
-#  endif
-
-# endif
-
-# ifndef HAVE_SNPRINTF
-extern int snprintf (char *, size_t, const char *, ...);
-# endif
-
-#else  /* DL_STANDALONE */
-
-# ifdef USE_SETGID
-#   error Do not try to compile dotlock as a mutt module when requiring egid switching!
-# endif
-
-# include "mutt.h"
-# include "mx.h"
-
-#endif /* DL_STANDALONE */
-
-static int DotlockFlags;
-static int Retry = MAXLOCKATTEMPT;
-
-#ifdef DL_STANDALONE
-static char *Hostname;
-#endif
-
-#ifdef USE_SETGID
-static gid_t UserGid;
-static gid_t MailGid;
-#endif
-
-static int dotlock_deference_symlink (char *, size_t, const char *);
-static int dotlock_prepare (char *, size_t, const char *, int fd);
-static int dotlock_check_stats (struct stat *, struct stat *);
-static int dotlock_dispatch (const char *, int fd);
-
-#ifdef DL_STANDALONE
-static int dotlock_init_privs (void);
-static void usage (const char *);
-#endif
-
-static void dotlock_expand_link (char *, const char *, const char *);
-static void BEGIN_PRIVILEGED (void);
-static void END_PRIVILEGED (void);
-
-/* These functions work on the current directory.
- * Invoke dotlock_prepare () before and check their
- * return value.
- */
-
-static int dotlock_try (void);
-static int dotlock_unlock (const char *);
-static int dotlock_unlink (const char *);
-static int dotlock_lock (const char *);
-
-
-#ifdef DL_STANDALONE
-
-#define check_flags(a) if (a & DL_FL_ACTIONS) usage (argv[0])
-
-int main (int argc, char **argv)
-{
-  int i;
-  char *p;
-  struct utsname utsname;
-
-  /* first, drop privileges */
-  
-  if (dotlock_init_privs () == -1)
-    return DL_EX_ERROR;
-
-
-  /* determine the system's host name */
-  
-  uname (&utsname);
-  if (!(Hostname = strdup (utsname.nodename)))	/* __MEM_CHECKED__ */
-    return DL_EX_ERROR;
-  if ((p = strchr (Hostname, '.')))
-    *p = '\0';
-
-
-  /* parse the command line options. */
-  DotlockFlags = 0;
-  
-  while ((i = getopt (argc, argv, "dtfupr:")) != EOF)
-  {
-    switch (i)
-    {
-      /* actions, mutually exclusive */
-      case 't': check_flags (DotlockFlags); DotlockFlags |= DL_FL_TRY; break;
-      case 'd': check_flags (DotlockFlags); DotlockFlags |= DL_FL_UNLINK; break;
-      case 'u': check_flags (DotlockFlags); DotlockFlags |= DL_FL_UNLOCK; break;
-
-      /* other flags */
-      case 'f': DotlockFlags |= DL_FL_FORCE; break;
-      case 'p': DotlockFlags |= DL_FL_USEPRIV; break;
-      case 'r': DotlockFlags |= DL_FL_RETRY; Retry = atoi (optarg); break;
-      
-      default: usage (argv[0]);
-    }
-  }
-
-  if (optind == argc || Retry < 0)
-    usage (argv[0]);
-
-  return dotlock_dispatch (argv[optind], -1);
-}
-
-
-/* 
- * Determine our effective group ID, and drop 
- * privileges.
- * 
- * Return value:
- * 
- *  0 - everything went fine
- * -1 - we couldn't drop privileges.
- * 
- */
-
-
-static int
-dotlock_init_privs (void)
-{
-
-# ifdef USE_SETGID
-  
-  UserGid = getgid ();
-  MailGid = getegid ();
-
-  if (SETEGID (UserGid) != 0)
-    return -1;
-
-# endif
-
-  return 0;
-}
-  
-
-#else  /* DL_STANDALONE */
-
-/* 
- * This function is intended to be invoked from within
- * mutt instead of mx.c's invoke_dotlock ().
- */
-
-int dotlock_invoke (const char *path, int fd, int flags, int retry)
-{
-  int currdir;
-  int r;
-
-  DotlockFlags = flags;
-  
-  if ((currdir = open (".", O_RDONLY)) == -1)
-    return DL_EX_ERROR;
-
-  if (!(DotlockFlags & DL_FL_RETRY) || retry)
-    Retry = MAXLOCKATTEMPT;
-  else
-    Retry = 0;
-  
-  r = dotlock_dispatch (path, fd);
-  
-  fchdir (currdir);
-  close (currdir);
-  
-  return r;
-}
-
-#endif  /* DL_STANDALONE */
-
-
-static int dotlock_dispatch (const char *f, int fd)
-{
-  char realpath[_POSIX_PATH_MAX];
-
-  /* If dotlock_prepare () succeeds [return value == 0],
-   * realpath contains the basename of f, and we have
-   * successfully changed our working directory to
-   * `dirname $f`.  Additionally, f has been opened for
-   * reading to verify that the user has at least read
-   * permissions on that file.
-   * 
-   * For a more detailed explanation of all this, see the
-   * lengthy comment below.
-   */
-
-  if (dotlock_prepare (realpath, sizeof (realpath), f, fd) != 0)
-    return DL_EX_ERROR;
-
-  /* Actually perform the locking operation. */
-
-  if (DotlockFlags & DL_FL_TRY)
-    return dotlock_try ();
-  else if (DotlockFlags & DL_FL_UNLOCK)
-    return dotlock_unlock (realpath);
-  else if (DotlockFlags & DL_FL_UNLINK)
-    return dotlock_unlink (realpath);
-  else /* lock */
-    return dotlock_lock (realpath);
-}
-
-  
-/*
- * Get privileges 
- * 
- * This function re-acquires the privileges we may have
- * if the user told us to do so by giving the "-p"
- * command line option.
- * 
- * BEGIN_PRIVILEGES () won't return if an error occurs.
- * 
- */
-
-static void
-BEGIN_PRIVILEGED (void)
-{
-#ifdef USE_SETGID
-  if (DotlockFlags & DL_FL_USEPRIV)
-  {
-    if (SETEGID (MailGid) != 0)
-    {
-      /* perror ("setegid"); */
-      exit (DL_EX_ERROR);
-    }
-  }
-#endif
-}
-
-/*
- * Drop privileges
- * 
- * This function drops the group privileges we may have.
- * 
- * END_PRIVILEGED () won't return if an error occurs.
- *
- */
-
-static void
-END_PRIVILEGED (void)
-{
-#ifdef USE_SETGID
-  if (DotlockFlags & DL_FL_USEPRIV)
-  {
-    if (SETEGID (UserGid) != 0)
-    {
-      /* perror ("setegid"); */
-      exit (DL_EX_ERROR);
-    }
-  }
-#endif
-}
-
-#ifdef DL_STANDALONE
-
-/*
- * Usage information.
- * 
- * This function doesn't return.
- * 
- */
-
-static void 
-usage (const char *av0)
-{
-  fprintf (stderr, "dotlock [Mutt %s (%s)]\n", VERSION, ReleaseDate);
-  fprintf (stderr, "usage: %s [-t|-f|-u|-d] [-p] [-r <retries>] file\n",
-	  av0);
-
-  fputs ("\noptions:"
-	"\n  -t\t\ttry"
-	"\n  -f\t\tforce"
-	"\n  -u\t\tunlock"
-	"\n  -d\t\tunlink"
-	"\n  -p\t\tprivileged"
-#ifndef USE_SETGID
-	" (ignored)"
-#endif
-	"\n  -r <retries>\tRetry locking"
-	"\n", stderr);
-  
-  exit (DL_EX_ERROR);
-}
-
-#endif
-
-/*
- * Access checking: Let's avoid to lock other users' mail
- * spool files if we aren't permitted to read them.
- * 
- * Some simple-minded access (2) checking isn't sufficient
- * here: The problem is that the user may give us a
- * deeply nested path to a file which has the same name
- * as the file he wants to lock, but different
- * permissions, say, e.g.
- * /tmp/lots/of/subdirs/var/spool/mail/root.
- * 
- * He may then try to replace /tmp/lots/of/subdirs by a
- * symbolic link to / after we have invoked access () to
- * check the file's permissions.  The lockfile we'd
- * create or remove would then actually be
- * /var/spool/mail/root.
- * 
- * To avoid this attack, we proceed as follows:
- * 
- * - First, follow symbolic links a la
- *   dotlock_deference_symlink ().
- * 
- * - get the result's dirname.
- * 
- * - chdir to this directory.  If you can't, bail out.
- * 
- * - try to open the file in question, only using its
- *   basename.  If you can't, bail out.
- * 
- * - fstat that file and compare the result to a
- *   subsequent lstat (only using the basename).  If
- *   the comparison fails, bail out.
- * 
- * dotlock_prepare () is invoked from main () directly
- * after the command line parsing has been done.
- *
- * Return values:
- * 
- * 0 - Evereything's fine.  The program's new current
- *     directory is the contains the file to be locked.
- *     The string pointed to by bn contains the name of
- *     the file to be locked.
- * 
- * -1 - Something failed. Don't continue.
- * 
- * tlr, Jul 15 1998
- */
-
-static int
-dotlock_check_stats (struct stat *fsb, struct stat *lsb)
-{
-  /* S_ISLNK (fsb->st_mode) should actually be impossible,
-   * but we may have mixed up the parameters somewhere.
-   * play safe.
-   */
-
-  if (S_ISLNK (lsb->st_mode) || S_ISLNK (fsb->st_mode))
-    return -1;
-  
-  if ((lsb->st_dev != fsb->st_dev) ||
-     (lsb->st_ino != fsb->st_ino) ||
-     (lsb->st_mode != fsb->st_mode) ||
-     (lsb->st_nlink != fsb->st_nlink) ||
-     (lsb->st_uid != fsb->st_uid) ||
-     (lsb->st_gid != fsb->st_gid) ||
-     (lsb->st_rdev != fsb->st_rdev) ||
-     (lsb->st_size != fsb->st_size))
-  {
-    /* something's fishy */
-    return -1;
-  }
-  
-  return 0;
-}
-
-static int
-dotlock_prepare (char *bn, size_t l, const char *f, int _fd)
-{
-  struct stat fsb, lsb;
-  char realpath[_POSIX_PATH_MAX];
-  char *basename, *dirname;
-  char *p;
-  int fd;
-  int r;
-  
-  if (dotlock_deference_symlink (realpath, sizeof (realpath), f) == -1)
-    return -1;
-  
-  if ((p = strrchr (realpath, '/')))
-  {
-    *p = '\0';
-    basename = p + 1;
-    dirname = realpath;
-  }
-  else
-  {
-    basename = realpath;
-    dirname = ".";
-  }
-
-  if (strlen (basename) + 1 > l)
-    return -1;
-  
-  strfcpy (bn, basename, l);
-  
-  if (chdir (dirname) == -1)
-    return -1;
-
-  if (_fd != -1)
-    fd = _fd;
-  else if ((fd = open (basename, O_RDONLY)) == -1)
-    return -1;
-  
-  r = fstat (fd, &fsb);
-  
-  if (_fd == -1)
-    close (fd);
-  
-  if (r == -1)
-    return -1;
-  
-  if (lstat (basename, &lsb) == -1)
-    return -1;
-
-  if (dotlock_check_stats (&fsb, &lsb) == -1)
-    return -1;
-
-  return 0;
-}
-
-/*
- * Expand a symbolic link.
- * 
- * This function expects newpath to have space for
- * at least _POSIX_PATH_MAX characters.
- *
- */
-
-static void 
-dotlock_expand_link (char *newpath, const char *path, const char *link)
-{
-  const char *lb = NULL;
-  size_t len;
-
-  /* link is full path */
-  if (*link == '/')
-  {
-    strfcpy (newpath, link, _POSIX_PATH_MAX);
-    return;
-  }
-
-  if ((lb = strrchr (path, '/')) == NULL)
-  {
-    /* no path in link */
-    strfcpy (newpath, link, _POSIX_PATH_MAX);
-    return;
-  }
-
-  len = lb - path + 1;
-  memcpy (newpath, path, len);
-  strfcpy (newpath + len, link, _POSIX_PATH_MAX - len);
-}
-
-
-/*
- * Deference a chain of symbolic links
- * 
- * The final path is written to d.
- *
- */
-
-static int
-dotlock_deference_symlink (char *d, size_t l, const char *path)
-{
-  struct stat sb;
-  char realpath[_POSIX_PATH_MAX];
-  const char *pathptr = path;
-  int count = 0;
-  
-  while (count++ < MAXLINKS)
-  {
-    if (lstat (pathptr, &sb) == -1)
-    {
-      /* perror (pathptr); */
-      return -1;
-    }
-    
-    if (S_ISLNK (sb.st_mode))
-    {
-      char linkfile[_POSIX_PATH_MAX];
-      char linkpath[_POSIX_PATH_MAX];
-      int len;
-
-      if ((len = readlink (pathptr, linkfile, sizeof (linkfile))) == -1)
-      {
-	/* perror (pathptr); */
-	return -1;
-      }
-      
-      linkfile[len] = '\0';
-      dotlock_expand_link (linkpath, pathptr, linkfile);
-      strfcpy (realpath, linkpath, sizeof (realpath));
-      pathptr = realpath;
-    }
-    else
-      break;
-  }
-
-  strfcpy (d, pathptr, l);
-  return 0;
-}
-
-/*
- * Dotlock a file.
- * 
- * realpath is assumed _not_ to be an absolute path to
- * the file we are about to lock.  Invoke
- * dotlock_prepare () before using this function!
- * 
- */
-
-#define HARDMAXATTEMPTS 10
-
-static int
-dotlock_lock (const char *realpath)
-{
-  char lockfile[_POSIX_PATH_MAX + LONG_STRING];
-  char nfslockfile[_POSIX_PATH_MAX + LONG_STRING];
-  size_t prev_size = 0;
-  int fd;
-  int count = 0;
-  int hard_count = 0;
-  struct stat sb;
-  time_t t;
-  
-  snprintf (nfslockfile, sizeof (nfslockfile), "%s.%s.%d",
-	   realpath, Hostname, (int) getpid ());
-  snprintf (lockfile, sizeof (lockfile), "%s.lock", realpath);
-
-  
-  BEGIN_PRIVILEGED ();
-
-  unlink (nfslockfile);
-
-  while ((fd = open (nfslockfile, O_WRONLY | O_EXCL | O_CREAT, 0)) < 0)
-  {
-    END_PRIVILEGED ();
-
-  
-    if (errno != EAGAIN)
-    {
-      /* perror ("cannot open NFS lock file"); */
-      return DL_EX_ERROR;
-    }
-
-    
-    BEGIN_PRIVILEGED ();
-  }
-
-  END_PRIVILEGED ();
-
-  
-  close (fd);
-  
-  while (hard_count++ < HARDMAXATTEMPTS)
-  {
-
-    BEGIN_PRIVILEGED ();
-    link (nfslockfile, lockfile);
-    END_PRIVILEGED ();
-
-    if (stat (nfslockfile, &sb) != 0)
-    {
-      /* perror ("stat"); */
-      return DL_EX_ERROR;
-    }
-
-    if (sb.st_nlink == 2)
-      break;
-
-    if (count == 0)
-      prev_size = sb.st_size;
-
-    if (prev_size == sb.st_size && ++count > Retry)
-    {
-      if (DotlockFlags & DL_FL_FORCE)
-      {
-	BEGIN_PRIVILEGED ();
-	unlink (lockfile);
-	END_PRIVILEGED ();
-
-	count = 0;
-	continue;
-      }
-      else
-      {
-	BEGIN_PRIVILEGED ();
-	unlink (nfslockfile);
-	END_PRIVILEGED ();
-	return DL_EX_EXIST;
-      }
-    }
-    
-    prev_size = sb.st_size;
-    
-    /* don't trust sleep (3) as it may be interrupted
-     * by users sending signals. 
-     */
-    
-    t = time (NULL);
-    do {
-      sleep (1);
-    } while (time (NULL) == t);
-  }
-
-  BEGIN_PRIVILEGED ();
-  unlink (nfslockfile);
-  END_PRIVILEGED ();
-
-  return DL_EX_OK;
-}
-
-
-/*
- * Unlock a file. 
- * 
- * The same comment as for dotlock_lock () applies here.
- * 
- */
-
-static int
-dotlock_unlock (const char *realpath)
-{
-  char lockfile[_POSIX_PATH_MAX + LONG_STRING];
-  int i;
-
-  snprintf (lockfile, sizeof (lockfile), "%s.lock",
-	   realpath);
-  
-  BEGIN_PRIVILEGED ();
-  i = unlink (lockfile);
-  END_PRIVILEGED ();
-  
-  if (i == -1)
-    return DL_EX_ERROR;
-  
-  return DL_EX_OK;
-}
-
-/* remove an empty file */
-
-static int
-dotlock_unlink (const char *realpath)
-{
-  struct stat lsb;
-  int i = -1;
-
-  if (dotlock_lock (realpath) != DL_EX_OK)
-    return DL_EX_ERROR;
-
-  if ((i = lstat (realpath, &lsb)) == 0 && lsb.st_size == 0)
-    unlink (realpath);
-
-  dotlock_unlock (realpath);
-
-  return (i == 0) ?  DL_EX_OK : DL_EX_ERROR;
-}
-
-
-/*
- * Check if a file can be locked at all.
- * 
- * The same comment as for dotlock_lock () applies here.
- * 
- */
-
-static int
-dotlock_try (void)
-{
-#ifdef USE_SETGID
-  struct stat sb;
-#endif
-
-  if (access (".", W_OK) == 0)
-    return DL_EX_OK;
-
-#ifdef USE_SETGID
-  if (stat (".", &sb) == 0)
-  {
-    if ((sb.st_mode & S_IWGRP) == S_IWGRP && sb.st_gid == MailGid)
-      return DL_EX_NEED_PRIVS;
-  }
-#endif
-
-  return DL_EX_IMPOSSIBLE;
-}
diff -uNr mutt-1.4.orig/muttlib.c mutt-1.4/muttlib.c
--- mutt-1.4.orig/muttlib.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/muttlib.c	Sun Nov  3 21:57:20 2002
@@ -270,7 +270,7 @@
 #ifdef MIXMASTER
   mutt_free_list (&(*h)->chain);
 #endif
-#if defined USE_POP || defined USE_IMAP
+#if defined USE_POP || defined USE_IMAP || defined USE_NNTP
   safe_free ((void**) &(*h)->data);
 #endif
   safe_free ((void **) h);
@@ -648,6 +648,13 @@
   safe_free ((void **) &(*p)->message_id);
   safe_free ((void **) &(*p)->supersedes);
   safe_free ((void **) &(*p)->date);
+  safe_free ((void **) &(*p)->organization);
+#ifdef USE_NNTP
+  safe_free ((void **) &(*p)->newsgroups);
+  safe_free ((void **) &(*p)->xref);
+  safe_free ((void **) &(*p)->followup_to);
+  safe_free ((void **) &(*p)->x_comment_to);
+#endif
   mutt_free_list (&(*p)->references);
   mutt_free_list (&(*p)->in_reply_to);
   mutt_free_list (&(*p)->userhdrs);
@@ -1143,6 +1150,14 @@
     return 0;
   }
 #endif
+
+#ifdef USE_NNTP
+  if (magic == M_NNTP)
+  {
+    mutt_error _("Can't save message to newsserver.");
+    return 0;
+  }
+#endif
 
   if (stat (s, st) != -1)
   {
diff -uNr mutt-1.4.orig/mx.c mutt-1.4/mx.c
--- mutt-1.4.orig/mx.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/mx.c	Sun Nov  3 21:57:20 2002
@@ -42,6 +42,10 @@
 #include "pop.h"
 #endif
 
+#ifdef USE_NNTP
+#include "nntp.h"
+#endif
+
 #ifdef BUFFY_SIZE
 #include "buffy.h"
 #endif
@@ -354,6 +358,22 @@
 }
 #endif
 
+#ifdef USE_NNTP
+int mx_is_nntp (const char *p)
+{
+  url_scheme_t scheme;
+
+  if (!p)
+    return 0;
+
+  scheme = url_check_scheme (p);
+  if (scheme == U_NNTP || scheme == U_NNTPS)
+    return 1;
+
+  return 0;
+}
+#endif
+
 int mx_get_magic (const char *path)
 {
   struct stat st;
@@ -371,6 +391,11 @@
     return M_POP;
 #endif /* USE_POP */
 
+#ifdef USE_NNTP
+  if (mx_is_nntp (path))
+    return M_NNTP;
+#endif /* USE_NNTP */
+
   if (stat (path, &st) == -1)
   {
     dprint (1, (debugfile, "mx_get_magic(): unable to stat %s: %s (errno %d).\n",
@@ -721,6 +746,12 @@
       break;
 #endif /* USE_POP */
 
+#ifdef USE_NNTP
+    case M_NNTP:
+      rc = nntp_open_mailbox (ctx);
+      break;
+#endif /* USE_NNTP */
+
     default:
       rc = -1;
       break;
@@ -766,6 +797,10 @@
   if (ctx->magic == M_POP)
     pop_close_mailbox (ctx);
 #endif /* USE_POP */
+#ifdef USE_NNTP
+  if (ctx->magic == M_NNTP)
+    nntp_fastclose_mailbox (ctx);
+#endif /* USE_NNTP */
   if (ctx->id_hash)
     hash_destroy (&ctx->id_hash, NULL);
   mutt_clear_threads (ctx);
@@ -823,6 +858,12 @@
       rc = pop_sync_mailbox (ctx, index_hint);
       break;
 #endif /* USE_POP */
+
+#ifdef USE_NNTP
+    case M_NNTP:
+      rc = nntp_sync_mailbox (ctx);
+      break;
+#endif /* USE_NNTP */
   }
 
 #if 0
@@ -899,6 +940,16 @@
 
   ctx->closing = 1;
 
+#ifdef USE_NNTP
+  if (ctx->magic == M_NNTP)
+  {
+    int ret;
+
+    ret = nntp_close_mailbox (ctx);
+    mx_fastclose_mailbox (ctx);
+    return ret;
+  }
+#endif
   if (ctx->readonly || ctx->dontwrite)
   {
     /* mailbox is readonly or we don't want to write */
@@ -1460,6 +1511,11 @@
       case M_POP:
 	return (pop_check_mailbox (ctx, index_hint));
 #endif /* USE_POP */
+
+#ifdef USE_NNTP
+      case M_NNTP:
+	return (nntp_check_mailbox (ctx));
+#endif /* USE_NNTP */
     }
   }
 
@@ -1520,6 +1576,15 @@
     }
 #endif /* USE_POP */
 
+#ifdef USE_NNTP
+    case M_NNTP:
+    {
+      if (nntp_fetch_message (msg, ctx, msgno) != 0)
+	FREE (&msg);
+      break;
+    }
+#endif /* USE_NNTP */
+
     default:
       dprint (1, (debugfile, "mx_open_message(): function not implemented for mailbox type %d.\n", ctx->magic));
       FREE (&msg);
@@ -1608,6 +1673,9 @@
 #ifdef USE_POP
       || (*msg)->magic == M_POP
 #endif
+#ifdef USE_NNTP
+      || (*msg)->magic == M_NNTP
+#endif
       )
   {
     r = safe_fclose (&(*msg)->fp);
diff -uNr mutt-1.4.orig/mx.h mutt-1.4/mx.h
--- mutt-1.4.orig/mx.h	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/mx.h	Sun Nov  3 21:57:20 2002
@@ -44,6 +44,9 @@
 #ifdef USE_COMPRESSED
   , M_COMPRESSED
 #endif
+#ifdef USE_NNTP
+  , M_NNTP
+#endif
 };
 
 WHERE short DefaultMagic INITVAL (M_MBOX);
diff -uNr mutt-1.4.orig/newsrc.c mutt-1.4/newsrc.c
--- mutt-1.4.orig/newsrc.c	Thu Jan  1 01:00:00 1970
+++ mutt-1.4/newsrc.c	Sun Nov  3 21:57:20 2002
@@ -0,0 +1,1042 @@
+/*
+ * Copyright (C) 1998 Brandon Long <blong@fiction.net>
+ * Copyright (C) 1999 Andrej Gritsenko <andrej@lucky.net>
+ * Copyright (C) 2000-2001 Vsevolod Volkov <vvv@mutt.org.ua>
+ * 
+ *     This program is free software; you can redistribute it and/or modify
+ *     it under the terms of the GNU General Public License as published by
+ *     the Free Software Foundation; either version 2 of the License, or
+ *     (at your option) any later version.
+ * 
+ *     This program is distributed in the hope that it will be useful,
+ *     but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *     GNU General Public License for more details.
+ * 
+ *     You should have received a copy of the GNU General Public License
+ *     along with this program; if not, write to the Free Software
+ *     Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+ */ 
+
+#include "mutt.h"
+#include "mutt_curses.h"
+#include "sort.h"
+#include "mx.h"
+#include "mime.h"
+#include "mailbox.h"
+#include "nntp.h"
+#include "rfc822.h"
+#include "rfc1524.h"
+#include "rfc2047.h"
+
+#include <unistd.h>
+#include <string.h>
+#include <ctype.h>
+#include <stdlib.h>
+#include <sys/stat.h>
+
+void nntp_add_to_list (NNTP_SERVER *s, NNTP_DATA *d)
+{
+  LIST *l;
+
+  if (!s || !d)
+    return;
+
+  l = safe_calloc (1, sizeof (LIST));
+  if (s->list)
+    s->tail->next = l;
+  else
+    s->list = l;
+  s->tail = l;
+  l->data = (void *) d;
+}
+
+static int nntp_parse_newsrc_line (NNTP_SERVER *news, char *line)
+{
+  NNTP_DATA *data;
+  char group[LONG_STRING];
+  int x = 1;
+  char *p = line, *b, *h;
+  size_t len;
+
+  while (*p)
+  {
+    if (*p++ == ',')
+      x++;
+  }
+
+  p = line;
+  while (*p && (*p != ':' && *p != '!')) p++;
+  if (!*p)
+    return -1;
+  len = p + 1 - line;
+  if (len > sizeof (group))
+    len = sizeof (group);
+  strfcpy (group, line, len);
+  if ((data = (NNTP_DATA *)hash_find (news->newsgroups, group)) == NULL)
+  {
+    data = (NNTP_DATA *) safe_calloc (1, sizeof (NNTP_DATA) + strlen (group) + 1);
+    data->group = (char *) data + sizeof (NNTP_DATA);
+    strcpy (data->group, group);
+    data->nserv = news;
+    data->deleted = 1;
+    if (news->newsgroups->nelem < news->newsgroups->curnelem * 2)
+      news->newsgroups = hash_resize (news->newsgroups, news->newsgroups->nelem * 2);
+    hash_insert (news->newsgroups, data->group, data, 0);
+    nntp_add_to_list (news, data);
+  }
+  else
+    FREE ((void **) &data->entries);
+
+  data->rc = 1;
+  data->entries = safe_calloc (x*2, sizeof (NEWSRC_ENTRY));
+  data->max = x*2;
+
+  if (*p == ':')
+    data->subscribed = 1;
+  else
+    data->subscribed = 0;
+
+  p++;
+  b = p;
+  x = 0;
+  while (*b)
+  {
+    while (*p && *p != ',' && *p != '\n') p++;
+    if (*p)
+    {
+      *p = '\0';
+      p++;
+    }
+    if ((h = strchr(b, '-')))
+    {
+      *h = '\0';
+      h++;
+      data->entries[x].first = atoi(b);
+      data->entries[x].last = atoi(h);
+    }
+    else
+    {
+      data->entries[x].first = atoi(b);
+      data->entries[x].last = data->entries[x].first;
+    }
+    b = p;
+    if (data->entries[x].last != 0)
+      x++;
+  }
+  if (x && !data->lastMessage)
+    data->lastMessage = data->entries[x-1].last;
+  data->num = x;
+  mutt_newsgroup_stat (data);
+  dprint (2, (debugfile, "parse_line: Newsgroup %s\n", data->group));
+  
+  return 0;
+}
+
+static int slurp_newsrc (NNTP_SERVER *news)
+{
+  FILE *fp;
+  char *buf;
+  struct stat sb;
+
+  news->stat = stat (news->newsrc, &sb);
+  news->size = sb.st_size;
+  news->mtime = sb.st_mtime;
+
+  if ((fp = safe_fopen (news->newsrc, "r")) == NULL)
+    return -1;
+  /* hmm, should we use dotlock? */
+  if (mx_lock_file (news->newsrc, fileno (fp), 0, 0, 1))
+  {
+    fclose (fp);
+    return -1;
+  }
+
+  buf = safe_malloc (sb.st_size + 1);
+  while (fgets (buf, sb.st_size + 1, fp))
+    nntp_parse_newsrc_line (news, buf);
+  FREE (&buf);
+
+  mx_unlock_file (news->newsrc, fileno (fp), 0);
+  fclose (fp);
+  return 0;
+}
+
+void nntp_cache_expand (char *dst, const char *src)
+{
+  snprintf (dst, _POSIX_PATH_MAX, "%s/%s", NewsCacheDir, src);
+  mutt_expand_path (dst, _POSIX_PATH_MAX);
+}
+
+/* Loads $news_cache_dir/.index into memory, loads newsserver data
+ * and newsgroup cache names */
+static int nntp_parse_cacheindex (NNTP_SERVER *news)
+{
+  struct stat st;
+  char buf[HUGE_STRING], *cp;
+  char dir[_POSIX_PATH_MAX], file[_POSIX_PATH_MAX];
+  FILE *index;
+  NNTP_DATA *data;
+  int l, m, t;
+
+  /* check is server name defined or not */
+  if (!news || !news->conn || !news->conn->account.host)
+    return -1;
+  unset_option (OPTNEWSCACHE);
+  if (!NewsCacheDir || !*NewsCacheDir)
+    return 0;
+
+  strfcpy (dir, NewsCacheDir, sizeof (dir));
+  mutt_expand_path (dir, sizeof(dir));
+
+  if (lstat (dir, &st) || (st.st_mode & S_IFDIR) == 0)
+  {
+    snprintf (buf, sizeof(buf), _("Directory %s not exist. Create it?"), dir);
+    if (mutt_yesorno (buf, M_YES) != M_YES || mkdir (dir, (S_IRWXU+S_IRWXG+
+	  S_IRWXO)))
+    {
+      mutt_error _("Cache directory not created!");
+      return -1;
+    }
+    mutt_clear_error();
+  }
+
+  set_option (OPTNEWSCACHE);
+
+  FREE (&news->cache);
+  snprintf (buf, sizeof(buf), "%s/.index", dir);
+  if (!(index = safe_fopen (buf, "a+")))
+    return 0;
+  rewind (index);
+  while (fgets (buf, sizeof(buf), index))
+  {
+    buf[strlen(buf) - 1] = 0;	/* strip ending '\n' */
+    if (!mutt_strncmp (buf, "#: ", 3) &&
+	!mutt_strcasecmp (buf+3, news->conn->account.host))
+      break;
+  }
+  while (fgets (buf, sizeof(buf), index))
+  {
+    cp = buf;
+    while (*cp && *cp != ' ') cp++;
+    if (!*cp) continue;
+    cp[0] = 0;
+    if (!mutt_strcmp (buf, "#:"))
+      break;
+    sscanf (cp + 1, "%s %d %d", file, &l, &m);
+    if (!mutt_strcmp (buf, "ALL"))
+    {
+      news->cache = safe_strdup (file);
+      news->newgroups_time = m;
+    }
+    else if (news->newsgroups)
+    {
+      if ((data = (NNTP_DATA *)hash_find (news->newsgroups, buf)) == NULL)
+      {
+	data = (NNTP_DATA *) safe_calloc (1, sizeof (NNTP_DATA) + strlen (buf) + 1);
+	data->group = (char *) data + sizeof (NNTP_DATA);
+	strcpy(data->group, buf);
+	data->nserv = news;
+	data->deleted = 1;
+	if (news->newsgroups->nelem < news->newsgroups->curnelem * 2)
+	  news->newsgroups = hash_resize (news->newsgroups, news->newsgroups->nelem * 2);
+	hash_insert (news->newsgroups, data->group, data, 0);
+	nntp_add_to_list (news, data);
+      }
+      data->cache = safe_strdup (file);
+      t = 0;
+      if (!data->firstMessage || data->lastMessage < m)
+	t = 1;
+      if (!data->firstMessage)
+	data->firstMessage = l;
+      if (data->lastMessage < m)
+	data->lastMessage = m;
+      data->lastCached = m;
+      if (t || !data->unread)
+	mutt_newsgroup_stat (data);
+    }
+  }
+  fclose (index);
+  return 0;
+}
+
+const char *
+nntp_format_str (char *dest, size_t destlen, char op, const char *src,
+		const char *fmt, const char *ifstring, const char *elsestring,
+		unsigned long data, format_flag flags)
+{
+  char fn[SHORT_STRING], tmp[SHORT_STRING];
+
+  switch (op)
+  {
+    case 's':
+      strncpy (fn, NewsServer, sizeof(fn) - 1);
+      mutt_strlower (fn);
+      snprintf (tmp, sizeof (tmp), "%%%ss", fmt);
+      snprintf (dest, destlen, tmp, fn);
+      break;
+  }
+  return (src);
+}
+
+/* nntp_parse_url: given an NNPT URL, return host, port,
+ * username, password and newsgroup will recognise. */
+int nntp_parse_url (const char *server, ACCOUNT *acct,
+		    char *group, size_t group_len)
+{
+  ciss_url_t url;
+  char *c;
+  int ret = -1;
+
+  /* Defaults */
+  acct->flags = 0;
+  acct->port = NNTP_PORT;
+  acct->type = M_ACCT_TYPE_NNTP;
+
+  c = safe_strdup (server);
+  url_parse_ciss (&url, c);
+
+  if (url.scheme == U_NNTP || url.scheme == U_NNTPS)
+  {
+    if (url.scheme == U_NNTPS)
+    {
+      acct->flags |= M_ACCT_SSL;
+      acct->port = NNTP_SSL_PORT;
+    }
+
+    *group = '\0';
+    if (url.path)
+      strfcpy (group, url.path, group_len);
+
+    ret = mutt_account_fromurl (acct, &url);
+  }
+
+  FREE (&c);
+  return ret;
+}
+
+void nntp_expand_path (char *line, size_t len, ACCOUNT *acct)
+{
+  ciss_url_t url;
+
+  url.path = safe_strdup (line);
+  mutt_account_tourl (acct, &url);
+  url_ciss_tostring (&url, line, len, 0);
+  FREE (&url.path);
+}
+
+/*
+ * Automatically loads a newsrc into memory, if necessary.
+ * Checks the size/mtime of a newsrc file, if it doesn't match, load
+ * again.  Hmm, if a system has broken mtimes, this might mean the file
+ * is reloaded every time, which we'd have to fix.
+ *
+ * a newsrc file is a line per newsgroup, with the newsgroup, then a 
+ * ':' denoting subscribed or '!' denoting unsubscribed, then a 
+ * comma separated list of article numbers and ranges.
+ */
+NNTP_SERVER *mutt_select_newsserver (char *server)
+{
+  char file[_POSIX_PATH_MAX];
+  char *buf, *p;
+  LIST *list;
+  ACCOUNT acct;
+  NNTP_SERVER *serv;
+  CONNECTION *conn;
+
+  if (!server || !*server)
+  {
+    mutt_error _("No newsserver defined!");
+    return NULL;
+  }
+
+  buf = p = safe_calloc (strlen (server) + 10, sizeof (char));
+  if (url_check_scheme (server) == U_UNKNOWN)
+  {
+    strcpy (buf, "nntp://");
+    p = strchr (buf, '\0');
+  }
+  strcpy (p, server);
+
+  if ((nntp_parse_url (buf, &acct, file, sizeof (file))) < 0 || *file)
+  {
+    FREE (&buf);
+    mutt_error (_("%s is an invalid newsserver specification!"), server);
+    return NULL;
+  }
+  FREE (&buf);
+
+  conn = mutt_conn_find (NULL, &acct);
+  if (!conn)
+    return NULL;
+
+  mutt_FormatString (file, sizeof (file), NONULL (NewsRc), nntp_format_str, 0, 0);
+  mutt_expand_path (file, sizeof (file));
+
+  serv = (NNTP_SERVER *)conn->data;
+  if (serv)
+  {
+    struct stat sb;
+
+    /* externally modified? */
+    if (serv->stat != stat (file, &sb) || (!serv->stat &&
+       (serv->size != sb.st_size || serv->mtime != sb.st_mtime)))
+    {
+      for (list = serv->list; list; list = list->next)
+      {
+	NNTP_DATA *data = (NNTP_DATA *) list->data;
+
+	if (data)
+	{
+	  data->subscribed = 0;
+	  data->rc = 0;
+	  data->num = 0;
+	}
+      }
+      slurp_newsrc (serv);
+      nntp_clear_cacheindex (serv);
+    }
+
+    if (serv->status == NNTP_BYE)
+      serv->status = NNTP_NONE;
+    nntp_check_newgroups (serv, 0);
+    return serv;
+  }
+
+  /* New newsserver */
+  serv = safe_calloc (1, sizeof (NNTP_SERVER));
+  serv->conn = conn;
+  serv->newsrc = safe_strdup (file);
+  serv->newsgroups = hash_create (1009);
+  slurp_newsrc (serv);			/* load .newsrc */
+  nntp_parse_cacheindex (serv);		/* load .index */
+  if (option (OPTNEWSCACHE) && serv->cache && nntp_get_cache_all (serv) >= 0)
+    nntp_check_newgroups (serv, 1);
+  else if (nntp_get_active (serv) < 0)
+  {
+    hash_destroy (&serv->newsgroups, nntp_delete_data);
+    for (list = serv->list; list; list = list->next)
+      list->data = NULL;
+    mutt_free_list (&serv->list);
+    FREE (&serv->newsrc);
+    FREE (&serv->cache);
+    FREE (&serv);
+    return NULL;
+  }
+  nntp_clear_cacheindex (serv);
+  conn->data = (void *)serv;
+
+  return serv;
+}
+
+/* 
+ * full status flags are not supported by nntp, but we can fake some
+ * of them.  This is how:
+ * Read = a read message number is in the .newsrc
+ * New = a message is new since we last read this newsgroup
+ * Old = anything else
+ * So, Read is marked as such in the newsrc, old is anything that is 
+ * "skipped" in the newsrc, and new is anything not in the newsrc nor
+ * in the cache. By skipped, I mean before the last unread message
+ */
+void nntp_get_status (CONTEXT *ctx, HEADER *h, char *group, int article)
+{
+  NNTP_DATA *data = (NNTP_DATA *) ctx->data;
+  int x;
+
+  if (group)
+    data = (NNTP_DATA *) hash_find (data->nserv->newsgroups, group);
+
+  if (!data)
+  {
+#ifdef DEBUG
+    if (group)
+      dprint (3, (debugfile, "newsgroup %s not found\n", group));
+#endif
+    return;
+  }
+
+  for (x = 0; x < data->num; x++)
+  {
+    if ((article >= data->entries[x].first) &&
+	(article <= data->entries[x].last))
+    {
+      /* we cannot use mutt_set_flag() because mx_update_context()
+	 didn't called yet */
+      h->read = 1;
+      return;
+    }
+  }
+  /* If article was not cached yet, it is new! :) */
+  if (!data->cache || article > data->lastCached)
+    return;
+  /* Old articles are articles which aren't read but an article after them
+   * has been cached */
+  if (option (OPTMARKOLD))
+    h->old = 1;
+}
+
+void mutt_newsgroup_stat (NNTP_DATA *data)
+{
+  int i;
+  unsigned int first, last;
+
+  data->unread = 0;
+  if (data->lastMessage == 0 || data->firstMessage > data->lastMessage)
+    return;
+
+  data->unread = data->lastMessage - data->firstMessage + 1;
+  for (i = 0; i < data->num; i++)
+  {
+    first = data->entries[i].first;
+    if (first < data->firstMessage)
+      first = data->firstMessage;
+    last = data->entries[i].last;
+    if (last > data->lastMessage)
+      last = data->lastMessage;
+    if (first <= last)
+      data->unread -= last - first + 1;
+  }
+}
+
+static int puti (char *line, int num)
+{
+  char *p, s[32];
+
+  for (p = s; num; )
+  {
+    *p++ = '0' + num % 10;
+    num /= 10;
+  }
+  while (p > s)
+    *line++ = *--p, num++;
+  *line = '\0';
+  return num;
+}
+
+static void nntp_create_newsrc_line (NNTP_DATA *data, char **buf, char **pline, size_t *buflen)
+{
+  char *line = *pline;
+  size_t len = *buflen - (*pline - *buf);
+  int x, i;
+
+  if (len < LONG_STRING * 10)
+  {
+    len += *buflen;
+    *buflen *= 2;
+    line = *buf;
+    safe_realloc ((void **) buf, *buflen);
+    line = *buf + (*pline - line);
+  }
+  strcpy (line, data->group);
+  len -= strlen (line) + 1;
+  line += strlen (line);
+  *line++ = data->subscribed ? ':' : '!';
+  *line = '\0';
+
+  for (x = 0; x < data->num; x++)
+  {
+    if (len < LONG_STRING)
+    {
+      len += *buflen;
+      *buflen *= 2;
+      *pline = line;
+      line = *buf;
+      safe_realloc ((void **) buf, *buflen);
+      line = *buf + (*pline - line);
+    }
+    if (x)
+    {
+      *line++ = ',';
+      len--;
+    }
+
+#if 0
+    if (data->entries[x].first == data->entries[x].last)
+      snprintf (line, len, "%d%n", data->entries[x].first, &i);
+    else
+      snprintf (line, len, "%d-%d%n", 
+	    data->entries[x].first, data->entries[x].last, &i);
+    len -= i;
+    line += i;
+#else
+    i = puti (line, data->entries[x].first);
+    line +=i; len -= i;
+    if (data->entries[x].first != data->entries[x].last)
+    {
+      *line++ = '-';
+      len--;
+      i = puti (line, data->entries[x].last);
+      line +=i; len -= i;
+    }
+#endif
+  }
+  *line++ = '\n';
+  *line = '\0';
+  *pline = line;
+}
+
+void newsrc_gen_entries (CONTEXT *ctx)
+{
+  NNTP_DATA *data = (NNTP_DATA *)ctx->data;
+  int series, x;
+  unsigned int last = 0, first = 1;
+  int save_sort = SORT_ORDER;
+
+  if (Sort != SORT_ORDER)
+  {
+    save_sort = Sort;
+    Sort = SORT_ORDER;
+    mutt_sort_headers (ctx, 0);
+  }
+
+  if (!data->max)
+  {
+    data->entries = safe_calloc (5, sizeof (NEWSRC_ENTRY));
+    data->max = 5;
+  }
+
+  /*
+   * Set up to fake initial sequence from 1 to the article before the 
+   * first article in our list
+   */
+  data->num = 0;
+  series = 1;
+
+  for (x = 0; x < ctx->msgcount; x++)
+  {
+    if (series) /* search for first unread */
+    {
+      /*
+       * We don't actually check sequential order, since we mark 
+       * "missing" entries as read/deleted
+       */
+      last = ctx->hdrs[x]->article_num;
+      if (last >= data->firstMessage && !ctx->hdrs[x]->deleted &&
+	    !ctx->hdrs[x]->read)
+      {
+	if (data->num >= data->max)
+	{
+	  data->max = data->max * 2;
+	  safe_realloc ((void **)&data->entries, 
+	      data->max * sizeof (NEWSRC_ENTRY));
+	}
+	data->entries[data->num].first = first;
+	data->entries[data->num].last = last - 1;
+	data->num++;
+	series = 0;
+      }
+    }
+    else /* search for first read */
+    {
+      if (ctx->hdrs[x]->deleted || ctx->hdrs[x]->read)
+      {
+	first = last + 1;
+	series = 1;
+      }
+      last = ctx->hdrs[x]->article_num;
+    }
+  }
+  if (series && first <= data->lastLoaded)
+  {
+    if (data->num >= data->max)
+    {
+      data->max = data->max * 2;
+      safe_realloc ((void **)&data->entries, 
+		    data->max * sizeof (NEWSRC_ENTRY));
+    }
+    data->entries[data->num].first = first;
+    data->entries[data->num].last = data->lastLoaded;
+    data->num++;
+  }
+
+  if (save_sort != Sort)
+  {
+    Sort = save_sort;
+    mutt_sort_headers (ctx, 0);
+  }
+}
+
+int mutt_newsrc_update (NNTP_SERVER *news)
+{
+  char *buf, *line;
+  NNTP_DATA *data;
+  LIST *tmp;
+  int r = -1;
+  size_t len, llen;
+
+  if (!news)
+    return -1;
+  llen = len = 10 * LONG_STRING;
+  line = buf = safe_calloc (1, len);
+  /* we will generate full newsrc here */
+  for (tmp = news->list; tmp; tmp = tmp->next)
+  {
+    data = (NNTP_DATA *) tmp->data;
+    if (!data || !data->rc)
+      continue;
+    nntp_create_newsrc_line (data, &buf, &line, &llen);
+    dprint (2, (debugfile, "Added to newsrc: %s", line));
+    line += strlen (line);
+  }
+  /* newrc being fully rewritten */
+  if (news->newsrc &&
+     (r = mutt_update_list_file (news->newsrc, NULL, "", buf)) == 0)
+  {
+    struct stat st;
+
+    stat (news->newsrc, &st);
+    news->size = st.st_size;
+    news->mtime = st.st_mtime;
+  }
+  FREE (&buf);
+  return r;
+}
+
+static FILE *mutt_mkname (char *s)
+{
+  char buf[_POSIX_PATH_MAX], *pc;
+  int fd;
+  FILE *fp;
+
+  nntp_cache_expand (buf, s);
+  if ((fp = safe_fopen (buf, "w")))
+    return fp;
+
+  nntp_cache_expand (buf, "cache-XXXXXX");
+  pc = buf + strlen (buf) - 12;	/* positioning to "cache-XXXXXX" */
+  if ((fd = mkstemp (buf)) == -1)
+    return NULL;
+  strcpy (s, pc);	/* generated name */
+  return fdopen (fd, "w");
+}
+
+/* Updates info into .index file: ALL or about selected newsgroup */
+static int nntp_update_cacheindex (NNTP_SERVER *serv, NNTP_DATA *data)
+{
+  char buf[LONG_STRING], *key = "ALL";
+  char file[_POSIX_PATH_MAX];
+
+  if (!serv || !serv->conn || !serv->conn->account.host)
+    return -1;
+
+  if (data && data->group)
+  {
+    key = data->group;
+    snprintf (buf, sizeof (buf), "%s %s %d %d", key, data->cache,
+	  data->firstMessage, data->lastLoaded);
+  }
+  else
+  {
+    strfcpy (file, serv->cache, sizeof (file));
+    snprintf (buf, sizeof (buf), "ALL %s 0 %d", file, (int)serv->newgroups_time);
+  }
+  nntp_cache_expand (file, ".index");
+  return mutt_update_list_file (file, serv->conn->account.host, key, buf);
+}
+
+/* Remove cache files of unsubscribed newsgroups */
+void nntp_clear_cacheindex (NNTP_SERVER *news)
+{
+  NNTP_DATA *data;
+  LIST *tmp;
+
+  if (option (OPTSAVEUNSUB) || !news)
+    return;
+
+  for (tmp = news->list; tmp; tmp = tmp->next)
+  {
+    data = (NNTP_DATA *) tmp->data;
+    if (!data || data->subscribed || !data->cache)
+      continue;
+    nntp_delete_cache (data);
+    dprint (2, (debugfile, "Removed from .index: %s\n", data->group));
+  }
+  return;
+}
+
+int nntp_save_cache_index (NNTP_SERVER *news)
+{
+  char buf[HUGE_STRING];
+  char file[_POSIX_PATH_MAX];
+  NNTP_DATA *d;
+  FILE *f;
+  LIST *l;
+
+  if (!news || !news->newsgroups)
+    return -1;
+  if (!option (OPTNEWSCACHE))
+    return 0;
+
+  if (news->cache)
+  {
+    nntp_cache_expand (file, news->cache);
+    unlink (file);
+    f = safe_fopen (file, "w");
+  }
+  else
+  {
+    strfcpy (buf, news->conn->account.host, sizeof(buf));
+    f = mutt_mkname (buf);
+    news->cache = safe_strdup (buf);
+    nntp_cache_expand (file, buf);
+  }
+  if (!f)
+    return -1;
+
+  for (l = news->list; l; l = l->next)
+  {
+    if ((d = (NNTP_DATA *)l->data) && !d->deleted)
+    {
+      if (d->desc)
+	snprintf (buf, sizeof(buf), "%s %d %d %c %s\n", d->group,
+	      d->lastMessage, d->firstMessage, d->allowed ? 'y' : 'n',
+ 	      d->desc);
+      else
+	snprintf (buf, sizeof(buf), "%s %d %d %c\n", d->group,
+	      d->lastMessage, d->firstMessage, d->allowed ? 'y' : 'n');
+      if (fputs (buf, f) == EOF)
+      {
+	fclose (f);
+	unlink (file);
+	return -1;
+      }
+    }
+  }
+  fclose (f);
+
+  if (nntp_update_cacheindex (news, NULL))
+  {
+    unlink (file);
+    return -1;
+  }
+  return 0;
+}
+
+int nntp_save_cache_group (CONTEXT *ctx)
+{
+  char buf[HUGE_STRING], addr[STRING];
+  char file[_POSIX_PATH_MAX];
+  FILE *f;
+  HEADER *h;
+  struct tm *tm;
+  int i = 0, save = SORT_ORDER;
+  int prev = 0;
+
+  if (!option (OPTNEWSCACHE))
+    return 0;
+  if (!ctx || !ctx->data || ctx->magic != M_NNTP)
+    return -1;
+
+  if (((NNTP_DATA *)ctx->data)->cache)
+  {
+    nntp_cache_expand (file, ((NNTP_DATA *)ctx->data)->cache);
+    unlink (file);
+    f = safe_fopen (file, "w");
+  }
+  else
+  {
+    snprintf (buf, sizeof(buf), "%s-%s",
+	((NNTP_DATA *)ctx->data)->nserv->conn->account.host,
+	((NNTP_DATA *)ctx->data)->group);
+    f = mutt_mkname (buf);
+    ((NNTP_DATA *)ctx->data)->cache = safe_strdup (buf);
+    nntp_cache_expand (file, buf);
+  }
+  if (!f)
+    return -1;
+
+  if (Sort != SORT_ORDER)
+  {
+    save = Sort;
+    Sort = SORT_ORDER;
+    mutt_sort_headers (ctx, 0);
+  }
+
+  /* Save only $nntp_context messages... */
+  ((NNTP_DATA *)ctx->data)->lastCached = 0;
+  if (NntpContext && ctx->msgcount > NntpContext)
+    i = ctx->msgcount - NntpContext;
+  for (; i < ctx->msgcount; i++)
+  {
+    if (!ctx->hdrs[i]->deleted && ctx->hdrs[i]->article_num != prev)
+    {
+      h = ctx->hdrs[i];
+      addr[0] = 0;
+      rfc822_write_address (addr, sizeof(addr), h->env->from);
+      tm = gmtime (&h->date_sent);
+      snprintf (buf, sizeof(buf),
+	    "%d\t%s\t%s\t%d %s %d %02d:%02d:%02d GMT\t%s\t",
+	    h->article_num, h->env->subject, addr, tm->tm_mday,
+	    Months[tm->tm_mon], tm->tm_year+1900, tm->tm_hour, tm->tm_min,
+	    tm->tm_sec, h->env->message_id);
+      fputs (buf, f);
+      if (h->env->references)
+	mutt_write_references (h->env->references, f);
+      snprintf (buf, sizeof(buf), "\t%ld\t%d\tXref: %s\n", h->content->length,
+	    h->lines, NONULL(h->env->xref));
+      if (fputs (buf, f) == EOF)
+      {
+	fclose (f);
+	unlink (file);
+	return -1;
+      }
+    }
+    prev = ctx->hdrs[i]->article_num;
+  }
+
+  if (save != Sort)
+  {
+    Sort = save;
+    mutt_sort_headers (ctx, 0);
+  }
+  fclose (f);
+
+  if (nntp_update_cacheindex (((NNTP_DATA *)ctx->data)->nserv,
+	(NNTP_DATA *)ctx->data))
+  {
+    unlink (file);
+    return -1;
+  }
+  ((NNTP_DATA *)ctx->data)->lastCached = ((NNTP_DATA *)ctx->data)->lastLoaded;
+  return 0;
+}
+
+void nntp_delete_cache (NNTP_DATA *data)
+{
+  char buf[_POSIX_PATH_MAX];
+
+  if (!option (OPTNEWSCACHE) || !data || !data->cache || !data->nserv)
+    return;
+
+  nntp_cache_expand (buf, data->cache);
+  unlink (buf);
+  FREE (&data->cache);
+  data->lastCached = 0;
+  nntp_cache_expand (buf, ".index");
+  mutt_update_list_file (buf, data->nserv->conn->account.host, data->group, NULL);
+}
+
+NNTP_DATA *mutt_newsgroup_subscribe (NNTP_SERVER *news, char *group)
+{
+  NNTP_DATA *data;
+
+  if (!news || !news->newsgroups || !group || !*group)
+    return NULL;
+  if (!(data = (NNTP_DATA *)hash_find (news->newsgroups, group)))
+  {
+    data = (NNTP_DATA *) safe_calloc (1, sizeof (NNTP_DATA) + strlen (group) + 1);
+    data->group = (char *) data + sizeof (NNTP_DATA);
+    strcpy (data->group, group);
+    data->nserv = news;
+    data->deleted = 1;
+    if (news->newsgroups->nelem < news->newsgroups->curnelem * 2)
+      news->newsgroups = hash_resize (news->newsgroups, news->newsgroups->nelem * 2);
+    hash_insert (news->newsgroups, data->group, data, 0);
+    nntp_add_to_list (news, data);
+  }
+  if (!data->subscribed)
+  {
+    data->subscribed = 1;
+    data->rc = 1;
+  }
+  return data;
+}
+
+NNTP_DATA *mutt_newsgroup_unsubscribe (NNTP_SERVER *news, char *group)
+{
+  NNTP_DATA *data;
+
+  if (!news || !news->newsgroups || !group || !*group ||
+	!(data = (NNTP_DATA *)hash_find (news->newsgroups, group)))
+    return NULL;
+  if (data->subscribed)
+  {
+    data->subscribed = 0;
+    if (!option (OPTSAVEUNSUB))
+      data->rc = 0;
+  }
+  return data;
+}
+
+NNTP_DATA *mutt_newsgroup_catchup (NNTP_SERVER *news, char *group)
+{
+  NNTP_DATA *data;
+
+  if (!news || !news->newsgroups || !group || !*group ||
+      !(data = (NNTP_DATA *)hash_find (news->newsgroups, group)))
+    return NULL;
+  if (!data->max)
+  {
+    data->entries = safe_calloc (5, sizeof (NEWSRC_ENTRY));
+    data->max = 5;
+  }
+  data->num = 1;
+  data->entries[0].first = 1;
+  data->unread = 0;
+  data->entries[0].last = data->lastMessage;
+  if (Context && Context->data == data)
+  {
+    int x;
+
+    for (x = 0; x < Context->msgcount; x++)
+      mutt_set_flag (Context, Context->hdrs[x], M_READ, 1);
+  }
+  return data;
+}
+
+NNTP_DATA *mutt_newsgroup_uncatchup (NNTP_SERVER *news, char *group)
+{
+  NNTP_DATA *data;
+
+  if (!news || !news->newsgroups || !group || !*group ||
+      !(data = (NNTP_DATA *)hash_find (news->newsgroups, group)))
+    return NULL;
+  if (!data->max)
+  {
+    data->entries = safe_calloc (5, sizeof (NEWSRC_ENTRY));
+    data->max = 5;
+  }
+  data->num = 1;
+  data->entries[0].first = 1;
+  data->entries[0].last = data->firstMessage - 1;
+  if (Context && Context->data == data)
+  {
+    int x;
+
+    data->unread = Context->msgcount;
+    for (x = 0; x < Context->msgcount; x++)
+      mutt_set_flag (Context, Context->hdrs[x], M_READ, 0);
+  }
+  else
+    data->unread = data->lastMessage - data->entries[0].last;
+  return data;
+}
+
+/* this routine gives the first newsgroup with new messages */
+void nntp_buffy (char *s)
+{
+  LIST *list;
+
+  for (list = CurrentNewsSrv->list; list; list = list->next)
+  {
+    NNTP_DATA *data = (NNTP_DATA *) list->data;
+
+    if (data && data->subscribed && data->unread)
+    {
+      if (Context && Context->magic == M_NNTP &&
+	  !mutt_strcmp (data->group, ((NNTP_DATA *) Context->data)->group))
+      {
+	unsigned int i, unread = 0;
+
+	for (i = 0; i < Context->msgcount; i++)
+	  if (!Context->hdrs[i]->read && !Context->hdrs[i]->deleted)
+	    unread++;
+	if (!unread)
+	  continue;
+      }
+      strcpy (s, data->group);
+      break;
+    }
+  }
+}
diff -uNr mutt-1.4.orig/nntp.c mutt-1.4/nntp.c
--- mutt-1.4.orig/nntp.c	Thu Jan  1 01:00:00 1970
+++ mutt-1.4/nntp.c	Sun Nov  3 21:57:20 2002
@@ -0,0 +1,1526 @@
+/*
+ * Copyright (C) 1998 Brandon Long <blong@fiction.net>
+ * Copyright (C) 1999 Andrej Gritsenko <andrej@lucky.net>
+ * Copyright (C) 2000-2002 Vsevolod Volkov <vvv@mutt.org.ua>
+ * 
+ *     This program is free software; you can redistribute it and/or modify
+ *     it under the terms of the GNU General Public License as published by
+ *     the Free Software Foundation; either version 2 of the License, or
+ *     (at your option) any later version.
+ * 
+ *     This program is distributed in the hope that it will be useful,
+ *     but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *     GNU General Public License for more details.
+ * 
+ *     You should have received a copy of the GNU General Public License
+ *     along with this program; if not, write to the Free Software
+ *     Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+ */ 
+
+#include "mutt.h"
+#include "mutt_curses.h"
+#include "sort.h"
+#include "mx.h"
+#include "mime.h"
+#include "rfc1524.h"
+#include "rfc2047.h"
+#include "mailbox.h"
+#include "nntp.h"
+
+#ifdef HAVE_PGP
+#include "pgp.h"
+#endif
+
+#include <unistd.h>
+#include <string.h>
+#include <ctype.h>
+#include <stdlib.h>
+
+static unsigned int _checked = 0;
+
+#ifdef DEBUG
+static void nntp_error (const char *where, const char *msg)
+{
+  dprint (1, (debugfile, "nntp_error(): unexpected response in %s: %s\n", where, msg));
+}
+#endif /* DEBUG */
+
+static int nntp_connect_error (NNTP_SERVER *serv)
+{
+  serv->status = NNTP_NONE;
+  mutt_socket_close (serv->conn);
+  mutt_error _("Server closed connection!");
+  sleep (2);
+  return -1;
+}
+
+static int nntp_connect_and_auth (NNTP_SERVER *serv)
+{
+  CONNECTION *conn = serv->conn;
+  char buf[STRING];
+  unsigned char flags = conn->account.flags;
+
+  serv->status = NNTP_NONE;
+
+  if (mutt_socket_open (conn) < 0)
+    return -1;
+
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+    return nntp_connect_error (serv);
+
+  if (!mutt_strncmp ("200", buf, 3))
+    mutt_message (_("Connected to %s. Posting ok."), conn->account.host);
+  else if (!mutt_strncmp ("201", buf, 3))
+    mutt_message (_("Connected to %s. Posting NOT ok."), conn->account.host);
+  else
+  {
+    mutt_socket_close (conn);
+    mutt_remove_trailing_ws (buf);
+    mutt_error ("%s", buf);
+    sleep (2);
+    return -1;
+  }
+
+  sleep (1);
+
+  /* Tell INN to switch to mode reader if it isn't so. Ignore all
+   returned codes and messages. */
+  mutt_socket_write (conn, "MODE READER\r\n");
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+    return nntp_connect_error (serv);
+
+  mutt_socket_write (conn, "STAT\r\n");
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+    return nntp_connect_error (serv);
+
+  if (!(conn->account.flags & M_ACCT_USER) && mutt_strncmp ("480", buf, 3))
+  {
+    serv->status = NNTP_OK;
+    return 0;
+  }
+
+  if (mutt_account_getuser (&conn->account) || !conn->account.user[0] ||
+      mutt_account_getpass (&conn->account) || !conn->account.pass[0])
+  {
+    mutt_socket_close (conn);
+    serv->status = NNTP_BYE;
+    conn->account.flags = flags;
+    return -1;
+  }
+
+  mutt_message _("Logging in...");
+
+  snprintf (buf, sizeof (buf), "AUTHINFO USER %s\r\n", conn->account.user);
+  mutt_socket_write (conn, buf);
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+  {
+    conn->account.flags = flags;
+    return nntp_connect_error (serv);
+  }
+
+#ifdef DEBUG
+  /* don't print the password unless we're at the ungodly debugging level */
+  if (debuglevel < M_SOCK_LOG_FULL)
+    dprint (M_SOCK_LOG_CMD, (debugfile, "> AUTHINFO PASS *\n"));
+#endif
+  snprintf (buf, sizeof (buf), "AUTHINFO PASS %s\r\n", conn->account.pass);
+  mutt_socket_write_d (conn, buf, M_SOCK_LOG_FULL);
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+  {
+    conn->account.flags = flags;
+    return nntp_connect_error (serv);
+  }
+
+  if (!mutt_strncmp ("281", buf, 3))
+  {
+    serv->status = NNTP_OK;
+    return 0;
+  }
+
+  mutt_socket_close (conn);
+  conn->account.flags = flags;
+  mutt_error _("Login failed.");
+  sleep (2);
+  return -1;
+}
+
+static int nntp_attempt_features (NNTP_SERVER *serv)
+{
+  char buf[LONG_STRING];
+  CONNECTION *conn = serv->conn;
+
+  mutt_socket_write (conn, "XOVER\r\n");
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+    return nntp_connect_error (serv);
+  if (mutt_strncmp ("500", buf, 3))
+    serv->hasXOVER = 1;
+
+  mutt_socket_write (conn, "XPAT\r\n");
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+    return nntp_connect_error (serv);
+  if (mutt_strncmp ("500", buf, 3))
+    serv->hasXPAT = 1;
+
+  mutt_socket_write (conn, "XGTITLE +\r\n");
+  if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+    return nntp_connect_error (serv);
+  if (mutt_strncmp ("500", buf, 3))
+    serv->hasXGTITLE = 1;
+
+  if (!mutt_strncmp ("282", buf, 3))
+  {
+    do
+    {
+      if (mutt_socket_readln (buf, sizeof (buf), conn) < 0)
+	return nntp_connect_error (serv);
+    } while (!(buf[0] == '.' && buf[1] == '\0'));
+  }
+
+  return 0;
+}
+
+static int nntp_open_connection (NNTP_SERVER *serv)
+{
+  if (serv->status == NNTP_OK)
+    return 0;
+  if (serv->status == NNTP_BYE)
+    return -1;
+  if (nntp_connect_and_auth (serv) < 0)
+    return -1;
+  if (nntp_attempt_features (serv) < 0)
+    return -1;
+  return 0;
+}
+
+static int nntp_reconnect (NNTP_SERVER *serv)
+{
+  char buf[SHORT_STRING];
+
+  mutt_socket_close (serv->conn);
+
+  FOREVER
+  {
+    if (nntp_connect_and_auth (serv) == 0)
+      return 0;
+
+    snprintf (buf, sizeof (buf), _("Connection to %s lost. Reconnect?"),
+				serv->conn->account.host);
+    if (query_quadoption (OPT_NNTPRECONNECT, buf) != M_YES)
+    {
+      serv->status = NNTP_BYE;
+      return -1;
+    }
+  }
+}
+
+/* Send data from line[LONG_STRING] and receive answer to same line */
+static int mutt_nntp_query (NNTP_DATA *data, char *line, size_t linelen)
+{
+  char buf[LONG_STRING];
+  int done = TRUE;
+
+  if (data->nserv->status == NNTP_BYE)
+    return -1;
+
+  do
+  {
+    if (!*line && data->group)
+    {
+      snprintf (buf, sizeof (buf), "GROUP %s\r\n", data->group);
+      mutt_socket_write (data->nserv->conn, buf);
+    }
+    else
+      mutt_socket_write (data->nserv->conn, line);
+
+    done = TRUE;
+    if (mutt_socket_readln (buf, sizeof (buf), data->nserv->conn) < 0)
+    {
+      if (nntp_reconnect (data->nserv) < 0)
+ 	return -1;
+
+      if (data->group)
+      {
+	snprintf (buf, sizeof (buf), "GROUP %s\r\n", data->group);
+	mutt_socket_write (data->nserv->conn, buf);
+	if (mutt_socket_readln (buf, sizeof (buf), data->nserv->conn) < 0)
+	  return -1;
+      }
+      if (*line) done = FALSE;
+    }
+  } while (!done);
+
+  strfcpy (line, buf, linelen);
+  return 0;
+}
+
+/*
+ * This function calls  funct(*line, *data)  for each received line,
+ * funct(NULL, *data)  if  rewind(*data)  needs, exits when fail or done.
+ * Returned codes:
+ *  0 - successful,
+ *  1 - correct but not performed (may be, have to be continued),
+ * -1 - conection lost,
+ * -2 - invalid command or execution error,
+ * -3 - error in funct(*line, *data).
+ */
+static int mutt_nntp_fetch (NNTP_DATA *nntp_data, char *query, char *msg,
+		int (*funct) (char *, void *), void *data, int tagged)
+{
+  char buf[LONG_STRING];
+  char *inbuf, *p;
+  int done = FALSE;
+  int chunk, line;
+  size_t lenbuf = 0;
+  int ret;
+
+  do
+  {
+    strfcpy (buf, query, sizeof (buf));
+    if (mutt_nntp_query (nntp_data, buf, sizeof (buf)) < 0)
+      return -1;
+    if (buf[0] == '5')
+      return -2;
+    if (buf[0] != '2')
+      return 1;
+
+    ret = 0;
+    line = 0;
+    inbuf = safe_malloc (sizeof (buf));
+
+    FOREVER
+    {
+      chunk = mutt_socket_readln_d (buf, sizeof (buf), nntp_data->nserv->conn,
+				    M_SOCK_LOG_HDR);
+      if (chunk < 0)
+	break;
+
+      p = buf;
+      if (!lenbuf && buf[0] == '.')
+      {
+	if (buf[1] == '\0')
+	{
+	  done = TRUE;
+	  break;
+	}
+	if (buf[1] == '.')
+	  p++;
+      }
+
+      strfcpy (inbuf + lenbuf, p, sizeof (buf));
+
+      if (chunk >= sizeof (buf))
+      {
+	lenbuf += strlen (p);
+      }
+      else
+      {
+	line++;
+	if (msg && ReadInc && (line % ReadInc == 0)) {
+	  if (tagged)
+	    mutt_message (_("%s (tagged: %d) %d"), msg, tagged, line);
+	  else
+	    mutt_message ("%s %d", msg, line);
+	}
+
+	if (ret == 0 && funct (inbuf, data) < 0)
+	  ret = -3;
+	lenbuf = 0;
+      }
+
+      safe_realloc ((void **) &inbuf, lenbuf + sizeof (buf));
+    }
+    FREE (&inbuf);
+    funct (NULL, data);
+  }
+  while (!done);
+  return ret;
+}
+
+static int nntp_read_tempfile (char *line, void *file)
+{
+  FILE *f = (FILE *)file;
+
+  if (!line)
+    rewind (f);
+  else
+  {
+    fputs (line, f);
+    if (fputc ('\n', f) == EOF)
+      return -1;
+  }
+  return 0;
+}
+
+static void nntp_parse_xref (CONTEXT *ctx, char *group, char *xref, HEADER *h)
+{
+  register char *p, *b;
+  register char *colon = NULL;
+
+  b = p = xref;
+  while (*p)
+  {
+    /* skip to next word */
+    b = p;
+    while (*b && ((*b == ' ') || (*b == '\t'))) b++;
+    p = b;
+    colon = NULL;
+    /* skip to end of word */
+    while (*p && (*p != ' ') && (*p != '\t')) 
+    {
+      if (*p == ':')
+	colon = p;
+      p++;
+    }
+    if (*p)
+    {
+      *p = '\0';
+      p++;
+    }
+    if (colon)
+    {
+      *colon = '\0';
+      colon++;
+      nntp_get_status (ctx, h, p, atoi(colon));
+      if (h && h->article_num == 0 && mutt_strcmp (group, b) == 0)
+	h->article_num = atoi(colon);
+    }
+  }
+}
+
+/*
+ * returns:
+ *  0 on success
+ *  1 if article not found
+ * -1 if read or write error on tempfile or socket
+ */
+static int nntp_read_header (CONTEXT *ctx, const char *msgid, int article_num)
+{
+  NNTP_DATA *nntp_data = ((NNTP_DATA *)ctx->data);
+  FILE *f;
+  char buf[LONG_STRING];
+  char tempfile[_POSIX_PATH_MAX];
+  int ret;
+  HEADER *h = ctx->hdrs[ctx->msgcount];
+
+  mutt_mktemp (tempfile);
+  if (!(f = safe_fopen (tempfile, "w+")))
+    return -1;
+
+  if (!msgid)
+    snprintf (buf, sizeof (buf), "HEAD %d\r\n", article_num);
+  else
+    snprintf (buf, sizeof (buf), "HEAD %s\r\n", msgid);
+
+  ret = mutt_nntp_fetch (nntp_data, buf, NULL, nntp_read_tempfile, f, 0);
+  if (ret)
+  {
+#ifdef DEBUG
+    if (ret != -1)
+      dprint(1, (debugfile, "nntp_read_header: %s\n", buf));
+#endif
+    fclose (f);
+    unlink (tempfile);
+    return (ret == -1 ? -1 : 1);
+  }
+
+  h->article_num = article_num;
+  h->env = mutt_read_rfc822_header (f, h, 0, 0);
+  fclose (f);
+  unlink (tempfile);
+
+  if (h->env->xref != NULL)
+    nntp_parse_xref (ctx, nntp_data->group, h->env->xref, h);
+  else if (h->article_num == 0 && msgid)
+  {
+    snprintf (buf, sizeof (buf), "STAT %s\r\n", msgid);
+    if (mutt_nntp_query (nntp_data, buf, sizeof (buf)) == 0)
+      h->article_num = atoi (buf + 4);
+  }
+
+  return 0;
+}
+
+static int parse_description (char *line, void *n)
+{
+#define news ((NNTP_SERVER *) n)
+  register char *d = line;
+  NNTP_DATA *data;
+
+  if (!line)
+    return 0;
+  while (*d && *d != '\t' && *d != ' ') d++;
+    *d = 0;
+  d++;
+  while (*d && (*d == '\t' || *d == ' ')) d++;
+  dprint (2, (debugfile, "group: %s, desc: %s\n", line, d));
+  if ((data = (NNTP_DATA *) hash_find (news->newsgroups, line)) != NULL &&
+	mutt_strcmp (d, data->desc))
+  {
+    FREE (&data->desc);
+    data->desc = safe_strdup (d);
+  }
+  return 0;
+#undef news
+}
+
+static void nntp_get_desc (NNTP_DATA *data, char *mask, char *msg)
+{
+  char buf[STRING];
+
+  if (!option (OPTLOADDESC) || !data || !data->nserv)
+    return;
+
+  /* Get newsgroup description, if we can */
+  if (data->nserv->hasXGTITLE)
+    snprintf (buf, sizeof (buf), "XGTITLE %s\r\n", mask);
+  else
+    snprintf (buf, sizeof (buf), "LIST NEWSGROUPS %s\r\n", mask);
+  if (mutt_nntp_fetch (data, buf, msg, parse_description, data->nserv, 0) != 0)
+  {
+#ifdef DEBUG
+    nntp_error ("nntp_get_desc()", buf);
+#endif
+  }
+}
+
+/*
+ * XOVER returns a tab separated list of:
+ * id|subject|from|date|Msgid|references|bytes|lines|xref
+ *
+ * This has to duplicate some of the functionality of 
+ * mutt_read_rfc822_header(), since it replaces the call to that (albeit with
+ * a limited number of headers which are "parsed" by placement in the list)
+ */
+static int nntp_parse_xover (CONTEXT *ctx, char *buf, HEADER *hdr)
+{
+  NNTP_DATA *nntp_data = (NNTP_DATA *) ctx->data;
+  char *p, *b;
+  int x, done = 0;
+
+  hdr->env = mutt_new_envelope();
+  hdr->env->newsgroups = safe_strdup (nntp_data->group);
+  hdr->content = mutt_new_body();
+  hdr->content->type = TYPETEXT;
+  hdr->content->subtype = safe_strdup ("plain");
+  hdr->content->encoding = ENC7BIT;
+  hdr->content->disposition = DISPINLINE;
+  hdr->content->length = -1;
+  b = p = buf;
+
+  for (x = 0; !done && x < 9; x++)
+  {
+    /* if from file, need to skip newline character */
+    while (*p && *p != '\n' && *p != '\t') p++;
+    if (!*p) done++;
+    *p = '\0';
+    p++;
+    switch (x)
+    {
+      case 0:
+
+	hdr->article_num = atoi (b);
+	nntp_get_status (ctx, hdr, NULL, hdr->article_num);
+	break;
+      case 1:
+	hdr->env->subject = safe_strdup (b);
+	/* Now we need to do the things which would normally be done in 
+	 * mutt_read_rfc822_header() */
+	if (hdr->env->subject)
+	{
+	  regmatch_t pmatch[1];
+
+	  rfc2047_decode (&hdr->env->subject);
+
+	  if (regexec (ReplyRegexp.rx, hdr->env->subject, 1, pmatch, 0) == 0)
+	    hdr->env->real_subj = hdr->env->subject + pmatch[0].rm_eo;
+	  else
+	    hdr->env->real_subj = hdr->env->subject;
+	}
+	break;
+      case 2:
+	rfc822_free_address (&hdr->env->from);
+	hdr->env->from = rfc822_parse_adrlist (hdr->env->from, b);
+	rfc2047_decode_adrlist (hdr->env->from);
+	break;
+      case 3:
+	hdr->date_sent = mutt_parse_date (b, hdr);
+	hdr->received = hdr->date_sent;
+	break;
+      case 4:
+	FREE (&hdr->env->message_id);
+	hdr->env->message_id = safe_strdup (b);
+	break;
+      case 5:
+	mutt_free_list (&hdr->env->references);
+	hdr->env->references = mutt_parse_references (b, 0);
+	break;
+      case 6:
+	hdr->content->length = atoi (b);
+	break;
+      case 7:
+	hdr->lines = atoi (b);
+	break;
+      case 8:
+	if (!hdr->read)
+	  FREE (&hdr->env->xref);
+	  b = b + 6;	/* skips the "Xref: " */
+	  hdr->env->xref = safe_strdup (b);
+	  nntp_parse_xref (ctx, nntp_data->group, b, hdr);
+    }
+    if (!*p)
+      return -1;
+    b = p;
+  }
+  return 0;
+}
+
+typedef struct
+{
+  CONTEXT *ctx;
+  unsigned int base;
+  unsigned int first;
+  unsigned int last;
+  unsigned short *messages;
+  char* msg;
+} FETCH_CONTEXT;
+
+#define fc ((FETCH_CONTEXT *) c)
+static int nntp_fetch_numbers (char *line, void *c)
+{
+  unsigned int num;
+
+  if (!line)
+    return 0;
+  num = atoi (line);
+  if (num < fc->base || num > fc->last)
+    return 0;
+  fc->messages[num - fc->base] = 1;
+  return 0;
+}
+
+static int add_xover_line (char *line, void *c)
+{
+  unsigned int num, total;
+  CONTEXT *ctx = fc->ctx;
+  NNTP_DATA *data = (NNTP_DATA *)ctx->data;
+
+  if (!line)
+    return 0;
+
+  if (ctx->msgcount >= ctx->hdrmax)
+    mx_alloc_memory (ctx);
+  ctx->hdrs[ctx->msgcount] = mutt_new_header ();
+  ctx->hdrs[ctx->msgcount]->index = ctx->msgcount;
+
+  nntp_parse_xover (ctx, line, ctx->hdrs[ctx->msgcount]);
+  num = ctx->hdrs[ctx->msgcount]->article_num;
+
+  if (num >= fc->first && num <= fc->last && fc->messages[num - fc->base])
+  {
+    ctx->msgcount++;
+    if (num > data->lastLoaded)
+      data->lastLoaded = num;
+    num = num - fc->first + 1;
+    total = fc->last - fc->first + 1;
+    if (!ctx->quiet && fc->msg && ReadInc && (num % ReadInc == 0))
+      mutt_message ("%s %d/%d", fc->msg, num, total);
+  }
+  else
+    mutt_free_header (&ctx->hdrs[ctx->msgcount]); /* skip it */
+
+  return 0;
+}
+#undef fc
+
+static int nntp_fetch_headers (CONTEXT *ctx, unsigned int first,
+	unsigned int last)
+{
+  char buf[HUGE_STRING];
+  char *msg = _("Fetching message headers...");
+  NNTP_DATA *nntp_data = ((NNTP_DATA *)ctx->data);
+  int ret;
+  int num;
+  int oldmsgcount;
+  unsigned int current;
+  FILE *f;
+  FETCH_CONTEXT fc;
+
+  /* if empty group or nothing to do */
+  if (!last || first > last)
+    return 0;
+
+  /* fetch list of articles */
+  mutt_message _("Fetching list of articles...");
+  fc.ctx = ctx;
+  fc.base = first;
+  fc.last = last;
+  fc.messages = safe_calloc (last - first + 1, sizeof (unsigned short));
+  snprintf (buf, sizeof (buf), "LISTGROUP %s\r\n", nntp_data->group);
+  if (mutt_nntp_fetch (nntp_data, buf, NULL, nntp_fetch_numbers, &fc, 0) != 0)
+  {
+    mutt_error (_("LISTGROUP command failed: %s"), buf);
+#ifdef DEBUG
+    nntp_error ("nntp_fetch_headers()", buf);
+#endif
+    FREE (&fc.messages);
+    return -1;
+  }
+
+  /* CACHE: must be loaded xover cache here */
+  num = nntp_data->lastCached - first + 1;
+  if (option (OPTNEWSCACHE) && nntp_data->cache && num > 0)
+  {
+    nntp_cache_expand (buf, nntp_data->cache);
+    mutt_message _("Fetching headers from cache...");
+    if ((f = safe_fopen (buf, "r")))
+    {
+      int r = 0;
+
+      /* counting number of lines */
+      while (fgets (buf, sizeof (buf), f) != NULL)
+	r++;
+      rewind (f);
+      while (r > num && fgets (buf, sizeof (buf), f) != NULL)
+	r--;
+      oldmsgcount = ctx->msgcount;
+      fc.first = first;
+      fc.last = first + num - 1;
+      fc.msg = NULL;
+      while (fgets (buf, sizeof (buf), f) != NULL)
+	add_xover_line (buf, &fc);
+      fclose (f);
+      nntp_data->lastLoaded = fc.last;
+      first = fc.last + 1;
+      if (ctx->msgcount > oldmsgcount)
+	mx_update_context (ctx, ctx->msgcount - oldmsgcount);
+    }
+    else
+      nntp_delete_cache (nntp_data);
+  }
+  num = last - first + 1;
+  if (num <= 0)
+  {
+    FREE (&fc.messages);
+    return 0;
+  }
+
+  /*
+   * Without XOVER, we have to fetch each article header and parse
+   * it.  With XOVER, we ask for all of them
+   */
+  mutt_message (msg);
+  if (nntp_data->nserv->hasXOVER)
+  {
+    oldmsgcount = ctx->msgcount;
+    fc.first = first;
+    fc.last = last;
+    fc.msg = msg;
+    snprintf (buf, sizeof (buf), "XOVER %d-%d\r\n", first, last);
+    ret = mutt_nntp_fetch (nntp_data, buf, NULL, add_xover_line, &fc, 0);
+    if (ctx->msgcount > oldmsgcount)
+      mx_update_context (ctx, ctx->msgcount - oldmsgcount);
+    if (ret != 0)
+    {
+      mutt_error (_("XOVER command failed: %s"), buf);
+#ifdef DEBUG
+      nntp_error ("nntp_fetch_headers()", buf);
+#endif
+      FREE (&fc.messages);
+      return -1;
+    }
+    /* fetched OK */
+  }
+  else
+  for (current = first; current <= last; current++)
+  {
+    HEADER *h;
+
+    ret = current - first + 1;
+    mutt_message ("%s %d/%d", msg, ret, num);
+
+    if (!fc.messages[current - fc.base])
+      continue;
+
+    if (ctx->msgcount >= ctx->hdrmax)
+      mx_alloc_memory (ctx);
+    h = ctx->hdrs[ctx->msgcount] = mutt_new_header ();
+    h->index = ctx->msgcount;
+
+    ret = nntp_read_header (ctx, NULL, current);
+    if (ret == 0) /* Got article. Fetch next header */
+    {
+      nntp_get_status (ctx, h, NULL, h->article_num);
+      ctx->msgcount++;
+      mx_update_context (ctx, 1);
+    }
+    else
+      mutt_free_header (&h); /* skip it */
+    if (ret == -1)
+    {
+      FREE (&fc.messages);
+      return -1;
+    }
+
+    if (current > nntp_data->lastLoaded)
+      nntp_data->lastLoaded = current;
+  }
+  FREE (&fc.messages);
+  nntp_data->lastLoaded = last;
+  mutt_clear_error ();
+  return 0;
+}
+
+/* 
+ * currently, nntp "mailbox" is "newsgroup"
+ */
+int nntp_open_mailbox (CONTEXT *ctx)
+{
+  NNTP_DATA *nntp_data;
+  NNTP_SERVER *serv;
+  char buf[HUGE_STRING];
+  char server[LONG_STRING];
+  int count = 0;
+  unsigned int first;
+  ACCOUNT acct;
+
+  if (nntp_parse_url (ctx->path, &acct, buf, sizeof (buf)) < 0 || !*buf)
+  {
+    mutt_error (_("%s is an invalid newsgroup specification!"), ctx->path);
+    mutt_sleep (2);
+    return -1;
+  }
+
+  server[0] = '\0';
+  nntp_expand_path (server, sizeof (server), &acct);
+  if (!(serv = mutt_select_newsserver (server)) || serv->status != NNTP_OK)
+    return -1;
+
+  CurrentNewsSrv = serv;
+
+  /* create NNTP-specific state struct if nof found in list */
+  if ((nntp_data = (NNTP_DATA *) hash_find (serv->newsgroups, buf)) == NULL)
+  {
+    nntp_data = safe_calloc (1, sizeof (NNTP_DATA) + strlen (buf) + 1);
+    nntp_data->group = (char *) nntp_data + sizeof (NNTP_DATA);
+    strcpy (nntp_data->group, buf);
+    hash_insert (serv->newsgroups, nntp_data->group, nntp_data, 0);
+    nntp_add_to_list (serv, nntp_data);
+  }
+  ctx->data = nntp_data;
+  nntp_data->nserv = serv;
+
+  mutt_message (_("Selecting %s..."), nntp_data->group);
+
+  if (!nntp_data->desc)
+  {
+    nntp_get_desc (nntp_data, nntp_data->group, NULL);
+    if (nntp_data->desc)
+      nntp_save_cache_index (serv);
+  }
+
+  buf[0] = 0;
+  if (mutt_nntp_query (nntp_data, buf, sizeof(buf)) < 0)
+  {
+#ifdef DEBUG
+    nntp_error ("nntp_open_mailbox()", buf);
+#endif
+    return -1;
+  }
+
+  if (mutt_strncmp ("211", buf, 3))
+  {
+    LIST *l = serv->list;
+
+    /* GROUP command failed */
+    if (!mutt_strncmp ("411", buf, 3))
+    {
+      mutt_error (_("Newsgroup %s not found on server %s"),
+		    nntp_data->group, serv->conn->account.host);
+
+      /* CACHE: delete cache and line from .index */
+      nntp_delete_cache (nntp_data);
+      hash_delete (serv->newsgroups, nntp_data->group, NULL, nntp_delete_data);
+      while (l && l->data != (void *) nntp_data) l = l->next;
+      if (l)
+	l->data = NULL;
+
+      sleep (2);
+    }
+
+    return -1;
+  }
+
+  sscanf (buf + 4, "%d %u %u %s", &count, &nntp_data->firstMessage, 
+	  &nntp_data->lastMessage, buf);
+
+  nntp_data->deleted = 0;
+
+  time (&serv->check_time);
+
+  /*
+   * Check for max adding context. If it is greater than $nntp_context,
+   * strip off extra articles
+   */
+  first = nntp_data->firstMessage;
+  if (NntpContext && nntp_data->lastMessage - first + 1 > NntpContext)
+    first = nntp_data->lastMessage - NntpContext + 1;
+  if (first)
+    nntp_data->lastLoaded = first - 1;
+  return nntp_fetch_headers (ctx, first, nntp_data->lastMessage);
+}
+
+int nntp_fetch_message (MESSAGE *msg, CONTEXT *ctx, int msgno)
+{
+  char buf[LONG_STRING];
+  char path[_POSIX_PATH_MAX];
+  NNTP_CACHE *cache;
+  char *m = _("Fetching message...");
+  int ret;
+
+  /* see if we already have the message in our cache */
+  cache = &((NNTP_DATA *) ctx->data)->acache[ctx->hdrs[msgno]->index % NNTP_CACHE_LEN];
+
+  /* if everything is fine, assign msg->fp and return */
+  if (cache->path && cache->index == ctx->hdrs[msgno]->index &&
+      (msg->fp = fopen (cache->path, "r")))
+    return 0;
+
+  /* clear the previous entry */
+  unlink (cache->path);
+  free (cache->path);
+
+  mutt_message (m);
+
+  cache->index = ctx->hdrs[msgno]->index;
+  mutt_mktemp (path);
+  cache->path = safe_strdup (path);
+  if (!(msg->fp = safe_fopen (path, "w+")))
+  {
+    FREE (&cache->path);
+    return -1;
+  }
+
+  if (ctx->hdrs[msgno]->article_num == 0)
+    snprintf (buf, sizeof (buf), "ARTICLE %s\r\n",
+	  ctx->hdrs[msgno]->env->message_id);
+  else
+    snprintf (buf, sizeof (buf), "ARTICLE %d\r\n",
+	  ctx->hdrs[msgno]->article_num);
+
+  ret = mutt_nntp_fetch ((NNTP_DATA *)ctx->data, buf, m, nntp_read_tempfile,
+	msg->fp, ctx->tagged);
+  if (ret == 1)
+  {
+    mutt_error (_("Article %d not found on server"), 
+	  ctx->hdrs[msgno]->article_num);
+    dprint (1, (debugfile, "nntp_fetch_message: %s\n", buf));
+  }
+
+  if (ret)
+  {
+    fclose (msg->fp);
+    unlink (path);
+    FREE (&cache->path);
+    return -1;
+  }
+
+  mutt_free_envelope (&ctx->hdrs[msgno]->env);
+  ctx->hdrs[msgno]->env = mutt_read_rfc822_header (msg->fp, ctx->hdrs[msgno], 0, 0);
+  /* fix content length */
+  fseek(msg->fp, 0, SEEK_END);
+  ctx->hdrs[msgno]->content->length = ftell (msg->fp) - 
+                                        ctx->hdrs[msgno]->content->offset;
+
+  /* this is called in mutt before the open which fetches the message, 
+   * which is probably wrong, but we just call it again here to handle
+   * the problem instead of fixing it.
+   */
+  mutt_parse_mime_message (ctx, ctx->hdrs[msgno]);
+
+  /* These would normally be updated in mx_update_context(), but the 
+   * full headers aren't parsed with XOVER, so the information wasn't
+   * available then.
+   */
+#ifdef HAVE_PGP
+  ctx->hdrs[msgno]->pgp = pgp_query (ctx->hdrs[msgno]->content);
+#endif /* HAVE_PGP */
+
+  mutt_clear_error();
+  rewind (msg->fp);
+
+  return 0;
+}
+
+/* Post article */
+int nntp_post (const char *msg) {
+  char buf[LONG_STRING];
+  size_t len;
+  FILE *f;
+  NNTP_DATA *nntp_data;
+
+  if (Context && Context->magic == M_NNTP)
+    nntp_data = (NNTP_DATA *)Context->data;
+  else
+  {
+    if (!(CurrentNewsSrv = mutt_select_newsserver (NewsServer)) ||
+	!CurrentNewsSrv->list || !CurrentNewsSrv->list->data)
+    {
+      mutt_error (_("Can't post article. No connection to news server."));
+      return -1;
+    }
+    nntp_data = (NNTP_DATA *)CurrentNewsSrv->list->data;
+  }
+
+  if (!(f = safe_fopen (msg, "r")))
+  {
+    mutt_error (_("Can't post article. Unable to open %s"), msg);
+    return -1;
+  }
+
+  strfcpy (buf, "POST\r\n", sizeof (buf));
+  if (mutt_nntp_query (nntp_data, buf, sizeof (buf)) < 0)
+  {
+    mutt_error (_("Can't post article. Connection to %s lost."),
+		nntp_data->nserv->conn->account.host);
+    return -1;
+  }
+  if (buf[0] != '3')
+  {
+    mutt_error (_("Can't post article: %s"), buf);
+    return -1;
+  }
+
+  buf[0] = '.';
+  buf[1] = '\0';
+  while (fgets (buf + 1, sizeof (buf) - 2, f) != NULL)
+  {
+    len = strlen (buf);
+    if (buf[len - 1] == '\n')
+    {
+      buf[len - 1] = '\r';
+      buf[len] = '\n';
+      len++;
+      buf[len] = '\0';
+    }
+    if (buf[1] == '.')
+      mutt_socket_write_d (nntp_data->nserv->conn, buf, M_SOCK_LOG_HDR);
+    else
+      mutt_socket_write_d (nntp_data->nserv->conn, buf + 1, M_SOCK_LOG_HDR);
+  }
+  fclose (f);
+
+  if (buf[strlen (buf) - 1] != '\n')
+    mutt_socket_write_d (nntp_data->nserv->conn, "\r\n", M_SOCK_LOG_HDR);
+  mutt_socket_write_d (nntp_data->nserv->conn, ".\r\n", M_SOCK_LOG_HDR);
+  if (mutt_socket_readln (buf, sizeof (buf), nntp_data->nserv->conn) < 0)
+  {
+    mutt_error (_("Can't post article. Connection to %s lost."),
+		nntp_data->nserv->conn->account.host);
+    return -1;
+  }
+  if (buf[0] != '2')
+  {
+    mutt_error (_("Can't post article: %s"), buf);
+    return -1;
+  }
+
+  return 0;
+}
+
+/* nntp_logout_all: close all open connections. */
+void nntp_logout_all (void)
+{
+  char buf[LONG_STRING];
+  CONNECTION* conn;
+  CONNECTION* tmp;
+
+  conn = mutt_socket_head ();
+
+  while (conn)
+  {
+    tmp = conn;
+
+    if (conn->account.type == M_ACCT_TYPE_NNTP)
+    {
+      mutt_message (_("Closing connection to %s..."), conn->account.host);
+      mutt_socket_write (conn, "QUIT\r\n");
+      mutt_socket_readln (buf, sizeof (buf), conn);
+      mutt_clear_error ();
+      mutt_socket_close (conn);
+
+      mutt_socket_free (tmp);
+    }
+
+    conn = conn->next;
+  }
+}
+
+static void nntp_free_acache (NNTP_DATA *data)
+{
+  int i;
+
+  for (i = 0; i < NNTP_CACHE_LEN; i++)
+  {
+    if (data->acache[i].path)
+    {
+      unlink (data->acache[i].path);
+      FREE (&data->acache[i].path);
+    }
+  }
+}
+
+void nntp_delete_data (void *p)
+{
+  NNTP_DATA *data = (NNTP_DATA *)p;
+
+  if (!p)
+    return;
+  FREE (&data->entries);
+  FREE (&data->desc);
+  FREE (&data->cache);
+  nntp_free_acache (data);
+  FREE (p);
+}
+
+int nntp_sync_mailbox (CONTEXT *ctx)
+{
+  NNTP_DATA *data = ctx->data;
+
+  /* CACHE: update cache and .index files */
+  if ((option (OPTSAVEUNSUB) || data->subscribed))
+    nntp_save_cache_group (ctx);
+  nntp_free_acache (data);
+
+  data->nserv->check_time = 0; /* next nntp_check_mailbox() will really check */
+  return 0;
+}
+
+void nntp_fastclose_mailbox (CONTEXT *ctx)
+{
+  NNTP_DATA *data = (NNTP_DATA *) ctx->data, *tmp;
+
+  if (!data)
+    return;
+  nntp_free_acache (data);
+  if (!data->nserv || !data->nserv->newsgroups || !data->group)
+    return;
+  nntp_save_cache_index (data->nserv);
+  if ((tmp = hash_find (data->nserv->newsgroups, data->group)) == NULL
+	|| tmp != data)
+    nntp_delete_data (data);
+}
+
+/* commit changes and terminate connection */
+int nntp_close_mailbox (CONTEXT *ctx)
+{
+  if (!ctx)
+    return -1;
+  mutt_message _("Quitting newsgroup...");
+  if (ctx->data)
+  {
+    NNTP_DATA *data = (NNTP_DATA *) ctx->data;
+    int ret;
+
+    if (data->nserv && data->nserv->conn && ctx->unread)
+    {
+      ret = query_quadoption (OPT_CATCHUP, _("Mark all articles read?"));
+      if (ret == M_YES)
+	mutt_newsgroup_catchup (data->nserv, data->group);
+      else if (ret < 0)
+	return -1;
+    }
+  }
+  nntp_sync_mailbox (ctx);
+  if (ctx->data && ((NNTP_DATA *)ctx->data)->nserv)
+  {
+    NNTP_SERVER *news;
+
+    news = ((NNTP_DATA *)ctx->data)->nserv;
+    newsrc_gen_entries (ctx);
+    ((NNTP_DATA *)ctx->data)->unread = ctx->unread;
+    mutt_newsrc_update (news);
+  }
+  mutt_clear_error();
+  return 0;
+}
+
+/* use the GROUP command to poll for new mail */
+static int _nntp_check_mailbox (CONTEXT *ctx, NNTP_DATA *nntp_data)
+{
+  char buf[LONG_STRING];
+  int count = 0;
+
+  if (nntp_data->nserv->check_time + NewsPollTimeout > time (NULL))
+    return 0;
+
+  buf[0] = 0;
+  if (mutt_nntp_query (nntp_data, buf, sizeof (buf)) < 0)
+  {
+#ifdef DEBUG
+    nntp_error ("nntp_check_mailbox()", buf);
+#endif
+    return -1;
+  }
+  if (mutt_strncmp ("211", buf, 3))
+  {
+    buf[0] = 0;
+    if (mutt_nntp_query (nntp_data, buf, sizeof (buf)) < 0)
+    {
+#ifdef DEBUG
+      nntp_error ("nntp_check_mailbox()", buf);
+#endif
+      return -1;
+    }
+  }
+  if (!mutt_strncmp ("211", buf, 3))
+  {
+    int first;
+    int last;
+
+    sscanf (buf + 4, "%d %d %d", &count, &first, &last);
+    nntp_data->firstMessage = first;
+    nntp_data->lastMessage = last;
+    if (ctx && last > nntp_data->lastLoaded)
+    {
+      nntp_fetch_headers (ctx, nntp_data->lastLoaded + 1, last);
+      time (&nntp_data->nserv->check_time);
+      return 1;
+    }
+    if (!last || (!nntp_data->rc && !nntp_data->lastCached))
+      nntp_data->unread = count;
+    else
+      mutt_newsgroup_stat (nntp_data);
+    /* active was renumbered? */
+    if (last < nntp_data->lastLoaded)
+    {
+      if (!nntp_data->max)
+      {
+	nntp_data->entries = safe_calloc (5, sizeof (NEWSRC_ENTRY));
+	nntp_data->max = 5;
+      }
+      nntp_data->lastCached = 0;
+      nntp_data->num = 1;
+      nntp_data->entries[0].first = 1;
+      nntp_data->entries[0].last = 0;
+    }
+  }
+
+  time (&nntp_data->nserv->check_time);
+  return 0;
+}
+
+int nntp_check_mailbox (CONTEXT *ctx)
+{
+  return _nntp_check_mailbox (ctx, (NNTP_DATA *)ctx->data);
+}
+
+static int add_group (char *buf, void *serv)
+{
+#define s ((NNTP_SERVER *) serv)
+  char group[LONG_STRING], mod, desc[HUGE_STRING];
+  int first, last;
+  NNTP_DATA *nntp_data;
+  static int n = 0;
+
+  _checked = n;	/* _checked have N, where N = number of groups */
+  if (!buf)	/* at EOF must be zerouth */
+    n = 0;
+
+  if (!s || !buf)
+    return 0;
+
+  *desc = 0;
+  sscanf (buf, "%s %d %d %c %[^\n]", group, &last, &first, &mod, desc);
+  if (!group)
+    return 0;
+  if ((nntp_data = (NNTP_DATA *) hash_find (s->newsgroups, group)) == NULL)
+  {
+    n++;
+    nntp_data = safe_calloc (1, sizeof (NNTP_DATA) + strlen (group) + 1);
+    nntp_data->group = (char *) nntp_data + sizeof (NNTP_DATA);
+    strcpy (nntp_data->group, group);
+    nntp_data->nserv = s;
+    if (s->newsgroups->nelem < s->newsgroups->curnelem * 2)
+      s->newsgroups = hash_resize (s->newsgroups, s->newsgroups->nelem * 2);
+    hash_insert (s->newsgroups, nntp_data->group, nntp_data, 0);
+    nntp_add_to_list (s, nntp_data);
+  }
+  nntp_data->deleted = 0;
+  nntp_data->firstMessage = first;
+  nntp_data->lastMessage = last;
+  if (mod == 'y')
+    nntp_data->allowed = 1;
+  else
+    nntp_data->allowed = 0;
+  if (nntp_data->desc)
+    FREE (&nntp_data->desc);
+  if (*desc)
+    nntp_data->desc = safe_strdup (desc);
+  if (nntp_data->rc || nntp_data->lastCached)
+    mutt_newsgroup_stat (nntp_data);
+  else if (nntp_data->lastMessage &&
+	nntp_data->firstMessage <= nntp_data->lastMessage)
+    nntp_data->unread = nntp_data->lastMessage - nntp_data->firstMessage + 1;
+  else
+    nntp_data->unread = 0;
+
+  return 0;
+#undef s
+}
+
+int nntp_check_newgroups (NNTP_SERVER *serv, int force)
+{
+  char buf[LONG_STRING];
+  NNTP_DATA nntp_data;
+  LIST *l;
+  LIST emp;
+  time_t now;
+  struct tm *t;
+
+  if (!serv || !serv->newgroups_time)
+    return -1;
+
+  if (nntp_open_connection (serv) < 0)
+    return -1;
+
+  /* check subscribed groups for new news */
+  if (option (OPTSHOWNEWNEWS))
+  {
+    mutt_message _("Checking for new messages...");
+    for (l = serv->list; l; l = l->next)
+    {
+      serv->check_time = 0;	/* really check! */
+      if (l->data && ((NNTP_DATA *) l->data)->subscribed)
+	_nntp_check_mailbox (NULL, (NNTP_DATA *) l->data);
+    }
+  }
+  else if (!force)
+    return 0;
+
+  mutt_message _("Checking for new newsgroups...");
+  now = serv->newgroups_time;
+  time (&serv->newgroups_time);
+  t = gmtime (&now);
+  snprintf (buf, sizeof (buf), "NEWGROUPS %02d%02d%02d %02d%02d%02d GMT\r\n",
+	(t->tm_year % 100), t->tm_mon + 1, t->tm_mday, t->tm_hour, t->tm_min,
+	t->tm_sec);
+  nntp_data.nserv = serv;
+  if (Context && Context->magic == M_NNTP)
+    nntp_data.group = ((NNTP_DATA *)Context->data)->group;
+  else
+    nntp_data.group = NULL;
+  l = serv->tail;
+  if (mutt_nntp_fetch (&nntp_data, buf, _("Adding new newsgroups..."),
+	add_group, serv, 0) != 0)
+  {
+#ifdef DEBUG
+    nntp_error ("nntp_check_newgroups()", buf);
+#endif
+    return -1;
+  }
+
+  mutt_message _("Loading descriptions...");
+  if (l)
+    emp.next = l->next;
+  else
+    emp.next = serv->list;
+  l = &emp;
+  while (l->next)
+  {
+    l = l->next;
+    ((NNTP_DATA *) l->data)->new = 1;
+    nntp_get_desc ((NNTP_DATA *) l->data, ((NNTP_DATA *) l->data)->group, NULL);
+  }
+  if (emp.next)
+    nntp_save_cache_index (serv);
+  mutt_clear_error ();
+  return _checked;
+}
+
+/* Load list of all newsgroups from cache ALL */
+int nntp_get_cache_all (NNTP_SERVER *serv)
+{
+  char buf[HUGE_STRING];
+  FILE *f;
+
+  nntp_cache_expand (buf, serv->cache);
+  if ((f = safe_fopen (buf, "r")))
+  {
+    int i = 0;
+
+    while (fgets (buf, sizeof(buf), f) != NULL)
+    {
+      if (ReadInc && (i % ReadInc == 0))
+	mutt_message (_("Loading list from cache... %d"), i);
+      add_group (buf, serv);
+      i++;
+    }
+    add_group (NULL, NULL);
+    fclose (f);
+    mutt_clear_error ();
+    return 0;
+  }
+  else
+  {
+    FREE (&serv->cache);
+    return -1;
+  }
+}
+
+/* Load list of all newsgroups from active */
+int nntp_get_active (NNTP_SERVER *serv)
+{
+  char msg[SHORT_STRING];
+  NNTP_DATA nntp_data;
+  LIST *tmp;
+
+  if (nntp_open_connection (serv) < 0)
+    return -1;
+
+  snprintf (msg, sizeof(msg), _("Loading list of all newsgroups on server %s..."),
+		serv->conn->account.host);
+  mutt_message (msg);
+  time (&serv->newgroups_time);
+  nntp_data.nserv = serv;
+  nntp_data.group = NULL;
+
+  if (mutt_nntp_fetch (&nntp_data, "LIST\r\n", msg, add_group, serv, 0) < 0)
+  {
+#ifdef DEBUG
+    nntp_error ("nntp_get_active()", "LIST\r\n");
+#endif
+    return -1;
+  }
+
+  strfcpy (msg, _("Loading descriptions..."), sizeof (msg));
+  mutt_message (msg);
+  nntp_get_desc (&nntp_data, "*", msg);
+
+  for (tmp = serv->list; tmp; tmp = tmp->next)
+  {
+    NNTP_DATA *data = (NNTP_DATA *)tmp->data;
+
+    if (data && data->deleted && !data->rc)
+    {
+      nntp_delete_cache (data);
+      hash_delete (serv->newsgroups, data->group, NULL, nntp_delete_data);
+      tmp->data = NULL;
+    }
+  }
+  nntp_save_cache_index (serv);
+
+  mutt_clear_error ();
+  return _checked;
+}
+
+/*
+ * returns -1 if error ocurred while retrieving header,
+ * number of articles which ones exist in context on success.
+ */
+int nntp_check_msgid (CONTEXT *ctx, const char *msgid)
+{
+  int ret;
+
+  /* if msgid is already in context, don't reload them */
+  if (hash_find (ctx->id_hash, msgid))
+    return 1;
+  if (ctx->msgcount == ctx->hdrmax)
+    mx_alloc_memory (ctx);
+  ctx->hdrs[ctx->msgcount] = mutt_new_header ();
+  ctx->hdrs[ctx->msgcount]->index = ctx->msgcount;
+  
+  mutt_message (_("Fetching %s from server..."), msgid);
+  ret = nntp_read_header (ctx, msgid, 0);
+  /* since nntp_read_header() may set read flag, we must reset it */
+  ctx->hdrs[ctx->msgcount]->read = 0;
+  if (ret != 0)
+    mutt_free_header (&ctx->hdrs[ctx->msgcount]);
+  else
+  {
+    ctx->msgcount++;
+    mx_update_context (ctx, 1);
+    ctx->changed = 1;
+  }
+  return ret;
+}
+
+typedef struct
+{
+  CONTEXT *ctx;
+  unsigned int num;
+  unsigned int max;
+  unsigned int *child;
+} CHILD_CONTEXT;
+
+static int check_children (char *s, void *c)
+{
+#define cc ((CHILD_CONTEXT *) c)
+  unsigned int i, n;
+
+  if (!s || (n = atoi (s)) == 0)
+    return 0;
+  for (i = 0; i < cc->ctx->msgcount; i++)
+    if (cc->ctx->hdrs[i]->article_num == n)
+      return 0;
+  if (cc->num >= cc->max)
+    safe_realloc ((void **) &cc->child, sizeof (unsigned int) * (cc->max += 25));
+  cc->child[cc->num++] = n;
+
+  return 0;
+#undef cc
+}
+
+int nntp_check_children (CONTEXT *ctx, const char *msgid)
+{
+  NNTP_DATA *nntp_data = (NNTP_DATA *)ctx->data;
+  char buf[STRING];
+  int i, ret = 0, tmp = 0;
+  CHILD_CONTEXT cc;
+
+  if (!nntp_data || !nntp_data->nserv || !nntp_data->nserv->conn ||
+	!nntp_data->nserv->conn->account.host)
+    return -1;
+  if (nntp_data->firstMessage > nntp_data->lastLoaded)
+    return 0;
+  if (!nntp_data->nserv->hasXPAT)
+  {
+    mutt_error (_("Server %s does not support this operation!"),
+	  nntp_data->nserv->conn->account.host);
+    return -1;
+  }
+
+  snprintf (buf, sizeof (buf), "XPAT References %d-%d *%s*\r\n", 
+	nntp_data->firstMessage, nntp_data->lastLoaded, msgid);
+
+  cc.ctx = ctx;
+  cc.num = 0;
+  cc.max = 25;
+  cc.child = safe_malloc (sizeof (unsigned int) * 25);
+  if (mutt_nntp_fetch (nntp_data, buf, NULL, check_children, &cc, 0))
+  {
+    safe_free ((void **) &cc.child);
+    return -1;
+  }
+  /* dont try to read the xover cache. check_children() already
+   * made sure that we dont have the article, so we need to visit
+   * the server. Reading the cache at this point is also bad
+   * because it would duplicate messages */
+  if (option (OPTNEWSCACHE))
+  {
+    tmp++;
+    unset_option (OPTNEWSCACHE);
+  }
+  for (i = 0; i < cc.num; i++)
+  {
+    if ((ret = nntp_fetch_headers (ctx, cc.child[i], cc.child[i])))
+      break;
+    if (ctx->msgcount &&
+	  ctx->hdrs[ctx->msgcount - 1]->article_num == cc.child[i])
+      ctx->hdrs[ctx->msgcount - 1]->read = 0;
+  }
+  if (tmp)
+    set_option (OPTNEWSCACHE);
+  safe_free ((void **) &cc.child);
+  return ret;
+}
diff -uNr mutt-1.4.orig/nntp.h mutt-1.4/nntp.h
--- mutt-1.4.orig/nntp.h	Thu Jan  1 01:00:00 1970
+++ mutt-1.4/nntp.h	Sun Nov  3 21:57:20 2002
@@ -0,0 +1,135 @@
+/*
+ * Copyright (C) 1998 Brandon Long <blong@fiction.net>
+ * Copyright (C) 1999 Andrej Gritsenko <andrej@lucky.net>
+ * Copyright (C) 2000-2002 Vsevolod Volkov <vvv@mutt.org.ua>
+ * 
+ *     This program is free software; you can redistribute it and/or modify
+ *     it under the terms of the GNU General Public License as published by
+ *     the Free Software Foundation; either version 2 of the License, or
+ *     (at your option) any later version.
+ * 
+ *     This program is distributed in the hope that it will be useful,
+ *     but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *     GNU General Public License for more details.
+ * 
+ *     You should have received a copy of the GNU General Public License
+ *     along with this program; if not, write to the Free Software
+ *     Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+ */ 
+
+#ifndef _NNTP_H_
+#define _NNTP_H_ 1
+
+#include "mutt_socket.h"
+#include "mailbox.h"
+
+#include <time.h>
+
+#define NNTP_PORT 119
+#define NNTP_SSL_PORT 563
+
+/* number of entries in the hash table */
+#define NNTP_CACHE_LEN 10
+
+enum
+{
+  NNTP_NONE = 0,
+  NNTP_OK,
+  NNTP_BYE
+};
+
+typedef struct
+{
+  int first;
+  int last;
+} NEWSRC_ENTRY;
+
+typedef struct
+{
+  unsigned int hasXPAT : 1;
+  unsigned int hasXGTITLE : 1;
+  unsigned int hasXOVER : 1;
+  unsigned int status : 3;
+  char *newsrc;
+  char *cache;
+  int stat;
+  off_t size;
+  time_t mtime;
+  time_t newgroups_time;
+  time_t check_time;
+  HASH *newsgroups;
+  LIST *list;	/* list of newsgroups */
+  LIST *tail;	/* last entry of list */
+  CONNECTION *conn;
+} NNTP_SERVER;
+
+typedef struct
+{
+  unsigned int index;
+  char *path;
+} NNTP_CACHE;
+
+typedef struct
+{
+  NEWSRC_ENTRY *entries;
+  unsigned int num;	/* number of used entries */
+  unsigned int max;	/* number of allocated entries */
+  unsigned int unread;
+  unsigned int firstMessage;
+  unsigned int lastMessage;
+  unsigned int lastLoaded;
+  unsigned int lastCached;
+  unsigned int subscribed : 1;
+  unsigned int rc : 1;
+  unsigned int new : 1;
+  unsigned int allowed : 1;
+  unsigned int deleted : 1;
+  char *group;
+  char *desc;
+  char *cache;
+  NNTP_SERVER *nserv;
+  NNTP_CACHE acache[NNTP_CACHE_LEN];
+} NNTP_DATA;
+
+/* internal functions */
+int nntp_get_active (NNTP_SERVER *);
+int nntp_get_cache_all (NNTP_SERVER *);
+int nntp_save_cache_index (NNTP_SERVER *);
+int nntp_check_newgroups (NNTP_SERVER *, int);
+int nntp_save_cache_group (CONTEXT *);
+int nntp_parse_url (const char *, ACCOUNT *, char *, size_t);
+void newsrc_gen_entries (CONTEXT *);
+void nntp_get_status (CONTEXT *, HEADER *, char *, int);
+void mutt_newsgroup_stat (NNTP_DATA *);
+void nntp_delete_cache (NNTP_DATA *);
+void nntp_add_to_list (NNTP_SERVER *, NNTP_DATA *);
+void nntp_cache_expand (char *, const char *);
+void nntp_delete_data (void *);
+
+/* exposed interface */
+NNTP_SERVER *mutt_select_newsserver (char *);
+NNTP_DATA *mutt_newsgroup_subscribe (NNTP_SERVER *, char *);
+NNTP_DATA *mutt_newsgroup_unsubscribe (NNTP_SERVER *, char *);
+NNTP_DATA *mutt_newsgroup_catchup (NNTP_SERVER *, char *);
+NNTP_DATA *mutt_newsgroup_uncatchup (NNTP_SERVER *, char *);
+void nntp_clear_cacheindex (NNTP_SERVER *);
+int mutt_newsrc_update (NNTP_SERVER *);
+int nntp_open_mailbox (CONTEXT *);
+int nntp_sync_mailbox (CONTEXT *);
+int nntp_check_mailbox (CONTEXT *);
+int nntp_close_mailbox (CONTEXT *);
+void nntp_fastclose_mailbox (CONTEXT *);
+int nntp_fetch_message (MESSAGE *, CONTEXT *, int);
+int nntp_post (const char *);
+int nntp_check_msgid (CONTEXT *, const char *);
+int nntp_check_children (CONTEXT *, const char *);
+void nntp_buffy (char *);
+void nntp_expand_path (char *, size_t, ACCOUNT *);
+void nntp_logout_all ();
+const char *nntp_format_str (char *, size_t, char, const char *, const char *,
+		const char *, const char *, unsigned long, format_flag);
+
+NNTP_SERVER *CurrentNewsSrv INITVAL (NULL);
+
+#endif /* _NNTP_H_ */
diff -uNr mutt-1.4.orig/pager.c mutt-1.4/pager.c
--- mutt-1.4.orig/pager.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/pager.c	Sun Nov  3 21:57:20 2002
@@ -33,6 +33,11 @@
 #include "imap.h"
 #endif
 
+#ifdef USE_NNTP
+#include "mx.h"
+#include "nntp.h"
+#endif
+
 
 #ifdef HAVE_PGP
 #include "pgp.h"
@@ -1445,6 +1450,16 @@
   { NULL,	0 }
 };
 
+#ifdef USE_NNTP
+static struct mapping_t PagerNewsHelpExtra[] = {
+  { N_("Post"),     OP_POST },
+  { N_("Followup"), OP_FOLLOWUP },
+  { N_("Del"),      OP_DELETE },
+  { N_("Next"),     OP_MAIN_NEXT_UNDELETED },
+  { NULL,           0 }
+};
+#endif
+
 
 
 /* This pager is actually not so simple as it once was.  It now operates in
@@ -1486,6 +1501,10 @@
   int old_PagerIndexLines;		/* some people want to resize it
   					 * while inside the pager... */
 
+#ifdef USE_NNTP
+  char *followup_to;
+#endif
+
   if (!(flags & M_SHOWCOLOR))
     flags |= M_SHOWFLAT;
 
@@ -1525,7 +1544,11 @@
   if (IsHeader (extra))
   {
     strfcpy (tmphelp, helpstr, sizeof (tmphelp));
-    mutt_compile_help (buffer, sizeof (buffer), MENU_PAGER, PagerHelpExtra);
+    mutt_compile_help (buffer, sizeof (buffer), MENU_PAGER,
+#ifdef USE_NNTP
+	(Context && (Context->magic == M_NNTP)) ? PagerNewsHelpExtra :
+#endif
+	PagerHelpExtra);
     snprintf (helpstr, sizeof (helpstr), "%s %s", tmphelp, buffer);
   }
   if (!InHelp)
@@ -2300,6 +2323,15 @@
 	}
 #endif
 
+#ifdef USE_NNTP
+	if (Context->magic == M_NNTP)
+	{
+	  mutt_flushinp ();
+	  mutt_error _("Can't change 'important' flag on NNTP server.");
+	  break;
+	}
+#endif
+
 	mutt_set_flag (Context, extra->hdr, M_FLAG, !extra->hdr->flagged);
 	redraw = REDRAW_STATUS | REDRAW_INDEX;
 	if (option (OPTRESOLVE))
@@ -2333,6 +2365,60 @@
 	redraw = REDRAW_FULL;
 	break;
 
+#ifdef USE_NNTP
+      case OP_POST:
+	CHECK_MODE(IsHeader (extra) && !IsAttach (extra));
+	CHECK_ATTACH;
+	if (extra->ctx && extra->ctx->magic == M_NNTP &&
+	    !((NNTP_DATA *)extra->ctx->data)->allowed &&
+	    query_quadoption (OPT_TOMODERATED,_("Posting to this group not allowed, may be moderated. Continue?")) != M_YES)
+	  break;
+	ci_send_message (SENDNEWS, NULL, NULL, extra->ctx, NULL);
+	redraw = REDRAW_FULL;
+	break;
+
+      case OP_FORWARD_TO_GROUP:
+	CHECK_MODE(IsHeader (extra) || IsMsgAttach (extra));
+	CHECK_ATTACH;
+	if (extra->ctx && extra->ctx->magic == M_NNTP &&
+	    !((NNTP_DATA *)extra->ctx->data)->allowed &&
+	    query_quadoption (OPT_TOMODERATED,_("Posting to this group not allowed, may be moderated. Continue?")) != M_YES)
+	  break;
+	if (IsMsgAttach (extra))
+	  mutt_attach_forward (extra->fp, extra->hdr, extra->idx,
+			       extra->idxlen, extra->bdy, SENDNEWS);
+	else
+	  ci_send_message (SENDNEWS|SENDFORWARD, NULL, NULL, extra->ctx, extra->hdr);
+	redraw = REDRAW_FULL;
+	break;
+
+      case OP_FOLLOWUP:
+	CHECK_MODE(IsHeader (extra) || IsMsgAttach (extra));
+	CHECK_ATTACH;
+
+        if (IsMsgAttach (extra))
+	  followup_to = extra->bdy->hdr->env->followup_to;
+        else
+	  followup_to = extra->hdr->env->followup_to;
+
+	if (!followup_to || mutt_strcasecmp (followup_to, "poster") ||
+	    query_quadoption (OPT_FOLLOWUPTOPOSTER,_("Reply by mail as poster prefers?")) != M_YES)
+	{
+	  if (extra->ctx && extra->ctx->magic == M_NNTP &&
+	      !((NNTP_DATA *)extra->ctx->data)->allowed &&
+	      query_quadoption (OPT_TOMODERATED,_("Posting to this group not allowed, may be moderated. Continue?")) != M_YES)
+	    break;
+	  if (IsMsgAttach (extra))
+	    mutt_attach_reply (extra->fp, extra->hdr, extra->idx,
+			       extra->idxlen, extra->bdy, SENDNEWS|SENDREPLY);
+	  else
+	    ci_send_message (SENDNEWS|SENDREPLY, NULL, NULL,
+			     extra->ctx, extra->hdr);
+	  redraw = REDRAW_FULL;
+	  break;
+	}
+#endif
+
       case OP_REPLY:
 	CHECK_MODE(IsHeader (extra) || IsMsgAttach (extra));
         CHECK_ATTACH;      
@@ -2379,7 +2465,7 @@
         CHECK_ATTACH;
         if (IsMsgAttach (extra))
 	  mutt_attach_forward (extra->fp, extra->hdr, extra->idx,
-			       extra->idxlen, extra->bdy);
+			       extra->idxlen, extra->bdy, 0);
         else
 	  ci_send_message (SENDFORWARD, NULL, NULL, extra->ctx, extra->hdr);
 	redraw = REDRAW_FULL;
diff -uNr mutt-1.4.orig/parse.c mutt-1.4/parse.c
--- mutt-1.4.orig/parse.c	Tue Jan 29 11:05:20 2002
+++ mutt-1.4/parse.c	Sun Nov  3 21:57:20 2002
@@ -90,7 +90,7 @@
   /* not reached */
 }
 
-static LIST *mutt_parse_references (char *s, int in_reply_to)
+LIST *mutt_parse_references (char *s, int in_reply_to)
 {
   LIST *t, *lst = NULL;
   int m, n = 0;
@@ -1047,6 +1047,17 @@
       e->from = rfc822_parse_adrlist (e->from, p);
       matched = 1;
     }
+#ifdef USE_NNTP
+    else if (!mutt_strcasecmp (line+1, "ollowup-to"))
+    {
+      if (!e->followup_to)
+      {
+	mutt_remove_trailing_ws (p);
+	e->followup_to = safe_strdup (mutt_skip_whitespace (p));
+      }
+      matched = 1;
+    }
+#endif
     break;
     
     case 'i':
@@ -1098,6 +1109,27 @@
     }
     break;
     
+#ifdef USE_NNTP
+    case 'n':
+    if (!mutt_strcasecmp (line + 1, "ewsgroups"))
+    {
+      safe_free ((void **)&e->newsgroups);
+      mutt_remove_trailing_ws (p);
+      e->newsgroups = safe_strdup (mutt_skip_whitespace (p));
+      matched = 1;
+    }
+    break;
+#endif
+
+    case 'o':
+    /* field `Organization:' saves only for pager! */
+    if (!mutt_strcasecmp (line + 1, "rganization"))
+    {
+      if (!e->organization && mutt_strcasecmp (p, "unknown"))
+	e->organization = safe_strdup (p);
+    }
+    break;
+
     case 'r':
     if (!ascii_strcasecmp (line + 1, "eferences"))
     {
@@ -1207,7 +1239,21 @@
       e->x_label = safe_strdup(p);
       matched = 1;
     }
-    
+#ifdef USE_NNTP
+    else if (!mutt_strcasecmp (line + 1, "-comment-to"))
+    {
+      if (!e->x_comment_to)
+	e->x_comment_to = safe_strdup (p);
+      matched = 1;
+    }
+    else if (!mutt_strcasecmp (line + 1, "ref"))
+    {
+      if (!e->xref)
+	e->xref = safe_strdup (p);
+      matched = 1;
+    }
+#endif
+
     default:
     break;
   }
diff -uNr mutt-1.4.orig/pattern.c mutt-1.4/pattern.c
--- mutt-1.4.orig/pattern.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/pattern.c	Sun Nov  3 21:57:20 2002
@@ -87,6 +87,9 @@
   { 't', M_TO,			0,		eat_regexp },
   { 'U', M_UNREAD,		0,		NULL },
   { 'v', M_COLLAPSED,		0,		NULL },
+#ifdef USE_NNTP
+  { 'w', M_NEWSGROUPS,		0,		eat_regexp },
+#endif
   { 'x', M_REFERENCE,		0,		eat_regexp },
   { 'y', M_XLABEL,		0,		eat_regexp },
   { 'z', M_SIZE,		0,		eat_range },
@@ -1053,6 +1056,10 @@
       return (pat->not ^ (h->env->x_label && regexec (pat->rx, h->env->x_label, 0, NULL, 0) == 0));
     case M_DUPLICATED:
       return (pat->not ^ (h->thread && h->thread->duplicate_thread));
+#ifdef USE_NNTP
+    case M_NEWSGROUPS:
+      return (pat->not ^ (h->env->newsgroups && regexec (pat->rx, h->env->newsgroups, 0, NULL, 0) == 0));
+#endif
   }
   mutt_error (_("error: unknown op %d (report this error)."), pat->op);
   return (-1);
@@ -1120,6 +1127,7 @@
   int i;
 
   strfcpy (buf, NONULL (Context->pattern), sizeof (buf));
+  if (prompt || op != M_LIMIT)
   if (mutt_get_field (prompt, buf, sizeof (buf), M_PATTERN | M_CLEAR) != 0 || !buf[0])
     return (-1);
 
diff -uNr mutt-1.4.orig/po/ChangeLog mutt-1.4/po/ChangeLog
--- mutt-1.4.orig/po/ChangeLog	Wed Mar 13 13:49:11 2002
+++ mutt-1.4/po/ChangeLog	Sun Nov  3 21:57:22 2002
@@ -1 +1,5 @@
+2002-11-03  gettextize  <bug-gnu-utils@gnu.org>
+
+	* Makefile.in.in: Upgrade to gettext-0.10.40.
+
 placeholder.
diff -uNr mutt-1.4.orig/po/ChangeLog~ mutt-1.4/po/ChangeLog~
--- mutt-1.4.orig/po/ChangeLog~	Thu Jan  1 01:00:00 1970
+++ mutt-1.4/po/ChangeLog~	Wed Mar 13 13:49:11 2002
@@ -0,0 +1 @@
+placeholder.
diff -uNr mutt-1.4.orig/po/Makefile.in.in mutt-1.4/po/Makefile.in.in
--- mutt-1.4.orig/po/Makefile.in.in	Tue Jan  1 21:18:37 2002
+++ mutt-1.4/po/Makefile.in.in	Sun Nov  3 21:57:22 2002
@@ -2,7 +2,7 @@
 # Copyright (C) 1995-1997, 2000, 2001 by Ulrich Drepper <drepper@gnu.ai.mit.edu>
 #
 # This file file be copied and used freely without restrictions.  It can
-# be used in projects which are not available under the GNU General Public License
+# be used in projects which are not available under the GNU Public License
 # but which still want to provide support for the GNU gettext functionality.
 # Please note that the actual code is *not* freely available.
 
@@ -77,10 +77,6 @@
 all-yes: $(CATALOGS)
 all-no:
 
-.PHONY: ../keymap_alldefs.h
-../keymap_alldefs.h:
-	cd .. && $(MAKE) keymap_alldefs.h
-
 # Note: Target 'all' must not depend on target '$(srcdir)/$(PACKAGE).pot',
 # otherwise packages like GCC can not be built if only parts of the source
 # have been downloaded.
diff -uNr mutt-1.4.orig/po/POTFILES.in mutt-1.4/po/POTFILES.in
--- mutt-1.4.orig/po/POTFILES.in	Sun Nov  3 21:42:51 2002
+++ mutt-1.4/po/POTFILES.in	Sun Nov  3 21:57:20 2002
@@ -41,6 +41,8 @@
 mutt_socket.c
 mutt_ssl.c
 mx.c
+newsrc.c
+nntp.c
 pager.c
 parse.c
 pattern.c
diff -uNr mutt-1.4.orig/po/POTFILES.in.orig mutt-1.4/po/POTFILES.in.orig
--- mutt-1.4.orig/po/POTFILES.in.orig	Thu Jan  1 01:00:00 1970
+++ mutt-1.4/po/POTFILES.in.orig	Sun Nov  3 21:57:20 2002
@@ -0,0 +1,65 @@
+account.c
+addrbook.c
+alias.c
+attach.c
+browser.c
+buffy.c
+charset.c
+color.c
+commands.c
+compose.c
+compress.c
+curs_lib.c
+curs_main.c
+edit.c
+editmsg.c
+flags.c
+handler.c
+headers.c
+help.c
+hook.c
+imap/auth.c
+imap/auth_anon.c
+imap/auth_cram.c
+imap/auth_gss.c
+imap/auth_login.c
+imap/auth_sasl.c
+imap/browse.c
+imap/command.c
+imap/imap.c
+imap/message.c
+imap/util.c
+init.c
+keymap.c
+keymap_alldefs.h
+lib.c
+main.c
+mbox.c
+menu.c
+mh.c
+muttlib.c
+mutt_socket.c
+mutt_ssl.c
+mx.c
+pager.c
+parse.c
+pattern.c
+pgp.c
+pgpinvoke.c
+pgpkey.c
+pop.c
+pop_auth.c
+pop_lib.c
+postpone.c
+query.c
+recvattach.c
+recvcmd.c
+remailer.c
+rfc1524.c
+score.c
+send.c
+sendlib.c
+signal.c
+sort.c
+status.c
+thread.c
Binary files mutt-1.4.orig/po/de.gmo and mutt-1.4/po/de.gmo differ
diff -uNr mutt-1.4.orig/postpone.c mutt-1.4/postpone.c
--- mutt-1.4.orig/postpone.c	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/postpone.c	Sun Nov  3 21:57:20 2002
@@ -125,15 +125,26 @@
 
   if (LastModify < st.st_mtime)
   {
+#ifdef USE_NNTP
+    int optnews = option (OPTNEWS);
+#endif
     LastModify = st.st_mtime;
 
     if (access (Postponed, R_OK | F_OK) != 0)
       return (PostCount = 0);
+#ifdef USE_NNTP
+    if (optnews)
+	unset_option (OPTNEWS);
+#endif
     if (mx_open_mailbox (Postponed, M_NOSORT | M_QUIET, &ctx) == NULL)
       PostCount = 0;
     else
       PostCount = ctx.msgcount;
     mx_fastclose_mailbox (&ctx);
+#ifdef USE_NNTP
+    if (optnews)
+	set_option (OPTNEWS);
+#endif
   }
 
   return (PostCount);
diff -uNr mutt-1.4.orig/protos.h mutt-1.4/protos.h
--- mutt-1.4.orig/protos.h	Sun Nov  3 21:42:52 2002
+++ mutt-1.4/protos.h	Sun Nov  3 21:57:20 2002
@@ -95,6 +95,7 @@
 HASH *mutt_make_subj_hash (CONTEXT *);
 
 LIST *mutt_make_references(ENVELOPE *e);
+LIST *mutt_parse_references (char *, int);
 
 ENVELOPE *mutt_read_rfc822_header (FILE *, HEADER *, short, short);
 HEADER *mutt_dup_header (HEADER *);
@@ -230,6 +231,7 @@
 void mutt_update_tree (ATTACHPTR **, short);
 void mutt_version (void);
 void mutt_view_attachments (HEADER *);
+void mutt_write_references (LIST *, FILE *);
 void mutt_set_virtual (CONTEXT *);
 
 int mutt_addr_is_user (ADDRESS *);
@@ -316,6 +318,7 @@
 int mutt_search_command (int, int);
 int mutt_compose_menu (HEADER *, char *, size_t, HEADER *);
 int mutt_thread_set_flag (HEADER *, int, int, int);
+int mutt_update_list_file (char *, char *, char *, char *);
 int mutt_user_is_recipient (HEADER *);
 void mutt_update_num_postponed (void);
 int mutt_view_attachment (FILE*, BODY *, int, HEADER *, ATTACHPTR **, short);
diff -uNr mutt-1.4.orig/recvattach.c mutt-1.4/recvattach.c
--- mutt-1.4.orig/recvattach.c	Wed Sep 26 12:33:09 2001
+++ mutt-1.4/recvattach.c	Sun Nov  3 21:57:20 2002
@@ -989,6 +989,15 @@
 	}
 #endif
 
+#ifdef USE_NNTP
+	if (Context->magic == M_NNTP)
+	{
+	  mutt_flushinp ();
+	  mutt_error _("Can't delete attachment from newsserver.");
+	  break;
+	}
+#endif
+
 
 
 #ifdef HAVE_PGP
@@ -1084,10 +1093,33 @@
       case OP_FORWARD_MESSAGE:
         CHECK_ATTACH;
         mutt_attach_forward (fp, hdr, idx, idxlen,
-			     menu->tagprefix ? NULL : idx[menu->current]->content);
+			     menu->tagprefix ? NULL : idx[menu->current]->content, 0);
         menu->redraw = REDRAW_FULL;
         break;
       
+#ifdef USE_NNTP
+      case OP_FORWARD_TO_GROUP:
+	CHECK_ATTACH;
+	mutt_attach_forward (fp, hdr, idx, idxlen,
+		menu->tagprefix ? NULL : idx[menu->current]->content, SENDNEWS);
+	menu->redraw = REDRAW_FULL;
+	break;
+
+      case OP_FOLLOWUP:
+	CHECK_ATTACH;
+
+	if (!idx[menu->current]->content->hdr->env->followup_to ||
+	    mutt_strcasecmp (idx[menu->current]->content->hdr->env->followup_to, "poster") ||
+	    query_quadoption (OPT_FOLLOWUPTOPOSTER,_("Reply by mail as poster prefers?")) != M_YES)
+	{
+	  mutt_attach_reply (fp, hdr, idx, idxlen,
+		menu->tagprefix ? NULL : idx[menu->current]->content,
+		SENDNEWS|SENDREPLY);
+	  menu->redraw = REDRAW_FULL;
+	  break;
+	}
+#endif
+
       case OP_REPLY:
       case OP_GROUP_REPLY:
       case OP_LIST_REPLY:
diff -uNr mutt-1.4.orig/recvcmd.c mutt-1.4/recvcmd.c
--- mutt-1.4.orig/recvcmd.c	Wed Jan  2 10:33:38 2002
+++ mutt-1.4/recvcmd.c	Sun Nov  3 21:57:20 2002
@@ -334,7 +334,7 @@
 static void attach_forward_bodies (FILE * fp, HEADER * hdr,
 				   ATTACHPTR ** idx, short idxlen,
 				   BODY * cur,
-				   short nattach)
+				   short nattach, int flags)
 {
   short i;
   short mime_fwd_all = 0;
@@ -480,7 +480,7 @@
   tmpfp = NULL;
 
   /* now that we have the template, send it. */
-  ci_send_message (0, tmphdr, tmpbody, NULL, parent);
+  ci_send_message (flags, tmphdr, tmpbody, NULL, parent);
   return;
   
   bail:
@@ -507,7 +507,7 @@
  */
 
 static void attach_forward_msgs (FILE * fp, HEADER * hdr, 
-	       ATTACHPTR ** idx, short idxlen, BODY * cur)
+	       ATTACHPTR ** idx, short idxlen, BODY * cur, int flags)
 {
   HEADER *curhdr = NULL;
   HEADER *tmphdr;
@@ -612,23 +612,23 @@
   else
     mutt_free_header (&tmphdr);
 
-  ci_send_message (0, tmphdr, *tmpbody ? tmpbody : NULL, 
+  ci_send_message (flags, tmphdr, *tmpbody ? tmpbody : NULL, 
 		   NULL, curhdr);
 
 }
 
 void mutt_attach_forward (FILE * fp, HEADER * hdr, 
-			  ATTACHPTR ** idx, short idxlen, BODY * cur)
+			  ATTACHPTR ** idx, short idxlen, BODY * cur, int flags)
 {
   short nattach;
   
 
   if (check_all_msg (idx, idxlen, cur, 0) == 0)
-    attach_forward_msgs (fp, hdr, idx, idxlen, cur);
+    attach_forward_msgs (fp, hdr, idx, idxlen, cur, flags);
   else
   {
     nattach = count_tagged (idx, idxlen);
-    attach_forward_bodies (fp, hdr, idx, idxlen, cur, nattach);
+    attach_forward_bodies (fp, hdr, idx, idxlen, cur, nattach, flags);
   }
 }
 
@@ -686,28 +686,40 @@
     return -1;
   }
 
-  if (parent)
+#ifdef USE_NNTP
+  if ((flags & SENDNEWS))
   {
-    if (mutt_fetch_recips (env, curenv, flags) == -1)
-      return -1;
+    /* in case followup set Newsgroups: with Followup-To: if it present */
+    if (!env->newsgroups && curenv &&
+	mutt_strcasecmp (curenv->followup_to, "poster"))
+      env->newsgroups = safe_strdup (curenv->followup_to);
   }
   else
+#endif
   {
-    for (i = 0; i < idxlen; i++)
+    if (parent)
     {
-      if (idx[i]->content->tagged
-	  && mutt_fetch_recips (env, idx[i]->content->hdr->env, flags) == -1)
+      if (mutt_fetch_recips (env, curenv, flags) == -1)
 	return -1;
     }
+    else
+    {
+      for (i = 0; i < idxlen; i++)
+      {
+	if (idx[i]->content->tagged
+	    && mutt_fetch_recips (env, idx[i]->content->hdr->env, flags) == -1)
+	  return -1;
+      }
+    }
+
+    if ((flags & SENDLISTREPLY) && !env->to)
+    {
+      mutt_error _("No mailing lists found!");
+      return (-1);
+    }
+
+    mutt_fix_reply_recipients (env);
   }
-  
-  if ((flags & SENDLISTREPLY) && !env->to)
-  {
-    mutt_error _("No mailing lists found!");
-    return (-1);
-  }
-  
-  mutt_fix_reply_recipients (env);
   mutt_make_misc_reply_headers (env, Context, curhdr, curenv);
 
   if (parent)
@@ -768,6 +780,13 @@
   char prefix[SHORT_STRING];
   int rc;
   
+#ifdef USE_NNTP
+  if (flags & SENDNEWS)
+    set_option (OPTNEWSSEND);
+  else
+    unset_option (OPTNEWSSEND);
+#endif
+
   if (check_all_msg (idx, idxlen, cur, 0) == -1)
   {
     nattach = count_tagged (idx, idxlen);
diff -uNr mutt-1.4.orig/rfc1524.c mutt-1.4/rfc1524.c
--- mutt-1.4.orig/rfc1524.c	Tue May 15 09:23:49 2001
+++ mutt-1.4/rfc1524.c	Sun Nov  3 21:57:20 2002
@@ -563,13 +563,13 @@
  * safe_fopen().
  */
 
-int mutt_rename_file (char *oldfile, char *newfile)
+int _mutt_rename_file (char *oldfile, char *newfile, int overwrite)
 {
   FILE *ofp, *nfp;
 
   if (access (oldfile, F_OK) != 0)
     return 1;
-  if (access (newfile, F_OK) == 0)
+  if (!overwrite && access (newfile, F_OK) == 0)
     return 2;
   if ((ofp = fopen (oldfile,"r")) == NULL)
     return 3;
@@ -584,3 +584,8 @@
   mutt_unlink (oldfile);
   return 0;
 }
+
+int mutt_rename_file (char *oldfile, char *newfile)
+{
+  return _mutt_rename_file (oldfile, newfile, 0);
+}
diff -uNr mutt-1.4.orig/rfc1524.h mutt-1.4/rfc1524.h
--- mutt-1.4.orig/rfc1524.h	Fri Mar  3 11:10:13 2000
+++ mutt-1.4/rfc1524.h	Sun Nov  3 21:57:20 2002
@@ -40,5 +40,6 @@
 int rfc1524_expand_filename (char *, char *, char *, size_t);
 int rfc1524_mailcap_lookup (BODY *, char *, rfc1524_entry *, int);
 int mutt_rename_file (char *, char *);
+int _mutt_rename_file (char *, char *, int);
 
 #endif /* _RFC1524_H */
diff -uNr mutt-1.4.orig/send.c mutt-1.4/send.c
--- mutt-1.4.orig/send.c	Wed Jan 30 23:50:40 2002
+++ mutt-1.4/send.c	Sun Nov  3 21:57:20 2002
@@ -41,6 +41,10 @@
 #include "pgp.h"
 #endif
 
+#ifdef USE_NNTP
+#include "nntp.h"
+#endif
+
 #ifdef MIXMASTER
 #include "remailer.h"
 #endif
@@ -196,17 +200,51 @@
   return 0;
 }
 
-static int edit_envelope (ENVELOPE *en)
+static int edit_envelope (ENVELOPE *en, int flags)
 {
   char buf[HUGE_STRING];
   LIST *uh = UserHeader;
 
-  if (edit_address (&en->to, "To: ") == -1 || en->to == NULL)
-    return (-1);
-  if (option (OPTASKCC) && edit_address (&en->cc, "Cc: ") == -1)
-    return (-1);
-  if (option (OPTASKBCC) && edit_address (&en->bcc, "Bcc: ") == -1)
-    return (-1);
+#ifdef USE_NNTP
+  if (option (OPTNEWSSEND))
+  {
+    if (en->newsgroups)
+      strfcpy (buf, en->newsgroups, sizeof (buf));
+    else
+      buf[0] = 0;
+    if (mutt_get_field ("Newsgroups: ", buf, sizeof (buf), 0) != 0)
+      return (-1);
+    safe_free ((void **)&en->newsgroups);
+    en->newsgroups = safe_strdup (buf);
+
+    if (en->followup_to)
+      strfcpy (buf, en->followup_to, sizeof (buf));
+    else
+      buf[0] = 0;
+    if (option (OPTASKFOLLOWUP) && mutt_get_field ("Followup-To: ", buf, sizeof (buf), 0) != 0)
+      return (-1);
+    safe_free ((void **)&en->followup_to);
+    en->followup_to = safe_strdup (buf);
+
+    if (en->x_comment_to)
+      strfcpy (buf, en->x_comment_to, sizeof (buf));
+    else
+      buf[0] = 0;
+    if (option (OPTXCOMMENTTO) && option (OPTASKXCOMMENTTO) && mutt_get_field ("X-Comment-To: ", buf, sizeof (buf), 0) != 0)
+      return (-1);
+    safe_free ((void **)&en->x_comment_to);
+    en->x_comment_to = safe_strdup (buf);
+  }
+  else
+#endif
+  {
+    if (edit_address (&en->to, "To: ") == -1 || en->to == NULL)
+      return (-1);
+    if (option (OPTASKCC) && edit_address (&en->cc, "Cc: ") == -1)
+      return (-1);
+    if (option (OPTASKBCC) && edit_address (&en->bcc, "Bcc: ") == -1)
+      return (-1);
+  }
 
   if (en->subject)
   {
@@ -242,6 +280,14 @@
   return 0;
 }
 
+#ifdef USE_NNTP
+char *nntp_get_header (const char *s)
+{
+  SKIPWS (s);
+  return safe_strdup (s);
+}
+#endif
+
 static void process_user_recips (ENVELOPE *env)
 {
   LIST *uh = UserHeader;
@@ -254,6 +300,14 @@
       env->cc = rfc822_parse_adrlist (env->cc, uh->data + 3);
     else if (ascii_strncasecmp ("bcc:", uh->data, 4) == 0)
       env->bcc = rfc822_parse_adrlist (env->bcc, uh->data + 4);
+#ifdef USE_NNTP
+    else if (ascii_strncasecmp ("newsgroups:", uh->data, 11) == 0)
+      env->newsgroups = nntp_get_header (uh->data + 11);
+    else if (ascii_strncasecmp ("followup-to:", uh->data, 12) == 0)
+      env->followup_to = nntp_get_header (uh->data + 12);
+    else if (ascii_strncasecmp ("x-comment-to:", uh->data, 13) == 0)
+      env->x_comment_to = nntp_get_header (uh->data + 13);
+#endif
   }
 }
 
@@ -284,6 +338,12 @@
     else if (ascii_strncasecmp ("to:", uh->data, 3) != 0 &&
 	     ascii_strncasecmp ("cc:", uh->data, 3) != 0 &&
 	     ascii_strncasecmp ("bcc:", uh->data, 4) != 0 &&
+#ifdef USE_NNTP
+	     ascii_strncasecmp ("newsgroups:", uh->data, 11) != 0 &&
+	     ascii_strncasecmp ("followup-to:", uh->data, 12) != 0 &&
+	     ascii_strncasecmp ("x-comment-to:", uh->data, 13) != 0 &&
+#endif
+	     ascii_strncasecmp ("supersedes:", uh->data, 11) != 0 &&
 	     ascii_strncasecmp ("subject:", uh->data, 8) != 0)
     {
       if (last)
@@ -597,6 +657,10 @@
   else
     env->subject = safe_strdup ("Re: your mail");
   
+#ifdef USE_NNTP
+  if (option (OPTNEWSSEND) && option (OPTXCOMMENTTO) && curenv->from)
+    env->x_comment_to = safe_strdup (mutt_get_name (curenv->from));
+#endif
 }
 
 void mutt_add_to_reference_headers (ENVELOPE *env, ENVELOPE *curenv, LIST ***pp, LIST ***qq)
@@ -679,27 +743,39 @@
 
   if (flags & SENDREPLY)
   {
-    if (tag)
+#ifdef USE_NNTP
+    if ((flags & SENDNEWS))
     {
-      HEADER *h;
-
-      for (i = 0; i < ctx->vcount; i++)
+      /* in case followup set Newsgroups: with Followup-To: if it present */
+      if (!env->newsgroups && curenv &&
+	  mutt_strcasecmp (curenv->followup_to, "poster"))
+	env->newsgroups = safe_strdup (curenv->followup_to);
+    }
+    else
+#endif
+    {
+      if (tag)
       {
-	h = ctx->hdrs[ctx->v2r[i]];
-	if (h->tagged && mutt_fetch_recips (env, h->env, flags) == -1)
+	HEADER *h;
+
+	for (i = 0; i < ctx->vcount; i++)
+	{
+	  h = ctx->hdrs[ctx->v2r[i]];
+	  if (h->tagged && mutt_fetch_recips (env, h->env, flags) == -1)
+	    return -1;
+	}
+	}
+	else if (mutt_fetch_recips (env, curenv, flags) == -1)
 	  return -1;
+
+	if ((flags & SENDLISTREPLY) && !env->to)
+	{
+	  mutt_error _("No mailing lists found!");
+	return (-1);
       }
-    }
-    else if (mutt_fetch_recips (env, curenv, flags) == -1)
-      return -1;
 
-    if ((flags & SENDLISTREPLY) && !env->to)
-    {
-      mutt_error _("No mailing lists found!");
-      return (-1);
+      mutt_fix_reply_recipients (env);
     }
-
-    mutt_fix_reply_recipients (env);
     mutt_make_misc_reply_headers (env, ctx, cur, curenv);
     mutt_make_reference_headers (tag ? NULL : curenv, env, ctx);
   }
@@ -828,7 +904,18 @@
    * it hasn't already been set
    */
 
-  if (option (OPTFOLLOWUPTO) && !e->mail_followup_to)
+  if (!option (OPTFOLLOWUPTO))
+    return;
+#ifdef USE_NNTP
+  if (option (OPTNEWSSEND))
+  {
+    if (!e->followup_to && e->newsgroups && (strrchr (e->newsgroups, ',')))
+      e->followup_to = safe_strdup (e->newsgroups);
+    return;
+  }
+#endif
+
+  if (!e->mail_followup_to)
   {
     if (mutt_is_list_cc (0, e->to, e->cc))
     {
@@ -1084,6 +1171,13 @@
 
   int rv = -1;
   
+#ifdef USE_NNTP
+  if (flags & SENDNEWS)
+    set_option (OPTNEWSSEND);
+  else
+    unset_option (OPTNEWSSEND);
+#endif
+
   if (!flags && !msg && quadoption (OPT_RECALL) != M_NO &&
       mutt_num_postponed (1))
   {
@@ -1115,6 +1209,22 @@
     {
       if ((flags = mutt_get_postponed (ctx, msg, &cur, fcc, sizeof (fcc))) < 0)
 	goto cleanup;
+#ifdef USE_NNTP
+      /*
+       * If postponed message is a news article, it have
+       * a "Newsgroups:" header line, then set appropriate flag.
+       */
+      if (msg->env->newsgroups)
+      {
+	flags |= SENDNEWS;
+	set_option (OPTNEWSSEND);
+      }
+      else
+      {
+	flags &= ~SENDNEWS;
+	unset_option (OPTNEWSSEND);
+      }
+#endif
     }
 
     if (flags & (SENDPOSTPONED|SENDRESEND))
@@ -1195,11 +1305,16 @@
     if (option (OPTHDRS))
       process_user_recips (msg->env);
 
+#ifdef USE_NNTP
+    if ((flags & SENDNEWS) && ctx && ctx->magic == M_NNTP && !msg->env->newsgroups)
+      msg->env->newsgroups = safe_strdup (((NNTP_DATA *)ctx->data)->group);
+#endif
+
     if (! (flags & SENDMAILX) &&
 	! (option (OPTAUTOEDIT) && option (OPTEDITHDRS)) &&
 	! ((flags & SENDREPLY) && option (OPTFASTREPLY)))
     {
-      if (edit_envelope (msg->env) == -1)
+      if (edit_envelope (msg->env, flags) == -1)
 	goto cleanup;
     }
 
@@ -1349,6 +1464,11 @@
     if (i == -1)
     {
       /* abort */
+#ifdef USE_NNTP
+      if (flags & SENDNEWS)
+	mutt_message _("Article not posted.");
+      else
+#endif
       mutt_message _("Mail not sent.");
       goto cleanup;
     }
@@ -1380,6 +1500,9 @@
     }
   }
 
+#ifdef USE_NNTP
+  if (!(flags & SENDNEWS))
+#endif
   if (!msg->env->to && !msg->env->cc && !msg->env->bcc)
   {
     if (! (flags & SENDBATCH))
@@ -1402,6 +1525,19 @@
       mutt_error _("No subject specified.");
     goto main_loop;
   }
+#ifdef USE_NNTP
+  if ((flags & SENDNEWS) && !msg->env->subject)
+  {
+    mutt_error _("No subject specified.");
+    goto main_loop;
+  }
+
+  if ((flags & SENDNEWS) && !msg->env->newsgroups)
+  {
+    mutt_error _("No newsgroup specified.");
+    goto main_loop;
+  }
+#endif
 
   if (msg->content->next)
     msg->content = mutt_make_multipart (msg->content);
@@ -1588,7 +1724,12 @@
     }
   }
   else if (!option (OPTNOCURSES) && ! (flags & SENDMAILX))
-    mutt_message (i == 0 ? _("Mail sent.") : _("Sending in background."));
+    mutt_message (i != 0 ? _("Sending in background.") :
+#ifdef USE_NNTP
+		  (flags & SENDNEWS) ? _("Article posted.") : _("Mail sent."));
+#else
+		  _("Mail sent."));
+#endif
 
 #ifdef HAVE_PGP
   if (msg->pgp & PGPENCRYPT)
diff -uNr mutt-1.4.orig/sendlib.c mutt-1.4/sendlib.c
--- mutt-1.4.orig/sendlib.c	Sat Apr 20 09:25:49 2002
+++ mutt-1.4/sendlib.c	Sun Nov  3 21:57:20 2002
@@ -40,6 +40,10 @@
 #include <sys/wait.h>
 #include <fcntl.h>
 
+#ifdef USE_NNTP
+#include <nntp.h>
+#endif
+
 #ifdef HAVE_SYSEXITS_H
 #include <sysexits.h>
 #else /* Make sure EX_OK is defined <philiph@pobox.com> */
@@ -1537,7 +1541,7 @@
 /* need to write the list in reverse because they are stored in reverse order
  * when parsed to speed up threading
  */
-static void write_references (LIST *r, FILE *f)
+void mutt_write_references (LIST *r, FILE *f)
 {
   LIST **ref = NULL;
   int refcnt = 0, refmax = 0;
@@ -1579,6 +1583,9 @@
   char *p;
   LIST *tmp = env->userhdrs;
   
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+#endif
   if (mode == 0 && !privacy)
     fputs (mutt_make_date (buffer, sizeof(buffer)), fp);
 
@@ -1598,6 +1605,9 @@
     mutt_write_address_list (env->to, fp, 4);
   }
   else if (mode > 0)
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+#endif
     fputs ("To: \n", fp);
 
   if (env->cc)
@@ -1606,6 +1616,9 @@
     mutt_write_address_list (env->cc, fp, 4);
   }
   else if (mode > 0)
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+#endif
     fputs ("Cc: \n", fp);
 
   if (env->bcc)
@@ -1617,8 +1630,28 @@
     }
   }
   else if (mode > 0)
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+#endif
     fputs ("Bcc: \n", fp);
 
+#ifdef USE_NNTP
+  if (env->newsgroups)
+    fprintf (fp, "Newsgroups: %s\n", env->newsgroups);
+  else if (mode == 1 && option (OPTNEWSSEND))
+    fputs ("Newsgroups: \n", fp);
+
+  if (env->followup_to)
+    fprintf (fp, "Followup-To: %s\n", env->followup_to);
+  else if (mode == 1 && option (OPTNEWSSEND))
+    fputs ("Followup-To: \n", fp);
+
+  if (env->x_comment_to)
+    fprintf (fp, "X-Comment-To: %s\n", env->x_comment_to);
+  else if (mode == 1 && option (OPTNEWSSEND) && option (OPTXCOMMENTTO))
+    fputs ("X-Comment-To: \n", fp);
+#endif
+
   if (env->subject)
     fprintf (fp, "Subject: %s\n", env->subject);
   else if (mode == 1)
@@ -1637,6 +1670,9 @@
     fputs ("Reply-To: \n", fp);
 
   if (env->mail_followup_to)
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+#endif
   {
     fputs ("Mail-Followup-To: ", fp);
     mutt_write_address_list (env->mail_followup_to, fp, 18);
@@ -1647,7 +1683,7 @@
     if (env->references)
     {
       fputs ("References:", fp);
-      write_references (env->references, fp);
+      mutt_write_references (env->references, fp);
       fputc('\n', fp);
     }
 
@@ -1659,7 +1695,7 @@
   if (env->in_reply_to)
   {
     fputs ("In-Reply-To:", fp);
-    write_references (env->in_reply_to, fp);
+    mutt_write_references (env->in_reply_to, fp);
     fputc ('\n', fp);
   }
   
@@ -1967,11 +2003,30 @@
 		 const char *msg, /* file containing message */
 		 int eightbit) /* message contains 8bit chars */
 {
-  char *ps = NULL, *path = NULL, *s = safe_strdup (Sendmail), *childout = NULL;
+  char *ps = NULL, *path = NULL, *s = NULL, *childout = NULL;
   char **args = NULL;
   size_t argslen = 0, argsmax = 0;
   int i;
 
+#ifdef USE_NNTP
+  if (option (OPTNEWSSEND))
+  {
+    char cmd[LONG_STRING];
+
+    mutt_FormatString (cmd, sizeof (cmd), NONULL (Inews), nntp_format_str, 0, 0);
+    if (!*cmd)
+    {
+      i = nntp_post (msg);
+      unlink (msg);
+      return i;
+    }
+
+    s = safe_strdup (cmd);
+  }
+  else
+#endif
+    s = safe_strdup (Sendmail);
+
   ps = s;
   i = 0;
   while ((ps = strtok (ps, " ")))
@@ -1995,6 +2050,10 @@
     i++;
   }
 
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND))
+  {
+#endif
   if (eightbit && option (OPTUSE8BITMIME))
     args = add_option (args, &argslen, &argsmax, "-B8BITMIME");
 
@@ -2017,6 +2076,9 @@
   args = add_args (args, &argslen, &argsmax, to);
   args = add_args (args, &argslen, &argsmax, cc);
   args = add_args (args, &argslen, &argsmax, bcc);
+#ifdef USE_NNTP
+  }
+#endif
 
   if (argslen == argsmax)
     safe_realloc ((void **) &args, sizeof (char *) * (++argsmax));
@@ -2148,6 +2210,9 @@
   rfc2047_encode_adrlist (env->reply_to, "Reply-To");
 
   if (env->subject)
+#ifdef USE_NNTP
+  if (!option (OPTNEWSSEND) || option (OPTMIMESUBJECT))
+#endif
   {
     rfc2047_encode_string (&env->subject);
   }
@@ -2234,6 +2299,10 @@
   
   rfc822_write_address (resent_from, sizeof (resent_from), from);
 
+#ifdef USE_NNTP
+  unset_option (OPTNEWSSEND);
+#endif
+
   _mutt_bounce_message (fp, h, to, resent_from, from);
 
   rfc822_free_address (&from);
diff -uNr mutt-1.4.orig/sort.c mutt-1.4/sort.c
--- mutt-1.4.orig/sort.c	Thu Dec 13 13:10:59 2001
+++ mutt-1.4/sort.c	Sun Nov  3 21:57:20 2002
@@ -144,6 +144,15 @@
   HEADER **ha = (HEADER **) a;
   HEADER **hb = (HEADER **) b;
 
+#ifdef USE_NNTP
+  if ((*ha)->article_num && (*hb)->article_num)
+  {
+    int result = (*ha)->article_num - (*hb)->article_num;
+    AUXSORT(result,a,b);
+    return (SORTCODE (result));
+  }
+  else
+#endif
   /* no need to auxsort because you will never have equality here */
   return (SORTCODE ((*ha)->index - (*hb)->index));
 }
diff -uNr mutt-1.4.orig/url.c mutt-1.4/url.c
--- mutt-1.4.orig/url.c	Mon Oct 29 12:53:45 2001
+++ mutt-1.4/url.c	Sun Nov  3 21:57:20 2002
@@ -35,6 +35,8 @@
   { "imaps", 	U_IMAPS },
   { "pop",  	U_POP  },
   { "pops", 	U_POPS  },
+  { "nntp",	U_NNTP },
+  { "nntps",	U_NNTPS },
   { "mailto",	U_MAILTO },
   { NULL,	U_UNKNOWN}
 };
diff -uNr mutt-1.4.orig/url.h mutt-1.4/url.h
--- mutt-1.4.orig/url.h	Tue Sep  4 11:30:04 2001
+++ mutt-1.4/url.h	Sun Nov  3 21:57:20 2002
@@ -8,6 +8,8 @@
   U_POPS,
   U_IMAP,
   U_IMAPS,
+  U_NNTP,
+  U_NNTPS,
   U_MAILTO,
   U_UNKNOWN
 }
